/*! For license information please see main.61634e40.js.LICENSE.txt */
(()=>{var e={383:e=>{const t=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=e=>{let{target:{error:{code:t}}}=e;n(Error("File could not be read! Code=".concat(t)))},r.readAsArrayBuffer(e)}),n=async e=>{let r=e;if("undefined"===typeof e)return"undefined";if("string"===typeof e)if(/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e))r=atob(e.split(",")[1]).split("").map(e=>e.charCodeAt(0));else{const t=await fetch(e);r=await t.arrayBuffer()}else if("undefined"!==typeof HTMLElement&&e instanceof HTMLElement)"IMG"===e.tagName&&(r=await n(e.src)),"VIDEO"===e.tagName&&(r=await n(e.poster)),"CANVAS"===e.tagName&&await new Promise(n=>{e.toBlob(async e=>{r=await t(e),n()})});else if("undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas){const n=await e.convertToBlob();r=await t(n)}else(e instanceof File||e instanceof Blob)&&(r=await t(e));return new Uint8Array(r)};e.exports=n},579:(e,t,n)=>{"use strict";e.exports=n(1153)},1153:(e,t,n)=>{"use strict";var r=n(5043),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},1597:(e,t,n)=>{var r=n(2897).default;const a=n(6125).rE,i=n(5147);e.exports=r(r({},i),{},{workerPath:"https://cdn.jsdelivr.net/npm/tesseract.js@v".concat(a,"/dist/worker.min.js")})},1847:(e,t,n)=>{var r=n(4893);e.exports=function(e,t){if(null==e)return{};var n,a,i=r(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},1942:e=>{e.exports=(e,t)=>{e.onmessage=e=>{let{data:n}=e;t(n)}}},2034:(e,t,n)=>{const r=n(1597),a=n(5095),i=n(4871),s=n(1942),o=n(7870),l=n(383);e.exports={defaultOptions:r,spawnWorker:a,terminateWorker:i,onMessage:s,send:o,loadImage:l}},2284:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},2730:(e,t,n)=>{"use strict";var r=n(5043),a=n(8853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),A=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function f(e,t,n,r,a,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=m.hasOwnProperty(t)?m[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!A.call(p,e)||!A.call(h,e)&&(d.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,y);m[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,y);m[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,y);m[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,v=Symbol.for("react.element"),x=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),I=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var U,O=Object.assign;function M(e){if(void 0===U)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var P=!1;function Q(e,t){if(!e||P)return"";P=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=r.stack.split("\n"),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(1!==s||1!==o)do{if(s--,0>--o||a[s]!==i[o]){var l="\n"+a[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{P=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function j(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=Q(e.type,!1);case 11:return e=Q(e.type.render,!1);case 1:return e=Q(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case x:return"Portal";case B:return"Profiler";case k:return"StrictMode";case F:return"Suspense";case E:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){Y(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ie(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,Ae=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(he).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ge=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function ve(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Ce=null,ke=null;function Be(e){if(e=ba(e)){if("function"!==typeof xe)throw Error(i(280));var t=e.stateNode;t&&(t=va(t),xe(e.stateNode,e.type,t))}}function Se(e){Ce?ke?ke.push(e):ke=[e]:Ce=e}function Ie(){if(Ce){var e=Ce,t=ke;if(ke=Ce=null,Be(e),t)for(e=0;e<t.length;e++)Be(t[e])}}function Ne(e,t){return e(t)}function Fe(){}var Ee=!1;function _e(e,t,n){if(Ee)return e(t,n);Ee=!0;try{return Ne(e,t,n)}finally{Ee=!1,(null!==Ce||null!==ke)&&(Fe(),Ie())}}function Te(e,t){var n=e.stateNode;if(null===n)return null;var r=va(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Le=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Le=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Le=!1}function Re(e,t,n,r,a,i,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ue=!1,Oe=null,Me=!1,Pe=null,Qe={onError:function(e){Ue=!0,Oe=e}};function je(e,t,n,r,a,i,s,o,l){Ue=!1,Oe=null,Re.apply(Qe,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(He(e)!==e)throw Error(i(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(r=a.return)){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return We(a),e;if(s===r)return We(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=a.unstable_scheduleCallback,qe=a.unstable_cancelCallback,Xe=a.unstable_shouldYield,Je=a.unstable_requestPaint,Ye=a.unstable_now,Ze=a.unstable_getCurrentPriorityLevel,$e=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function At(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~a;0!==o?r=At(o):0!==(i&=s)&&(r=At(i))}else 0!==(s=n&~a)?r=At(s):0!==i&&(r=At(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-st(t)),r|=e[n],t&=~a;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var vt,xt,Ct,kt,Bt,St=!1,It=[],Nt=null,Ft=null,Et=null,_t=new Map,Tt=new Map,Lt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Ft=null;break;case"mouseover":case"mouseout":Et=null;break;case"pointerover":case"pointerout":_t.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Ut(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ot(e){var t=ya(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Bt(e.priority,function(){Ct(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Pt(e,t,n){Mt(e)&&n.delete(t)}function Qt(){St=!1,null!==Nt&&Mt(Nt)&&(Nt=null),null!==Ft&&Mt(Ft)&&(Ft=null),null!==Et&&Mt(Et)&&(Et=null),_t.forEach(Pt),Tt.forEach(Pt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Qt)))}function Ht(e){function t(t){return jt(t,e)}if(0<It.length){jt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Nt&&jt(Nt,e),null!==Ft&&jt(Ft,e),null!==Et&&jt(Et,e),_t.forEach(t),Tt.forEach(t),n=0;n<Lt.length;n++)(r=Lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Lt.shift()}var zt=w.ReactCurrentBatchConfig,Wt=!0;function Vt(e,t,n,r){var a=bt,i=zt.transition;zt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=a,zt.transition=i}}function Gt(e,t,n,r){var a=bt,i=zt.transition;zt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=a,zt.transition=i}}function Kt(e,t,n,r){if(Wt){var a=Xt(e,t,n,r);if(null===a)Wr(e,t,r,qt,n),Rt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Nt=Ut(Nt,e,t,n,r,a),!0;case"dragenter":return Ft=Ut(Ft,e,t,n,r,a),!0;case"mouseover":return Et=Ut(Et,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return _t.set(i,Ut(_t.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Tt.set(i,Ut(Tt.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&vt(i),null===(i=Xt(e,t,n,r))&&Wr(e,t,r,qt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var qt=null;function Xt(e,t,n,r){if(qt=null,null!==(e=ya(e=ve(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,a="value"in Yt?Yt.value:Yt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===a[i-t];t++);return $t=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),An=O({},cn,{view:0,detail:0}),dn=an(An),hn=O({},An,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=an(hn),fn=an(O({},hn,{dataTransfer:0})),mn=an(O({},An,{relatedTarget:0})),gn=an(O({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=O({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),wn=an(O({},cn,{data:0})),vn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function Bn(){return kn}var Sn=O({},An,{key:function(e){if(e.key){var t=vn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(Sn),Nn=an(O({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Fn=an(O({},An,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bn})),En=an(O({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),_n=O({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tn=an(_n),Ln=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var Un=u&&"TextEvent"in window&&!Rn,On=u&&(!Dn||Rn&&8<Rn&&11>=Rn),Mn=String.fromCharCode(32),Pn=!1;function Qn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Vn(e,t,n,r){Se(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function qn(e){Mr(e,0)}function Xn(e){if(K(wa(e)))return e}function Jn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Zn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Yn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Kn=Gn=null)}function nr(e){if("value"===e.propertyName&&Xn(Kn)){var t=[];Vn(t,Kn,e,ve(e)),_e(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Kn)}function ir(e,t){if("click"===e)return Xn(t)}function sr(e,t){if("input"===e||"change"===e)return Xn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!A.call(t,a)||!or(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function Ar(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Ar(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ar(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=ur(n,i);var s=ur(n,r);a&&s&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==q(r)||("selectionStart"in(r=mr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Gr(gr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function vr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:vr("Animation","AnimationEnd"),animationiteration:vr("Animation","AnimationIteration"),animationstart:vr("Animation","AnimationStart"),transitionend:vr("Transition","TransitionEnd")},Cr={},kr={};function Br(e){if(Cr[e])return Cr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Cr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Br("animationend"),Ir=Br("animationiteration"),Nr=Br("animationstart"),Fr=Br("transitionend"),Er=new Map,_r="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(e,t){Er.set(e,t),l(t,[e])}for(var Lr=0;Lr<_r.length;Lr++){var Dr=_r[Lr];Tr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Tr(Sr,"onAnimationEnd"),Tr(Ir,"onAnimationIteration"),Tr(Nr,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(Fr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ur=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,s,o,l,c){if(je.apply(this,arguments),Ue){if(!Ue)throw Error(i(198));var u=Oe;Ue=!1,Oe=null,Me||(Me=!0,Pe=u)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;Or(a,o,c),i=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;Or(a,o,c),i=l}}}if(Me)throw e=Pe,Me=!1,Pe=null,e}function Pr(e,t){var n=t[fa];void 0===n&&(n=t[fa]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Qr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[jr]){e[jr]=!0,s.forEach(function(t){"selectionchange"!==t&&(Ur.has(t)||Qr(t,!1,e),Qr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Qr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Jt(t)){case 1:var a=Vt;break;case 4:a=Gt;break;default:a=Kt}n=a.bind(null,t,n,e),a=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;s=s.return}for(;null!==o;){if(null===(s=ya(o)))return;if(5===(l=s.tag)||6===l){r=i=s;continue e}o=o.parentNode}}r=r.return}_e(function(){var r=i,a=ve(n),s=[];e:{var o=Er.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Fn;break;case Sr:case Ir:case Nr:l=gn;break;case Fr:l=En;break;case"scroll":l=dn;break;case"wheel":l=Tn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var u=0!==(4&t),A=!u&&"scroll"===e,d=u?null!==o?o+"Capture":null:o;u=[];for(var h,p=r;null!==p;){var f=(h=p).stateNode;if(5===h.tag&&null!==f&&(h=f,null!==d&&(null!=(f=Te(p,d))&&u.push(Vr(p,f,h)))),A)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,a),s.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[pa])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(A=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,f="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nn,f="onPointerLeave",d="onPointerEnter",p="pointer"),A=null==l?o:wa(l),h=null==c?o:wa(c),(o=new u(f,p+"leave",l,n,a)).target=A,o.relatedTarget=h,f=null,ya(a)===r&&((u=new u(d,p+"enter",c,n,a)).target=h,u.relatedTarget=A,f=u),A=f,l&&c)e:{for(d=c,p=0,h=u=l;h;h=Kr(h))p++;for(h=0,f=d;f;f=Kr(f))h++;for(;0<p-h;)u=Kr(u),p--;for(;0<h-p;)d=Kr(d),h--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Kr(u),d=Kr(d)}u=null}else u=null;null!==l&&qr(s,o,l,u,!1),null!==c&&null!==A&&qr(s,A,c,u,!0)}if("select"===(l=(o=r?wa(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Jn;else if(Wn(o))if(Yn)m=sr;else{m=ar;var g=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=ir);switch(m&&(m=m(e,r))?Vn(s,m,n,a):(g&&g(e,o,r),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=r?wa(r):window,e){case"focusin":(Wn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(s,n,a);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":wr(s,n,a)}var y;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?Qn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(On&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(y=en()):(Zt="value"in(Yt=a)?Yt.value:Yt.textContent,Hn=!0)),0<(g=Gr(r,b)).length&&(b=new wn(b,e,null,n,a),s.push({event:b,listeners:g}),y?b.data=y:null!==(y=jn(n))&&(b.data=y))),(y=Un?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Pn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Pn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Dn&&Qn(e,t)?(e=en(),$t=Zt=Yt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(a=new wn("onBeforeInput","beforeinput",null,n,a),s.push({event:a,listeners:r}),a.data=y))}Mr(s,t)})}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Te(e,n))&&r.unshift(Vr(e,i,a)),null!=(i=Te(e,t))&&r.push(Vr(e,i,a))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,a){for(var i=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Te(n,i))&&s.unshift(Vr(n,l,o)):a||null!=(l=Te(n,i))&&s.push(Vr(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Xr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Jr,"")}function Zr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(i(425))}function $r(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,sa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(oa)}:ra;function oa(e){setTimeout(function(){throw e})}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Ht(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Ht(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Aa=Math.random().toString(36).slice(2),da="__reactFiber$"+Aa,ha="__reactProps$"+Aa,pa="__reactContainer$"+Aa,fa="__reactEvents$"+Aa,ma="__reactListeners$"+Aa,ga="__reactHandles$"+Aa;function ya(e){var t=e[da];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[da]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[da])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[da]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function va(e){return e[ha]||null}var xa=[],Ca=-1;function ka(e){return{current:e}}function Ba(e){0>Ca||(e.current=xa[Ca],xa[Ca]=null,Ca--)}function Sa(e,t){Ca++,xa[Ca]=e.current,e.current=t}var Ia={},Na=ka(Ia),Fa=ka(!1),Ea=Ia;function _a(e,t){var n=e.type.contextTypes;if(!n)return Ia;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ta(e){return null!==(e=e.childContextTypes)&&void 0!==e}function La(){Ba(Fa),Ba(Na)}function Da(e,t,n){if(Na.current!==Ia)throw Error(i(168));Sa(Na,t),Sa(Fa,n)}function Ra(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,z(e)||"Unknown",a));return O({},n,r)}function Ua(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ia,Ea=Na.current,Sa(Na,e),Sa(Fa,Fa.current),!0}function Oa(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ra(e,t,Ea),r.__reactInternalMemoizedMergedChildContext=e,Ba(Fa),Ba(Na),Sa(Na,e)):Ba(Fa),Sa(Fa,n)}var Ma=null,Pa=!1,Qa=!1;function ja(e){null===Ma?Ma=[e]:Ma.push(e)}function Ha(){if(!Qa&&null!==Ma){Qa=!0;var e=0,t=bt;try{var n=Ma;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ma=null,Pa=!1}catch(a){throw null!==Ma&&(Ma=Ma.slice(e+1)),Ke($e,Ha),a}finally{bt=t,Qa=!1}}return null}var za=[],Wa=0,Va=null,Ga=0,Ka=[],qa=0,Xa=null,Ja=1,Ya="";function Za(e,t){za[Wa++]=Ga,za[Wa++]=Va,Va=e,Ga=t}function $a(e,t,n){Ka[qa++]=Ja,Ka[qa++]=Ya,Ka[qa++]=Xa,Xa=e;var r=Ja;e=Ya;var a=32-st(r)-1;r&=~(1<<a),n+=1;var i=32-st(t)+a;if(30<i){var s=a-a%5;i=(r&(1<<s)-1).toString(32),r>>=s,a-=s,Ja=1<<32-st(t)+a|n<<a|r,Ya=i+e}else Ja=1<<i|n<<a|r,Ya=e}function ei(e){null!==e.return&&(Za(e,1),$a(e,1,0))}function ti(e){for(;e===Va;)Va=za[--Wa],za[Wa]=null,Ga=za[--Wa],za[Wa]=null;for(;e===Xa;)Xa=Ka[--qa],Ka[qa]=null,Ya=Ka[--qa],Ka[qa]=null,Ja=Ka[--qa],Ka[qa]=null}var ni=null,ri=null,ai=!1,ii=null;function si(e,t){var n=_c(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xa?{id:Ja,overflow:Ya}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=_c(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ai){var t=ri;if(t){var n=t;if(!oi(e,t)){if(li(e))throw Error(i(418));t=ca(n.nextSibling);var r=ni;t&&oi(e,t)?si(r,n):(e.flags=-4097&e.flags|2,ai=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function Ai(e){if(e!==ni)return!1;if(!ai)return ui(e),ai=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw di(),Error(i(418));for(;t;)si(e,t),t=ca(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?ca(e.stateNode.nextSibling):null;return!0}function di(){for(var e=ri;e;)e=ca(e.nextSibling)}function hi(){ri=ni=null,ai=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var fi=w.ReactCurrentBatchConfig;function mi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=a.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function gi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Oc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===C?A(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===T&&yi(i)===t.type)?((r=a(t,n.props)).ref=mi(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=mi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Mc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function A(e,t,n,r,i){return null===t||7!==t.tag?((t=Rc(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Oc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case v:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=mi(e,null,t),n.return=e,n;case x:return(t=Mc(t,e.mode,n)).return=e,t;case T:return d(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Rc(t,e.mode,n,null)).return=e,t;gi(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case v:return n.key===a?c(e,t,n,r):null;case x:return n.key===a?u(e,t,n,r):null;case T:return h(e,t,(a=n._init)(n._payload),r)}if(te(n)||R(n))return null!==a?null:A(e,t,n,r,null);gi(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case v:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case T:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||R(r))return A(t,e=e.get(n)||null,r,a,null);gi(t,r)}return null}function f(a,i,o,l){for(var c=null,u=null,A=i,f=i=0,m=null;null!==A&&f<o.length;f++){A.index>f?(m=A,A=null):m=A.sibling;var g=h(a,A,o[f],l);if(null===g){null===A&&(A=m);break}e&&A&&null===g.alternate&&t(a,A),i=s(g,i,f),null===u?c=g:u.sibling=g,u=g,A=m}if(f===o.length)return n(a,A),ai&&Za(a,f),c;if(null===A){for(;f<o.length;f++)null!==(A=d(a,o[f],l))&&(i=s(A,i,f),null===u?c=A:u.sibling=A,u=A);return ai&&Za(a,f),c}for(A=r(a,A);f<o.length;f++)null!==(m=p(A,a,f,o[f],l))&&(e&&null!==m.alternate&&A.delete(null===m.key?f:m.key),i=s(m,i,f),null===u?c=m:u.sibling=m,u=m);return e&&A.forEach(function(e){return t(a,e)}),ai&&Za(a,f),c}function m(a,o,l,c){var u=R(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var A=u=null,f=o,m=o=0,g=null,y=l.next();null!==f&&!y.done;m++,y=l.next()){f.index>m?(g=f,f=null):g=f.sibling;var b=h(a,f,y.value,c);if(null===b){null===f&&(f=g);break}e&&f&&null===b.alternate&&t(a,f),o=s(b,o,m),null===A?u=b:A.sibling=b,A=b,f=g}if(y.done)return n(a,f),ai&&Za(a,m),u;if(null===f){for(;!y.done;m++,y=l.next())null!==(y=d(a,y.value,c))&&(o=s(y,o,m),null===A?u=y:A.sibling=y,A=y);return ai&&Za(a,m),u}for(f=r(a,f);!y.done;m++,y=l.next())null!==(y=p(f,a,m,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?m:y.key),o=s(y,o,m),null===A?u=y:A.sibling=y,A=y);return e&&f.forEach(function(e){return t(a,e)}),ai&&Za(a,m),u}return function e(r,i,s,l){if("object"===typeof s&&null!==s&&s.type===C&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case v:e:{for(var c=s.key,u=i;null!==u;){if(u.key===c){if((c=s.type)===C){if(7===u.tag){n(r,u.sibling),(i=a(u,s.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===T&&yi(c)===u.type){n(r,u.sibling),(i=a(u,s.props)).ref=mi(r,u,s),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===C?((i=Rc(s.props.children,r.mode,l,s.key)).return=r,r=i):((l=Dc(s.type,s.key,s.props,null,r.mode,l)).ref=mi(r,i,s),l.return=r,r=l)}return o(r);case x:e:{for(u=s.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===s.containerInfo&&i.stateNode.implementation===s.implementation){n(r,i.sibling),(i=a(i,s.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Mc(s,r.mode,l)).return=r,r=i}return o(r);case T:return e(r,i,(u=s._init)(s._payload),l)}if(te(s))return f(r,i,s,l);if(R(s))return m(r,i,s,l);gi(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,s)).return=r,r=i):(n(r,i),(i=Oc(s,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var wi=bi(!0),vi=bi(!1),xi=ka(null),Ci=null,ki=null,Bi=null;function Si(){Bi=ki=Ci=null}function Ii(e){var t=xi.current;Ba(xi),e._currentValue=t}function Ni(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Fi(e,t){Ci=e,Bi=ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Ei(e){var t=e._currentValue;if(Bi!==e)if(e={context:e,memoizedValue:t,next:null},null===ki){if(null===Ci)throw Error(i(308));ki=e,Ci.dependencies={lanes:0,firstContext:e}}else ki=ki.next=e;return t}var _i=null;function Ti(e){null===_i?_i=[e]:_i.push(e)}function Li(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Ti(t)):(n.next=a.next,a.next=n),t.interleaved=n,Di(e,r)}function Di(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ri=!1;function Ui(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Di(e,n)}return null===(a=r.interleaved)?(t.next=t,Ti(r)):(t.next=a.next,a.next=t),r.interleaved=t,Di(e,n)}function Qi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function ji(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hi(e,t,n,r){var a=e.updateQueue;Ri=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?i=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var A=a.baseState;for(s=0,u=c=l=null,o=i;;){var d=o.lane,h=o.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,f=o;switch(d=t,h=n,f.tag){case 1:if("function"===typeof(p=f.payload)){A=p.call(h,A,d);break e}A=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=f.payload)?p.call(h,A,d):p)||void 0===d)break e;A=O({},A,d);break e;case 2:Ri=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=a.effects)?a.effects=[o]:d.push(o))}else h={eventTime:h,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=h,l=A):u=u.next=h,s|=d;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(d=o).next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}if(null===u&&(l=A),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{s|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Ul|=s,e.lanes=s,e.memoizedState=A}}function zi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var Wi={},Vi=ka(Wi),Gi=ka(Wi),Ki=ka(Wi);function qi(e){if(e===Wi)throw Error(i(174));return e}function Xi(e,t){switch(Sa(Ki,t),Sa(Gi,e),Sa(Vi,Wi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ba(Vi),Sa(Vi,t)}function Ji(){Ba(Vi),Ba(Gi),Ba(Ki)}function Yi(e){qi(Ki.current);var t=qi(Vi.current),n=le(t,e.type);t!==n&&(Sa(Gi,e),Sa(Vi,n))}function Zi(e){Gi.current===e&&(Ba(Vi),Ba(Gi))}var $i=ka(0);function es(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ts=[];function ns(){for(var e=0;e<ts.length;e++)ts[e]._workInProgressVersionPrimary=null;ts.length=0}var rs=w.ReactCurrentDispatcher,as=w.ReactCurrentBatchConfig,is=0,ss=null,os=null,ls=null,cs=!1,us=!1,As=0,ds=0;function hs(){throw Error(i(321))}function ps(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function fs(e,t,n,r,a,s){if(is=s,ss=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rs.current=null===e||null===e.memoizedState?Zs:$s,e=n(r,a),us){s=0;do{if(us=!1,As=0,25<=s)throw Error(i(301));s+=1,ls=os=null,t.updateQueue=null,rs.current=eo,e=n(r,a)}while(us)}if(rs.current=Ys,t=null!==os&&null!==os.next,is=0,ls=os=ss=null,cs=!1,t)throw Error(i(300));return e}function ms(){var e=0!==As;return As=0,e}function gs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ls?ss.memoizedState=ls=e:ls=ls.next=e,ls}function ys(){if(null===os){var e=ss.alternate;e=null!==e?e.memoizedState:null}else e=os.next;var t=null===ls?ss.memoizedState:ls.next;if(null!==t)ls=t,os=e;else{if(null===e)throw Error(i(310));e={memoizedState:(os=e).memoizedState,baseState:os.baseState,baseQueue:os.baseQueue,queue:os.queue,next:null},null===ls?ss.memoizedState=ls=e:ls=ls.next=e}return ls}function bs(e,t){return"function"===typeof t?t(e):t}function ws(e){var t=ys(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=os,a=r.baseQueue,s=n.pending;if(null!==s){if(null!==a){var o=a.next;a.next=s.next,s.next=o}r.baseQueue=a=s,n.pending=null}if(null!==a){s=a.next,r=r.baseState;var l=o=null,c=null,u=s;do{var A=u.lane;if((is&A)===A)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:A,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=r):c=c.next=d,ss.lanes|=A,Ul|=A}u=u.next}while(null!==u&&u!==s);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{s=a.lane,ss.lanes|=s,Ul|=s,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function vs(e){var t=ys(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,s=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{s=e(s,o.action),o=o.next}while(o!==a);or(s,t.memoizedState)||(bo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function xs(){}function Cs(e,t){var n=ss,r=ys(),a=t(),s=!or(r.memoizedState,a);if(s&&(r.memoizedState=a,bo=!0),r=r.queue,Rs(Ss.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ls&&1&ls.memoizedState.tag){if(n.flags|=2048,Es(9,Bs.bind(null,n,r,a,t),void 0,null),null===Fl)throw Error(i(349));0!==(30&is)||ks(n,t,a)}return a}function ks(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Bs(e,t,n,r){t.value=n,t.getSnapshot=r,Is(t)&&Ns(e)}function Ss(e,t,n){return n(function(){Is(t)&&Ns(e)})}function Is(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ns(e){var t=Di(e,1);null!==t&&nc(t,e,1,-1)}function Fs(e){var t=gs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},t.queue=e,e=e.dispatch=Ks.bind(null,ss,e),[t.memoizedState,e]}function Es(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function _s(){return ys().memoizedState}function Ts(e,t,n,r){var a=gs();ss.flags|=e,a.memoizedState=Es(1|t,n,void 0,void 0===r?null:r)}function Ls(e,t,n,r){var a=ys();r=void 0===r?null:r;var i=void 0;if(null!==os){var s=os.memoizedState;if(i=s.destroy,null!==r&&ps(r,s.deps))return void(a.memoizedState=Es(t,n,i,r))}ss.flags|=e,a.memoizedState=Es(1|t,n,i,r)}function Ds(e,t){return Ts(8390656,8,e,t)}function Rs(e,t){return Ls(2048,8,e,t)}function Us(e,t){return Ls(4,2,e,t)}function Os(e,t){return Ls(4,4,e,t)}function Ms(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ps(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ls(4,4,Ms.bind(null,t,e),n)}function Qs(){}function js(e,t){var n=ys();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ps(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hs(e,t){var n=ys();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ps(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function zs(e,t,n){return 0===(21&is)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=ft(),ss.lanes|=n,Ul|=n,e.baseState=!0),t)}function Ws(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=as.transition;as.transition={};try{e(!1),t()}finally{bt=n,as.transition=r}}function Vs(){return ys().memoizedState}function Gs(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qs(e))Xs(t,n);else if(null!==(n=Li(e,t,n,r))){nc(n,e,r,ec()),Js(n,t,r)}}function Ks(e,t,n){var r=tc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qs(e))Xs(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=i(s,n);if(a.hasEagerState=!0,a.eagerState=o,or(o,s)){var l=t.interleaved;return null===l?(a.next=a,Ti(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Li(e,t,a,r))&&(nc(n,e,r,a=ec()),Js(n,t,r))}}function qs(e){var t=e.alternate;return e===ss||null!==t&&t===ss}function Xs(e,t){us=cs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Js(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ys={readContext:Ei,useCallback:hs,useContext:hs,useEffect:hs,useImperativeHandle:hs,useInsertionEffect:hs,useLayoutEffect:hs,useMemo:hs,useReducer:hs,useRef:hs,useState:hs,useDebugValue:hs,useDeferredValue:hs,useTransition:hs,useMutableSource:hs,useSyncExternalStore:hs,useId:hs,unstable_isNewReconciler:!1},Zs={readContext:Ei,useCallback:function(e,t){return gs().memoizedState=[e,void 0===t?null:t],e},useContext:Ei,useEffect:Ds,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ts(4194308,4,Ms.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ts(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ts(4,2,e,t)},useMemo:function(e,t){var n=gs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=gs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gs.bind(null,ss,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},gs().memoizedState=e},useState:Fs,useDebugValue:Qs,useDeferredValue:function(e){return gs().memoizedState=e},useTransition:function(){var e=Fs(!1),t=e[0];return e=Ws.bind(null,e[1]),gs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ss,a=gs();if(ai){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Fl)throw Error(i(349));0!==(30&is)||ks(r,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,Ds(Ss.bind(null,r,s,e),[e]),r.flags|=2048,Es(9,Bs.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=gs(),t=Fl.identifierPrefix;if(ai){var n=Ya;t=":"+t+"R"+(n=(Ja&~(1<<32-st(Ja)-1)).toString(32)+n),0<(n=As++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ds++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$s={readContext:Ei,useCallback:js,useContext:Ei,useEffect:Rs,useImperativeHandle:Ps,useInsertionEffect:Us,useLayoutEffect:Os,useMemo:Hs,useReducer:ws,useRef:_s,useState:function(){return ws(bs)},useDebugValue:Qs,useDeferredValue:function(e){return zs(ys(),os.memoizedState,e)},useTransition:function(){return[ws(bs)[0],ys().memoizedState]},useMutableSource:xs,useSyncExternalStore:Cs,useId:Vs,unstable_isNewReconciler:!1},eo={readContext:Ei,useCallback:js,useContext:Ei,useEffect:Rs,useImperativeHandle:Ps,useInsertionEffect:Us,useLayoutEffect:Os,useMemo:Hs,useReducer:vs,useRef:_s,useState:function(){return vs(bs)},useDebugValue:Qs,useDeferredValue:function(e){var t=ys();return null===os?t.memoizedState=e:zs(t,os.memoizedState,e)},useTransition:function(){return[vs(bs)[0],ys().memoizedState]},useMutableSource:xs,useSyncExternalStore:Cs,useId:Vs,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),i=Mi(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Pi(e,i,a))&&(nc(t,e,a,r),Qi(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),a=tc(e),i=Mi(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Pi(e,i,a))&&(nc(t,e,a,r),Qi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),a=Mi(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Pi(e,a,r))&&(nc(t,e,r,n),Qi(t,e,r))}};function ao(e,t,n,r,a,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,i))}function io(e,t,n){var r=!1,a=Ia,i=t.contextType;return"object"===typeof i&&null!==i?i=Ei(i):(a=Ta(t)?Ea:Na.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?_a(e,a):Ia),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function so(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Ui(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Ei(i):(i=Ta(t)?Ea:Na.current,a.context=_a(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(no(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ro.enqueueReplaceState(a,a.state,null),Hi(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ao="function"===typeof WeakMap?WeakMap:Map;function ho(e,t,n){(n=Mi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Vl=r),uo(0,t)},n}function po(e,t,n){(n=Mi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){uo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Ao;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Bc.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Mi(-1,1)).tag=2,Pi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var yo=w.ReactCurrentOwner,bo=!1;function wo(e,t,n,r){t.child=null===e?vi(t,null,n,r):wi(t,e.child,n,r)}function vo(e,t,n,r,a){n=n.render;var i=t.ref;return Fi(t,a),r=fs(e,t,n,r,i,a),n=ms(),null===e||bo?(ai&&n&&ei(t),t.flags|=1,wo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wo(e,t,a))}function xo(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Tc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Co(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var s=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Wo(e,t,a)}return t.flags|=1,(e=Lc(i,r)).ref=t.ref,e.return=t,t.child=e}function Co(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,Wo(e,t,a);0!==(131072&e.flags)&&(bo=!0)}}return So(e,t,n,r,a)}function ko(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sa(Ll,Tl),Tl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sa(Ll,Tl),Tl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Sa(Ll,Tl),Tl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Sa(Ll,Tl),Tl|=r;return wo(e,t,a,n),t.child}function Bo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,n,r,a){var i=Ta(n)?Ea:Na.current;return i=_a(t,i),Fi(t,a),n=fs(e,t,n,r,i,a),r=ms(),null===e||bo?(ai&&r&&ei(t),t.flags|=1,wo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Wo(e,t,a))}function Io(e,t,n,r,a){if(Ta(n)){var i=!0;Ua(t)}else i=!1;if(Fi(t,a),null===t.stateNode)zo(e,t),io(t,n,r),oo(t,n,r,a),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ei(c):c=_a(t,c=Ta(n)?Ea:Na.current);var u=n.getDerivedStateFromProps,A="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;A||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||l!==c)&&so(t,s,r,c),Ri=!1;var d=t.memoizedState;s.state=d,Hi(t,r,s,a),l=t.memoizedState,o!==r||d!==l||Fa.current||Ri?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Ri||ao(t,n,o,r,d,l,c))?(A||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Oi(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),s.props=c,A=t.pendingProps,d=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ei(l):l=_a(t,l=Ta(n)?Ea:Na.current);var h=n.getDerivedStateFromProps;(u="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==A||d!==l)&&so(t,s,r,l),Ri=!1,d=t.memoizedState,s.state=d,Hi(t,r,s,a);var p=t.memoizedState;o!==A||d!==p||Fa.current||Ri?("function"===typeof h&&(no(t,n,h,r),p=t.memoizedState),(c=Ri||ao(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return No(e,t,n,r,i,a)}function No(e,t,n,r,a,i){Bo(e,t);var s=0!==(128&t.flags);if(!r&&!s)return a&&Oa(t,n,!1),Wo(e,t,i);r=t.stateNode,yo.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=wi(t,e.child,null,i),t.child=wi(t,null,o,i)):wo(e,t,o,i),t.memoizedState=r.state,a&&Oa(t,n,!0),t.child}function Fo(e){var t=e.stateNode;t.pendingContext?Da(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Da(0,t.context,!1),Xi(e,t.containerInfo)}function Eo(e,t,n,r,a){return hi(),pi(a),t.flags|=256,wo(e,t,n,r),t.child}var _o,To,Lo,Do,Ro={dehydrated:null,treeContext:null,retryLane:0};function Uo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Oo(e,t,n){var r,a=t.pendingProps,s=$i.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Sa($i,1&s),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Uc(l,a,0,null),e=Rc(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Uo(n),t.memoizedState=Ro,e):Mo(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,a,s,o){if(n)return 256&t.flags?(t.flags&=-257,Po(e,t,o,r=co(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,a=t.mode,r=Uc({mode:"visible",children:r.children},a,0,null),(s=Rc(s,a,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&wi(t,e.child,null,o),t.child.memoizedState=Uo(o),t.memoizedState=Ro,s);if(0===(1&t.mode))return Po(e,t,o,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Po(e,t,o,r=co(s=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Fl)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|o))?0:a)&&a!==s.retryLane&&(s.retryLane=a,Di(e,a),nc(r,e,a,-1))}return fc(),Po(e,t,o,r=co(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,ri=ca(a.nextSibling),ni=t,ai=!0,ii=null,null!==e&&(Ka[qa++]=Ja,Ka[qa++]=Ya,Ka[qa++]=Xa,Ja=e.id,Ya=e.overflow,Xa=t),t=Mo(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,s,n);if(o){o=a.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==s?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Lc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?o=Lc(r,o):(o=Rc(o,l,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Uo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ro,a}return e=(o=e.child).sibling,a=Lc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Mo(e,t){return(t=Uc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Po(e,t,n,r){return null!==r&&pi(r),wi(t,e.child,null,n),(e=Mo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Qo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ni(e.return,t,n)}function jo(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Ho(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(wo(e,t,r.children,n),0!==(2&(r=$i.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Qo(e,n,t);else if(19===e.tag)Qo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Sa($i,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===es(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),jo(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===es(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}jo(t,!0,n,null,i);break;case"together":jo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ul|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ko(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Ta(t.type)&&La(),Go(t),null;case 3:return r=t.stateNode,Ji(),Ba(Fa),Ba(Na),ns(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ai(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(sc(ii),ii=null))),To(e,t),Go(t),null;case 5:Zi(t);var a=qi(Ki.current);if(n=t.type,null!==e&&null!=t.stateNode)Lo(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Go(t),null}if(e=qi(Vi.current),Ai(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[da]=t,r[ha]=s,e=0!==(1&t.mode),n){case"dialog":Pr("cancel",r),Pr("close",r);break;case"iframe":case"object":case"embed":Pr("load",r);break;case"video":case"audio":for(a=0;a<Rr.length;a++)Pr(Rr[a],r);break;case"source":Pr("error",r);break;case"img":case"image":case"link":Pr("error",r),Pr("load",r);break;case"details":Pr("toggle",r);break;case"input":J(r,s),Pr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pr("invalid",r);break;case"textarea":ae(r,s),Pr("invalid",r)}for(var l in ye(n,s),a=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Zr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Zr(r.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Pr("scroll",r)}switch(n){case"input":G(r),$(r,s,!0);break;case"textarea":G(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=$r)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[da]=t,e[ha]=r,_o(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Pr("cancel",e),Pr("close",e),a=r;break;case"iframe":case"object":case"embed":Pr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Rr.length;a++)Pr(Rr[a],e);a=r;break;case"source":Pr("error",e),a=r;break;case"img":case"image":case"link":Pr("error",e),Pr("load",e),a=r;break;case"details":Pr("toggle",e),a=r;break;case"input":J(e,r),a=X(e,r),Pr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=O({},r,{value:void 0}),Pr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Pr("invalid",e)}for(s in ye(n,a),c=a)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?me(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&Ae(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Pr("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":G(e),$(e,r,!1);break;case"textarea":G(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=qi(Ki.current),qi(Vi.current),Ai(t)){if(r=t.stateNode,n=t.memoizedProps,r[da]=t,(s=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[da]=t,t.stateNode=r}return Go(t),null;case 13:if(Ba($i),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))di(),hi(),t.flags|=98560,s=!1;else if(s=Ai(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(i(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(i(317));s[da]=t}else hi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),s=!1}else null!==ii&&(sc(ii),ii=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$i.current)?0===Dl&&(Dl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Ji(),To(e,t),null===e&&Hr(t.stateNode.containerInfo),Go(t),null;case 10:return Ii(t.type._context),Go(t),null;case 19:if(Ba($i),null===(s=t.memoizedState))return Go(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Vo(s,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=es(e))){for(t.flags|=128,Vo(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Sa($i,1&$i.current|2),t.child}e=e.sibling}null!==s.tail&&Ye()>Hl&&(t.flags|=128,r=!0,Vo(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=es(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ai)return Go(t),null}else 2*Ye()-s.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Vo(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ye(),t.sibling=null,n=$i.current,Sa($i,r?1&n|2:1&n),t):(Go(t),null);case 22:case 23:return Ac(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Tl)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function qo(e,t){switch(ti(t),t.tag){case 1:return Ta(t.type)&&La(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ji(),Ba(Fa),Ba(Na),ns(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zi(t),null;case 13:if(Ba($i),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));hi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ba($i),null;case 4:return Ji(),null;case 10:return Ii(t.type._context),null;case 22:case 23:return Ac(),null;default:return null}}_o=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},To=function(){},Lo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,qi(Vi.current);var i,s=null;switch(n){case"input":a=X(e,a),r=X(e,r),s=[];break;case"select":a=O({},a,{value:void 0}),r=O({},r,{value:void 0}),s=[];break;case"textarea":a=re(e,a),r=re(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in ye(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Pr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xo=!1,Jo=!1,Yo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function $o(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){kc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&el(t,n,i)}a=a.next}while(a!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[da],delete t[ha],delete t[fa],delete t[ma],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,Al=!1;function dl(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:Jo||$o(n,t);case 6:var r=ul,a=Al;ul=null,dl(e,t,n),Al=a,null!==(ul=r)&&(Al?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(Al?(e=ul,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),Ht(e)):la(ul,n.stateNode));break;case 4:r=ul,a=Al,ul=n.stateNode.containerInfo,Al=!0,dl(e,t,n),ul=r,Al=a;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,s=i.destroy;i=i.tag,void 0!==s&&(0!==(2&i)||0!==(4&i))&&el(n,t,s),a=a.next}while(a!==r)}dl(e,t,n);break;case 1:if(!Jo&&($o(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){kc(n,t,o)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Jo=(r=Jo)||null!==n.memoizedState,dl(e,t,n),Jo=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yo),t.forEach(function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,Al=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,Al=!0;break e}l=l.return}if(null===ul)throw Error(i(160));hl(s,o,a),ul=null,Al=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){kc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),gl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){kc(e,e.return,m)}try{nl(5,e,e.return)}catch(m){kc(e,e.return,m)}}break;case 1:fl(t,e),gl(e),512&r&&null!==n&&$o(n,n.return);break;case 5:if(fl(t,e),gl(e),512&r&&null!==n&&$o(n,n.return),32&e.flags){var a=e.stateNode;try{de(a,"")}catch(m){kc(e,e.return,m)}}if(4&r&&null!=(a=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Y(a,s),be(l,o);var u=be(l,s);for(o=0;o<c.length;o+=2){var A=c[o],d=c[o+1];"style"===A?me(a,d):"dangerouslySetInnerHTML"===A?Ae(a,d):"children"===A?de(a,d):b(a,A,d,u)}switch(l){case"input":Z(a,s);break;case"textarea":ie(a,s);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(a,!!s.multiple,p,!1):h!==!!s.multiple&&(null!=s.defaultValue?ne(a,!!s.multiple,s.defaultValue,!0):ne(a,!!s.multiple,s.multiple?[]:"",!1))}a[ha]=s}catch(m){kc(e,e.return,m)}}break;case 6:if(fl(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(m){kc(e,e.return,m)}}break;case 3:if(fl(t,e),gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(m){kc(e,e.return,m)}break;case 4:default:fl(t,e),gl(e);break;case 13:fl(t,e),gl(e),8192&(a=e.child).flags&&(s=null!==a.memoizedState,a.stateNode.isHidden=s,!s||null!==a.alternate&&null!==a.alternate.memoizedState||(jl=Ye())),4&r&&pl(e);break;case 22:if(A=null!==n&&null!==n.memoizedState,1&e.mode?(Jo=(u=Jo)||A,fl(t,e),Jo=u):fl(t,e),gl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!A&&0!==(1&e.mode))for(Zo=e,A=e.child;null!==A;){for(d=Zo=A;null!==Zo;){switch(p=(h=Zo).child,h.tag){case 0:case 11:case 14:case 15:nl(4,h,h.return);break;case 1:$o(h,h.return);var f=h.stateNode;if("function"===typeof f.componentWillUnmount){r=h,n=h.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(m){kc(r,n,m)}}break;case 5:$o(h,h.return);break;case 22:if(null!==h.memoizedState){vl(d);continue}}null!==p?(p.return=h,Zo=p):vl(d)}A=A.sibling}e:for(A=null,d=e;;){if(5===d.tag){if(null===A){A=d;try{a=d.stateNode,u?"function"===typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(m){kc(e,e.return,m)}}}else if(6===d.tag){if(null===A)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){kc(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;A===d&&(A=null),d=d.return}A===d&&(A=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:fl(t,e),gl(e),4&r&&pl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(de(a,""),r.flags&=-33),cl(e,ol(e),a);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,ol(e),s);break;default:throw Error(i(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Zo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var a=Zo,i=a.child;if(22===a.tag&&r){var s=null!==a.memoizedState||Xo;if(!s){var o=a.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Xo;var c=Jo;if(Xo=s,(Jo=l)&&!c)for(Zo=a;null!==Zo;)l=(s=Zo).child,22===s.tag&&null!==s.memoizedState?xl(a):null!==l?(l.return=s,Zo=l):xl(a);for(;null!==i;)Zo=i,bl(i,t,n),i=i.sibling;Zo=a,Xo=o,Jo=c}wl(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Zo=i):wl(e)}}function wl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jo)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&zi(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}zi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var A=u.memoizedState;if(null!==A){var d=A.dehydrated;null!==d&&Ht(d)}}}break;default:throw Error(i(163))}Jo||512&t.flags&&al(t)}catch(h){kc(t,t.return,h)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function vl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function xl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){kc(t,a,l)}}var i=t.return;try{al(t)}catch(l){kc(t,i,l)}break;case 5:var s=t.return;try{al(t)}catch(l){kc(t,s,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var Cl,kl=Math.ceil,Bl=w.ReactCurrentDispatcher,Sl=w.ReactCurrentOwner,Il=w.ReactCurrentBatchConfig,Nl=0,Fl=null,El=null,_l=0,Tl=0,Ll=ka(0),Dl=0,Rl=null,Ul=0,Ol=0,Ml=0,Pl=null,Ql=null,jl=0,Hl=1/0,zl=null,Wl=!1,Vl=null,Gl=null,Kl=!1,ql=null,Xl=0,Jl=0,Yl=null,Zl=-1,$l=0;function ec(){return 0!==(6&Nl)?Ye():-1!==Zl?Zl:Zl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==_l?_l&-_l:null!==fi.transition?(0===$l&&($l=ft()),$l):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Jl)throw Jl=0,Yl=null,Error(i(185));gt(e,n,r),0!==(2&Nl)&&e===Fl||(e===Fl&&(0===(2&Nl)&&(Ol|=n),4===Dl&&oc(e,_l)),rc(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(Hl=Ye()+500,Pa&&Ha()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-st(i),o=1<<s,l=a[s];-1===l?0!==(o&n)&&0===(o&r)||(a[s]=ht(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=dt(e,e===Fl?_l:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Pa=!0,ja(e)}(lc.bind(null,e)):ja(lc.bind(null,e)),sa(function(){0===(6&Nl)&&Ha()}),n=null;else{switch(wt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Fc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zl=-1,$l=0,0!==(6&Nl))throw Error(i(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=dt(e,e===Fl?_l:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var a=Nl;Nl|=2;var s=pc();for(Fl===e&&_l===t||(zl=null,Hl=Ye()+500,dc(e,t));;)try{yc();break}catch(l){hc(e,l)}Si(),Bl.current=s,Nl=a,null!==El?t=0:(Fl=null,_l=0,t=Dl)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=ic(e,a))),1===t)throw n=Rl,dc(e,0),oc(e,r),rc(e,Ye()),n;if(6===t)oc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!or(i(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=mc(e,r))&&(0!==(s=pt(e))&&(r=s,t=ic(e,s))),1===t))throw n=Rl,dc(e,0),oc(e,r),rc(e,Ye()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:vc(e,Ql,zl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=jl+500-Ye())){if(0!==dt(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(vc.bind(null,e,Ql,zl),t);break}vc(e,Ql,zl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-st(r);s=1<<o,(o=t[o])>a&&(a=o),r&=~s}if(r=a,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ra(vc.bind(null,e,Ql,zl),r);break}vc(e,Ql,zl);break;default:throw Error(i(329))}}}return rc(e,Ye()),e.callbackNode===n?ac.bind(null,e):null}function ic(e,t){var n=Pl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Ql,Ql=n,null!==t&&sc(t)),e}function sc(e){null===Ql?Ql=e:Ql.push.apply(Ql,e)}function oc(e,t){for(t&=~Ml,t&=~Ol,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Nl))throw Error(i(327));xc();var t=dt(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Rl,dc(e,0),oc(e,t),rc(e,Ye()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vc(e,Ql,zl),rc(e,Ye()),null}function cc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(Hl=Ye()+500,Pa&&Ha())}}function uc(e){null!==ql&&0===ql.tag&&0===(6&Nl)&&xc();var t=Nl;Nl|=1;var n=Il.transition,r=bt;try{if(Il.transition=null,bt=1,e)return e()}finally{bt=r,Il.transition=n,0===(6&(Nl=t))&&Ha()}}function Ac(){Tl=Ll.current,Ba(Ll)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==El)for(n=El.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&La();break;case 3:Ji(),Ba(Fa),Ba(Na),ns();break;case 5:Zi(r);break;case 4:Ji();break;case 13:case 19:Ba($i);break;case 10:Ii(r.type._context);break;case 22:case 23:Ac()}n=n.return}if(Fl=e,El=e=Lc(e.current,null),_l=Tl=t,Dl=0,Rl=null,Ml=Ol=Ul=0,Ql=Pl=null,null!==_i){for(t=0;t<_i.length;t++)if(null!==(r=(n=_i[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var s=i.next;i.next=a,r.next=s}n.pending=r}_i=null}return e}function hc(e,t){for(;;){var n=El;try{if(Si(),rs.current=Ys,cs){for(var r=ss.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}cs=!1}if(is=0,ls=os=ss=null,us=!1,As=0,Sl.current=null,null===n||null===n.return){Dl=1,Rl=t,El=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=_l,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,A=l,d=A.tag;if(0===(1&A.mode)&&(0===d||11===d||15===d)){var h=A.alternate;h?(A.updateQueue=h.updateQueue,A.memoizedState=h.memoizedState,A.lanes=h.lanes):(A.updateQueue=null,A.memoizedState=null)}var p=mo(o);if(null!==p){p.flags&=-257,go(p,o,l,0,t),1&p.mode&&fo(s,u,t),c=u;var f=(t=p).updateQueue;if(null===f){var m=new Set;m.add(c),t.updateQueue=m}else f.add(c);break e}if(0===(1&t)){fo(s,u,t),fc();break e}c=Error(i(426))}else if(ai&&1&l.mode){var g=mo(o);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),go(g,o,l,0,t),pi(lo(c,l));break e}}s=c=lo(c,l),4!==Dl&&(Dl=2),null===Pl?Pl=[s]:Pl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ji(s,ho(0,c,t));break e;case 1:l=c;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,ji(s,po(s,l,t));break e}}s=s.return}while(null!==s)}wc(n)}catch(w){t=w,El===n&&null!==n&&(El=n=n.return);continue}break}}function pc(){var e=Bl.current;return Bl.current=Ys,null===e?Ys:e}function fc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Fl||0===(268435455&Ul)&&0===(268435455&Ol)||oc(Fl,_l)}function mc(e,t){var n=Nl;Nl|=2;var r=pc();for(Fl===e&&_l===t||(zl=null,dc(e,t));;)try{gc();break}catch(a){hc(e,a)}if(Si(),Nl=n,Bl.current=r,null!==El)throw Error(i(261));return Fl=null,_l=0,Dl}function gc(){for(;null!==El;)bc(El)}function yc(){for(;null!==El&&!Xe();)bc(El)}function bc(e){var t=Cl(e.alternate,e,Tl);e.memoizedProps=e.pendingProps,null===t?wc(e):El=t,Sl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Tl)))return void(El=n)}else{if(null!==(n=qo(n,t)))return n.flags&=32767,void(El=n);if(null===e)return Dl=6,void(El=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(El=t);El=t=e}while(null!==t);0===Dl&&(Dl=5)}function vc(e,t,n){var r=bt,a=Il.transition;try{Il.transition=null,bt=1,function(e,t,n,r){do{xc()}while(null!==ql);if(0!==(6&Nl))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-st(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,s),e===Fl&&(El=Fl=null,_l=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Fc(tt,function(){return xc(),null})),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Il.transition,Il.transition=null;var o=bt;bt=1;var l=Nl;Nl|=4,Sl.current=null,function(e,t){if(ea=Wt,hr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(v){n=null;break e}var o=0,l=-1,c=-1,u=0,A=0,d=e,h=null;t:for(;;){for(var p;d!==n||0!==a&&3!==d.nodeType||(l=o+a),d!==s||0!==r&&3!==d.nodeType||(c=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++u===a&&(l=o),h===s&&++A===r&&(c=o),null!==(p=d.nextSibling))break;h=(d=h).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Wt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var m=f.memoizedProps,g=f.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:to(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(v){kc(t,t.return,v)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}f=tl,tl=!1}(e,n),ml(n,e),pr(ta),Wt=!!ea,ta=ea=null,e.current=n,yl(n,e,a),Je(),Nl=l,bt=o,Il.transition=s}else e.current=n;if(Kl&&(Kl=!1,ql=e,Xl=a),s=e.pendingLanes,0===s&&(Gl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Wl)throw Wl=!1,e=Vl,Vl=null,e;0!==(1&Xl)&&0!==e.tag&&xc(),s=e.pendingLanes,0!==(1&s)?e===Yl?Jl++:(Jl=0,Yl=e):Jl=0,Ha()}(e,t,n,r)}finally{Il.transition=a,bt=r}return null}function xc(){if(null!==ql){var e=wt(Xl),t=Il.transition,n=bt;try{if(Il.transition=null,bt=16>e?16:e,null===ql)var r=!1;else{if(e=ql,ql=null,Xl=0,0!==(6&Nl))throw Error(i(331));var a=Nl;for(Nl|=4,Zo=e.current;null!==Zo;){var s=Zo,o=s.child;if(0!==(16&Zo.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zo=u;null!==Zo;){var A=Zo;switch(A.tag){case 0:case 11:case 15:nl(8,A,s)}var d=A.child;if(null!==d)d.return=A,Zo=d;else for(;null!==Zo;){var h=(A=Zo).sibling,p=A.return;if(il(A),A===u){Zo=null;break}if(null!==h){h.return=p,Zo=h;break}Zo=p}}}var f=s.alternate;if(null!==f){var m=f.child;if(null!==m){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Zo=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(s=Zo).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Zo=y;break e}Zo=s.return}}var b=e.current;for(Zo=b;null!==Zo;){var w=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Zo=w;else e:for(o=b;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){kc(l,l.return,x)}if(l===o){Zo=null;break e}var v=l.sibling;if(null!==v){v.return=l.return,Zo=v;break e}Zo=l.return}}if(Nl=a,Ha(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(x){}r=!0}return r}finally{bt=n,Il.transition=t}}return!1}function Cc(e,t,n){e=Pi(e,t=ho(0,t=lo(n,t),1),1),t=ec(),null!==e&&(gt(e,1,t),rc(e,t))}function kc(e,t,n){if(3===e.tag)Cc(e,e,n);else for(;null!==t;){if(3===t.tag){Cc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Pi(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(gt(t,1,e),rc(t,e));break}}t=t.return}}function Bc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Fl===e&&(_l&n)===n&&(4===Dl||3===Dl&&(130023424&_l)===_l&&500>Ye()-jl?dc(e,0):Ml|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Di(e,t))&&(gt(e,t,n),rc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Sc(e,n)}function Fc(e,t){return Ke(e,t)}function Ec(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _c(e,t,n,r){return new Ec(e,t,n,r)}function Tc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=_c(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,a,s){var o=2;if(r=e,"function"===typeof e)Tc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case C:return Rc(n.children,a,s,t);case k:o=8,a|=8;break;case B:return(e=_c(12,n,t,2|a)).elementType=B,e.lanes=s,e;case F:return(e=_c(13,n,t,a)).elementType=F,e.lanes=s,e;case E:return(e=_c(19,n,t,a)).elementType=E,e.lanes=s,e;case L:return Uc(n,a,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case I:o=9;break e;case N:o=11;break e;case _:o=14;break e;case T:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=_c(o,n,t,a)).elementType=e,t.type=r,t.lanes=s,t}function Rc(e,t,n,r){return(e=_c(7,e,r,t)).lanes=n,e}function Uc(e,t,n,r){return(e=_c(22,e,r,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function Oc(e,t,n){return(e=_c(6,e,null,t)).lanes=n,e}function Mc(e,t,n){return(t=_c(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Pc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Qc(e,t,n,r,a,i,s,o,l){return e=new Pc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=_c(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ui(i),e}function jc(e){if(!e)return Ia;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ta(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ta(n))return Ra(e,n,t)}return t}function Hc(e,t,n,r,a,i,s,o,l){return(e=Qc(n,r,!0,e,0,i,0,o,l)).context=jc(null),n=e.current,(i=Mi(r=ec(),a=tc(n))).callback=void 0!==t&&null!==t?t:null,Pi(n,i,a),e.current.lanes=a,gt(e,a,r),rc(e,r),e}function zc(e,t,n,r){var a=t.current,i=ec(),s=tc(a);return n=jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Mi(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Pi(a,t,s))&&(nc(e,a,s,i),Qi(e,a,s)),s}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Fa.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Fo(t),hi();break;case 5:Yi(t);break;case 1:Ta(t.type)&&Ua(t);break;case 4:Xi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Sa(xi,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Sa($i,1&$i.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Oo(e,t,n):(Sa($i,1&$i.current),null!==(e=Wo(e,t,n))?e.sibling:null);Sa($i,1&$i.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ho(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Sa($i,$i.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return Wo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,ai&&0!==(1048576&t.flags)&&$a(t,Ga,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zo(e,t),e=t.pendingProps;var a=_a(t,Na.current);Fi(t,n),a=fs(null,t,r,e,a,n);var s=ms();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ta(r)?(s=!0,Ua(t)):s=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ui(t),a.updater=ro,t.stateNode=a,a._reactInternals=t,oo(t,r,e,n),t=No(null,t,r,!0,s,n)):(t.tag=0,ai&&s&&ei(t),wo(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zo(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Tc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===_)return 14}return 2}(r),e=to(r,e),a){case 0:t=So(null,t,r,e,n);break e;case 1:t=Io(null,t,r,e,n);break e;case 11:t=vo(null,t,r,e,n);break e;case 14:t=xo(null,t,r,to(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,So(e,t,r,a=t.elementType===r?a:to(r,a),n);case 1:return r=t.type,a=t.pendingProps,Io(e,t,r,a=t.elementType===r?a:to(r,a),n);case 3:e:{if(Fo(t),null===e)throw Error(i(387));r=t.pendingProps,a=(s=t.memoizedState).element,Oi(e,t),Hi(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Eo(e,t,r,n,a=lo(Error(i(423)),t));break e}if(r!==a){t=Eo(e,t,r,n,a=lo(Error(i(424)),t));break e}for(ri=ca(t.stateNode.containerInfo.firstChild),ni=t,ai=!0,ii=null,n=vi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hi(),r===a){t=Wo(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return Yi(t),null===e&&ci(t),r=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,o=a.children,na(r,a)?o=null:null!==s&&na(r,s)&&(t.flags|=32),Bo(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Oo(e,t,n);case 4:return Xi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wi(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,vo(e,t,r,a=t.elementType===r?a:to(r,a),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value,Sa(xi,r._currentValue),r._currentValue=o,null!==s)if(or(s.value,o)){if(s.children===a.children&&!Fa.current){t=Wo(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Mi(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var A=(u=u.shared).pending;null===A?c.next=c:(c.next=A.next,A.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ni(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ni(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}wo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Fi(t,n),r=r(a=Ei(a)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return a=to(r=t.type,t.pendingProps),xo(e,t,r,a=to(r.type,a),n);case 15:return Co(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:to(r,a),zo(e,t),t.tag=1,Ta(r)?(e=!0,Ua(t)):e=!1,Fi(t,n),io(t,r,a),oo(t,r,a,n),No(null,t,r,!0,e,n);case 19:return Ho(e,t,n);case 22:return ko(e,t,n)}throw Error(i(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function qc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function $c(e,t,n,r,a){var i=n._reactRootContainer;if(i){var s=i;if("function"===typeof a){var o=a;a=function(){var e=Wc(s);o.call(e)}}zc(t,s,e,a)}else s=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Wc(s);i.call(e)}}var s=Hc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=s,e[pa]=s.current,Hr(8===e.nodeType?e.parentNode:e),uc(),s}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var o=r;r=function(){var e=Wc(l);o.call(e)}}var l=Qc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pa]=l.current,Hr(8===e.nodeType?e.parentNode:e),uc(function(){zc(t,l,n,r)}),l}(n,t,e,a,r);return Wc(s)}Xc.prototype.render=qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));zc(e,t,null,null)},Xc.prototype.unmount=qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){zc(null,e,null,null)}),t[pa]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Ot(e)}},vt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=At(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Ye()),0===(6&Nl)&&(Hl=Ye()+500,Ha()))}break;case 13:uc(function(){var t=Di(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Gc(e,1)}},xt=function(e){if(13===e.tag){var t=Di(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},Ct=function(e){if(13===e.tag){var t=tc(e),n=Di(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},kt=function(){return bt},Bt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=va(r);if(!a)throw Error(i(90));K(r),Z(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ne=cc,Fe=uc;var eu={usingClientEntryPoint:!1,Events:[ba,wa,va,Se,Ie,cc]},tu={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{at=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(i(299));var n=!1,r="",a=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Qc(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Hr(8===e.nodeType?e.parentNode:e),new qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(i(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,s="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,a,0,s,o),e[pa]=t.current,Hr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Xc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(i(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[pa]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return $c(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},2897:(e,t,n)=>{var r=n(3693);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},3057:(e,t,n)=>{var r=n(2897).default;e.exports=e=>{const t=[],n=[],a=[],i=[],s=[];return e.blocks&&e.blocks.forEach(o=>{o.paragraphs.forEach(t=>{t.lines.forEach(n=>{n.words.forEach(a=>{a.symbols.forEach(i=>{s.push(r(r({},i),{},{page:e,block:o,paragraph:t,line:n,word:a}))}),i.push(r(r({},a),{},{page:e,block:o,paragraph:t,line:n}))}),a.push(r(r({},n),{},{page:e,block:o,paragraph:t}))}),n.push(r(r({},t),{},{page:e,block:o}))}),t.push(r(r({},o),{},{page:e}))}),r(r({},e),{},{blocks:t,paragraphs:n,lines:a,words:i,symbols:s})}},3693:(e,t,n)=>{var r=n(7736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4053:e=>{e.exports=function(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof process||"object"!==typeof process.versions||!process.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var w=b.prototype=new y;w.constructor=b,f(w,g.prototype),w.isPureReactComponent=!0;var v=Array.isArray,x=Object.prototype.hasOwnProperty,C={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function B(e,t,r){var a,i={},s=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,a)&&!k.hasOwnProperty(a)&&(i[a]=t[a]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===i[a]&&(i[a]=l[a]);return{$$typeof:n,type:e,key:s,ref:o,props:i,_owner:C.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function F(e,t,a,i,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===i?"."+N(l,0):i,v(s)?(a="",null!=e&&(a=e.replace(I,"$&/")+"/"),F(s,t,a,"",function(e){return e})):null!=s&&(S(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,a+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(I,"$&/")+"/")+e)),t.push(s)),1;if(l=0,i=""===i?".":i+":",v(e))for(var c=0;c<e.length;c++){var u=i+N(o=e[c],c);l+=F(o,t,a,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=F(o=o.value,t,a,u=i+N(o,c++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function E(e,t,n){if(null==e)return e;var r=[],a=0;return F(e,r,"","",function(e){return t.call(n,e,a++)}),r}function _(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},L={transition:null},D={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:L,ReactCurrentOwner:C};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:E,forEach:function(e,t,n){E(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return E(e,function(){t++}),t},toArray:function(e){return E(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=s,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=f({},e.props),i=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=C.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!k.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:n,type:e.type,key:i,ref:s,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=B,t.createFactory=function(e){var t=B.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:_}},t.memo=function(e,t){return{$$typeof:A,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return T.current.useCallback(e,t)},t.useContext=function(e){return T.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return T.current.useDeferredValue(e)},t.useEffect=function(e,t){return T.current.useEffect(e,t)},t.useId=function(){return T.current.useId()},t.useImperativeHandle=function(e,t,n){return T.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return T.current.useMemo(e,t)},t.useReducer=function(e,t,n){return T.current.useReducer(e,t,n)},t.useRef=function(e){return T.current.useRef(e)},t.useState=function(e){return T.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return T.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return T.current.useTransition()},t.version="18.3.1"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4402:(e,t,n)=>{var r=n(2897).default;const a="browser"===n(9003)("type")?e=>new URL(e,window.location.href).href:e=>e;e.exports=e=>{const t=r({},e);return["corePath","workerPath","langPath"].forEach(n=>{e[n]&&(t[n]=a(t[n]))}),t}},4447:function(e,t,n){const r=n(5701),{log:a}=n(9926),i=n(9593);let s=0;e.exports=()=>{const e=i("Scheduler",s),t={},n={};let o=[];s+=1;const l=()=>Object.keys(t).length,c=()=>{if(0!==o.length){const e=Object.keys(t);for(let r=0;r<e.length;r+=1)if("undefined"===typeof n[e[r]]){o[0](t[e[r]]);break}}},u=(t,i)=>new Promise((s,l)=>{const u=r({action:t,payload:i});o.push(async e=>{o.shift(),n[e.id]=u;try{s(await e[t].apply(this,[...i,u.id]))}catch(r){l(r)}finally{delete n[e.id],c()}}),a("[".concat(e,"]: Add ").concat(u.id," to JobQueue")),a("[".concat(e,"]: JobQueue length=").concat(o.length)),c()});return{addWorker:n=>(t[n.id]=n,a("[".concat(e,"]: Add ").concat(n.id)),a("[".concat(e,"]: Number of workers=").concat(l())),c(),n.id),addJob:async function(t){if(0===l())throw Error("[".concat(e,"]: You need to have at least one worker before adding jobs"));for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return u(t,r)},terminate:async()=>{Object.keys(t).forEach(async e=>{await t[e].terminate()}),o=[]},getQueueLen:()=>o.length,getNumWorkers:l}}},4588:e=>{e.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}},4871:e=>{e.exports=e=>{e.terminate()}},4893:e=>{e.exports=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n},e.exports.__esModule=!0,e.exports.default=e.exports},4980:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(2284);function a(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=(0,r.A)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}function i(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5095:e=>{e.exports=e=>{let t,{workerPath:n,workerBlobURL:r}=e;if(Blob&&URL&&r){const e=new Blob(['importScripts("'.concat(n,'");')],{type:"application/javascript"});t=new Worker(URL.createObjectURL(e))}else t=new Worker(n);return t}},5147:e=>{e.exports={workerBlobURL:!0,logger:()=>{}}},5239:function(e){e.exports=function(){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},n.apply(this,arguments)};function r(e,t,n,r){function a(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function s(e){try{l(r.next(e))}catch(Ot){i(Ot)}}function o(e){try{l(r.throw(e))}catch(Ot){i(Ot)}}function l(e){e.done?n(e.value):a(e.value).then(s,o)}l((r=r.apply(e,t||[])).next())})}function a(e,t){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(Ot){i=[6,Ot],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}function i(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||t)}for(var s=function(){function e(e,t,n,r){this.left=e,this.top=t,this.width=n,this.height=r}return e.prototype.add=function(t,n,r,a){return new e(this.left+t,this.top+n,this.width+r,this.height+a)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var r=Array.from(n).find(function(e){return 0!==e.width});return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),o=function(e,t){return s.fromClientRect(e,t.getBoundingClientRect())},l=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),a=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new s(0,0,r,a)},c=function(e){for(var t=[],n=0,r=e.length;n<r;){var a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){var i=e.charCodeAt(n++);56320===(64512&i)?t.push(((1023&a)<<10)+(1023&i)+65536):(t.push(a),n--)}else t.push(a)}return t},u=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],a=-1,i="";++a<n;){var s=e[a];s<=65535?r.push(s):(s-=65536,r.push(55296+(s>>10),s%1024+56320)),(a+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d="undefined"===typeof Uint8Array?[]:new Uint8Array(256),h=0;h<A.length;h++)d[A.charCodeAt(h)]=h;for(var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="undefined"===typeof Uint8Array?[]:new Uint8Array(256),m=0;m<p.length;m++)f[p.charCodeAt(m)]=m;for(var g=function(e){var t,n,r,a,i,s=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(s):new Array(s),u=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<o;t+=4)n=f[e.charCodeAt(t)],r=f[e.charCodeAt(t+1)],a=f[e.charCodeAt(t+2)],i=f[e.charCodeAt(t+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|a>>2,u[l++]=(3&a)<<6|63&i;return c},y=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},b=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},w=5,v=11,x=2,C=65536>>w,k=(1<<w)-1,B=C+(1024>>w)+32,S=65536>>v,I=(1<<v-w)-1,N=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},F=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},E=function(e,t){var n=g(e),r=Array.isArray(n)?b(n):new Uint32Array(n),a=Array.isArray(n)?y(n):new Uint16Array(n),i=24,s=N(a,i/2,r[4]/2),o=2===r[5]?N(a,(i+r[4])/2):F(r,Math.ceil((i+r[4])/4));return new _(r[0],r[1],r[2],r[3],s,o)},_=function(){function e(e,t,n,r,a,i){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=a,this.data=i}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>w])<<x)+(e&k),this.data[t];if(e<=65535)return t=((t=this.index[C+(e-55296>>w)])<<x)+(e&k),this.data[t];if(e<this.highStart)return t=B-S+(e>>v),t=this.index[t],t+=e>>w&I,t=((t=this.index[t])<<x)+(e&k),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L="undefined"===typeof Uint8Array?[]:new Uint8Array(256),D=0;D<T.length;D++)L[T.charCodeAt(D)]=D;var R=50,U=1,O=2,M=3,P=4,Q=5,j=7,H=8,z=9,W=10,V=11,G=12,K=13,q=14,X=15,J=16,Y=17,Z=18,$=19,ee=20,te=21,ne=22,re=23,ae=24,ie=25,se=26,oe=27,le=28,ce=29,ue=30,Ae=31,de=32,he=33,pe=34,fe=35,me=36,ge=37,ye=38,be=39,we=40,ve=41,xe=42,Ce=43,ke=[9001,65288],Be="!",Se="\xd7",Ie="\xf7",Ne=E("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),Fe=[ue,me],Ee=[U,O,M,Q],_e=[W,H],Te=[oe,se],Le=Ee.concat(_e),De=[ye,be,we,pe,fe],Re=[X,K],Ue=function(e,t){void 0===t&&(t="strict");var n=[],r=[],a=[];return e.forEach(function(e,i){var s=Ne.get(e);if(s>R?(a.push(!0),s-=R):a.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return r.push(i),n.push(J);if(s===P||s===V){if(0===i)return r.push(i),n.push(ue);var o=n[i-1];return-1===Le.indexOf(o)?(r.push(r[i-1]),n.push(o)):(r.push(i),n.push(ue))}return r.push(i),s===Ae?n.push("strict"===t?te:ge):s===xe||s===ce?n.push(ue):s===Ce?e>=131072&&e<=196605||e>=196608&&e<=262141?n.push(ge):n.push(ue):void n.push(s)}),[r,n,a]},Oe=function(e,t,n,r){var a=r[n];if(Array.isArray(e)?-1!==e.indexOf(a):e===a)for(var i=n;i<=r.length;){if((l=r[++i])===t)return!0;if(l!==W)break}if(a===W)for(i=n;i>0;){var s=r[--i];if(Array.isArray(e)?-1!==e.indexOf(s):e===s)for(var o=n;o<=r.length;){var l;if((l=r[++o])===t)return!0;if(l!==W)break}if(s!==W)break}return!1},Me=function(e,t){for(var n=e;n>=0;){var r=t[n];if(r!==W)return r;n--}return 0},Pe=function(e,t,n,r,a){if(0===n[r])return Se;var i=r-1;if(Array.isArray(a)&&!0===a[i])return Se;var s=i-1,o=i+1,l=t[i],c=s>=0?t[s]:0,u=t[o];if(l===O&&u===M)return Se;if(-1!==Ee.indexOf(l))return Be;if(-1!==Ee.indexOf(u))return Se;if(-1!==_e.indexOf(u))return Se;if(Me(i,t)===H)return Ie;if(Ne.get(e[i])===V)return Se;if((l===de||l===he)&&Ne.get(e[o])===V)return Se;if(l===j||u===j)return Se;if(l===z)return Se;if(-1===[W,K,X].indexOf(l)&&u===z)return Se;if(-1!==[Y,Z,$,ae,le].indexOf(u))return Se;if(Me(i,t)===ne)return Se;if(Oe(re,ne,i,t))return Se;if(Oe([Y,Z],te,i,t))return Se;if(Oe(G,G,i,t))return Se;if(l===W)return Ie;if(l===re||u===re)return Se;if(u===J||l===J)return Ie;if(-1!==[K,X,te].indexOf(u)||l===q)return Se;if(c===me&&-1!==Re.indexOf(l))return Se;if(l===le&&u===me)return Se;if(u===ee)return Se;if(-1!==Fe.indexOf(u)&&l===ie||-1!==Fe.indexOf(l)&&u===ie)return Se;if(l===oe&&-1!==[ge,de,he].indexOf(u)||-1!==[ge,de,he].indexOf(l)&&u===se)return Se;if(-1!==Fe.indexOf(l)&&-1!==Te.indexOf(u)||-1!==Te.indexOf(l)&&-1!==Fe.indexOf(u))return Se;if(-1!==[oe,se].indexOf(l)&&(u===ie||-1!==[ne,X].indexOf(u)&&t[o+1]===ie)||-1!==[ne,X].indexOf(l)&&u===ie||l===ie&&-1!==[ie,le,ae].indexOf(u))return Se;if(-1!==[ie,le,ae,Y,Z].indexOf(u))for(var A=i;A>=0;){if((d=t[A])===ie)return Se;if(-1===[le,ae].indexOf(d))break;A--}if(-1!==[oe,se].indexOf(u))for(A=-1!==[Y,Z].indexOf(l)?s:i;A>=0;){var d;if((d=t[A])===ie)return Se;if(-1===[le,ae].indexOf(d))break;A--}if(ye===l&&-1!==[ye,be,pe,fe].indexOf(u)||-1!==[be,pe].indexOf(l)&&-1!==[be,we].indexOf(u)||-1!==[we,fe].indexOf(l)&&u===we)return Se;if(-1!==De.indexOf(l)&&-1!==[ee,se].indexOf(u)||-1!==De.indexOf(u)&&l===oe)return Se;if(-1!==Fe.indexOf(l)&&-1!==Fe.indexOf(u))return Se;if(l===ae&&-1!==Fe.indexOf(u))return Se;if(-1!==Fe.concat(ie).indexOf(l)&&u===ne&&-1===ke.indexOf(e[o])||-1!==Fe.concat(ie).indexOf(u)&&l===Z)return Se;if(l===ve&&u===ve){for(var h=n[i],p=1;h>0&&t[--h]===ve;)p++;if(p%2!==0)return Se}return l===de&&u===he?Se:Ie},Qe=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=Ue(e,t.lineBreak),r=n[0],a=n[1],i=n[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(a=a.map(function(e){return-1!==[ie,ue,xe].indexOf(e)?ge:e}));var s="keep-all"===t.wordBreak?i.map(function(t,n){return t&&e[n]>=19968&&e[n]<=40959}):void 0;return[r,a,s]},je=function(){function e(e,t,n,r){this.codePoints=e,this.required=t===Be,this.start=n,this.end=r}return e.prototype.slice=function(){return u.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),He=function(e,t){var n=c(e),r=Qe(n,t),a=r[0],i=r[1],s=r[2],o=n.length,l=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var e=Se;u<o&&(e=Pe(n,i,a,++u,s))===Se;);if(e!==Se||u===o){var t=new je(n,e,l,u);return l=u,{value:t,done:!1}}return{done:!0,value:null}}}},ze=1,We=2,Ve=4,Ge=8,Ke=10,qe=47,Xe=92,Je=9,Ye=32,Ze=34,$e=61,et=35,tt=36,nt=37,rt=39,at=40,it=41,st=95,ot=45,lt=33,ct=60,ut=62,At=64,dt=91,ht=93,pt=61,ft=123,mt=63,gt=125,yt=124,bt=126,wt=128,vt=65533,xt=42,Ct=43,kt=44,Bt=58,St=59,It=46,Nt=0,Ft=8,Et=11,_t=14,Tt=31,Lt=127,Dt=-1,Rt=48,Ut=97,Ot=101,Mt=102,Pt=117,Qt=122,jt=65,Ht=69,zt=70,Wt=85,Vt=90,Gt=function(e){return e>=Rt&&e<=57},Kt=function(e){return e>=55296&&e<=57343},qt=function(e){return Gt(e)||e>=jt&&e<=zt||e>=Ut&&e<=Mt},Xt=function(e){return e>=Ut&&e<=Qt},Jt=function(e){return e>=jt&&e<=Vt},Yt=function(e){return Xt(e)||Jt(e)},Zt=function(e){return e>=wt},$t=function(e){return e===Ke||e===Je||e===Ye},en=function(e){return Yt(e)||Zt(e)||e===st},tn=function(e){return en(e)||Gt(e)||e===ot},nn=function(e){return e>=Nt&&e<=Ft||e===Et||e>=_t&&e<=Tt||e===Lt},rn=function(e,t){return e===Xe&&t!==Ke},an=function(e,t,n){return e===ot?en(t)||rn(t,n):!!en(e)||!(e!==Xe||!rn(e,t))},sn=function(e,t,n){return e===Ct||e===ot?!!Gt(t)||t===It&&Gt(n):Gt(e===It?t:e)},on=function(e){var t=0,n=1;e[t]!==Ct&&e[t]!==ot||(e[t]===ot&&(n=-1),t++);for(var r=[];Gt(e[t]);)r.push(e[t++]);var a=r.length?parseInt(u.apply(void 0,r),10):0;e[t]===It&&t++;for(var i=[];Gt(e[t]);)i.push(e[t++]);var s=i.length,o=s?parseInt(u.apply(void 0,i),10):0;e[t]!==Ht&&e[t]!==Ot||t++;var l=1;e[t]!==Ct&&e[t]!==ot||(e[t]===ot&&(l=-1),t++);for(var c=[];Gt(e[t]);)c.push(e[t++]);var A=c.length?parseInt(u.apply(void 0,c),10):0;return n*(a+o*Math.pow(10,-s))*Math.pow(10,l*A)},ln={type:2},cn={type:3},un={type:4},An={type:13},dn={type:8},hn={type:21},pn={type:9},fn={type:10},mn={type:11},gn={type:12},yn={type:14},bn={type:23},wn={type:1},vn={type:25},xn={type:24},Cn={type:26},kn={type:27},Bn={type:28},Sn={type:29},In={type:31},Nn={type:32},Fn=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(c(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==Nn;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case Ze:return this.consumeStringToken(Ze);case et:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(tn(t)||rn(n,r)){var a=an(t,n,r)?We:ze;return{type:5,value:this.consumeName(),flags:a}}break;case tt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),An;break;case rt:return this.consumeStringToken(rt);case at:return ln;case it:return cn;case xt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),yn;break;case Ct:if(sn(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case kt:return un;case ot:var i=e,s=this.peekCodePoint(0),o=this.peekCodePoint(1);if(sn(i,s,o))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(an(i,s,o))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(s===ot&&o===ut)return this.consumeCodePoint(),this.consumeCodePoint(),xn;break;case It:if(sn(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case qe:if(this.peekCodePoint(0)===xt)for(this.consumeCodePoint();;){var l=this.consumeCodePoint();if(l===xt&&(l=this.consumeCodePoint())===qe)return this.consumeToken();if(l===Dt)return this.consumeToken()}break;case Bt:return Cn;case St:return kn;case ct:if(this.peekCodePoint(0)===lt&&this.peekCodePoint(1)===ot&&this.peekCodePoint(2)===ot)return this.consumeCodePoint(),this.consumeCodePoint(),vn;break;case At:var c=this.peekCodePoint(0),A=this.peekCodePoint(1),d=this.peekCodePoint(2);if(an(c,A,d))return{type:7,value:this.consumeName()};break;case dt:return Bn;case Xe:if(rn(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case ht:return Sn;case pt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),dn;break;case ft:return mn;case gt:return gn;case Pt:case Wt:var h=this.peekCodePoint(0),p=this.peekCodePoint(1);return h!==Ct||!qt(p)&&p!==mt||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case yt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),pn;if(this.peekCodePoint(0)===yt)return this.consumeCodePoint(),hn;break;case bt:if(this.peekCodePoint(0)===$e)return this.consumeCodePoint(),fn;break;case Dt:return Nn}return $t(e)?(this.consumeWhiteSpace(),In):Gt(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):en(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:u(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return"undefined"===typeof e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();qt(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===mt&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n)return{type:30,start:parseInt(u.apply(void 0,e.map(function(e){return e===mt?Rt:e})),16),end:parseInt(u.apply(void 0,e.map(function(e){return e===mt?zt:e})),16)};var r=parseInt(u.apply(void 0,e),16);if(this.peekCodePoint(0)===ot&&qt(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var a=[];qt(t)&&a.length<6;)a.push(t),t=this.consumeCodePoint();return{type:30,start:r,end:parseInt(u.apply(void 0,a),16)}}return{type:30,start:r,end:r}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&this.peekCodePoint(0)===at?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===at?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Dt)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===rt||t===Ze){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Dt||this.peekCodePoint(0)===it)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),bn)}for(;;){var r=this.consumeCodePoint();if(r===Dt||r===it)return{type:22,value:u.apply(void 0,e)};if($t(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Dt||this.peekCodePoint(0)===it?(this.consumeCodePoint(),{type:22,value:u.apply(void 0,e)}):(this.consumeBadUrlRemnants(),bn);if(r===Ze||r===rt||r===at||nn(r))return this.consumeBadUrlRemnants(),bn;if(r===Xe){if(!rn(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),bn;e.push(this.consumeEscapedCodePoint())}else e.push(r)}},e.prototype.consumeWhiteSpace=function(){for(;$t(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===it||e===Dt)return;rn(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t=5e4,n="";e>0;){var r=Math.min(t,e);n+=u.apply(void 0,this._value.splice(0,r)),e-=r}return this._value.shift(),n},e.prototype.consumeStringToken=function(e){for(var t="",n=0;;){var r=this._value[n];if(r===Dt||void 0===r||r===e)return{type:0,value:t+=this.consumeStringSlice(n)};if(r===Ke)return this._value.splice(0,n),wn;if(r===Xe){var a=this._value[n+1];a!==Dt&&void 0!==a&&(a===Ke?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):rn(r,a)&&(t+=this.consumeStringSlice(n),t+=u(this.consumeEscapedCodePoint()),n=-1))}n++}},e.prototype.consumeNumber=function(){var e=[],t=Ve,n=this.peekCodePoint(0);for(n!==Ct&&n!==ot||e.push(this.consumeCodePoint());Gt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(n===It&&Gt(r))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Ge;Gt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((n===Ht||n===Ot)&&((r===Ct||r===ot)&&Gt(a)||Gt(r)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Ge;Gt(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[on(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],r=this.peekCodePoint(0),a=this.peekCodePoint(1),i=this.peekCodePoint(2);return an(r,a,i)?{type:15,number:t,flags:n,unit:this.consumeName()}:r===nt?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(qt(e)){for(var t=u(e);qt(this.peekCodePoint(0))&&t.length<6;)t+=u(this.consumeCodePoint());$t(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return 0===n||Kt(n)||n>1114111?vt:n}return e===Dt?vt:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(tn(t))e+=u(t);else{if(!rn(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=u(this.consumeEscapedCodePoint())}}},e}(),En=function(){function e(e){this._tokens=e}return e.create=function(t){var n=new Fn;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(32===n.type||Pn(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return"undefined"===typeof e?Nn:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),_n=function(e){return 15===e.type},Tn=function(e){return 17===e.type},Ln=function(e){return 20===e.type},Dn=function(e){return 0===e.type},Rn=function(e,t){return Ln(e)&&e.value===t},Un=function(e){return 31!==e.type},On=function(e){return 31!==e.type&&4!==e.type},Mn=function(e){var t=[],n=[];return e.forEach(function(e){if(4===e.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),void(n=[])}31!==e.type&&n.push(e)}),n.length&&t.push(n),t},Pn=function(e,t){return 11===t&&12===e.type||28===t&&29===e.type||2===t&&3===e.type},Qn=function(e){return 17===e.type||15===e.type},jn=function(e){return 16===e.type||Qn(e)},Hn=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},zn={type:17,number:0,flags:Ve},Wn={type:16,number:50,flags:Ve},Vn={type:16,number:100,flags:Ve},Gn=function(e,t,n){var r=e[0],a=e[1];return[Kn(r,t),Kn("undefined"!==typeof a?a:r,n)]},Kn=function(e,t){if(16===e.type)return e.number/100*t;if(_n(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},qn="deg",Xn="grad",Jn="rad",Yn="turn",Zn={name:"angle",parse:function(e,t){if(15===t.type)switch(t.unit){case qn:return Math.PI*t.number/180;case Xn:return Math.PI/200*t.number;case Jn:return t.number;case Yn:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")}},$n=function(e){return 15===e.type&&(e.unit===qn||e.unit===Xn||e.unit===Jn||e.unit===Yn)},er=function(e){switch(e.filter(Ln).map(function(e){return e.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[zn,zn];case"to top":case"bottom":return tr(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[zn,Vn];case"to right":case"left":return tr(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Vn,Vn];case"to bottom":case"top":return tr(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Vn,zn];case"to left":case"right":return tr(270)}return 0},tr=function(e){return Math.PI*e/180},nr={name:"color",parse:function(e,t){if(18===t.type){var n=ur[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(5===t.type){if(3===t.value.length){var r=t.value.substring(0,1),a=t.value.substring(1,2),i=t.value.substring(2,3);return ir(parseInt(r+r,16),parseInt(a+a,16),parseInt(i+i,16),1)}if(4===t.value.length){r=t.value.substring(0,1),a=t.value.substring(1,2),i=t.value.substring(2,3);var s=t.value.substring(3,4);return ir(parseInt(r+r,16),parseInt(a+a,16),parseInt(i+i,16),parseInt(s+s,16)/255)}if(6===t.value.length)return r=t.value.substring(0,2),a=t.value.substring(2,4),i=t.value.substring(4,6),ir(parseInt(r,16),parseInt(a,16),parseInt(i,16),1);if(8===t.value.length)return r=t.value.substring(0,2),a=t.value.substring(2,4),i=t.value.substring(4,6),s=t.value.substring(6,8),ir(parseInt(r,16),parseInt(a,16),parseInt(i,16),parseInt(s,16)/255)}if(20===t.type){var o=dr[t.value.toUpperCase()];if("undefined"!==typeof o)return o}return dr.TRANSPARENT}},rr=function(e){return 0===(255&e)},ar=function(e){var t=255&e,n=255&e>>8,r=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+r+","+n+","+t/255+")":"rgb("+a+","+r+","+n+")"},ir=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(255*r))>>>0},sr=function(e,t){if(17===e.type)return e.number;if(16===e.type){var n=3===t?1:255;return 3===t?e.number/100*n:Math.round(e.number/100*n)}return 0},or=function(e,t){var n=t.filter(On);if(3===n.length){var r=n.map(sr),a=r[0],i=r[1],s=r[2];return ir(a,i,s,1)}if(4===n.length){var o=n.map(sr),l=(a=o[0],i=o[1],s=o[2],o[3]);return ir(a,i,s,l)}return 0};function lr(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<.5?t:n<2/3?6*(t-e)*(2/3-n)+e:e}var cr=function(e,t){var n=t.filter(On),r=n[0],a=n[1],i=n[2],s=n[3],o=(17===r.type?tr(r.number):Zn.parse(e,r))/(2*Math.PI),l=jn(a)?a.number/100:0,c=jn(i)?i.number/100:0,u="undefined"!==typeof s&&jn(s)?Kn(s,1):1;if(0===l)return ir(255*c,255*c,255*c,1);var A=c<=.5?c*(l+1):c+l-c*l,d=2*c-A,h=lr(d,A,o+1/3),p=lr(d,A,o),f=lr(d,A,o-1/3);return ir(255*h,255*p,255*f,u)},ur={hsl:cr,hsla:cr,rgb:or,rgba:or},Ar=function(e,t){return nr.parse(e,En.create(t).parseComponentValue())},dr={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},hr={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(Ln(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},pr={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fr=function(e,t){var n=nr.parse(e,t[0]),r=t[1];return r&&jn(r)?{color:n,stop:r}:{color:n,stop:null}},mr=function(e,t){var n=e[0],r=e[e.length-1];null===n.stop&&(n.stop=zn),null===r.stop&&(r.stop=Vn);for(var a=[],i=0,s=0;s<e.length;s++){var o=e[s].stop;if(null!==o){var l=Kn(o,t);l>i?a.push(l):a.push(i),i=l}else a.push(null)}var c=null;for(s=0;s<a.length;s++){var u=a[s];if(null===u)null===c&&(c=s);else if(null!==c){for(var A=s-c,d=(u-a[c-1])/(A+1),h=1;h<=A;h++)a[c+h-1]=d*h;c=null}}return e.map(function(e,n){return{color:e.color,stop:Math.max(Math.min(1,a[n]/t),0)}})},gr=function(e,t,n){var r=t/2,a=n/2,i=Kn(e[0],t)-r,s=a-Kn(e[1],n);return(Math.atan2(s,i)+2*Math.PI)%(2*Math.PI)},yr=function(e,t,n){var r="number"===typeof e?e:gr(e,t,n),a=Math.abs(t*Math.sin(r))+Math.abs(n*Math.cos(r)),i=t/2,s=n/2,o=a/2,l=Math.sin(r-Math.PI/2)*o,c=Math.cos(r-Math.PI/2)*o;return[a,i-c,i+c,s-l,s+l]},br=function(e,t){return Math.sqrt(e*e+t*t)},wr=function(e,t,n,r,a){return[[0,0],[0,t],[e,0],[e,t]].reduce(function(e,t){var i=t[0],s=t[1],o=br(n-i,r-s);return(a?o<e.optimumDistance:o>e.optimumDistance)?{optimumCorner:t,optimumDistance:o}:e},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},vr=function(e,t,n,r,a){var i=0,s=0;switch(e.size){case 0:0===e.shape?i=s=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-a)):1===e.shape&&(i=Math.min(Math.abs(t),Math.abs(t-r)),s=Math.min(Math.abs(n),Math.abs(n-a)));break;case 2:if(0===e.shape)i=s=Math.min(br(t,n),br(t,n-a),br(t-r,n),br(t-r,n-a));else if(1===e.shape){var o=Math.min(Math.abs(n),Math.abs(n-a))/Math.min(Math.abs(t),Math.abs(t-r)),l=wr(r,a,t,n,!0),c=l[0],u=l[1];s=o*(i=br(c-t,(u-n)/o))}break;case 1:0===e.shape?i=s=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-a)):1===e.shape&&(i=Math.max(Math.abs(t),Math.abs(t-r)),s=Math.max(Math.abs(n),Math.abs(n-a)));break;case 3:if(0===e.shape)i=s=Math.max(br(t,n),br(t,n-a),br(t-r,n),br(t-r,n-a));else if(1===e.shape){o=Math.max(Math.abs(n),Math.abs(n-a))/Math.max(Math.abs(t),Math.abs(t-r));var A=wr(r,a,t,n,!1);c=A[0],u=A[1],s=o*(i=br(c-t,(u-n)/o))}}return Array.isArray(e.size)&&(i=Kn(e.size[0],r),s=2===e.size.length?Kn(e.size[1],a):i),[i,s]},xr=function(e,t){var n=tr(180),r=[];return Mn(t).forEach(function(t,a){if(0===a){var i=t[0];if(20===i.type&&-1!==["top","left","right","bottom"].indexOf(i.value))return void(n=er(t));if($n(i))return void(n=(Zn.parse(e,i)+tr(270))%tr(360))}var s=fr(e,t);r.push(s)}),{angle:n,stops:r,type:1}},Cr="closest-side",kr="farthest-side",Br="closest-corner",Sr="farthest-corner",Ir="circle",Nr="ellipse",Fr="cover",Er="contain",_r=function(e,t){var n=0,r=3,a=[],i=[];return Mn(t).forEach(function(t,s){var o=!0;if(0===s?o=t.reduce(function(e,t){if(Ln(t))switch(t.value){case"center":return i.push(Wn),!1;case"top":case"left":return i.push(zn),!1;case"right":case"bottom":return i.push(Vn),!1}else if(jn(t)||Qn(t))return i.push(t),!1;return e},o):1===s&&(o=t.reduce(function(e,t){if(Ln(t))switch(t.value){case Ir:return n=0,!1;case Nr:return n=1,!1;case Er:case Cr:return r=0,!1;case kr:return r=1,!1;case Br:return r=2,!1;case Fr:case Sr:return r=3,!1}else if(Qn(t)||jn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e},o)),o){var l=fr(e,t);a.push(l)}}),{size:r,shape:n,stops:a,position:i,type:2}},Tr=function(e){return 1===e.type},Lr=function(e){return 2===e.type},Dr={name:"image",parse:function(e,t){if(22===t.type){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(18===t.type){var r=Or[t.name];if("undefined"===typeof r)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function Rr(e){return!(20===e.type&&"none"===e.value)&&(18!==e.type||!!Or[e.name])}var Ur,Or={"linear-gradient":function(e,t){var n=tr(180),r=[];return Mn(t).forEach(function(t,a){if(0===a){var i=t[0];if(20===i.type&&"to"===i.value)return void(n=er(t));if($n(i))return void(n=Zn.parse(e,i))}var s=fr(e,t);r.push(s)}),{angle:n,stops:r,type:1}},"-moz-linear-gradient":xr,"-ms-linear-gradient":xr,"-o-linear-gradient":xr,"-webkit-linear-gradient":xr,"radial-gradient":function(e,t){var n=0,r=3,a=[],i=[];return Mn(t).forEach(function(t,s){var o=!0;if(0===s){var l=!1;o=t.reduce(function(e,t){if(l)if(Ln(t))switch(t.value){case"center":return i.push(Wn),e;case"top":case"left":return i.push(zn),e;case"right":case"bottom":return i.push(Vn),e}else(jn(t)||Qn(t))&&i.push(t);else if(Ln(t))switch(t.value){case Ir:return n=0,!1;case Nr:return n=1,!1;case"at":return l=!0,!1;case Cr:return r=0,!1;case Fr:case kr:return r=1,!1;case Er:case Br:return r=2,!1;case Sr:return r=3,!1}else if(Qn(t)||jn(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e},o)}if(o){var c=fr(e,t);a.push(c)}}),{size:r,shape:n,stops:a,position:i,type:2}},"-moz-radial-gradient":_r,"-ms-radial-gradient":_r,"-o-radial-gradient":_r,"-webkit-radial-gradient":_r,"-webkit-gradient":function(e,t){var n=tr(180),r=[],a=1,i=0,s=3,o=[];return Mn(t).forEach(function(t,n){var i=t[0];if(0===n){if(Ln(i)&&"linear"===i.value)return void(a=1);if(Ln(i)&&"radial"===i.value)return void(a=2)}if(18===i.type)if("from"===i.name){var s=nr.parse(e,i.values[0]);r.push({stop:zn,color:s})}else if("to"===i.name)s=nr.parse(e,i.values[0]),r.push({stop:Vn,color:s});else if("color-stop"===i.name){var o=i.values.filter(On);if(2===o.length){s=nr.parse(e,o[1]);var l=o[0];Tn(l)&&r.push({stop:{type:16,number:100*l.number,flags:l.flags},color:s})}}}),1===a?{angle:(n+tr(180))%tr(360),stops:r,type:a}:{size:s,shape:i,stops:r,position:o,type:a}}},Mr={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t.filter(function(e){return On(e)&&Rr(e)}).map(function(t){return Dr.parse(e,t)})}},Pr={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(Ln(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Qr={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Mn(t).map(function(e){return e.filter(jn)}).map(Hn)}},jr={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Mn(t).map(function(e){return e.filter(Ln).map(function(e){return e.value}).join(" ")}).map(Hr)}},Hr=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(Ur||(Ur={}));var zr,Wr={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Mn(t).map(function(e){return e.filter(Vr)})}},Vr=function(e){return Ln(e)||jn(e)},Gr=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Kr=Gr("top"),qr=Gr("right"),Xr=Gr("bottom"),Jr=Gr("left"),Yr=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return Hn(t.filter(jn))}}},Zr=Yr("top-left"),$r=Yr("top-right"),ea=Yr("bottom-right"),ta=Yr("bottom-left"),na=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},ra=na("top"),aa=na("right"),ia=na("bottom"),sa=na("left"),oa=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return _n(t)?t.number:0}}},la=oa("top"),ca=oa("right"),ua=oa("bottom"),Aa=oa("left"),da={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ha={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},pa={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Ln).reduce(function(e,t){return e|fa(t.value)},0)}},fa=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ma={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},ga={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(zr||(zr={}));var ya,ba={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?zr.STRICT:zr.NORMAL}},wa={name:"line-height",initialValue:"normal",prefix:!1,type:4},va=function(e,t){return Ln(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:jn(e)?Kn(e,t):t},xa={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:Dr.parse(e,t)}},Ca={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},ka={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Ba=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Sa=Ba("top"),Ia=Ba("right"),Na=Ba("bottom"),Fa=Ba("left"),Ea={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Ln).map(function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},_a={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},Ta=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},La=Ta("top"),Da=Ta("right"),Ra=Ta("bottom"),Ua=Ta("left"),Oa={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Ma={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Pa={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Rn(t[0],"none")?[]:Mn(t).map(function(t){for(var n={color:dr.TRANSPARENT,offsetX:zn,offsetY:zn,blur:zn},r=0,a=0;a<t.length;a++){var i=t[a];Qn(i)?(0===r?n.offsetX=i:1===r?n.offsetY=i:n.blur=i,r++):n.color=nr.parse(e,i)}return n})}},Qa={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},ja={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var n=Ha[t.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},Ha={matrix:function(e){var t=e.filter(function(e){return 17===e.type}).map(function(e){return e.number});return 6===t.length?t:null},matrix3d:function(e){var t=e.filter(function(e){return 17===e.type}).map(function(e){return e.number}),n=t[0],r=t[1];t[2],t[3];var a=t[4],i=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var s=t[12],o=t[13];return t[14],t[15],16===t.length?[n,r,a,i,s,o]:null}},za={type:16,number:50,flags:Ve},Wa=[za,za],Va={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(jn);return 2!==n.length?Wa:[n[0],n[1]]}},Ga={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(ya||(ya={}));for(var Ka={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return ya.BREAK_ALL;case"keep-all":return ya.KEEP_ALL;default:return ya.NORMAL}}},qa={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(Tn(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Xa={name:"time",parse:function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},Ja={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return Tn(t)?t.number:1}},Ya={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Za={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Ln).map(function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(e){return 0!==e})}},$a={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],r=[];return t.forEach(function(e){switch(e.type){case 20:case 0:n.push(e.value);break;case 17:n.push(e.number.toString());break;case 4:r.push(n.join(" ")),n.length=0}}),n.length&&r.push(n.join(" ")),r.map(function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"})}},ei={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},ti={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return Tn(t)?t.number:Ln(t)&&"bold"===t.value?700:400}},ni={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Ln).map(function(e){return e.value})}},ri={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},ai=function(e,t){return 0!==(e&t)},ii={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t}},si={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;for(var r=[],a=t.filter(Un),i=0;i<a.length;i++){var s=a[i],o=a[i+1];if(20===s.type){var l=o&&Tn(o)?o.number:1;r.push({counter:s.value,increment:l})}}return r}},oi={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var n=[],r=t.filter(Un),a=0;a<r.length;a++){var i=r[a],s=r[a+1];if(Ln(i)&&"none"!==i.value){var o=s&&Tn(s)?s.number:0;n.push({counter:i.value,reset:o})}}return n}},li={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(_n).map(function(t){return Xa.parse(e,t)})}},ci={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;var r=[],a=t.filter(Dn);if(a.length%2!==0)return null;for(var i=0;i<a.length;i+=2){var s=a[i].value,o=a[i+1].value;r.push({open:s,close:o})}return r}},ui=function(e,t,n){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:""},Ai={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&Rn(t[0],"none")?[]:Mn(t).map(function(t){for(var n={color:255,offsetX:zn,offsetY:zn,blur:zn,spread:zn,inset:!1},r=0,a=0;a<t.length;a++){var i=t[a];Rn(i,"inset")?n.inset=!0:Qn(i)?(0===r?n.offsetX=i:1===r?n.offsetY=i:2===r?n.blur=i:n.spread=i,r++):n.color=nr.parse(e,i)}return n})}},di={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],r=[];return t.filter(Ln).forEach(function(e){switch(e.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2)}}),n.forEach(function(e){-1===r.indexOf(e)&&r.push(e)}),r}},hi={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},pi={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return _n(t)?t.number:0}},fi=function(){function e(e,t){var n,r;this.animationDuration=yi(e,li,t.animationDuration),this.backgroundClip=yi(e,hr,t.backgroundClip),this.backgroundColor=yi(e,pr,t.backgroundColor),this.backgroundImage=yi(e,Mr,t.backgroundImage),this.backgroundOrigin=yi(e,Pr,t.backgroundOrigin),this.backgroundPosition=yi(e,Qr,t.backgroundPosition),this.backgroundRepeat=yi(e,jr,t.backgroundRepeat),this.backgroundSize=yi(e,Wr,t.backgroundSize),this.borderTopColor=yi(e,Kr,t.borderTopColor),this.borderRightColor=yi(e,qr,t.borderRightColor),this.borderBottomColor=yi(e,Xr,t.borderBottomColor),this.borderLeftColor=yi(e,Jr,t.borderLeftColor),this.borderTopLeftRadius=yi(e,Zr,t.borderTopLeftRadius),this.borderTopRightRadius=yi(e,$r,t.borderTopRightRadius),this.borderBottomRightRadius=yi(e,ea,t.borderBottomRightRadius),this.borderBottomLeftRadius=yi(e,ta,t.borderBottomLeftRadius),this.borderTopStyle=yi(e,ra,t.borderTopStyle),this.borderRightStyle=yi(e,aa,t.borderRightStyle),this.borderBottomStyle=yi(e,ia,t.borderBottomStyle),this.borderLeftStyle=yi(e,sa,t.borderLeftStyle),this.borderTopWidth=yi(e,la,t.borderTopWidth),this.borderRightWidth=yi(e,ca,t.borderRightWidth),this.borderBottomWidth=yi(e,ua,t.borderBottomWidth),this.borderLeftWidth=yi(e,Aa,t.borderLeftWidth),this.boxShadow=yi(e,Ai,t.boxShadow),this.color=yi(e,da,t.color),this.direction=yi(e,ha,t.direction),this.display=yi(e,pa,t.display),this.float=yi(e,ma,t.cssFloat),this.fontFamily=yi(e,$a,t.fontFamily),this.fontSize=yi(e,ei,t.fontSize),this.fontStyle=yi(e,ri,t.fontStyle),this.fontVariant=yi(e,ni,t.fontVariant),this.fontWeight=yi(e,ti,t.fontWeight),this.letterSpacing=yi(e,ga,t.letterSpacing),this.lineBreak=yi(e,ba,t.lineBreak),this.lineHeight=yi(e,wa,t.lineHeight),this.listStyleImage=yi(e,xa,t.listStyleImage),this.listStylePosition=yi(e,Ca,t.listStylePosition),this.listStyleType=yi(e,ka,t.listStyleType),this.marginTop=yi(e,Sa,t.marginTop),this.marginRight=yi(e,Ia,t.marginRight),this.marginBottom=yi(e,Na,t.marginBottom),this.marginLeft=yi(e,Fa,t.marginLeft),this.opacity=yi(e,Ja,t.opacity);var a=yi(e,Ea,t.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=yi(e,_a,t.overflowWrap),this.paddingTop=yi(e,La,t.paddingTop),this.paddingRight=yi(e,Da,t.paddingRight),this.paddingBottom=yi(e,Ra,t.paddingBottom),this.paddingLeft=yi(e,Ua,t.paddingLeft),this.paintOrder=yi(e,di,t.paintOrder),this.position=yi(e,Ma,t.position),this.textAlign=yi(e,Oa,t.textAlign),this.textDecorationColor=yi(e,Ya,null!==(n=t.textDecorationColor)&&void 0!==n?n:t.color),this.textDecorationLine=yi(e,Za,null!==(r=t.textDecorationLine)&&void 0!==r?r:t.textDecoration),this.textShadow=yi(e,Pa,t.textShadow),this.textTransform=yi(e,Qa,t.textTransform),this.transform=yi(e,ja,t.transform),this.transformOrigin=yi(e,Va,t.transformOrigin),this.visibility=yi(e,Ga,t.visibility),this.webkitTextStrokeColor=yi(e,hi,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=yi(e,pi,t.webkitTextStrokeWidth),this.wordBreak=yi(e,Ka,t.wordBreak),this.zIndex=yi(e,qa,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return rr(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return ai(this.display,4)||ai(this.display,33554432)||ai(this.display,268435456)||ai(this.display,536870912)||ai(this.display,67108864)||ai(this.display,134217728)},e}(),mi=function(){function e(e,t){this.content=yi(e,ii,t.content),this.quotes=yi(e,ci,t.quotes)}return e}(),gi=function(){function e(e,t){this.counterIncrement=yi(e,si,t.counterIncrement),this.counterReset=yi(e,oi,t.counterReset)}return e}(),yi=function(e,t,n){var r=new Fn,a=null!==n&&"undefined"!==typeof n?n.toString():t.initialValue;r.write(a);var i=new En(r.read());switch(t.type){case 2:var s=i.parseComponentValue();return t.parse(e,Ln(s)?s.value:t.initialValue);case 0:return t.parse(e,i.parseComponentValue());case 1:return t.parse(e,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(t.format){case"angle":return Zn.parse(e,i.parseComponentValue());case"color":return nr.parse(e,i.parseComponentValue());case"image":return Dr.parse(e,i.parseComponentValue());case"length":var o=i.parseComponentValue();return Qn(o)?o:zn;case"length-percentage":var l=i.parseComponentValue();return jn(l)?l:zn;case"time":return Xa.parse(e,i.parseComponentValue())}}},bi="data-html2canvas-debug",wi=function(e){switch(e.getAttribute(bi)){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},vi=function(e,t){var n=wi(e);return 1===n||t===n},xi=function(){function e(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,vi(t,3),this.styles=new fi(e,window.getComputedStyle(t,null)),co(t)&&(this.styles.animationDuration.some(function(e){return e>0})&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=o(this.context,t),vi(t,4)&&(this.flags|=16)}return e}(),Ci="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",ki="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bi="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Si=0;Si<ki.length;Si++)Bi[ki.charCodeAt(Si)]=Si;for(var Ii=function(e){var t,n,r,a,i,s=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(s):new Array(s),u=Array.isArray(c)?c:new Uint8Array(c);for(t=0;t<o;t+=4)n=Bi[e.charCodeAt(t)],r=Bi[e.charCodeAt(t+1)],a=Bi[e.charCodeAt(t+2)],i=Bi[e.charCodeAt(t+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|a>>2,u[l++]=(3&a)<<6|63&i;return c},Ni=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},Fi=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},Ei=5,_i=11,Ti=2,Li=65536>>Ei,Di=(1<<Ei)-1,Ri=Li+(1024>>Ei)+32,Ui=65536>>_i,Oi=(1<<_i-Ei)-1,Mi=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},Pi=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},Qi=function(e,t){var n=Ii(e),r=Array.isArray(n)?Fi(n):new Uint32Array(n),a=Array.isArray(n)?Ni(n):new Uint16Array(n),i=24,s=Mi(a,i/2,r[4]/2),o=2===r[5]?Mi(a,(i+r[4])/2):Pi(r,Math.ceil((i+r[4])/4));return new ji(r[0],r[1],r[2],r[3],s,o)},ji=function(){function e(e,t,n,r,a,i){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=a,this.data=i}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>Ei])<<Ti)+(e&Di),this.data[t];if(e<=65535)return t=((t=this.index[Li+(e-55296>>Ei)])<<Ti)+(e&Di),this.data[t];if(e<this.highStart)return t=Ri-Ui+(e>>_i),t=this.index[t],t+=e>>Ei&Oi,t=((t=this.index[t])<<Ti)+(e&Di),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Hi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zi="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Wi=0;Wi<Hi.length;Wi++)zi[Hi.charCodeAt(Wi)]=Wi;var Vi,Gi=1,Ki=2,qi=3,Xi=4,Ji=5,Yi=7,Zi=8,$i=9,es=10,ts=11,ns=12,rs=13,as=14,is=15,ss=function(e){for(var t=[],n=0,r=e.length;n<r;){var a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){var i=e.charCodeAt(n++);56320===(64512&i)?t.push(((1023&a)<<10)+(1023&i)+65536):(t.push(a),n--)}else t.push(a)}return t},os=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],a=-1,i="";++a<n;){var s=e[a];s<=65535?r.push(s):(s-=65536,r.push(55296+(s>>10),s%1024+56320)),(a+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},ls=Qi(Ci),cs="\xd7",us="\xf7",As=function(e){return ls.get(e)},ds=function(e,t,n){var r=n-2,a=t[r],i=t[n-1],s=t[n];if(i===Ki&&s===qi)return cs;if(i===Ki||i===qi||i===Xi)return us;if(s===Ki||s===qi||s===Xi)return us;if(i===Zi&&-1!==[Zi,$i,ts,ns].indexOf(s))return cs;if((i===ts||i===$i)&&(s===$i||s===es))return cs;if((i===ns||i===es)&&s===es)return cs;if(s===rs||s===Ji)return cs;if(s===Yi)return cs;if(i===Gi)return cs;if(i===rs&&s===as){for(;a===Ji;)a=t[--r];if(a===as)return cs}if(i===is&&s===is){for(var o=0;a===is;)o++,a=t[--r];if(o%2===0)return cs}return us},hs=function(e){var t=ss(e),n=t.length,r=0,a=0,i=t.map(As);return{next:function(){if(r>=n)return{done:!0,value:null};for(var e=cs;r<n&&(e=ds(t,i,++r))===cs;);if(e!==cs||r===n){var s=os.apply(null,t.slice(a,r));return a=r,{value:s,done:!1}}return{done:!0,value:null}}}},ps=function(e){for(var t,n=hs(e),r=[];!(t=n.next()).done;)t.value&&r.push(t.value.slice());return r},fs=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var r=e.createElement("boundtest");r.style.height=t+"px",r.style.display="block",e.body.appendChild(r),n.selectNode(r);var a=n.getBoundingClientRect(),i=Math.round(a.height);if(e.body.removeChild(r),i===t)return!0}}return!1},ms=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML="function"===typeof"".repeat?"&#128104;".repeat(10):"";var r=t.firstChild,a=c(r.data).map(function(e){return u(e)}),i=0,s={},o=a.every(function(e,t){n.setStart(r,i),n.setEnd(r,i+e.length);var a=n.getBoundingClientRect();i+=e.length;var o=a.x>s.x||a.y>s.y;return s=a,0===t||o});return e.body.removeChild(t),o},gs=function(){return"undefined"!==typeof(new Image).crossOrigin},ys=function(){return"string"===typeof(new XMLHttpRequest).responseType},bs=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch(Ot){return!1}return!0},ws=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},vs=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var a=new Image,i=t.toDataURL();a.src=i;var s=xs(n,n,0,0,a);return r.fillStyle="red",r.fillRect(0,0,n,n),Cs(s).then(function(t){r.drawImage(t,0,0);var a=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var s=e.createElement("div");return s.style.backgroundImage="url("+i+")",s.style.height=n+"px",ws(a)?Cs(xs(n,n,0,0,s)):Promise.reject(!1)}).then(function(e){return r.drawImage(e,0,0),ws(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},xs=function(e,t,n,r,a){var i="http://www.w3.org/2000/svg",s=document.createElementNS(i,"svg"),o=document.createElementNS(i,"foreignObject");return s.setAttributeNS(null,"width",e.toString()),s.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",n.toString()),o.setAttributeNS(null,"y",r.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(o),o.appendChild(a),s},Cs=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},ks={get SUPPORT_RANGE_BOUNDS(){var e=fs(document);return Object.defineProperty(ks,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=ks.SUPPORT_RANGE_BOUNDS&&ms(document);return Object.defineProperty(ks,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=bs(document);return Object.defineProperty(ks,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"===typeof Array.from&&"function"===typeof window.fetch?vs(document):Promise.resolve(!1);return Object.defineProperty(ks,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=gs();return Object.defineProperty(ks,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=ys();return Object.defineProperty(ks,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ks,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"===typeof Intl||!Intl.Segmenter);return Object.defineProperty(ks,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Bs=function(){function e(e,t){this.text=e,this.bounds=t}return e}(),Ss=function(e,t,n,r){var a=_s(t,n),i=[],o=0;return a.forEach(function(t){if(n.textDecorationLine.length||t.trim().length>0)if(ks.SUPPORT_RANGE_BOUNDS){var a=Ns(r,o,t.length).getClientRects();if(a.length>1){var l=Fs(t),c=0;l.forEach(function(t){i.push(new Bs(t,s.fromDOMRectList(e,Ns(r,c+o,t.length).getClientRects()))),c+=t.length})}else i.push(new Bs(t,s.fromDOMRectList(e,a)))}else{var u=r.splitText(t.length);i.push(new Bs(t,Is(e,r))),r=u}else ks.SUPPORT_RANGE_BOUNDS||(r=r.splitText(t.length));o+=t.length}),i},Is=function(e,t){var n=t.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(r,t);var i=o(e,r);return r.firstChild&&a.replaceChild(r.firstChild,r),i}}return s.EMPTY},Ns=function(e,t,n){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var a=r.createRange();return a.setStart(e,t),a.setEnd(e,t+n),a},Fs=function(e){if(ks.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(e){return e.segment})}return ps(e)},Es=function(e,t){if(ks.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map(function(e){return e.segment})}return Ls(e,t)},_s=function(e,t){return 0!==t.letterSpacing?Fs(e):Es(e,t)},Ts=[32,160,4961,65792,65793,4153,4241],Ls=function(e,t){for(var n,r=He(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),a=[],i=function(){if(n.value){var e=n.value.slice(),t=c(e),r="";t.forEach(function(e){-1===Ts.indexOf(e)?r+=u(e):(r.length&&a.push(r),a.push(u(e)),r="")}),r.length&&a.push(r)}};!(n=r.next()).done;)i();return a},Ds=function(){function e(e,t,n){this.text=Rs(t.data,n.textTransform),this.textBounds=Ss(e,this.text,n,t)}return e}(),Rs=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(Us,Os);case 2:return e.toUpperCase();default:return e}},Us=/(^|\s|:|-|\(|\))([a-z])/g,Os=function(e,t,n){return e.length>0?t+n.toUpperCase():e},Ms=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return t(n,e),n}(xi),Ps=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return t(n,e),n}(xi),Qs=function(e){function n(t,n){var r=e.call(this,t,n)||this,a=new XMLSerializer,i=o(t,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return t(n,e),n}(xi),js=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(xi),Hs=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.start=n.start,r.reversed="boolean"===typeof n.reversed&&!0===n.reversed,r}return t(n,e),n}(xi),zs=[{type:15,flags:0,unit:"px",number:3}],Ws=[{type:16,flags:0,number:50}],Vs=function(e){return e.width>e.height?new s(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new s(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Gs=function(e){var t=e.type===Xs?new Array(e.value.length+1).join("\u2022"):e.value;return 0===t.length?e.placeholder||"":t},Ks="checkbox",qs="radio",Xs="password",Js=707406591,Ys=function(e){function n(t,n){var r=e.call(this,t,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=Gs(n),r.type!==Ks&&r.type!==qs||(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=Vs(r.bounds)),r.type){case Ks:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=zs;break;case qs:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=Ws}return r}return t(n,e),n}(xi),Zs=function(e){function n(t,n){var r=e.call(this,t,n)||this,a=n.options[n.selectedIndex||0];return r.value=a&&a.text||"",r}return t(n,e),n}(xi),$s=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return t(n,e),n}(xi),eo=function(e){function n(t,n){var r=e.call(this,t,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=ao(t,n.contentWindow.document.documentElement);var a=n.contentWindow.document.documentElement?Ar(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):dr.TRANSPARENT,i=n.contentWindow.document.body?Ar(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):dr.TRANSPARENT;r.backgroundColor=rr(a)?rr(i)?r.styles.backgroundColor:i:a}}catch(Ot){}return r}return t(n,e),n}(xi),to=["OL","UL","MENU"],no=function(e,t,n,r){for(var a=t.firstChild,i=void 0;a;a=i)if(i=a.nextSibling,oo(a)&&a.data.trim().length>0)n.textNodes.push(new Ds(e,a,n.styles));else if(lo(a))if(So(a)&&a.assignedNodes)a.assignedNodes().forEach(function(t){return no(e,t,n,r)});else{var s=ro(e,a);s.styles.isVisible()&&(io(a,s,r)?s.flags|=4:so(s.styles)&&(s.flags|=2),-1!==to.indexOf(a.tagName)&&(s.flags|=8),n.elements.push(s),a.slot,a.shadowRoot?no(e,a.shadowRoot,s,r):ko(a)||mo(a)||Bo(a)||no(e,a,s,r))}},ro=function(e,t){return wo(t)?new Ms(e,t):yo(t)?new Ps(e,t):mo(t)?new Qs(e,t):Ao(t)?new js(e,t):ho(t)?new Hs(e,t):po(t)?new Ys(e,t):Bo(t)?new Zs(e,t):ko(t)?new $s(e,t):vo(t)?new eo(e,t):new xi(e,t)},ao=function(e,t){var n=ro(e,t);return n.flags|=4,no(e,t,n,n),n},io=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||go(e)&&n.styles.isTransparent()},so=function(e){return e.isPositioned()||e.isFloating()},oo=function(e){return e.nodeType===Node.TEXT_NODE},lo=function(e){return e.nodeType===Node.ELEMENT_NODE},co=function(e){return lo(e)&&"undefined"!==typeof e.style&&!uo(e)},uo=function(e){return"object"===typeof e.className},Ao=function(e){return"LI"===e.tagName},ho=function(e){return"OL"===e.tagName},po=function(e){return"INPUT"===e.tagName},fo=function(e){return"HTML"===e.tagName},mo=function(e){return"svg"===e.tagName},go=function(e){return"BODY"===e.tagName},yo=function(e){return"CANVAS"===e.tagName},bo=function(e){return"VIDEO"===e.tagName},wo=function(e){return"IMG"===e.tagName},vo=function(e){return"IFRAME"===e.tagName},xo=function(e){return"STYLE"===e.tagName},Co=function(e){return"SCRIPT"===e.tagName},ko=function(e){return"TEXTAREA"===e.tagName},Bo=function(e){return"SELECT"===e.tagName},So=function(e){return"SLOT"===e.tagName},Io=function(e){return e.tagName.indexOf("-")>0},No=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach(function(e){return t.counters[e].pop()})},e.prototype.parse=function(e){var t=this,n=e.counterIncrement,r=e.counterReset,a=!0;null!==n&&n.forEach(function(e){var n=t.counters[e.counter];n&&0!==e.increment&&(a=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=e.increment)});var i=[];return a&&r.forEach(function(e){var n=t.counters[e.counter];i.push(e.counter),n||(n=t.counters[e.counter]=[]),n.push(e.reset)}),i},e}(),Fo={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Eo={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},_o={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},To={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},Lo=function(e,t,n,r,a,i){return e<t||e>n?Go(e,a,i.length>0):r.integers.reduce(function(t,n,a){for(;e>=n;)e-=n,t+=r.values[a];return t},"")+i},Do=function(e,t,n,r){var a="";do{n||e--,a=r(e)+a,e/=t}while(e*t>=t);return a},Ro=function(e,t,n,r,a){var i=n-t+1;return(e<0?"-":"")+(Do(Math.abs(e),i,r,function(e){return u(Math.floor(e%i)+t)})+a)},Uo=function(e,t,n){void 0===n&&(n=". ");var r=t.length;return Do(Math.abs(e),r,!1,function(e){return t[Math.floor(e%r)]})+n},Oo=1,Mo=2,Po=4,Qo=8,jo=function(e,t,n,r,a,i){if(e<-9999||e>9999)return Go(e,4,a.length>0);var s=Math.abs(e),o=a;if(0===s)return t[0]+o;for(var l=0;s>0&&l<=4;l++){var c=s%10;0===c&&ai(i,Oo)&&""!==o?o=t[c]+o:c>1||1===c&&0===l||1===c&&1===l&&ai(i,Mo)||1===c&&1===l&&ai(i,Po)&&e>100||1===c&&l>1&&ai(i,Qo)?o=t[c]+(l>0?n[l-1]:"")+o:1===c&&l>0&&(o=n[l-1]+o),s=Math.floor(s/10)}return(e<0?r:"")+o},Ho="\u5341\u767e\u5343\u842c",zo="\u62fe\u4f70\u4edf\u842c",Wo="\u30de\u30a4\u30ca\u30b9",Vo="\ub9c8\uc774\ub108\uc2a4",Go=function(e,t,n){var r=n?". ":"",a=n?"\u3001":"",i=n?", ":"",s=n?" ":"";switch(t){case 0:return"\u2022"+s;case 1:return"\u25e6"+s;case 2:return"\u25fe"+s;case 5:var o=Ro(e,48,57,!0,r);return o.length<4?"0"+o:o;case 4:return Uo(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",a);case 6:return Lo(e,1,3999,Fo,3,r).toLowerCase();case 7:return Lo(e,1,3999,Fo,3,r);case 8:return Ro(e,945,969,!1,r);case 9:return Ro(e,97,122,!1,r);case 10:return Ro(e,65,90,!1,r);case 11:return Ro(e,1632,1641,!0,r);case 12:case 49:return Lo(e,1,9999,Eo,3,r);case 35:return Lo(e,1,9999,Eo,3,r).toLowerCase();case 13:return Ro(e,2534,2543,!0,r);case 14:case 30:return Ro(e,6112,6121,!0,r);case 15:return Uo(e,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",a);case 16:return Uo(e,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",a);case 17:case 48:return jo(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",Ho,"\u8ca0",a,Mo|Po|Qo);case 47:return jo(e,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396",zo,"\u8ca0",a,Oo|Mo|Po|Qo);case 42:return jo(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",Ho,"\u8d1f",a,Mo|Po|Qo);case 41:return jo(e,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396",zo,"\u8d1f",a,Oo|Mo|Po|Qo);case 26:return jo(e,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07",Wo,a,0);case 25:return jo(e,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07",Wo,a,Oo|Mo|Po);case 31:return jo(e,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",Vo,i,Oo|Mo|Po);case 33:return jo(e,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",Vo,i,0);case 32:return jo(e,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",Vo,i,Oo|Mo|Po);case 18:return Ro(e,2406,2415,!0,r);case 20:return Lo(e,1,19999,To,3,r);case 21:return Ro(e,2790,2799,!0,r);case 22:return Ro(e,2662,2671,!0,r);case 22:return Lo(e,1,10999,_o,3,r);case 23:return Uo(e,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case 24:return Uo(e,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case 27:return Ro(e,3302,3311,!0,r);case 28:return Uo(e,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",a);case 29:return Uo(e,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",a);case 34:return Ro(e,3792,3801,!0,r);case 37:return Ro(e,6160,6169,!0,r);case 38:return Ro(e,4160,4169,!0,r);case 39:return Ro(e,2918,2927,!0,r);case 40:return Ro(e,1776,1785,!0,r);case 43:return Ro(e,3046,3055,!0,r);case 44:return Ro(e,3174,3183,!0,r);case 45:return Ro(e,3664,3673,!0,r);case 46:return Ro(e,3872,3881,!0,r);default:return Ro(e,48,57,!0,r)}},Ko="data-html2canvas-ignore",qo=function(){function e(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new No,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var n=this,i=Jo(e,t);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var s=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,l=i.contentWindow,c=l.document,u=$o(i).then(function(){return r(n,void 0,void 0,function(){var e,n;return a(this,function(r){switch(r.label){case 0:return this.scrolledElements.forEach(al),l&&(l.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||l.scrollY===t.top&&l.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-t.left,l.scrollY-t.top,0,0))),e=this.options.onclone,"undefined"===typeof(n=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Zo(c)]:[3,4];case 3:r.sent(),r.label=4;case 4:return"function"===typeof e?[2,Promise.resolve().then(function(){return e(c,n)}).then(function(){return i})]:[2,i]}})})});return c.open(),c.write(nl(document.doctype)+"<html></html>"),rl(this.referenceElement.ownerDocument,s,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(e){if(vi(e,2),yo(e))return this.createCanvasClone(e);if(bo(e))return this.createVideoClone(e);if(xo(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return wo(t)&&(wo(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),Io(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return tl(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce(function(e,t){return t&&"string"===typeof t.cssText?e+t.cssText:e},""),r=e.cloneNode(!1);return r.textContent=n,r}}catch(Ot){if(this.context.logger.error("Unable to access cssRules property",Ot),"SecurityError"!==Ot.name)throw Ot}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch(Ot){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var r=e.cloneNode(!1);try{r.width=e.width,r.height=e.height;var a=e.getContext("2d"),i=r.getContext("2d");if(i)if(!this.options.allowTaint&&a)i.putImageData(a.getImageData(0,0,e.width,e.height),0,0);else{var s=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(s){var o=s.getContextAttributes();!1===(null===o||void 0===o?void 0:o.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return r}catch(Ot){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return r},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch(Ot){this.context.logger.info("Unable to clone video as it is tainted",e)}var r=e.ownerDocument.createElement("canvas");return r.width=e.offsetWidth,r.height=e.offsetHeight,r},e.prototype.appendChildNode=function(e,t,n){lo(t)&&(Co(t)||t.hasAttribute(Ko)||"function"===typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&lo(t)&&xo(t)||e.appendChild(this.cloneNode(t,n))},e.prototype.cloneChildNodes=function(e,t,n){for(var r=this,a=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;a;a=a.nextSibling)if(lo(a)&&So(a)&&"function"===typeof a.assignedNodes){var i=a.assignedNodes();i.length&&i.forEach(function(e){return r.appendChildNode(t,e,n)})}else this.appendChildNode(t,a,n)},e.prototype.cloneNode=function(e,t){if(oo(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&lo(e)&&(co(e)||uo(e))){var r=this.createElementClone(e);r.style.transitionProperty="none";var a=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),s=n.getComputedStyle(e,":after");this.referenceElement===e&&co(r)&&(this.clonedReferenceElement=r),go(r)&&ul(r);var o=this.counters.parse(new gi(this.context,a)),l=this.resolvePseudoContent(e,r,i,Vi.BEFORE);Io(e)&&(t=!0),bo(e)||this.cloneChildNodes(e,r,t),l&&r.insertBefore(l,r.firstChild);var c=this.resolvePseudoContent(e,r,s,Vi.AFTER);return c&&r.appendChild(c),this.counters.pop(o),(a&&(this.options.copyStyles||uo(e))&&!vo(e)||t)&&tl(a,r),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(ko(e)||Bo(e))&&(ko(r)||Bo(r))&&(r.value=e.value),r}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,n,r){var a=this;if(n){var i=n.content,s=t.ownerDocument;if(s&&i&&"none"!==i&&"-moz-alt-content"!==i&&"none"!==n.display){this.counters.parse(new gi(this.context,n));var o=new mi(this.context,n),l=s.createElement("html2canvaspseudoelement");tl(n,l),o.content.forEach(function(t){if(0===t.type)l.appendChild(s.createTextNode(t.value));else if(22===t.type){var n=s.createElement("img");n.src=t.value,n.style.opacity="1",l.appendChild(n)}else if(18===t.type){if("attr"===t.name){var r=t.values.filter(Ln);r.length&&l.appendChild(s.createTextNode(e.getAttribute(r[0].value)||""))}else if("counter"===t.name){var i=t.values.filter(On),c=i[0],u=i[1];if(c&&Ln(c)){var A=a.counters.getCounterValue(c.value),d=u&&Ln(u)?ka.parse(a.context,u.value):3;l.appendChild(s.createTextNode(Go(A,d,!1)))}}else if("counters"===t.name){var h=t.values.filter(On),p=(c=h[0],h[1]);if(u=h[2],c&&Ln(c)){var f=a.counters.getCounterValues(c.value),m=u&&Ln(u)?ka.parse(a.context,u.value):3,g=p&&0===p.type?p.value:"",y=f.map(function(e){return Go(e,m,!1)}).join(g);l.appendChild(s.createTextNode(y))}}}else if(20===t.type)switch(t.value){case"open-quote":l.appendChild(s.createTextNode(ui(o.quotes,a.quoteDepth++,!0)));break;case"close-quote":l.appendChild(s.createTextNode(ui(o.quotes,--a.quoteDepth,!1)));break;default:l.appendChild(s.createTextNode(t.value))}}),l.className=ol+" "+ll;var c=r===Vi.BEFORE?" "+ol:" "+ll;return uo(t)?t.className.baseValue+=c:t.className+=c,l}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(Vi||(Vi={}));var Xo,Jo=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(Ko,"true"),e.body.appendChild(n),n},Yo=function(e){return new Promise(function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()})},Zo=function(e){return Promise.all([].slice.call(e.images,0).map(Yo))},$o=function(e){return new Promise(function(t,n){var r=e.contentWindow;if(!r)return n("No window assigned for iframe");var a=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var n=setInterval(function(){a.body.childNodes.length>0&&"complete"===a.readyState&&(clearInterval(n),t(e))},50)}})},el=["all","d","content"],tl=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);-1===el.indexOf(r)&&t.style.setProperty(r,e.getPropertyValue(r))}return t},nl=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},rl=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},al=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},il=":before",sl=":after",ol="___html2canvas___pseudoelement_before",ll="___html2canvas___pseudoelement_after",cl='{\n    content: "" !important;\n    display: none !important;\n}',ul=function(e){Al(e,"."+ol+il+cl+"\n         ."+ll+sl+cl)},Al=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement("style");r.textContent=t,e.appendChild(r)}},dl=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),hl=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:wl(e)||gl(e)?((this._cache[e]=this.loadImage(e)).catch(function(){}),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return r(this,void 0,void 0,function(){var t,n,r,i,s=this;return a(this,function(a){switch(a.label){case 0:return t=dl.isSameOrigin(e),n=!yl(e)&&!0===this._options.useCORS&&ks.SUPPORT_CORS_IMAGES&&!t,r=!yl(e)&&!t&&!wl(e)&&"string"===typeof this._options.proxy&&ks.SUPPORT_CORS_XHR&&!n,t||!1!==this._options.allowTaint||yl(e)||wl(e)||r||n?(i=e,r?[4,this.proxy(i)]:[3,2]):[2];case 1:i=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,(bl(i)||n)&&(r.crossOrigin="anonymous"),r.src=i,!0===r.complete&&setTimeout(function(){return e(r)},500),s._options.imageTimeout>0&&setTimeout(function(){return t("Timed out ("+s._options.imageTimeout+"ms) loading image")},s._options.imageTimeout)})];case 3:return[2,a.sent()]}})})},e.prototype.has=function(e){return"undefined"!==typeof this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=e.substring(0,256);return new Promise(function(a,i){var s=ks.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(200===o.status)if("text"===s)a(o.response);else{var e=new FileReader;e.addEventListener("load",function(){return a(e.result)},!1),e.addEventListener("error",function(e){return i(e)},!1),e.readAsDataURL(o.response)}else i("Failed to proxy resource "+r+" with status code "+o.status)},o.onerror=i;var l=n.indexOf("?")>-1?"&":"?";if(o.open("GET",""+n+l+"url="+encodeURIComponent(e)+"&responseType="+s),"text"!==s&&o instanceof XMLHttpRequest&&(o.responseType=s),t._options.imageTimeout){var c=t._options.imageTimeout;o.timeout=c,o.ontimeout=function(){return i("Timed out ("+c+"ms) proxying "+r)}}o.send()})},e}(),pl=/^data:image\/svg\+xml/i,fl=/^data:image\/.*;base64,/i,ml=/^data:image\/.*/i,gl=function(e){return ks.SUPPORT_SVG_DRAWING||!vl(e)},yl=function(e){return ml.test(e)},bl=function(e){return fl.test(e)},wl=function(e){return"blob"===e.substr(0,4)},vl=function(e){return"svg"===e.substr(-3).toLowerCase()||pl.test(e)},xl=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),Cl=function(e,t,n){return new xl(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},kl=function(){function e(e,t,n,r){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=r}return e.prototype.subdivide=function(t,n){var r=Cl(this.start,this.startControl,t),a=Cl(this.startControl,this.endControl,t),i=Cl(this.endControl,this.end,t),s=Cl(r,a,t),o=Cl(a,i,t),l=Cl(s,o,t);return n?new e(this.start,r,s,l):new e(l,o,i,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Bl=function(e){return 1===e.type},Sl=function(){function e(e){var t=e.styles,n=e.bounds,r=Gn(t.borderTopLeftRadius,n.width,n.height),a=r[0],i=r[1],s=Gn(t.borderTopRightRadius,n.width,n.height),o=s[0],l=s[1],c=Gn(t.borderBottomRightRadius,n.width,n.height),u=c[0],A=c[1],d=Gn(t.borderBottomLeftRadius,n.width,n.height),h=d[0],p=d[1],f=[];f.push((a+o)/n.width),f.push((h+u)/n.width),f.push((i+p)/n.height),f.push((l+A)/n.height);var m=Math.max.apply(Math,f);m>1&&(a/=m,i/=m,o/=m,l/=m,u/=m,A/=m,h/=m,p/=m);var g=n.width-o,y=n.height-A,b=n.width-u,w=n.height-p,v=t.borderTopWidth,x=t.borderRightWidth,C=t.borderBottomWidth,k=t.borderLeftWidth,B=Kn(t.paddingTop,e.bounds.width),S=Kn(t.paddingRight,e.bounds.width),I=Kn(t.paddingBottom,e.bounds.width),N=Kn(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||i>0?Il(n.left+k/3,n.top+v/3,a-k/3,i-v/3,Xo.TOP_LEFT):new xl(n.left+k/3,n.top+v/3),this.topRightBorderDoubleOuterBox=a>0||i>0?Il(n.left+g,n.top+v/3,o-x/3,l-v/3,Xo.TOP_RIGHT):new xl(n.left+n.width-x/3,n.top+v/3),this.bottomRightBorderDoubleOuterBox=u>0||A>0?Il(n.left+b,n.top+y,u-x/3,A-C/3,Xo.BOTTOM_RIGHT):new xl(n.left+n.width-x/3,n.top+n.height-C/3),this.bottomLeftBorderDoubleOuterBox=h>0||p>0?Il(n.left+k/3,n.top+w,h-k/3,p-C/3,Xo.BOTTOM_LEFT):new xl(n.left+k/3,n.top+n.height-C/3),this.topLeftBorderDoubleInnerBox=a>0||i>0?Il(n.left+2*k/3,n.top+2*v/3,a-2*k/3,i-2*v/3,Xo.TOP_LEFT):new xl(n.left+2*k/3,n.top+2*v/3),this.topRightBorderDoubleInnerBox=a>0||i>0?Il(n.left+g,n.top+2*v/3,o-2*x/3,l-2*v/3,Xo.TOP_RIGHT):new xl(n.left+n.width-2*x/3,n.top+2*v/3),this.bottomRightBorderDoubleInnerBox=u>0||A>0?Il(n.left+b,n.top+y,u-2*x/3,A-2*C/3,Xo.BOTTOM_RIGHT):new xl(n.left+n.width-2*x/3,n.top+n.height-2*C/3),this.bottomLeftBorderDoubleInnerBox=h>0||p>0?Il(n.left+2*k/3,n.top+w,h-2*k/3,p-2*C/3,Xo.BOTTOM_LEFT):new xl(n.left+2*k/3,n.top+n.height-2*C/3),this.topLeftBorderStroke=a>0||i>0?Il(n.left+k/2,n.top+v/2,a-k/2,i-v/2,Xo.TOP_LEFT):new xl(n.left+k/2,n.top+v/2),this.topRightBorderStroke=a>0||i>0?Il(n.left+g,n.top+v/2,o-x/2,l-v/2,Xo.TOP_RIGHT):new xl(n.left+n.width-x/2,n.top+v/2),this.bottomRightBorderStroke=u>0||A>0?Il(n.left+b,n.top+y,u-x/2,A-C/2,Xo.BOTTOM_RIGHT):new xl(n.left+n.width-x/2,n.top+n.height-C/2),this.bottomLeftBorderStroke=h>0||p>0?Il(n.left+k/2,n.top+w,h-k/2,p-C/2,Xo.BOTTOM_LEFT):new xl(n.left+k/2,n.top+n.height-C/2),this.topLeftBorderBox=a>0||i>0?Il(n.left,n.top,a,i,Xo.TOP_LEFT):new xl(n.left,n.top),this.topRightBorderBox=o>0||l>0?Il(n.left+g,n.top,o,l,Xo.TOP_RIGHT):new xl(n.left+n.width,n.top),this.bottomRightBorderBox=u>0||A>0?Il(n.left+b,n.top+y,u,A,Xo.BOTTOM_RIGHT):new xl(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=h>0||p>0?Il(n.left,n.top+w,h,p,Xo.BOTTOM_LEFT):new xl(n.left,n.top+n.height),this.topLeftPaddingBox=a>0||i>0?Il(n.left+k,n.top+v,Math.max(0,a-k),Math.max(0,i-v),Xo.TOP_LEFT):new xl(n.left+k,n.top+v),this.topRightPaddingBox=o>0||l>0?Il(n.left+Math.min(g,n.width-x),n.top+v,g>n.width+x?0:Math.max(0,o-x),Math.max(0,l-v),Xo.TOP_RIGHT):new xl(n.left+n.width-x,n.top+v),this.bottomRightPaddingBox=u>0||A>0?Il(n.left+Math.min(b,n.width-k),n.top+Math.min(y,n.height-C),Math.max(0,u-x),Math.max(0,A-C),Xo.BOTTOM_RIGHT):new xl(n.left+n.width-x,n.top+n.height-C),this.bottomLeftPaddingBox=h>0||p>0?Il(n.left+k,n.top+Math.min(w,n.height-C),Math.max(0,h-k),Math.max(0,p-C),Xo.BOTTOM_LEFT):new xl(n.left+k,n.top+n.height-C),this.topLeftContentBox=a>0||i>0?Il(n.left+k+N,n.top+v+B,Math.max(0,a-(k+N)),Math.max(0,i-(v+B)),Xo.TOP_LEFT):new xl(n.left+k+N,n.top+v+B),this.topRightContentBox=o>0||l>0?Il(n.left+Math.min(g,n.width+k+N),n.top+v+B,g>n.width+k+N?0:o-k+N,l-(v+B),Xo.TOP_RIGHT):new xl(n.left+n.width-(x+S),n.top+v+B),this.bottomRightContentBox=u>0||A>0?Il(n.left+Math.min(b,n.width-(k+N)),n.top+Math.min(y,n.height+v+B),Math.max(0,u-(x+S)),A-(C+I),Xo.BOTTOM_RIGHT):new xl(n.left+n.width-(x+S),n.top+n.height-(C+I)),this.bottomLeftContentBox=h>0||p>0?Il(n.left+k+N,n.top+w,Math.max(0,h-(k+N)),p-(C+I),Xo.BOTTOM_LEFT):new xl(n.left+k+N,n.top+n.height-(C+I))}return e}();!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(Xo||(Xo={}));var Il=function(e,t,n,r,a){var i=(Math.sqrt(2)-1)/3*4,s=n*i,o=r*i,l=e+n,c=t+r;switch(a){case Xo.TOP_LEFT:return new kl(new xl(e,c),new xl(e,c-o),new xl(l-s,t),new xl(l,t));case Xo.TOP_RIGHT:return new kl(new xl(e,t),new xl(e+s,t),new xl(l,c-o),new xl(l,c));case Xo.BOTTOM_RIGHT:return new kl(new xl(l,t),new xl(l,t+o),new xl(e+s,c),new xl(e,c));case Xo.BOTTOM_LEFT:default:return new kl(new xl(l,c),new xl(l-s,c),new xl(e,t+o),new xl(e,t))}},Nl=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Fl=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},El=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},_l=function(){function e(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return e}(),Tl=function(){function e(e,t){this.path=e,this.target=t,this.type=1}return e}(),Ll=function(){function e(e){this.opacity=e,this.type=2,this.target=6}return e}(),Dl=function(e){return 0===e.type},Rl=function(e){return 1===e.type},Ul=function(e){return 2===e.type},Ol=function(e,t){return e.length===t.length&&e.some(function(e,n){return e===t[n]})},Ml=function(e,t,n,r,a){return e.map(function(e,i){switch(i){case 0:return e.add(t,n);case 1:return e.add(t+r,n);case 2:return e.add(t+r,n+a);case 3:return e.add(t,n+a)}return e})},Pl=function(){function e(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Ql=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Sl(this.container),this.container.styles.opacity<1&&this.effects.push(new Ll(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new _l(n,r,a))}if(0!==this.container.styles.overflowX){var i=Nl(this.curves),s=El(this.curves);Ol(i,s)?this.effects.push(new Tl(i,6)):(this.effects.push(new Tl(i,2)),this.effects.push(new Tl(s,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,r=this.effects.slice(0);n;){var a=n.effects.filter(function(e){return!Rl(e)});if(t||0!==n.container.styles.position||!n.parent){if(r.unshift.apply(r,a),t=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var i=Nl(n.curves),s=El(n.curves);Ol(i,s)||r.unshift(new Tl(s,6))}}else r.unshift.apply(r,a);n=n.parent}return r.filter(function(t){return ai(t.target,e)})},e}(),jl=function(e,t,n,r){e.container.elements.forEach(function(a){var i=ai(a.flags,4),s=ai(a.flags,2),o=new Ql(a,e);ai(a.styles.display,2048)&&r.push(o);var l=ai(a.flags,8)?[]:r;if(i||s){var c=i||a.styles.isPositioned()?n:t,u=new Pl(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var A=a.styles.zIndex.order;if(A<0){var d=0;c.negativeZIndex.some(function(e,t){return A>e.element.container.styles.zIndex.order?(d=t,!1):d>0}),c.negativeZIndex.splice(d,0,u)}else if(A>0){var h=0;c.positiveZIndex.some(function(e,t){return A>=e.element.container.styles.zIndex.order?(h=t+1,!1):h>0}),c.positiveZIndex.splice(h,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else a.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);jl(o,u,i?u:n,l)}else a.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),jl(o,t,n,l);ai(a.flags,8)&&Hl(a,l)})},Hl=function(e,t){for(var n=e instanceof Hs?e.start:1,r=e instanceof Hs&&e.reversed,a=0;a<t.length;a++){var i=t[a];i.container instanceof js&&"number"===typeof i.container.value&&0!==i.container.value&&(n=i.container.value),i.listValue=Go(n,i.container.styles.listStyleType,!0),n+=r?-1:1}},zl=function(e){var t=new Ql(e,null),n=new Pl(t),r=[];return jl(t,n,n,r),Hl(t.container,r),n},Wl=function(e,t){switch(t){case 0:return Xl(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Xl(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Xl(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return Xl(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Vl=function(e,t){switch(t){case 0:return Xl(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Xl(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Xl(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return Xl(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Gl=function(e,t){switch(t){case 0:return Xl(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Xl(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Xl(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return Xl(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Kl=function(e,t){switch(t){case 0:return ql(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return ql(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return ql(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return ql(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},ql=function(e,t){var n=[];return Bl(e)?n.push(e.subdivide(.5,!1)):n.push(e),Bl(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},Xl=function(e,t,n,r){var a=[];return Bl(e)?a.push(e.subdivide(.5,!1)):a.push(e),Bl(n)?a.push(n.subdivide(.5,!0)):a.push(n),Bl(r)?a.push(r.subdivide(.5,!0).reverse()):a.push(r),Bl(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},Jl=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},Yl=function(e){var t=e.styles,n=e.bounds,r=Kn(t.paddingLeft,n.width),a=Kn(t.paddingRight,n.width),i=Kn(t.paddingTop,n.width),s=Kn(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,i+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+a),-(t.borderTopWidth+t.borderBottomWidth+i+s))},Zl=function(e,t){return 0===e?t.bounds:2===e?Yl(t):Jl(t)},$l=function(e,t){return 0===e?t.bounds:2===e?Yl(t):Jl(t)},ec=function(e,t,n){var r=Zl(ac(e.styles.backgroundOrigin,t),e),a=$l(ac(e.styles.backgroundClip,t),e),i=rc(ac(e.styles.backgroundSize,t),n,r),s=i[0],o=i[1],l=Gn(ac(e.styles.backgroundPosition,t),r.width-s,r.height-o);return[ic(ac(e.styles.backgroundRepeat,t),l,i,r,a),Math.round(r.left+l[0]),Math.round(r.top+l[1]),s,o]},tc=function(e){return Ln(e)&&e.value===Ur.AUTO},nc=function(e){return"number"===typeof e},rc=function(e,t,n){var r=t[0],a=t[1],i=t[2],s=e[0],o=e[1];if(!s)return[0,0];if(jn(s)&&o&&jn(o))return[Kn(s,n.width),Kn(o,n.height)];var l=nc(i);if(Ln(s)&&(s.value===Ur.CONTAIN||s.value===Ur.COVER))return nc(i)?n.width/n.height<i!==(s.value===Ur.COVER)?[n.width,n.width/i]:[n.height*i,n.height]:[n.width,n.height];var c=nc(r),u=nc(a),A=c||u;if(tc(s)&&(!o||tc(o)))return c&&u?[r,a]:l||A?A&&l?[c?r:a*i,u?a:r/i]:[c?r:n.width,u?a:n.height]:[n.width,n.height];if(l){var d=0,h=0;return jn(s)?d=Kn(s,n.width):jn(o)&&(h=Kn(o,n.height)),tc(s)?d=h*i:o&&!tc(o)||(h=d/i),[d,h]}var p=null,f=null;if(jn(s)?p=Kn(s,n.width):o&&jn(o)&&(f=Kn(o,n.height)),null===p||o&&!tc(o)||(f=c&&u?p/r*a:n.height),null!==f&&tc(s)&&(p=c&&u?f/a*r:n.width),null!==p&&null!==f)return[p,f];throw new Error("Unable to calculate background-size for element")},ac=function(e,t){var n=e[t];return"undefined"===typeof n?e[0]:n},ic=function(e,t,n,r,a){var i=t[0],s=t[1],o=n[0],l=n[1];switch(e){case 2:return[new xl(Math.round(r.left),Math.round(r.top+s)),new xl(Math.round(r.left+r.width),Math.round(r.top+s)),new xl(Math.round(r.left+r.width),Math.round(l+r.top+s)),new xl(Math.round(r.left),Math.round(l+r.top+s))];case 3:return[new xl(Math.round(r.left+i),Math.round(r.top)),new xl(Math.round(r.left+i+o),Math.round(r.top)),new xl(Math.round(r.left+i+o),Math.round(r.height+r.top)),new xl(Math.round(r.left+i),Math.round(r.height+r.top))];case 1:return[new xl(Math.round(r.left+i),Math.round(r.top+s)),new xl(Math.round(r.left+i+o),Math.round(r.top+s)),new xl(Math.round(r.left+i+o),Math.round(r.top+s+l)),new xl(Math.round(r.left+i),Math.round(r.top+s+l))];default:return[new xl(Math.round(a.left),Math.round(a.top)),new xl(Math.round(a.left+a.width),Math.round(a.top)),new xl(Math.round(a.left+a.width),Math.round(a.height+a.top)),new xl(Math.round(a.left),Math.round(a.height+a.top))]}},sc="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",oc="Hidden Text",lc=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),r=this._document.createElement("img"),a=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),r.src=sc,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=t,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(oc)),n.appendChild(a),n.appendChild(r);var s=r.offsetTop-a.offsetTop+2;n.removeChild(a),n.appendChild(this._document.createTextNode(oc)),n.style.lineHeight="normal",r.style.verticalAlign="super";var o=r.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:s,middle:o}},e.prototype.getMetrics=function(e,t){var n=e+" "+t;return"undefined"===typeof this._data[n]&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},e}(),cc=function(){function e(e,t){this.context=e,this.options=t}return e}(),uc=1e4,Ac=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new lc(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return t(n,e),n.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach(function(e){return t.applyEffect(e)})},n.prototype.applyEffect=function(e){this.ctx.save(),Ul(e)&&(this.ctx.globalAlpha=e.opacity),Dl(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),Rl(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(e){return r(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.renderNode=function(e){return r(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return ai(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},n.prototype.renderTextWithLetterSpacing=function(e,t,n){var r=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n):Fs(e.text).reduce(function(t,a){return r.ctx.fillText(a,t,e.bounds.top+n),t+r.ctx.measureText(a).width},e.bounds.left)},n.prototype.createFontStyle=function(e){var t=e.fontVariant.filter(function(e){return"normal"===e||"small-caps"===e}).join(""),n=mc(e.fontFamily).join(", "),r=_n(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,r,n].join(" "),n,r]},n.prototype.renderTextNode=function(e,t){return r(this,void 0,void 0,function(){var n,r,i,s,o,l,c,u,A=this;return a(this,function(a){return n=this.createFontStyle(t),r=n[0],i=n[1],s=n[2],this.ctx.font=r,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(i,s),l=o.baseline,c=o.middle,u=t.paintOrder,e.textBounds.forEach(function(e){u.forEach(function(n){switch(n){case 0:A.ctx.fillStyle=ar(t.color),A.renderTextWithLetterSpacing(e,t.letterSpacing,l);var r=t.textShadow;r.length&&e.text.trim().length&&(r.slice(0).reverse().forEach(function(n){A.ctx.shadowColor=ar(n.color),A.ctx.shadowOffsetX=n.offsetX.number*A.options.scale,A.ctx.shadowOffsetY=n.offsetY.number*A.options.scale,A.ctx.shadowBlur=n.blur.number,A.renderTextWithLetterSpacing(e,t.letterSpacing,l)}),A.ctx.shadowColor="",A.ctx.shadowOffsetX=0,A.ctx.shadowOffsetY=0,A.ctx.shadowBlur=0),t.textDecorationLine.length&&(A.ctx.fillStyle=ar(t.textDecorationColor||t.color),t.textDecorationLine.forEach(function(t){switch(t){case 1:A.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+l),e.bounds.width,1);break;case 2:A.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:A.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+c),e.bounds.width,1)}}));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(A.ctx.strokeStyle=ar(t.webkitTextStrokeColor),A.ctx.lineWidth=t.webkitTextStrokeWidth,A.ctx.lineJoin=window.chrome?"miter":"round",A.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+l)),A.ctx.strokeStyle="",A.ctx.lineWidth=0,A.ctx.lineJoin="miter"}})}),[2]})})},n.prototype.renderReplacedElement=function(e,t,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var r=Yl(e),a=El(t);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(e){return r(this,void 0,void 0,function(){var t,r,i,o,l,c,u,A,d,h,p,f,m,g,y,b,w,v;return a(this,function(a){switch(a.label){case 0:this.applyEffects(e.getEffects(4)),t=e.container,r=e.curves,i=t.styles,o=0,l=t.textNodes,a.label=1;case 1:return o<l.length?(c=l[o],[4,this.renderTextNode(c,i)]):[3,4];case 2:a.sent(),a.label=3;case 3:return o++,[3,1];case 4:if(!(t instanceof Ms))return[3,8];a.label=5;case 5:return a.trys.push([5,7,,8]),[4,this.context.cache.match(t.src)];case 6:return y=a.sent(),this.renderReplacedElement(t,r,y),[3,8];case 7:return a.sent(),this.context.logger.error("Error loading image "+t.src),[3,8];case 8:if(t instanceof Ps&&this.renderReplacedElement(t,r,t.canvas),!(t instanceof Qs))return[3,12];a.label=9;case 9:return a.trys.push([9,11,,12]),[4,this.context.cache.match(t.svg)];case 10:return y=a.sent(),this.renderReplacedElement(t,r,y),[3,12];case 11:return a.sent(),this.context.logger.error("Error loading svg "+t.svg.substring(0,255)),[3,12];case 12:return t instanceof eo&&t.tree?[4,new n(this.context,{scale:this.options.scale,backgroundColor:t.backgroundColor,x:0,y:0,width:t.width,height:t.height}).render(t.tree)]:[3,14];case 13:u=a.sent(),t.width&&t.height&&this.ctx.drawImage(u,0,0,t.width,t.height,t.bounds.left,t.bounds.top,t.bounds.width,t.bounds.height),a.label=14;case 14:if(t instanceof Ys&&(A=Math.min(t.bounds.width,t.bounds.height),t.type===Ks?t.checked&&(this.ctx.save(),this.path([new xl(t.bounds.left+.39363*A,t.bounds.top+.79*A),new xl(t.bounds.left+.16*A,t.bounds.top+.5549*A),new xl(t.bounds.left+.27347*A,t.bounds.top+.44071*A),new xl(t.bounds.left+.39694*A,t.bounds.top+.5649*A),new xl(t.bounds.left+.72983*A,t.bounds.top+.23*A),new xl(t.bounds.left+.84*A,t.bounds.top+.34085*A),new xl(t.bounds.left+.39363*A,t.bounds.top+.79*A)]),this.ctx.fillStyle=ar(Js),this.ctx.fill(),this.ctx.restore()):t.type===qs&&t.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(t.bounds.left+A/2,t.bounds.top+A/2,A/4,0,2*Math.PI,!0),this.ctx.fillStyle=ar(Js),this.ctx.fill(),this.ctx.restore())),dc(t)&&t.value.length){switch(d=this.createFontStyle(i),w=d[0],h=d[1],p=this.fontMetrics.getMetrics(w,h).baseline,this.ctx.font=w,this.ctx.fillStyle=ar(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=pc(t.styles.textAlign),v=Yl(t),f=0,t.styles.textAlign){case 1:f+=v.width/2;break;case 2:f+=v.width}m=v.add(f,0,0,-v.height/2+1),this.ctx.save(),this.path([new xl(v.left,v.top),new xl(v.left+v.width,v.top),new xl(v.left+v.width,v.top+v.height),new xl(v.left,v.top+v.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Bs(t.value,m),i.letterSpacing,p),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ai(t.styles.display,2048))return[3,20];if(null===t.styles.listStyleImage)return[3,19];if(0!==(g=t.styles.listStyleImage).type)return[3,18];y=void 0,b=g.url,a.label=15;case 15:return a.trys.push([15,17,,18]),[4,this.context.cache.match(b)];case 16:return y=a.sent(),this.ctx.drawImage(y,t.bounds.left-(y.width+10),t.bounds.top),[3,18];case 17:return a.sent(),this.context.logger.error("Error loading list-style-image "+b),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==t.styles.listStyleType&&(w=this.createFontStyle(i)[0],this.ctx.font=w,this.ctx.fillStyle=ar(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",v=new s(t.bounds.left,t.bounds.top+Kn(t.styles.paddingTop,t.bounds.width),t.bounds.width,va(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Bs(e.listValue,v),i.letterSpacing,va(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),a.label=20;case 20:return[2]}})})},n.prototype.renderStackContent=function(e){return r(this,void 0,void 0,function(){var t,n,r,i,s,o,l,c,u,A,d,h,p,f,m;return a(this,function(a){switch(a.label){case 0:return ai(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:a.sent(),t=0,n=e.negativeZIndex,a.label=2;case 2:return t<n.length?(m=n[t],[4,this.renderStack(m)]):[3,5];case 3:a.sent(),a.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:a.sent(),r=0,i=e.nonInlineLevel,a.label=7;case 7:return r<i.length?(m=i[r],[4,this.renderNode(m)]):[3,10];case 8:a.sent(),a.label=9;case 9:return r++,[3,7];case 10:s=0,o=e.nonPositionedFloats,a.label=11;case 11:return s<o.length?(m=o[s],[4,this.renderStack(m)]):[3,14];case 12:a.sent(),a.label=13;case 13:return s++,[3,11];case 14:l=0,c=e.nonPositionedInlineLevel,a.label=15;case 15:return l<c.length?(m=c[l],[4,this.renderStack(m)]):[3,18];case 16:a.sent(),a.label=17;case 17:return l++,[3,15];case 18:u=0,A=e.inlineLevel,a.label=19;case 19:return u<A.length?(m=A[u],[4,this.renderNode(m)]):[3,22];case 20:a.sent(),a.label=21;case 21:return u++,[3,19];case 22:d=0,h=e.zeroOrAutoZIndexOrTransformedOrOpacity,a.label=23;case 23:return d<h.length?(m=h[d],[4,this.renderStack(m)]):[3,26];case 24:a.sent(),a.label=25;case 25:return d++,[3,23];case 26:p=0,f=e.positiveZIndex,a.label=27;case 27:return p<f.length?(m=f[p],[4,this.renderStack(m)]):[3,30];case 28:a.sent(),a.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},n.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},n.prototype.formatPath=function(e){var t=this;e.forEach(function(e,n){var r=Bl(e)?e.start:e;0===n?t.ctx.moveTo(r.x,r.y):t.ctx.lineTo(r.x,r.y),Bl(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)})},n.prototype.renderRepeat=function(e,t,n,r){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},n.prototype.resizeImage=function(e,t,n){var r;if(e.width===t&&e.height===n)return e;var a=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return a.width=Math.max(1,t),a.height=Math.max(1,n),a.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),a},n.prototype.renderBackgroundImage=function(e){return r(this,void 0,void 0,function(){var t,n,r,i,s,o;return a(this,function(l){switch(l.label){case 0:t=e.styles.backgroundImage.length-1,n=function(n){var i,s,o,l,c,u,A,d,h,p,f,m,g,y,b,w,v,x,C,k,B,S,I,N,F,E,_,T,L,D,R;return a(this,function(a){switch(a.label){case 0:if(0!==n.type)return[3,5];i=void 0,s=n.url,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,r.context.cache.match(s)];case 2:return i=a.sent(),[3,4];case 3:return a.sent(),r.context.logger.error("Error loading background-image "+s),[3,4];case 4:return i&&(o=ec(e,t,[i.width,i.height,i.width/i.height]),w=o[0],S=o[1],I=o[2],C=o[3],k=o[4],y=r.ctx.createPattern(r.resizeImage(i,C,k),"repeat"),r.renderRepeat(w,y,S,I)),[3,6];case 5:Tr(n)?(l=ec(e,t,[null,null,null]),w=l[0],S=l[1],I=l[2],C=l[3],k=l[4],c=yr(n.angle,C,k),u=c[0],A=c[1],d=c[2],h=c[3],p=c[4],(f=document.createElement("canvas")).width=C,f.height=k,m=f.getContext("2d"),g=m.createLinearGradient(A,h,d,p),mr(n.stops,u).forEach(function(e){return g.addColorStop(e.stop,ar(e.color))}),m.fillStyle=g,m.fillRect(0,0,C,k),C>0&&k>0&&(y=r.ctx.createPattern(f,"repeat"),r.renderRepeat(w,y,S,I))):Lr(n)&&(b=ec(e,t,[null,null,null]),w=b[0],v=b[1],x=b[2],C=b[3],k=b[4],B=0===n.position.length?[Wn]:n.position,S=Kn(B[0],C),I=Kn(B[B.length-1],k),N=vr(n,S,I,C,k),F=N[0],E=N[1],F>0&&E>0&&(_=r.ctx.createRadialGradient(v+S,x+I,0,v+S,x+I,F),mr(n.stops,2*F).forEach(function(e){return _.addColorStop(e.stop,ar(e.color))}),r.path(w),r.ctx.fillStyle=_,F!==E?(T=e.bounds.left+.5*e.bounds.width,L=e.bounds.top+.5*e.bounds.height,R=1/(D=E/F),r.ctx.save(),r.ctx.translate(T,L),r.ctx.transform(1,0,0,D,0,0),r.ctx.translate(-T,-L),r.ctx.fillRect(v,R*(x-L)+L,C,k*R),r.ctx.restore()):r.ctx.fill())),a.label=6;case 6:return t--,[2]}})},r=this,i=0,s=e.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return i<s.length?(o=s[i],[5,n(o)]):[3,4];case 2:l.sent(),l.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},n.prototype.renderSolidBorder=function(e,t,n){return r(this,void 0,void 0,function(){return a(this,function(r){return this.path(Wl(n,t)),this.ctx.fillStyle=ar(e),this.ctx.fill(),[2]})})},n.prototype.renderDoubleBorder=function(e,t,n,i){return r(this,void 0,void 0,function(){var r,s;return a(this,function(a){switch(a.label){case 0:return t<3?[4,this.renderSolidBorder(e,n,i)]:[3,2];case 1:return a.sent(),[2];case 2:return r=Vl(i,n),this.path(r),this.ctx.fillStyle=ar(e),this.ctx.fill(),s=Gl(i,n),this.path(s),this.ctx.fill(),[2]}})})},n.prototype.renderNodeBackgroundAndBorders=function(e){return r(this,void 0,void 0,function(){var t,n,r,i,s,o,l,c,u=this;return a(this,function(a){switch(a.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,n=!rr(t.backgroundColor)||t.backgroundImage.length,r=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],i=hc(ac(t.backgroundClip,0),e.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),rr(t.backgroundColor)||(this.ctx.fillStyle=ar(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:a.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach(function(t){u.ctx.save();var n=Nl(e.curves),r=t.inset?0:uc,a=Ml(n,-r+(t.inset?1:-1)*t.spread.number,(t.inset?1:-1)*t.spread.number,t.spread.number*(t.inset?-2:2),t.spread.number*(t.inset?-2:2));t.inset?(u.path(n),u.ctx.clip(),u.mask(a)):(u.mask(n),u.ctx.clip(),u.path(a)),u.ctx.shadowOffsetX=t.offsetX.number+r,u.ctx.shadowOffsetY=t.offsetY.number,u.ctx.shadowColor=ar(t.color),u.ctx.shadowBlur=t.blur.number,u.ctx.fillStyle=t.inset?ar(t.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),a.label=2;case 2:s=0,o=0,l=r,a.label=3;case 3:return o<l.length?0!==(c=l[o]).style&&!rr(c.color)&&c.width>0?2!==c.style?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,s,e.curves,2)]:[3,11]:[3,13];case 4:return a.sent(),[3,11];case 5:return 3!==c.style?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,s,e.curves,3)];case 6:return a.sent(),[3,11];case 7:return 4!==c.style?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,s,e.curves)];case 8:return a.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,s,e.curves)];case 10:a.sent(),a.label=11;case 11:s++,a.label=12;case 12:return o++,[3,3];case 13:return[2]}})})},n.prototype.renderDashedDottedBorder=function(e,t,n,i,s){return r(this,void 0,void 0,function(){var r,o,l,c,u,A,d,h,p,f,m,g,y,b,w,v;return a(this,function(a){return this.ctx.save(),r=Kl(i,n),o=Wl(i,n),2===s&&(this.path(o),this.ctx.clip()),Bl(o[0])?(l=o[0].start.x,c=o[0].start.y):(l=o[0].x,c=o[0].y),Bl(o[1])?(u=o[1].end.x,A=o[1].end.y):(u=o[1].x,A=o[1].y),d=0===n||2===n?Math.abs(l-u):Math.abs(c-A),this.ctx.beginPath(),3===s?this.formatPath(r):this.formatPath(o.slice(0,2)),h=t<3?3*t:2*t,p=t<3?2*t:t,3===s&&(h=t,p=t),f=!0,d<=2*h?f=!1:d<=2*h+p?(h*=m=d/(2*h+p),p*=m):(g=Math.floor((d+p)/(h+p)),y=(d-g*h)/(g-1),p=(b=(d-(g+1)*h)/g)<=0||Math.abs(p-y)<Math.abs(p-b)?y:b),f&&(3===s?this.ctx.setLineDash([0,h+p]):this.ctx.setLineDash([h,p])),3===s?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=ar(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===s&&(Bl(o[0])&&(w=o[3],v=o[0],this.ctx.beginPath(),this.formatPath([new xl(w.end.x,w.end.y),new xl(v.start.x,v.start.y)]),this.ctx.stroke()),Bl(o[1])&&(w=o[1],v=o[2],this.ctx.beginPath(),this.formatPath([new xl(w.end.x,w.end.y),new xl(v.start.x,v.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},n.prototype.render=function(e){return r(this,void 0,void 0,function(){var t;return a(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ar(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=zl(e),[4,this.renderStack(t)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},n}(cc),dc=function(e){return e instanceof $s||e instanceof Zs||e instanceof Ys&&e.type!==qs&&e.type!==Ks},hc=function(e,t){switch(e){case 0:return Nl(t);case 2:return Fl(t);default:return El(t)}},pc=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},fc=["-apple-system","system-ui"],mc=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(e){return-1===fc.indexOf(e)}):e},gc=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return t(n,e),n.prototype.render=function(e){return r(this,void 0,void 0,function(){var t,n;return a(this,function(r){switch(r.label){case 0:return t=xs(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,yc(t)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ar(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},n}(cc),yc=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))})},bc=function(){function e(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.debug?console.debug.apply(console,i([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!==typeof window&&window.console&&"function"===typeof console.info&&console.info.apply(console,i([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.warn?console.warn.apply(console,i([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.error?console.error.apply(console,i([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),wc=function(){function e(t,n){var r;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new bc({id:this.instanceName,enabled:t.logging}),this.cache=null!==(r=t.cache)&&void 0!==r?r:new hl(this,t)}return e.instanceCount=1,e}(),vc=function(e,t){return void 0===t&&(t={}),xc(e,t)};"undefined"!==typeof window&&dl.setContext(window);var xc=function(e,t){return r(void 0,void 0,void 0,function(){var r,i,c,u,A,d,h,p,f,m,g,y,b,w,v,x,C,k,B,S,I,N,F,E,_,T,L,D,R,U,O,M,P,Q,j,H,z,W;return a(this,function(a){switch(a.label){case 0:if(!e||"object"!==typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(r=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(i=r.defaultView))throw new Error("Document is not attached to a Window");return c={allowTaint:null!==(N=t.allowTaint)&&void 0!==N&&N,imageTimeout:null!==(F=t.imageTimeout)&&void 0!==F?F:15e3,proxy:t.proxy,useCORS:null!==(E=t.useCORS)&&void 0!==E&&E},u=n({logging:null===(_=t.logging)||void 0===_||_,cache:t.cache},c),A={windowWidth:null!==(T=t.windowWidth)&&void 0!==T?T:i.innerWidth,windowHeight:null!==(L=t.windowHeight)&&void 0!==L?L:i.innerHeight,scrollX:null!==(D=t.scrollX)&&void 0!==D?D:i.pageXOffset,scrollY:null!==(R=t.scrollY)&&void 0!==R?R:i.pageYOffset},d=new s(A.scrollX,A.scrollY,A.windowWidth,A.windowHeight),h=new wc(u,d),p=null!==(U=t.foreignObjectRendering)&&void 0!==U&&U,f={allowTaint:null!==(O=t.allowTaint)&&void 0!==O&&O,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:p,copyStyles:p},h.logger.debug("Starting document clone with size "+d.width+"x"+d.height+" scrolled to "+-d.left+","+-d.top),m=new qo(h,e,f),(g=m.clonedReferenceElement)?[4,m.toIFrame(r,d)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return y=a.sent(),b=go(g)||fo(g)?l(g.ownerDocument):o(h,g),w=b.width,v=b.height,x=b.left,C=b.top,k=Cc(h,g,t.backgroundColor),B={canvas:t.canvas,backgroundColor:k,scale:null!==(P=null!==(M=t.scale)&&void 0!==M?M:i.devicePixelRatio)&&void 0!==P?P:1,x:(null!==(Q=t.x)&&void 0!==Q?Q:0)+x,y:(null!==(j=t.y)&&void 0!==j?j:0)+C,width:null!==(H=t.width)&&void 0!==H?H:Math.ceil(w),height:null!==(z=t.height)&&void 0!==z?z:Math.ceil(v)},p?(h.logger.debug("Document cloned, using foreign object rendering"),[4,new gc(h,B).render(g)]):[3,3];case 2:return S=a.sent(),[3,5];case 3:return h.logger.debug("Document cloned, element located at "+x+","+C+" with size "+w+"x"+v+" using computed rendering"),h.logger.debug("Starting DOM parsing"),I=ao(h,g),k===I.styles.backgroundColor&&(I.styles.backgroundColor=dr.TRANSPARENT),h.logger.debug("Starting renderer for element at "+B.x+","+B.y+" with size "+B.width+"x"+B.height),[4,new Ac(h,B).render(I)];case 4:S=a.sent(),a.label=5;case 5:return(null===(W=t.removeContainer)||void 0===W||W)&&(qo.destroy(y)||h.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),h.logger.debug("Finished rendering"),[2,S]}})})},Cc=function(e,t,n){var r=t.ownerDocument,a=r.documentElement?Ar(e,getComputedStyle(r.documentElement).backgroundColor):dr.TRANSPARENT,i=r.body?Ar(e,getComputedStyle(r.body).backgroundColor):dr.TRANSPARENT,s="string"===typeof n?Ar(e,n):null===n?dr.TRANSPARENT:4294967295;return t===r.documentElement?rr(a)?rr(i)?s:i:a:s};return vc}()},5571:e=>{e.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},5701:(e,t,n)=>{const r=n(9593);let a=0;e.exports=e=>{let{id:t,action:n,payload:i={}}=e,s=t;return"undefined"===typeof s&&(s=r("Job",a),a+=1),{id:s,action:n,payload:i}}},6125:e=>{"use strict";e.exports={rE:"5.1.1"}},6884:(e,t,n)=>{const r=n(7346);e.exports={recognize:async(e,t,n)=>{const a=await r(t,1,n);return a.recognize(e).finally(async()=>{await a.terminate()})},detect:async(e,t)=>{const n=await r("osd",0,t);return n.detect(e).finally(async()=>{await n.terminate()})}}},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,s=a>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<a&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],A=1,d=null,h=3,p=!1,f=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function v(e){if(m=!1,w(e),!f)if(null!==r(c))f=!0,L(x);else{var t=r(u);null!==t&&D(v,t.startTime-e)}}function x(e,n){f=!1,m&&(m=!1,y(S),S=-1),p=!0;var i=h;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!F());){var s=d.callback;if("function"===typeof s){d.callback=null,h=d.priorityLevel;var o=s(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(c)&&a(c),w(n)}else a(c);d=r(c)}if(null!==d)var l=!0;else{var A=r(u);null!==A&&D(v,A.startTime-n),l=!1}return l}finally{d=null,h=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,k=!1,B=null,S=-1,I=5,N=-1;function F(){return!(t.unstable_now()-N<I)}function E(){if(null!==B){var e=t.unstable_now();N=e;var n=!0;try{n=B(!0,e)}finally{n?C():(k=!1,B=null)}}else k=!1}if("function"===typeof b)C=function(){b(E)};else if("undefined"!==typeof MessageChannel){var _=new MessageChannel,T=_.port2;_.port1.onmessage=E,C=function(){T.postMessage(null)}}else C=function(){g(E,0)};function L(e){B=e,k||(k=!0,C())}function D(e,n){S=g(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,L(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,a,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:A++,callback:a,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>s?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(m?(y(S),S=-1):m=!0,D(v,i-s))):(e.sortIndex=o,n(c,e),f||p||(f=!0,L(x))),e},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},7291:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=7291,e.exports=t},7346:(e,t,n)=>{var r=n(2897).default,a=n(1847).default;const i=["logger","errorHandler"],s=n(4402),o=n(3057),l=n(5701),{log:c}=n(9926),u=n(9593),A=n(9511),{defaultOptions:d,spawnWorker:h,terminateWorker:p,onMessage:f,loadImage:m,send:g}=n(2034);let y=0;e.exports=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.LSTM_ONLY,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},b=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const w=u("Worker",y),v=s(r(r({},d),n)),{logger:x,errorHandler:C}=v,k=a(v,i),B={},S={},I="string"===typeof e?e.split("+"):e;let N=t,F=b;const E=[A.DEFAULT,A.LSTM_ONLY].includes(t)&&!k.legacyCore;let _,T;const L=new Promise((e,t)=>{T=e,_=t});let D=h(k);D.onerror=e=>{_(e.message)},y+=1;const R=(e,t)=>{B[e]=t},U=(e,t)=>{S[e]=t},O=e=>{let{id:t,action:n,payload:r}=e;return new Promise((e,a)=>{c("[".concat(w,"]: Start ").concat(t,", action=").concat(n));const i="".concat(n,"-").concat(t);R(i,e),U(i,a),g(D,{workerId:w,jobId:t,action:n,payload:r})})},M=(e,t)=>O(l({id:t,action:"loadLanguage",payload:{langs:e,options:{langPath:k.langPath,dataPath:k.dataPath,cachePath:k.cachePath,cacheMethod:k.cacheMethod,gzip:k.gzip,lstmOnly:[A.DEFAULT,A.LSTM_ONLY].includes(N)&&!k.legacyLang}}})),P=(e,t,n,r)=>O(l({id:r,action:"initialize",payload:{langs:e,oem:t,config:n}}));f(D,e=>{let{workerId:t,jobId:n,status:a,action:i,data:s}=e;const l="".concat(i,"-").concat(n);if("resolve"===a){c("[".concat(t,"]: Complete ").concat(n));let e=s;"recognize"===i?e=o(s):"getPDF"===i&&(e=Array.from(r(r({},s),{},{length:Object.keys(s).length}))),B[l]({jobId:n,data:e})}else if("reject"===a){if(S[l](s),"load"===i&&_(s),!C)throw Error(s);C(s)}else"progress"===a&&x(r(r({},s),{},{userJobId:n}))});const Q={id:w,worker:D,setResolve:R,setReject:U,load:()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),writeText:(e,t,n)=>O(l({id:n,action:"FS",payload:{method:"writeFile",args:[e,t]}})),readText:(e,t)=>O(l({id:t,action:"FS",payload:{method:"readFile",args:[e,{encoding:"utf8"}]}})),removeFile:(e,t)=>O(l({id:t,action:"FS",payload:{method:"unlink",args:[e]}})),FS:(e,t,n)=>O(l({id:n,action:"FS",payload:{method:e,args:t}})),loadLanguage:()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),initialize:()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),reinitialize:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(E&&[A.TESSERACT_ONLY,A.TESSERACT_LSTM_COMBINED].includes(t))throw Error("Legacy model requested but code missing.");const a=t||N;N=a;const i=n||F;F=i;const s=("string"===typeof e?e.split("+"):e).filter(e=>!I.includes(e));return I.push(...s),s.length>0?M(s,r).then(()=>P(e,a,i,r)):P(e,a,i,r)},setParameters:function(){return O(l({id:arguments.length>1?arguments[1]:void 0,action:"setParameters",payload:{params:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}))},recognize:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{blocks:!0,text:!0,hocr:!0,tsv:!0};return O(l({id:arguments.length>3?arguments[3]:void 0,action:"recognize",payload:{image:await m(e),options:t,output:n}}))},getPDF:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Tesseract OCR Result",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;return console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),O(l({id:n,action:"getPDF",payload:{title:e,textonly:t}}))},detect:async(e,t)=>{if(E)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return O(l({id:t,action:"detect",payload:{image:await m(e)}}))},terminate:async()=>(null!==D&&(p(D),D=null),Promise.resolve())};var j;return O(l({id:j,action:"load",payload:{options:{lstmOnly:E,corePath:k.corePath,logging:k.logging}}})).then(()=>M(e)).then(()=>P(e,t,b)).then(()=>T(Q)).catch(()=>{}),L}},7736:(e,t,n)=>{var r=n(3738).default,a=n(9045);e.exports=function(e){var t=a(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},7870:e=>{e.exports=async(e,t)=>{e.postMessage(t)}},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},9003:(e,t,n)=>{const r=n(4053);e.exports=e=>{const t={};return"undefined"!==typeof WorkerGlobalScope?t.type="webworker":r()?t.type="electron":"object"===typeof document?t.type="browser":"object"===typeof process&&(t.type="node"),"undefined"===typeof e?t:t[e]}},9045:(e,t,n)=>{var r=n(3738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9511:e=>{e.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},9593:e=>{e.exports=(e,t)=>"".concat(e,"-").concat(t,"-").concat(Math.random().toString(16).slice(3,8))},9926:function(e,t){var n=this;let r=!1;t.logging=r,t.setLogging=e=>{r=e},t.log=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return r?console.log.apply(n,t):null}},9938:(e,t,n)=>{var r=n(2897).default;const a=n(4447),i=n(7346),s=n(6884),o=n(5571),l=n(9511),c=n(4588),{setLogging:u}=n(9926);e.exports=r({languages:o,OEM:l,PSM:c,createScheduler:a,createWorker:i,setLogging:u},s)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&a&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>s[e]=()=>r[e]);return s.default=()=>r,n.d(i,s),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{455:"7b4a3b32",977:"e72585e5"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="daman-islamic-bank-app:";n.l=(r,a,i,s)=>{if(e[r])e[r].push(a);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var A=c[u];if(A.getAttribute("src")==r||A.getAttribute("data-webpack")==t+i){o=A;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+i),o.src=r),e[r]=[a];var d=(t,n)=>{o.onerror=o.onload=null,clearTimeout(h);var a=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach(e=>e(n)),t)return t(n)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise((n,r)=>a=e[t]=[n,r]);r.push(a[2]=i);var s=n.p+n.u(t),o=new Error;n.l(s,r=>{if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,a[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var a,i,s=r[0],o=r[1],l=r[2],c=0;if(s.some(t=>0!==e[t])){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(l)l(n)}for(t&&t(r);c<s.length;c++)i=s[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkdaman_islamic_bank_app=self.webpackChunkdaman_islamic_bank_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(4980);function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(n){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?t(Object(a),!0).forEach(function(t){(0,e.A)(n,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}var a=n(5043),i=n(4391),s=n(579);const o=(0,a.createContext)(),l=()=>(0,a.useContext)(o),c=e=>{let{children:t}=e;const[n,r]=(0,a.useState)("light");(0,a.useEffect)(()=>{document.body.setAttribute("data-theme",n)},[n]);return(0,s.jsx)(o.Provider,{value:{theme:n,toggleTheme:()=>{r(e=>"light"===e?"dark":"light")}},children:t})},u=(0,a.createContext)(),A=()=>(0,a.useContext)(u),d=e=>{let{children:t}=e;const[n,r]=(0,a.useState)("en");return(0,s.jsx)(u.Provider,{value:{language:n,toggleLanguage:()=>{r(e=>"en"===e?"ar":"en")},setLanguage:r},children:t})},h=(0,a.createContext)(),p=()=>(0,a.useContext)(h),f=e=>{let{children:t}=e;const[n,r]=(0,a.useState)({provider:"gemini"});return(0,s.jsx)(h.Provider,{value:{formData:n,setFormData:r},children:t})},m=()=>(0,s.jsx)("style",{children:'\n    @import url(\'https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=IBM+Plex+Sans+Arabic:wght@400;700&display=swap\');\n    @import url(\'https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap\');\n\n    :root {\n        --font-primary-ar: \'Cairo\', \'IBM Plex Sans Arabic\', \'Segoe UI\', Tahoma, sans-serif;\n        --font-primary-en: \'Poppins\', sans-serif;\n        \n        /* Light Theme */\n        --primary-color-light: #3E8A96;\n        --primary-dark-light: #2E6B76;\n        --accent-color-light: #D4A03C;\n        --secondary-color-light: #f0f2f5;\n        --text-color-dark-light: #1a202c;\n        --text-color-light-light: #f7fafc;\n        --docs-bg-light: #ECF5F6;\n        --header-bg-light: #fff;\n        --form-input-bg-light: #fff;\n        --form-input-text-light: #1a202c;\n        --form-input-locked-bg-light: #e9ecef;\n        --form-input-locked-text-light: #495057;\n        --glass-bg-light: rgba(255, 255, 255, 0.15);\n        --glass-border-light: rgba(255, 255, 255, 0.25);\n        --shadow-color-light: rgba(0, 0, 0, 0.15);\n        --success-color-light: #28a745;\n        --error-color-light: #e53e3e;\n        \n        /* Dark Theme */\n        --primary-color-dark: #4FB3C4;\n        --primary-dark-dark: #3E8A96;\n        --accent-color-dark: #E6B357;\n        --secondary-color-dark: #1A202C;\n        --text-color-dark-dark: #EDF2F7;\n        --text-color-light-dark: #1A202C;\n        --docs-bg-dark: #2D3748;\n        --header-bg-dark: #2D3748;\n        --form-input-bg-dark: #4A5568;\n        --form-input-text-dark: #EDF2F7;\n        --form-input-locked-bg-dark: #2D3748;\n        --form-input-locked-text-dark: #A0AEC0;\n        --glass-bg-dark: rgba(0, 0, 0, 0.25);\n        --glass-border-dark: rgba(255, 255, 255, 0.1);\n        --shadow-color-dark: rgba(0, 0, 0, 0.5);\n        --success-color-dark: #68D391;\n        --error-color-dark: #FC8181;\n    }\n\n    body {\n        margin: 0;\n        overflow-x: hidden;\n        transition: background-color 0.3s ease, color 0.3s ease;\n    }\n    \n    body[data-theme=\'light\'] {\n        --primary-color: var(--primary-color-light);\n        --primary-dark: var(--primary-dark-light);\n        --accent-color: var(--accent-color-light);\n        --secondary-color: var(--secondary-color-light);\n        --text-color-dark: var(--text-color-dark-light);\n        --text-color-light: var(--text-color-light-light);\n        --docs-bg: var(--docs-bg-light);\n        --header-bg: var(--header-bg-light);\n        --form-input-bg: var(--form-input-bg-light);\n        --form-input-text: var(--form-input-text-light);\n        --form-input-locked-bg: var(--form-input-locked-bg-light);\n        --form-input-locked-text: var(--form-input-locked-text-light);\n        --glass-bg: var(--glass-bg-light);\n        --glass-border: var(--glass-border-light);\n        --shadow-color: var(--shadow-color-light);\n        --success-color: var(--success-color-light);\n        --error-color: var(--error-color-light);\n        background-color: var(--secondary-color);\n        color: var(--text-color-dark);\n    }\n\n    body[data-theme=\'dark\'] {\n        --primary-color: var(--primary-color-dark);\n        --primary-dark: var(--primary-dark-dark);\n        --accent-color: var(--accent-color-dark);\n        --secondary-color: var(--secondary-color-dark);\n        --text-color-dark: var(--text-color-dark-dark);\n        --text-color-light: var(--text-color-light-dark);\n        --docs-bg: var(--docs-bg-dark);\n        --header-bg: var(--header-bg-dark);\n        --form-input-bg: var(--form-input-bg-dark);\n        --form-input-text: var(--form-input-text-dark);\n        --form-input-locked-bg: var(--form-input-locked-bg-dark);\n        --form-input-locked-text: var(--form-input-locked-text-dark);\n        --glass-bg: var(--glass-bg-dark);\n        --glass-border: var(--glass-border-dark);\n        --shadow-color: var(--shadow-color-dark);\n        --success-color: var(--success-color-dark);\n        --error-color: var(--error-color-dark);\n        background-color: var(--secondary-color);\n        color: var(--text-color-dark);\n    }\n    \n    body[dir="rtl"] { font-family: var(--font-primary-ar); }\n    body[dir="ltr"] { font-family: var(--font-primary-en); }\n    \n    #root { width: 100%; height: 100%; }\n\n    @keyframes fadeInSlideUp {\n        from { opacity: 0; transform: translateY(25px); }\n        to { opacity: 1; transform: translateY(0); }\n    }\n\n    @keyframes gradient-animation {\n        0% { background-position: 0% 50%; }\n        50% { background-position: 100% 50%; }\n        100% { background-position: 0% 50%; }\n    }\n\n    @keyframes shake {\n        10%, 90% { transform: translate3d(-1px, 0, 0); }\n        20%, 80% { transform: translate3d(2px, 0, 0); }\n        30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }\n        40%, 60% { transform: translate3d(4px, 0, 0); }\n    }\n\n    @keyframes spin {\n        to { transform: rotate(360deg); }\n    }\n    .loading-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        background: rgba(0,0,0,0.4);\n        z-index: 2000;\n    }\n    .loading-spinner {\n        width: 60px;\n        height: 60px;\n        border: 6px solid rgba(255,255,255,0.3);\n        border-top-color: var(--accent-color);\n        border-radius: 50%;\n        animation: spin 1s linear infinite;\n    }\n    .loading-message {\n        color: var(--text-color-light);\n        margin-top: 15px;\n        font-weight: 600;\n    }\n\n    .stamp-overlay {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: #28a745;\n        opacity: ;\n        font-size: 10rem;\n        pointer-events: none;\n    }\n\n    /* --- Theme Switcher --- */\n    .theme-switcher {\n        display: flex;\n        align-items: center;\n        background-color: rgba(0,0,0,0.1);\n        border-radius: 99px;\n        padding: 4px;\n        cursor: pointer;\n    }\n    .theme-switcher-button {\n        width: 30px;\n        height: 30px;\n        border-radius: 50%;\n        background-color: #fff;\n        box-shadow: 0 2px 5px rgba(0,0,0,0.2);\n        transition: transform 0.3s ease;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n    .theme-switcher-button svg {\n        color: var(--primary-color);\n    }\n    body[data-theme=\'dark\'] .theme-switcher-button {\n        transform: translateX(30px);\n        background-color: #4A5568;\n    }\n    body[data-theme=\'dark\'] .theme-switcher-button svg {\n        color: var(--accent-color);\n    }\n    .theme-switcher-icons {\n        display: flex;\n        gap: 8px;\n        padding: 0 6px;\n    }\n    .theme-switcher-icons svg {\n        color: #fff;\n    }\n\n    /* --- Language Switcher --- */\n    .language-switcher {\n        display: flex;\n        align-items: center;\n        background-color: rgba(0,0,0,0.1);\n        border-radius: 99px;\n        cursor: pointer;\n        font-size: 0.9rem;\n    }\n    .language-switcher span {\n        padding: 6px 12px;\n        color: var(--text-color-dark);\n        user-select: none;\n        transition: background-color 0.3s ease, color 0.3s ease;\n    }\n    body[data-theme=\'dark\'] .language-switcher span {\n        color: var(--text-color-dark-dark);\n    }\n    .language-switcher span.active {\n        background-color: var(--primary-color);\n        color: var(--text-color-light);\n        border-radius: 99px;\n    }\n\n\n    /* --- Language Selection --- */\n    .lang-selection-page {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        min-height: 100vh;\n        padding: 20px;\n        text-align: center;\n        background-color: #3E8A96;\n    }\n\n    .lang-selection-box { animation: fadeInSlideUp 1s ease-out forwards; }\n    .lang-logo { height: 120px; margin-bottom: 40px; }\n    .lang-buttons-container { display: flex; flex-direction: column; gap: 20px; width: 100%; max-width: 300px; }\n    .lang-btn {\n        padding: 15px 20px;\n        font-size: 1.2rem;\n        font-weight: 700;\n        border-radius: 12px;\n        border: 2px solid var(--text-color-light);\n        cursor: pointer;\n        transition: all 0.3s ease;\n        background-color: transparent;\n        color: var(--text-color-light);\n    }\n    .lang-btn:hover {\n        background-color: var(--text-color-light);\n        color: var(--primary-dark);\n        transform: translateY(-4px);\n        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);\n    }\n\n    /* --- Landing Page --- */\n    .landing-container {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        min-height: 100vh;\n        padding: 20px;\n        text-align: center;\n        background: linear-gradient(-45deg, var(--accent-color), var(--primary-color), #5f9ea0, #2E6B76);\n        background-size: 400% 400%;\n        animation: gradient-animation 15s ease infinite;\n        color: var(--text-color-light);\n    }\n    .content-wrapper { display: flex; flex-direction: column; align-items: center; justify-content: center; flex: 1; max-width: 500px; animation: fadeInSlideUp 1s ease-out forwards; }\n    .landing-logo { height: 140px; margin-bottom: 20px; filter: drop-shadow(0px 8px 20px rgba(0, 0, 0, 0.3)); }\n    .landing-title { font-size: 3rem; font-weight: 700; margin: 0 0 10px 0; letter-spacing: 1px; }\n    .landing-subtitle { font-size: 1.25rem; font-weight: 400; opacity: 0.9; margin-bottom: 40px; }\n    .landing-buttons-container { display: flex; flex-direction: column; gap: 15px; width: 100%; max-width: 320px; }\n    .landing-buttons-container button { width: 100%; padding: 15px 20px; font-size: 1.1rem; font-weight: 600; border-radius: 12px; border: none; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 10px; }\n    body[dir="rtl"] .landing-buttons-container button { font-family: var(--font-primary-ar); }\n    body[dir="ltr"] .landing-buttons-container button { font-family: var(--font-primary-en); }\n    .landing-buttons-container button.btn-secondary { background-color: transparent; border: 2px solid var(--text-color-light); color: var(--text-color-light); }\n    .landing-buttons-container button:not(.btn-secondary) { background-color: var(--text-color-light); color: var(--primary-dark); }\n    .landing-buttons-container button:hover { transform: translateY(-4px); box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2); }\n    .landing-buttons-container button.btn-secondary:hover { background-color: var(--text-color-light); color: var(--primary-dark); }\n\n    .app-container { height: 100vh; width: 100vw; display: flex; flex-direction: column; }\n    .header {\n        background-color: var(--header-bg);\n        padding: 15px 40px;\n        box-shadow: 0 4px 15px var(--shadow-color);\n        z-index: 1000;\n        position: relative;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        transition: background-color 0.3s ease;\n    }\n.header-switchers {\n        display: flex;\n        gap: 20px;\n        flex-wrap: wrap;\n    }\n    .header.docs-header { background-color: var(--primary-color); }\n    .logo { height: 60px; transition: transform 0.3s ease-out; }\n    .logo:hover { transform: scale(1.05); }\n\n    .main { position: relative; flex-grow: 1; display: flex; align-items: center; padding: 0 80px; overflow: hidden; }\n    body[dir="rtl"] .main { justify-content: flex-start; }\n    body[dir="ltr"] .main { justify-content: flex-end; }\n.center-main { justify-content: center !important; }\n    .background { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }\n    .overlay { position: absolute; inset: 0; }\n    body[dir="rtl"] .overlay { background: linear-gradient(to right, transparent 0%, var(--glass-bg) 50%, var(--glass-bg) 100%); }\n    body[dir="ltr"] .overlay { background: linear-gradient(to left, transparent 0%, var(--glass-bg) 50%, var(--glass-bg) 100%); }\n\n    .menu-card {\n        z-index: 1;\n        background: var(--glass-bg);\n        padding: 50px 40px;\n        border-radius: 25px;\n        box-shadow: 0 20px 50px var(--shadow-color);\n        backdrop-filter: blur(20px);\n        -webkit-backdrop-filter: blur(20px);\n        border: 1px solid var(--glass-border);\n        max-width: 380px;\n        text-align: center;\n        animation: fadeInSlideUp 0.8s ease-out 0.2s forwards;\n        opacity: 0;\n        will-change: transform;\n        transition: all 0.2s ease-out;\n    }\n    .menu-card h2 { color: var(--text-color-dark); }\n    body[data-theme=\'dark\'] .menu-card h2 { color: var(--text-color-dark-dark); }\n    .menu-card:hover { transform: scale(1.03); }\n    .menu-card h2 { margin-bottom: 35px; font-size: 2rem; font-weight: 700; }\n    .menu-card button { width: 100%; background: linear-gradient(45deg, var(--primary-dark), var(--primary-color)); color: var(--text-color-light); border: none; font-size: 1.2rem; padding: 16px; border-radius: 12px; margin-bottom: 18px; box-shadow: 0 8px 20px rgba(62, 138, 150, 0.3); cursor: pointer; transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 12px; }\n    body[dir="rtl"] .menu-card button { font-family: var(--font-primary-ar); }\n    body[dir="ltr"] .menu-card button { font-family: var(--font-primary-en); }\n    .menu-card button:last-child { margin-bottom: 0; }\n    .menu-card button:hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 14px 28px rgba(62, 138, 150, 0.4); }\n    .menu-card button:focus { outline: none; box-shadow: 0 0 0 4px rgba(62, 138, 150, 0.5); }\n    \n    /* ---=== Form Page Styles ===--- */\n    .form-page { background-color: var(--docs-bg); min-height: 100vh; display: flex; flex-direction: column; transition: background-color 0.3s ease; }\n    .form-main { padding: 40px; display: flex; flex-direction: column; align-items: center; flex-grow: 1; }\n    .form-title { font-size: 2.5rem; font-weight: 700; color: var(--text-color-dark); margin-bottom: 40px; align-self: flex-start; }\n    .docs-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px; width: 100%; max-width: 900px; margin-bottom: 50px; }\n    .upload-box { background-color: var(--form-input-bg); border-radius: 15px; padding: 20px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 5px 15px var(--shadow-color); transition: all 0.3s ease; gap: 15px; border: 2px dashed var(--primary-color); }\n    .upload-box p { color: var(--text-color-dark); }\n    .upload-box:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.12); background-color: var(--secondary-color); }\n    .upload-box p { font-size: 1.1rem; font-weight: 600; margin: 0; flex-grow: 1; }\n    .upload-placeholder { width: 100px; height: 100px; border: 2px dashed var(--primary-color); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: var(--primary-color); cursor: pointer; flex-shrink: 0; }\n    .multi-upload-placeholders { display: flex; gap: 10px; }\n    .multi-upload-placeholders .upload-placeholder { width: 60px; height: 60px; }\n    .multi-upload-placeholders .upload-icon { width: 32px; height: 32px; }\n    .upload-placeholder .upload-icon { color: #ccc; }\n    .form-actions { display: flex; flex-direction: column; align-items: center; gap: 20px; width: 100%; margin-top: auto; padding-top: 20px; }\n    .btn-next { background-color: var(--primary-color); color: var(--text-color-light); border: none; padding: 15px 50px; font-size: 1.2rem; font-weight: 700; border-radius: 12px; cursor: pointer; transition: all 0.3s ease; width: 100%; max-width: 400px; }\n    .btn-next:hover { background-color: var(--primary-dark); box-shadow: 0 8px 20px rgba(62, 138, 150, 0.4); }\n    .btn-next:disabled { background-color: #999; cursor: not-allowed; box-shadow: none; }\n    .btn-export { background-color: var(--accent-color); color: var(--text-color-light); border: none; padding: 12px 30px; font-size: 1rem; font-weight: 700; border-radius: 12px; cursor: pointer; transition: background-color 0.3s ease; }\n    .btn-export:hover { background-color: var(--primary-dark); }\n    .btn-back { background: none; border: none; color: #fff; font-size: 1rem; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 5px; }\n    .btn-refresh {\n        background-color: var(--primary-color);\n        border: none;\n        color: var(--text-color-light);\n        font-size: 1rem;\n        font-weight: 600;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        gap: 5px;\n        padding: 8px 16px;\n        border-radius: 8px;\n        box-shadow: 0 2px 6px var(--shadow-color);\n        transition: background-color 0.3s ease, transform 0.3s ease;\n    }\n    .btn-refresh:hover {\n        background-color: var(--primary-dark);\n        transform: scale(1.05);\n    }\n    .btn-change {\n        background-color: var(--primary-color);\n        border: none;\n        color: var(--text-color-light);\n        font-size: 1rem;\n        font-weight: 600;\n        cursor: pointer;\n        padding: 8px 16px;\n        border-radius: 8px;\n        box-shadow: 0 2px 6px var(--shadow-color);\n        transition: background-color 0.3s ease, transform 0.3s ease;\n    }\n    .btn-change:hover {\n        background-color: var(--primary-dark);\n        transform: scale(1.05);\n    }\n\n    .ai-provider-switcher span {\n        cursor: pointer;\n    }\n    \n    /* ---=== Form Styles ===--- */\n    .form-container { width: 100%; max-width: 600px; }\n    .form-section { margin-bottom: 40px; }\n    .form-section h3 { font-size: 1.8rem; font-weight: 700; margin-bottom: 20px; border-bottom: 2px solid var(--primary-color); padding-bottom: 10px; color: var(--text-color-dark); }\n    .form-group { margin-bottom: 20px; position: relative; }\n    .form-input { width: 100%; padding: 15px; font-size: 1rem; border: 1px solid #ccc; border-radius: 8px; background-color: var(--form-input-bg); color: var(--form-input-text); transition: all 0.3s ease; box-sizing: border-box; }\n    .form-input.locked {\n        background-color: var(--form-input-locked-bg);\n        color: var(--form-input-locked-text);\n        cursor: pointer;\n        border-style: dashed;\n        filter: grayscale(0.2);\n    }\n    .lock-icon { \n        display: none; \n        position: absolute; \n        top: 50%; \n        transform: translateY(-50%); \n        color: var(--form-input-locked-text); \n        pointer-events: none; \n        opacity: 0.8;\n    }\n    body[dir="rtl"] .lock-icon { left: 12px; }\n    body[dir="ltr"] .lock-icon { right: 12px; }\n    .form-input.locked + .lock-icon, .locked-overlay + .lock-icon {\n        display: block;\n    }\n    .required-star {\n        color: var(--error-color);\n        margin-left: 4px;\n    }\n    .unlock-animation {\n        animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;\n    }\n    body[dir="rtl"] .form-input { font-family: var(--font-primary-ar); }\n    body[dir="ltr"] .form-input { font-family: var(--font-primary-en); }\n    .form-input:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(62, 138, 150, 0.3); }\n    .branch-select {\n        width: 100%;\n        padding: 15px;\n        font-size: 1rem;\n        border: 1px solid var(--primary-color);\n        border-radius: 8px;\n        background-color: var(--form-input-bg);\n        color: var(--form-input-text);\n        box-shadow: 0 2px 6px rgba(0,0,0,0.1);\n        appearance: none;\n        background-image: url(\'data:image/svg+xml;utf8,<svg fill="%23628D97" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>\');\n        background-repeat: no-repeat;\n        background-position: right 10px center;\n        background-size: 18px;\n    }\n    .phone-input-group { display: flex; }\n    .phone-prefix { padding: 15px; background-color: #e9ecef; border: 1px solid #ccc; font-size: 1rem; }\n    body[data-theme=\'dark\'] .phone-prefix { background-color: #2D3748; border-color: #4A5568; }\n    body[dir="rtl"] .phone-prefix { border-left: none; border-radius: 0 8px 8px 0; }\n    body[dir="ltr"] .phone-prefix { border-right: none; border-radius: 8px 0 0 8px; }\n    body[dir="rtl"] .phone-input-group .form-input { border-radius: 8px 0 0 8px; }\n    body[dir="ltr"] .phone-input-group .form-input { border-radius: 0 8px 8px 0; }\n    .date-input-container { position: relative; display: flex; align-items: center; }\n    .date-input-container .form-input { padding-left: 45px; padding-right: 45px; }\n    .date-input-container svg { position: absolute; color: #999; }\n    body[dir="rtl"] .date-input-container svg { left: 15px; }\n    body[dir="ltr"] .date-input-container svg { right: 15px; }\n    .national-id-group { display: flex; gap: 10px; justify-content: space-between; }\n    .national-id-input { width: 40px; height: 50px; text-align: center; font-size: 1.5rem; border: 1px solid #ccc; border-radius: 8px; background-color: var(--form-input-bg); color: var(--form-input-text); }\n    body[dir="rtl"] .national-id-group { direction: ltr; }\n    body[dir="rtl"] .national-id-input { direction: ltr; }\n    .upload-checklist { list-style: none; padding: 0; margin-bottom: 20px; width: 100%; max-width: 600px; }\n    .upload-checklist li { display: flex; align-items: center; gap: 10px; margin-bottom: 5px; font-weight: 600; color: var(--text-color-dark); }\n    .passport-info { width: 100%; max-width: 600px; height: 100px; margin-bottom: 20px; padding: 10px; border: 1px solid #ccc; border-radius: 8px; background-color: var(--form-input-bg); color: var(--form-input-text); box-sizing: border-box; }\n    .status-dialog { width: 100%; max-width: 600px; margin-bottom: 20px; padding: 15px; border: 1px solid #ccc; border-radius: 8px; background-color: var(--form-input-bg); color: var(--form-input-text); }\n    .progress-bar { width: 100%; max-width: 600px; height: 10px; background-color: #e0e0e0; border-radius: 5px; overflow: hidden; margin-bottom: 20px; }\n    .progress-bar-fill { height: 100%; background-color: var(--primary-color); width: 0; transition: width 0.2s ease; }\n    .agreements { width: 100%; max-width: 600px; margin-bottom: 20px; }\n    .guide-message {\n        margin-bottom: 15px;\n        padding: 10px 15px;\n        border-radius: 8px;\n        background-color: rgba(72,187,120,0.1);\n        color: var(--success-color);\n        font-weight: 600;\n    }\n    .error-message {\n        color: var(--error-color);\n        font-weight: 600;\n        margin-top: 10px;\n    }\n    .agreement-item { display: flex; align-items: center; gap: 15px; font-size: 1.1rem; font-weight: 600; color: var(--text-color-dark); }\n    .agreement-item:first-child { margin-bottom: 15px; }\n    .agreement-item a { color: var(--primary-dark); text-decoration: none; font-weight: 700; }\n    .agreement-item a:hover { text-decoration: underline; }\n    .agreement-item svg { color: var(--primary-dark); }\n    .custom-checkbox { display: inline-block; width: 28px; height: 28px; background: var(--form-input-bg); border: 2px solid #ccc; border-radius: 6px; position: relative; cursor: pointer; flex-shrink: 0; }\n    .custom-checkbox input { opacity: 0; width: 0; height: 0; }\n    .checkmark { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 20px; height: 20px; background-color: #4caf50; border-radius: 4px; opacity: 0; transition: opacity 0.2s ease; }\n    .checkmark:after { content: ""; position: absolute; display: block; left: 7px; top: 3px; width: 5px; height: 10px; border: solid white; border-width: 0 3px 3px 0; transform: rotate(45deg); }\n    .custom-checkbox input:checked ~ .checkmark { opacity: 1; }\n    .custom-checkbox input:checked ~ .custom-checkbox-box { border-color: #4caf50; }\n    .custom-checkbox-box { width: 28px; height: 28px; background: var(--form-input-bg); border: 2px solid #ccc; border-radius: 6px; display: flex; align-items: center; justify-content: center; transition: border-color 0.2s ease; }\n    .company-form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px 40px; }\n\n    .form-grid-columns {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 0 40px;\n    }\n    .form-column {\n        display: flex;\n        flex-direction: column;\n    }\n    .upload-box-inline {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        border: 2px dashed #ccc;\n        border-radius: 8px;\n        padding: 20px;\n        text-align: center;\n        cursor: pointer;\n        min-height: 120px;\n    }\n    \n    .upload-box-inline p {\n        font-weight: 600;\n        margin-top: 10px;\n    }\n\n\n    .footer {\n        text-align: center;\n        padding: 20px;\n        color: var(--text-color-dark);\n        background-color: var(--docs-bg);\n        margin-top: auto;\n    }\n    .footer-transparent { background-color: transparent; }\n\n    /* ---=== Confirmation Page Styles ===--- */\n    .confirmation-page .form-main {\n        align-items: center;\n    }\n    .confirmation-page .header {\n        width: 100%;\n        box-sizing: border-box;\n        flex-wrap: wrap;\n    }\n    .confirmation-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n        gap: 30px;\n        width: 100%;\n        max-width: 1200px;\n    }\n    .confirmation-card {\n        background-color: var(--form-input-bg);\n        border-radius: 12px;\n        box-shadow: 0 4px 12px rgba(0,0,0,0.08);\n        overflow: hidden;\n    }\n    .confirmation-card-header {\n        display: flex;\n        align-items: center;\n        padding: 15px 20px;\n        background-color: rgba(0,0,0,0.03);\n        border-bottom: 1px solid rgba(0,0,0,0.05);\n        color: var(--text-color-dark);\n    }\n    .confirmation-card-header svg {\n        margin-right: 10px;\n        color: var(--primary-color);\n    }\n    .confirmation-card-header h2 {\n        margin: 0;\n        font-size: 1.25rem;\n    }\n    .confirmation-card-body {\n        padding: 20px;\n    }\n    .info-list {\n        list-style: none;\n        padding: 0;\n        margin: 0;\n    }\n    .info-list li {\n        display: flex;\n        justify-content: space-between;\n        padding: 10px 0;\n        border-bottom: 1px solid rgba(0,0,0,0.05);\n        font-size: 0.95rem;\n    }\n    .info-list li:last-child {\n        border-bottom: none;\n    }\n    .info-list li strong {\n        font-weight: 600;\n        color: var(--text-color-dark);\n    }\n    .info-list li span {\n        color: var(--form-input-text);\n    }\n    .docs-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n        gap: 15px;\n    }\n    .doc-item {\n        cursor: pointer;\n        border-radius: 8px;\n        overflow: hidden;\n        border: 1px solid #ddd;\n        transition: transform 0.2s, box-shadow 0.2s;\n    }\n    .doc-item:hover {\n        transform: translateY(-5px);\n        box-shadow: 0 8px 16px rgba(0,0,0,0.1);\n    }\n    .doc-preview-container {\n        position: relative;\n        height: 120px;\n        background-color: #f0f0f0;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n    }\n    .doc-preview {\n        display: block;\n        max-width: 100%;\n        max-height: 100%;\n        object-fit: contain;\n    }\n    .doc-title {\n        padding: 8px;\n        background-color: var(--secondary-color);\n        font-size: 0.8rem;\n        font-weight: 600;\n        color: var(--text-color-dark);\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n    .modal-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.8);\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        z-index: 1000;\n    }\n    .confirmation-table {\n        width: 100%;\n        border-collapse: collapse;\n    }\n    .confirmation-table th,\n    .confirmation-table td {\n        padding: 10px;\n        border-bottom: 1px solid #ddd;\n        text-align: left;\n    }\n    .confirmation-table th {\n        background-color: var(--secondary-color);\n        color: var(--text-color-dark);\n    }\n    .hover-row:hover {\n        background-color: var(--secondary-color);\n    }\n    .status-badge {\n        display: inline-block;\n        padding: 2px 8px;\n        border-radius: 8px;\n        font-size: 0.8rem;\n        font-weight: 600;\n        color: var(--text-color-light);\n        text-transform: capitalize;\n    }\n    .status-approved { background-color: var(--success-color); }\n    .status-rejected { background-color: var(--error-color); }\n    .status-pending { background-color: var(--accent-color); }\n\n    .modal-content {\n        background-color: var(--form-input-bg);\n        border-radius: 8px;\n        padding: 20px;\n        position: relative;\n        max-width: 90%;\n        max-height: 90%;\n        overflow: auto;\n    }\n    .verify-dialog {\n        max-width: 400px;\n        text-align: center;\n        padding: 30px;\n    }\n    .verify-dialog h3 {\n        margin-bottom: 15px;\n        font-size: 1.3rem;\n        font-weight: 700;\n    }\n    .otp-input {\n        width: 100%;\n        max-width: 200px;\n        padding: 10px;\n        font-size: 1.2rem;\n        text-align: center;\n        border: 1px solid var(--primary-color);\n        border-radius: 8px;\n        margin: 10px auto;\n        box-sizing: border-box;\n    }\n    .verify-actions {\n        margin-top: 20px;\n        display: flex;\n        justify-content: flex-end;\n        gap: 10px;\n    }\n    .otp-timer {\n        margin: 10px 0;\n    }\n    .otp-countdown {\n        font-size: 1.5rem;\n        font-weight: 700;\n        color: var(--accent-color);\n        font-variant-numeric: tabular-nums;\n    }\n    .resend-btn {\n        margin-top: 5px;\n    }\n    .preview-image {\n        display: block;\n        max-width: 100%;\n        max-height: calc(100vh - 100px);\n        margin: 0 auto;\n    }\n    .close-button {\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        background: none;\n        border: none;\n        color: var(--text-color-dark);\n        font-size: 1.2em;\n        cursor: pointer;\n        outline: none;\n    }\n\n\n    /* ---=== Success Page ===--- */\n    .success-page {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        min-height: 100vh;\n        padding: 20px;\n        text-align: center;\n        background-color: var(--docs-bg);\n    }\n    .success-icon {\n        color: var(--success-color);\n        width: 100px;\n        height: 100px;\n        margin-bottom: 30px;\n    }\n    .success-title {\n        font-size: 2.5rem;\n        font-weight: 700;\n        color: var(--text-color-dark);\n        margin-bottom: 15px;\n    }\n    .success-message {\n        font-size: 1.2rem;\n        color: var(--text-color-dark);\n        opacity: 0.8;\n        margin-bottom: 40px;\n    }\n    .reference-number {\n        background-color: rgba(40,167,69,0.1);\n        border: 1px solid #28a745;\n        padding: 10px 20px;\n        border-radius: 8px;\n        color: #28a745;\n        font-weight: 600;\n        margin-bottom: 20px;\n    }\n\n    /* ---=== Sequential Docs Page Styles ===--- */\n    .sequential-docs-page .form-main {\n        max-width: 1200px;\n        width: 100%;\n    }\n    .sequential-docs-page .result-container {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 30px;\n        width: 100%;\n    }\n    .sequential-docs-page .image-preview-box {\n        position: relative;\n        border: 1px solid var(--secondary-color);\n        border-radius: 12px;\n        padding: 20px;\n        background-color: var(--form-input-bg);\n    }\n    .sequential-docs-page .image-preview-box.scanning::after {\n        content: \'\';\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: linear-gradient(to bottom, rgba(255,255,255,0) 0%, rgba(255,255,255,0.05) 50%, rgba(255,255,255,0) 100%);\n        animation: scan 2s infinite;\n    }\n    .sequential-docs-page .data-result-box {\n        border: 1px solid var(--secondary-color);\n        border-radius: 12px;\n        padding: 20px;\n        background-color: var(--form-input-bg);\n    }\n    .sequential-docs-page .stamp-overlay {\n        position: absolute;\n        top: 10px;\n        right: 10px;\n    }\n    @keyframes scan {\n        0% { transform: translateY(-100%); }\n        100% { transform: translateY(100%); }\n    }\n\n\n    /* ---=== RESPONSIVE ADJUSTMENTS ===--- */\n    @media (max-width: 768px) {\n        .header { padding: 10px 20px; }\n        .logo { height: 50px; }\n        .main { flex-direction: column; justify-content: center; padding: 20px; height: auto; min-height: calc(100vh - 70px); }\n        .menu-card { width: 90%; max-width: none; padding: 30px 25px; }\n        .landing-title { font-size: 2.5rem; }\n        .docs-grid { grid-template-columns: 1fr; }\n        .form-title { font-size: 2rem; align-self: center; text-align: center; }\n        .form-section h3 { font-size: 1.5rem; }\n        .company-form-grid { grid-template-columns: 1fr; }\n        .form-grid-columns {\n            grid-template-columns: 1fr;\n            gap: 20px 0;\n        }\n        .sequential-docs-page .result-container {\n            grid-template-columns: 1fr;\n        }\n    }\n    @media (max-width: 480px) {\n        .landing-title { font-size: 2rem; }\n        .landing-subtitle { font-size: 1rem; }\n        .landing-logo { height: 100px; }\n        .landing-buttons-container button { font-size: 1rem; padding: 12px; }\n        .menu-card h2 { font-size: 1.5rem; }\n        .menu-card button { font-size: 1rem; padding: 14px; }\n        .upload-box { flex-direction: column; text-align: center; }\n        .national-id-group { flex-wrap: wrap; gap: 5px; }\n        .national-id-input { width: calc(25% - 10px); }\n        .theme-switcher-button { width: 26px; height: 26px; }\n        .language-switcher span { padding: 4px 8px; }\n        .header-switchers { gap: 15px; }\n        .form-main { padding: 20px; }\n        .form-container { max-width: 100%; }\n        .confirmation-document { padding: 20px; }\n    }\n  '}),g=n.p+"static/media/logo-color.1d5752929bc22acbf1a6.png",y=n.p+"static/media/logo-white.448e23dfcf5da888d4ee.png",b=g,w=y,v={back:{en:"Back",ar:"\u0627\u0644\u0639\u0648\u062f\u0629"},next:{en:"Next",ar:"\u0627\u0644\u062a\u0627\u0644\u064a"},requiredDocs:{en:"Required Documents",ar:"\u0627\u0644\u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629"},selectService:{en:"Select Service Type",ar:"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u062e\u062f\u0645\u0629"},selectApplication:{en:"Select Application",ar:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0637\u0644\u0628"},personal:{en:"Personal",ar:"\u0634\u062e\u0635\u064a"},guaranteed:{en:"Guaranteed",ar:"\u0645\u0636\u0645\u0648\u0646\u064a\u0646"},businessmen:{en:"Businessmen",ar:"\u0631\u062c\u0627\u0644 \u0623\u0639\u0645\u0627\u0644"},companies:{en:"Companies",ar:"\u0634\u0631\u0643\u0627\u062a"},expat:{en:"Expat",ar:"\u0648\u0627\u0641\u062f"},openAccount:{en:"Open a New Account",ar:"\u0641\u062a\u062d \u062d\u0633\u0627\u0628 \u062c\u062f\u064a\u062f"},completeAccount:{en:"Complete Account Opening",ar:"\u0625\u062a\u0645\u0627\u0645 \u0639\u0645\u0644\u064a\u0629 \u0641\u062a\u062d \u0627\u0644\u062d\u0633\u0627\u0628"},pendingApplications:{en:"Pending Applications",ar:"\u0627\u0644\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u0645\u0639\u0644\u0642\u0629"},bankAccountOpening:{en:"Bank Account Opening",ar:"\u0641\u062a\u062d \u062d\u0633\u0627\u0628 \u0628\u0646\u0643\u064a"},welcomeSub:{en:"Your gateway to modern banking services",ar:"\u0628\u0648\u0627\u0628\u062a\u0643\u0645 \u0644\u0644\u062e\u062f\u0645\u0627\u062a \u0627\u0644\u0645\u0635\u0631\u0641\u064a\u0629 \u0627\u0644\u062d\u062f\u064a\u062b\u0629"},welcomeTitle:{en:"Daman Islamic Bank",ar:"\u0645\u0635\u0631\u0641 \u0627\u0644\u0636\u0645\u0627\u0646 \u0627\u0644\u0625\u0633\u0644\u0627\u0645\u064a"},submitRequest:{en:"Submit Application",ar:"\u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0637\u0644\u0628"},successTitle:{en:"Success!",ar:"\u062a\u0645 \u0628\u0646\u062c\u0627\u062d!"},successMsg:{en:"Your request has been submitted successfully. We will contact you shortly.",ar:"\u062a\u0645 \u062a\u0642\u062f\u064a\u0645 \u0637\u0644\u0628\u0643 \u0628\u0646\u062c\u0627\u062d. \u0633\u0648\u0641 \u0646\u062a\u0648\u0627\u0635\u0644 \u0645\u0639\u0643 \u0642\u0631\u064a\u0628\u0627\u064b."},referenceLabel:{en:"Reference Number",ar:"\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u062c\u0639"},createdAt:{en:"Created At",ar:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0625\u0646\u0634\u0627\u0621"},aiModelUsed:{en:"AI Model",ar:"\u0646\u0645\u0648\u0630\u062c \u0627\u0644\u0630\u0643\u0627\u0621 \u0627\u0644\u0627\u0635\u0637\u0646\u0627\u0639\u064a"},backToHome:{en:"Back to Home",ar:"\u0627\u0644\u0639\u0648\u062f\u0629 \u0644\u0644\u0631\u0626\u064a\u0633\u064a\u0629"},successAccount:{en:"Account Finalized Successfully!",ar:"\u062a\u0645 \u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u062d\u0633\u0627\u0628 \u0628\u0646\u062c\u0627\u062d!"},customerCard:{en:"Customer ID Card",ar:"\u0628\u0637\u0627\u0642\u0629 \u0647\u0648\u064a\u0629 \u0627\u0644\u0639\u0645\u064a\u0644"},receipt:{en:"Service Receipt",ar:"\u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u062e\u062f\u0645\u0629"},fees:{en:"Service Fees",ar:"\u0631\u0633\u0648\u0645 \u0627\u0644\u062e\u062f\u0645\u0629"},printReceipt:{en:"Print Receipt",ar:"\u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0625\u064a\u0635\u0627\u0644"},confirmFee:{en:"Customer has deposited the fees.",ar:"\u0642\u0627\u0645 \u0627\u0644\u0639\u0645\u064a\u0644 \u0628\u0625\u064a\u062f\u0627\u0639 \u0627\u0644\u0631\u0633\u0648\u0645."},printCard:{en:"Print ID Card",ar:"\u0637\u0628\u0627\u0639\u0629 \u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0647\u0648\u064a\u0629"},exportCard:{en:"Export Card as PNG",ar:"\u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0643\u0635\u0648\u0631\u0629"},goHome:{en:"Finish & Go to Home",ar:"\u0625\u0646\u0647\u0627\u0621 \u0648\u0627\u0644\u0639\u0648\u062f\u0629 \u0644\u0644\u0631\u0626\u064a\u0633\u064a\u0629"},thankYou:{en:"Thank you for banking with us!",ar:"\u0634\u0643\u0631\u0627\u064b \u0644\u062a\u0639\u0627\u0645\u0644\u0643\u0645 \u0645\u0639\u0646\u0627!"},officialReceipt:{en:"Official Receipt",ar:"\u0625\u064a\u0635\u0627\u0644 \u0631\u0633\u0645\u064a"},eservicesTitle:{en:"E-Services Registration",ar:"\u0627\u0644\u062a\u0633\u062c\u064a\u0644 \u0641\u064a \u0627\u0644\u062e\u062f\u0645\u0627\u062a \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a\u0629"},eservicesSub:{en:"This service is under construction.",ar:"\u0647\u0630\u0647 \u0627\u0644\u062e\u062f\u0645\u0629 \u0642\u064a\u062f \u0627\u0644\u062a\u0637\u0648\u064a\u0631"},english:{en:"English",ar:"\u0627\u0644\u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629"},arabic:{en:"Arabic",ar:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"},copyRight:{en:"\xa9 ".concat((new Date).getFullYear()," Daman Islamic Bank"),ar:"\xa9 ".concat((new Date).getFullYear()," \u0645\u0635\u0631\u0641 \u0627\u0644\u0636\u0645\u0627\u0646 \u0627\u0644\u0625\u0633\u0644\u0627\u0645\u064a")},personalInfo:{en:"Personal Information",ar:"\u0628\u064a\u0627\u0646\u0627\u062a \u0634\u062e\u0635\u064a\u0629"},fullName:{en:"Full Name",ar:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644"},firstNameAr:{en:"First Name (Arabic)",ar:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0623\u0648\u0644"},middleNameAr:{en:"Middle Name (Arabic)",ar:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0623\u0648\u0633\u0637"},lastNameAr:{en:"Last Name (Arabic)",ar:"\u0627\u0644\u0644\u0642\u0628"},surnameAr:{en:"Surname (Arabic)",ar:"\u0627\u0644\u0644\u0642\u0628"},motherFullName:{en:"Mother's Full Name",ar:"\u0627\u0633\u0645 \u0627\u0644\u0623\u0645 \u0628\u0627\u0644\u0643\u0627\u0645\u0644"},maritalStatus:{en:"Marital Status",ar:"\u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0627\u062c\u062a\u0645\u0627\u0639\u064a\u0629"},single:{en:"Single",ar:"\u0623\u0639\u0632\u0628/\u0639\u0632\u0628\u0627\u0621"},married:{en:"Married",ar:"\u0645\u062a\u0632\u0648\u062c/\u0645\u062a\u0632\u0648\u062c\u0629"},divorced:{en:"Divorced",ar:"\u0645\u0637\u0644\u0642/\u0645\u0637\u0644\u0642\u0629"},widowed:{en:"Widowed",ar:"\u0623\u0631\u0645\u0644/\u0623\u0631\u0645\u0644\u0629"},birthCertificate:{en:"Birth Certificate",ar:"\u0634\u0647\u0627\u062f\u0629 \u0627\u0644\u0645\u064a\u0644\u0627\u062f"},firstNameEn:{en:"First Name (English)",ar:"First Name (\u0628\u0627\u0644\u0627\u0646\u062c\u0644\u064a\u0632\u064a)"},middleNameEn:{en:"Middle Name (English)",ar:"Middle Name (\u0628\u0627\u0644\u0627\u0646\u062c\u0644\u064a\u0632\u064a)"},lastNameEn:{en:"Last Name (English)",ar:"Last Name (\u0628\u0627\u0644\u0627\u0646\u062c\u0644\u064a\u0632\u064a)"},surnameEn:{en:"Surname (English)",ar:"Surname (\u0628\u0627\u0644\u0627\u0646\u062c\u0644\u064a\u0632\u064a)"},dateOfBirth:{en:"Date of Birth",ar:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u064a\u0644\u0627\u062f"},gender:{en:"Gender",ar:"\u0627\u0644\u062c\u0646\u0633"},male:{en:"Male",ar:"\u0630\u0643\u0631"},female:{en:"Female",ar:"\u0623\u0646\u062b\u0649"},nationality:{en:"Nationality",ar:"\u0627\u0644\u062c\u0646\u0633\u064a\u0629"},libyan:{en:"Libyan",ar:"\u0644\u064a\u0628\u064a"},other:{en:"Other",ar:"\u0623\u062e\u0631\u0649"},passportNumber:{en:"Passport Number",ar:"\u0631\u0642\u0645 \u062c\u0648\u0627\u0632 \u0627\u0644\u0633\u0641\u0631"},passportIssueDate:{en:"Passport Issuing Date",ar:"\u062a\u0627\u0631\u064a\u062e \u0625\u0635\u062f\u0627\u0631 \u0627\u0644\u062c\u0648\u0627\u0632"},passportExpiryDate:{en:"Passport Expiry Date",ar:"\u062a\u0627\u0631\u064a\u062e \u0627\u0646\u062a\u0647\u0627\u0621 \u0627\u0644\u062c\u0648\u0627\u0632"},birthPlace:{en:"Place of Birth",ar:"\u0645\u0643\u0627\u0646 \u0627\u0644\u0648\u0644\u0627\u062f\u0629"},nid:{en:"National ID",ar:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0648\u0637\u0646\u064a"},nidOrCustomerId:{en:"NID or Customer ID",ar:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0648\u0637\u0646\u064a \u0623\u0648 \u0631\u0642\u0645 \u0627\u0644\u0639\u0645\u064a\u0644"},documentType:{en:"Document Type",ar:"\u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u062a\u0646\u062f"},phoneNumber:{en:"Phone Number",ar:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"},enableEmail:{en:"Enable Email",ar:"\u062a\u0641\u0639\u064a\u0644 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"},email:{en:"Email",ar:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"},residenceExpiry:{en:"Residence Expiry Date",ar:"\u062a\u0627\u0631\u064a\u062e \u0627\u0646\u062a\u0647\u0627\u0621 \u0627\u0644\u0627\u0642\u0627\u0645\u0629"},censusCardNumber:{en:"Census Card Number",ar:"\u0631\u0642\u0645 \u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u062d\u0635\u0631"},familyRecordNumber:{en:"Family Record Number",ar:"\u0631\u0642\u0645 \u0648\u0631\u0642\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629"},addressInfoTitle:{en:"Address Information",ar:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0639\u0646\u0648\u0627\u0646"},country:{en:"Country",ar:"\u0627\u0644\u062f\u0648\u0644\u0629"},city:{en:"City",ar:"\u0627\u0644\u0645\u062f\u064a\u0646\u0629"},area:{en:"Area",ar:"\u0627\u0644\u0645\u0646\u0637\u0642\u0629"},selectBranch:{en:"Select Branch",ar:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0641\u0631\u0639"},residentialAddress:{en:"Residential Address",ar:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0633\u0643\u0646\u064a"},workInfoTitle:{en:"Work and Income Information",ar:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0639\u0645\u0644 \u0648\u0627\u0644\u062f\u062e\u0644"},employmentStatus:{en:"Employment Status",ar:"\u062d\u0627\u0644\u0629 \u0627\u0644\u062a\u0648\u0638\u064a\u0641"},jobTitle:{en:"Job Title",ar:"\u0627\u0644\u0645\u0633\u0645\u0649 \u0627\u0644\u0648\u0638\u064a\u0641\u064a"},employer:{en:"Employer",ar:"\u062c\u0647\u0629 \u0627\u0644\u0639\u0645\u0644"},employerAddress:{en:"Employer's Address",ar:"\u0639\u0646\u0648\u0627\u0646 \u062c\u0647\u0629 \u0627\u0644\u0639\u0645\u0644"},employerPhone:{en:"Employer's Phone",ar:"\u0647\u0627\u062a\u0641 \u062c\u0647\u0629 \u0627\u0644\u0639\u0645\u0644"},sourceOfIncome:{en:"Main Source of Income",ar:"\u0627\u0644\u0645\u0635\u062f\u0631 \u0627\u0644\u0631\u0626\u064a\u0633\u064a \u0644\u0644\u062f\u062e\u0644"},monthlyIncome:{en:"Average Monthly Income",ar:"\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u062f\u062e\u0644 \u0627\u0644\u0634\u0647\u0631\u064a"},incomeLess2000:{en:"Less than 2000 LYD",ar:"\u0623\u0642\u0644 \u0645\u0646 2000 \u062f\u064a\u0646\u0627\u0631"},income2000to5000:{en:"2000 - 5000 LYD",ar:"2000 - 5000 \u062f\u064a\u0646\u0627\u0631"},incomeMore5000:{en:"More than 5000 LYD",ar:"\u0623\u0643\u062b\u0631 \u0645\u0646 5000 \u062f\u064a\u0646\u0627\u0631"},workSector:{en:"Work Sector",ar:"\u0642\u0637\u0627\u0639 \u0627\u0644\u0639\u0645\u0644"},workSectorPrivate:{en:"Private",ar:"\u062e\u0627\u0635"},workSectorPublic:{en:"Public",ar:"\u062d\u0643\u0648\u0645\u064a"},workSectorFreelance:{en:"Freelance",ar:"\u0639\u0645\u0644 \u062d\u0631"},fieldOfWork:{en:"Field of Work",ar:"\u0645\u062c\u0627\u0644 \u0627\u0644\u0639\u0645\u0644"},workStartDate:{en:"Work Start Date",ar:"\u062a\u0627\u0631\u064a\u062e \u0628\u062f\u0621 \u0627\u0644\u0639\u0645\u0644"},workCountry:{en:"Work Country",ar:"\u062f\u0648\u0644\u0629 \u062c\u0647\u0629 \u0627\u0644\u0639\u0645\u0644"},workCity:{en:"Work City",ar:"\u0645\u062f\u064a\u0646\u0629 \u062c\u0647\u0629 \u0627\u0644\u0639\u0645\u0644"},work_country:{en:"Work Country",ar:"\u062f\u0648\u0644\u0629 \u062c\u0647\u0629 \u0627\u0644\u0639\u0645\u0644"},work_city:{en:"Work City",ar:"\u0645\u062f\u064a\u0646\u0629 \u062c\u0647\u0629 \u0627\u0644\u0639\u0645\u0644"},countryCode:{en:"Country Code",ar:"\u0631\u0645\u0632 \u0627\u0644\u0628\u0644\u062f"},residenceCertificate:{en:"Residence Certificate",ar:"\u0634\u0647\u0627\u062f\u0629 \u0625\u0642\u0627\u0645\u0629"},certifyCorrect:{en:"I certify that all data entered is correct.",ar:"\u0623\u0642\u0631 \u0628\u0623\u0646 \u062c\u0645\u064a\u0639 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u062f\u062e\u0644\u0629 \u0635\u062d\u064a\u062d\u0629."},agreeTerms:{en:"I agree to the Terms and Conditions.",ar:"\u0623\u0648\u0627\u0641\u0642 \u0639\u0644\u0649 \u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645."},agreeError:{en:"You must accept the terms to continue.",ar:"\u064a\u062c\u0628 \u0642\u0628\u0648\u0644 \u0627\u0644\u0634\u0631\u0648\u0637 \u0644\u0644\u0627\u0633\u062a\u0645\u0631\u0627\u0631."},censusCardPhoto:{en:"Census Card Photo",ar:"\u0635\u0648\u0631\u0629 \u0645\u0646 \u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u062d\u0635\u0631"},approvedNationalId:{en:"Approved National ID",ar:"\u0635\u0648\u0631\u0629 \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0648\u0637\u0646\u064a"},passportPhoto:{en:"Passport Photo",ar:"\u0635\u0648\u0631\u0629 \u062c\u0648\u0627\u0632 \u0627\u0644\u0633\u0641\u0631"},accountOpeningLetter:{en:"Account Opening Letter from Employer",ar:"\u0631\u0633\u0627\u0644\u0629 \u0641\u062a\u062d \u062d\u0633\u0627\u0628 \u0645\u0646 \u062c\u0647\u0629 \u0627\u0644\u0639\u0645\u0644"},recentPersonalPhoto:{en:"Face Registration Page",ar:"\u0635\u0641\u062d\u0629 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u0648\u062c\u0647"},selfieTitle:{en:"Face Registration & Verification",ar:"\u062a\u0633\u062c\u064a\u0644 \u0648\u062a\u062d\u0642\u0642 \u0627\u0644\u0648\u062c\u0647"},startLivenessCheck:{en:"Start Liveness Check",ar:"\u0628\u062f\u0621 \u0641\u062d\u0635 \u0627\u0644\u062d\u064a\u0648\u064a\u0629"},loadingModels:{en:"Loading models... Please wait.",ar:"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0646\u0645\u0627\u0630\u062c... \u064a\u0631\u062c\u0649 \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631."},requestingCameraPermission:{en:"Requesting camera permission...",ar:"\u062c\u0627\u0631\u064d \u0637\u0644\u0628 \u0625\u0630\u0646 \u0627\u0644\u0643\u0627\u0645\u064a\u0631\u0627..."},cameraPermissionDenied:{en:"Camera permission denied.",ar:"\u062a\u0645 \u0631\u0641\u0636 \u0625\u0630\u0646 \u0627\u0644\u0643\u0627\u0645\u064a\u0631\u0627."},cameraReady:{en:"Camera ready. Click the button to start.",ar:"\u0627\u0644\u0643\u0627\u0645\u064a\u0631\u0627 \u062c\u0627\u0647\u0632\u0629. \u0627\u0646\u0642\u0631 \u0639\u0644\u0649 \u0627\u0644\u0632\u0631 \u0644\u0644\u0628\u062f\u0621."},followInstructions:{en:"Follow the instructions on the screen...",ar:"\u0627\u062a\u0628\u0639 \u0627\u0644\u062a\u0639\u0644\u064a\u0645\u0627\u062a \u0627\u0644\u062a\u064a \u062a\u0638\u0647\u0631 \u0639\u0644\u0649 \u0627\u0644\u0634\u0627\u0634\u0629..."},livenessConfirmed:{en:"\u2705 Liveness Confirmed! Capturing profile...",ar:"\u2705 \u062a\u0645 \u062a\u0623\u0643\u064a\u062f \u0627\u0644\u062d\u064a\u0648\u064a\u0629! \u062c\u0627\u0631\u064a \u0627\u0644\u062a\u0642\u0627\u0637 \u0645\u0644\u0641\u0643 \u0627\u0644\u0634\u062e\u0635\u064a..."},registrationComplete:{en:"Registration complete. Now verifying...",ar:"\u0627\u0643\u062a\u0645\u0644 \u0627\u0644\u062a\u0633\u062c\u064a\u0644. \u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0642\u0642 \u0627\u0644\u0622\u0646..."},couldNotCapture:{en:"Could not get high-quality capture. Please try again.",ar:"\u0644\u0645 \u0646\u062a\u0645\u0643\u0646 \u0645\u0646 \u0627\u0644\u062a\u0642\u0627\u0637 \u0635\u0648\u0631\u0629 \u0639\u0627\u0644\u064a\u0629 \u0627\u0644\u062c\u0648\u062f\u0629. \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649."},identityVerified:{en:"\u2705 Identity Verified!",ar:"\u2705 \u062a\u0645 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0627\u0644\u0647\u0648\u064a\u0629!"},center:{en:"Center",ar:"\u0648\u0633\u0637"},left:{en:"Left",ar:"\u064a\u0633\u0627\u0631"},right:{en:"Right",ar:"\u064a\u0645\u064a\u0646"},up:{en:"Up",ar:"\u0623\u0639\u0644\u0649"},down:{en:"Down",ar:"\u0623\u0633\u0641\u0644"},verified:{en:"Verified",ar:"\u062a\u0645 \u0627\u0644\u062a\u062d\u0642\u0642"},challengeCenter:{en:"Position your face in the oval",ar:"\u0636\u0639 \u0648\u062c\u0647\u0643 \u062f\u0627\u062e\u0644 \u0627\u0644\u0634\u0643\u0644 \u0627\u0644\u0628\u064a\u0636\u0627\u0648\u064a"},challengeTurnLeft:{en:"Turn your head LEFT",ar:"\u0623\u062f\u0631 \u0631\u0623\u0633\u0643 \u0625\u0644\u0649 \u0627\u0644\u064a\u0633\u0627\u0631"},challengeTurnRight:{en:"Turn your head RIGHT",ar:"\u0623\u062f\u0631 \u0631\u0623\u0633\u0643 \u0625\u0644\u0649 \u0627\u0644\u064a\u0645\u064a\u0646"},challengeTurnUp:{en:"Look UP",ar:"\u0627\u0646\u0638\u0631 \u0625\u0644\u0649 \u0627\u0644\u0623\u0639\u0644\u0649"},challengeTurnDown:{en:"Look DOWN",ar:"\u0627\u0646\u0638\u0631 \u0625\u0644\u0649 \u0627\u0644\u0623\u0633\u0641\u0644"},extractedData:{en:"Extracted Data",ar:"\u0627\u0633\u062a\u062e\u0631\u0627\u062c \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"},bankStatement:{en:"Bank statement for the last months (if any)",ar:"\u0643\u0634\u0641 \u062d\u0633\u0627\u0628 \u0645\u0635\u0631\u0641\u064a \u0644\u0644\u0623\u0634\u0647\u0631 \u0627\u0644\u0645\u0627\u0636\u064a\u0629 (\u0625\u0646 \u0648\u062c\u062f)"},taxCard:{en:"Tax Card or Certificate",ar:"\u0628\u0637\u0627\u0642\u0629 \u0623\u0648 \u0634\u0647\u0627\u062f\u0629 \u0636\u0631\u064a\u0628\u064a\u0629"},commercialChamberCertificate:{en:"Commercial Chamber Registration Certificate",ar:"\u0634\u0647\u0627\u062f\u0629 \u0642\u064a\u062f \u0628\u0627\u0644\u063a\u0631\u0641\u0629 \u0627\u0644\u062a\u062c\u0627\u0631\u064a\u0629"},legalRepAuth:{en:"Official authorization for the legal representative",ar:"\u062a\u0641\u0648\u064a\u0636 \u0631\u0633\u0645\u064a \u0644\u0644\u0645\u0645\u062b\u0644 \u0627\u0644\u0642\u0627\u0646\u0648\u0646\u064a"},commercialRegisterCopy:{en:"Copy of the Commercial Register",ar:"\u0646\u0633\u062e\u0629 \u0645\u0646 \u0627\u0644\u0633\u062c\u0644 \u0627\u0644\u062a\u062c\u0627\u0631\u064a"},nationalIdPhotos:{en:"Photos of National ID or Passport for authorized signatories",ar:"\u0635\u0648\u0631 \u0644\u0644\u0647\u0648\u064a\u0629 \u0623\u0648 \u062c\u0648\u0627\u0632 \u0627\u0644\u0633\u0641\u0631 \u0644\u0644\u0645\u062e\u0648\u0644\u064a\u0646 \u0628\u0627\u0644\u062a\u0648\u0642\u064a\u0639"},personalPhotos:{en:"Recent personal photos for authorized signatories",ar:"\u0635\u0648\u0631 \u0634\u062e\u0635\u064a\u0629 \u062d\u062f\u064a\u062b\u0629 \u0644\u0644\u0645\u062e\u0648\u0644\u064a\u0646 \u0628\u0627\u0644\u062a\u0648\u0642\u064a\u0639"},confirmData:{en:"Please confirm your information",ar:"\u064a\u0631\u062c\u0649 \u062a\u0623\u0643\u064a\u062f \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u062f\u062e\u0644\u0629"},confirm:{en:"Confirm",ar:"\u062a\u0623\u0643\u064a\u062f"},cancel:{en:"Cancel",ar:"\u0625\u0644\u063a\u0627\u0621"},verifyContact:{en:"Verify Contact Information",ar:"\u062a\u0623\u0643\u064a\u062f \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0627\u062a\u0635\u0627\u0644"},enterOtp:{en:"Enter the OTP sent to your phone/email",ar:"\u0623\u062f\u062e\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0627\u0644\u0645\u0631\u0633\u0644 \u0625\u0644\u0649 \u0647\u0627\u062a\u0641\u0643/\u0628\u0631\u064a\u062f\u0643"},otpCountdown:{en:"Time remaining",ar:"\u0627\u0644\u0648\u0642\u062a \u0627\u0644\u0645\u062a\u0628\u0642\u064a"},resendOtp:{en:"Resend OTP",ar:"\u0625\u0639\u0627\u062f\u0629 \u0625\u0631\u0633\u0627\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642"},upload_prompt:{en:"Upload your document",ar:"\u0642\u0645 \u0628\u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0633\u062a\u0646\u062f"},extracting_data:{en:"Extracting data, please wait...",ar:"\u062c\u0627\u0631\u064a \u0627\u0633\u062a\u062e\u0631\u0627\u062c \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a\u060c \u064a\u0631\u062c\u0649 \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631..."},invalidPassport:{en:"Please upload a valid passport photo.",ar:"\u064a\u0631\u062c\u0649 \u062a\u062d\u0645\u064a\u0644 \u0635\u0648\u0631\u0629 \u062c\u0648\u0627\u0632 \u0633\u0641\u0631 \u0635\u0627\u0644\u062d\u0629."},invalidNid:{en:"Please upload a valid national ID image.",ar:"\u064a\u0631\u062c\u0649 \u062a\u062d\u0645\u064a\u0644 \u0635\u0648\u0631\u0629 \u0631\u0642\u0645 \u0648\u0637\u0646\u064a \u0635\u0627\u0644\u062d\u0629."},incorrectOtp:{en:"Incorrect OTP",ar:"\u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u062e\u0627\u0637\u0626"},incorrectEmailOtp:{en:"Incorrect email OTP",ar:"\u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u062e\u0627\u0637\u0626"},exportPdf:{en:"Export PDF",ar:"\u062a\u0635\u062f\u064a\u0631"},registerEServices:{en:"Register for E-Services",ar:"\u062a\u0633\u062c\u064a\u0644 \u0641\u064a \u062e\u062f\u0645\u0627\u062a \u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a\u0629"},refresh:{en:"Refresh",ar:"\u062a\u062d\u062f\u064a\u062b"},gemini:{en:"Gemini",ar:"Gemini"},chatgpt:{en:"ChatGPT",ar:"\u0634\u0627\u062a \u062c\u064a \u0628\u064a \u062a\u064a"},tesseract:{en:"Tesseract",ar:"\u062a\u0633\u064a\u0631\u0627\u0643\u062a"},change_document:{en:"Change Document",ar:"\u062a\u063a\u064a\u064a\u0631 \u0627\u0644\u0645\u0633\u062a\u0646\u062f"},loading:{en:"Loading...",ar:"\u062c\u0627\u0631\u064d \u0627\u0644\u062a\u062d\u0645\u064a\u0644..."},search:{en:"Search",ar:"\u0628\u062d\u062b"},referenceOrNid:{en:"Reference Number or National ID",ar:"\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u062c\u0639 \u0623\u0648 \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0648\u0637\u0646\u064a"},not_found:{en:"No data found.",ar:"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0628\u064a\u0627\u0646\u0627\u062a."},server_error:{en:"Server error.",ar:"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062e\u0627\u062f\u0645."},missing_identifier:{en:"Please enter a reference number or national ID.",ar:"\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u062c\u0639 \u0623\u0648 \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0648\u0637\u0646\u064a."},reviewDocuments:{en:"Review Uploaded Documents",ar:"\u0645\u0631\u0627\u062c\u0639\u0629 \u0627\u0644\u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0627\u0644\u0645\u0631\u0641\u0648\u0639\u0629"},valid:{en:"Valid",ar:"\u0635\u0627\u0644\u062d"},invalid:{en:"Invalid",ar:"\u063a\u064a\u0631 \u0635\u0627\u0644\u062d"},selectValidation:{en:"Select validation",ar:"\u0627\u062e\u062a\u0631 \u0627\u0644\u062a\u062d\u0642\u0642"},error_extracting_data:{en:"Failed to extract data. Please try again.",ar:"\u0641\u0634\u0644 \u0627\u0633\u062a\u062e\u0631\u0627\u062c \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a. \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649."},testDb:{en:"Test DB Connection",ar:"\u0627\u062e\u062a\u0628\u0627\u0631 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0628\u0642\u0627\u0639\u062f\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"},testingDb:{en:"Testing connection...",ar:"\u062c\u0627\u0631\u064a \u0627\u062e\u062a\u0628\u0627\u0631 \u0627\u0644\u0627\u062a\u0635\u0627\u0644..."},dbConnected:{en:"Database connected!",ar:"\u062a\u0645 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0628\u0642\u0627\u0639\u062f\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a!"},dbFailed:{en:"Database connection failed.",ar:"\u0641\u0634\u0644 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0628\u0642\u0627\u0639\u062f\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a."},dbSaveError:{en:"Failed to save data. Please try again. If the same error happens again please contact the Support IT department.",ar:"\u0641\u0634\u0644 \u062d\u0641\u0638 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a. \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649. \u0625\u0630\u0627 \u062a\u0643\u0631\u0631 \u0627\u0644\u062e\u0637\u0623 \u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u0648\u0627\u0635\u0644 \u0645\u0639 \u0642\u0633\u0645 \u062f\u0639\u0645 \u062a\u0642\u0646\u064a\u0629 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a."},pendingApprovals:{en:"Pending Approvals",ar:"\u0627\u0644\u0645\u0631\u0627\u062c\u0639 \u063a\u064a\u0631 \u0627\u0644\u0645\u0639\u062a\u0645\u062f\u0629"},approve:{en:"Approve",ar:"\u0627\u0639\u062a\u0645\u0627\u062f"},reject:{en:"Reject",ar:"\u0631\u0641\u0636"},edit:{en:"Edit",ar:"\u062a\u0639\u062f\u064a\u0644"},save:{en:"Save",ar:"\u062d\u0641\u0638"},review:{en:"Review",ar:"\u0645\u0631\u0627\u062c\u0639\u0629"},pending:{en:"Pending",ar:"\u0642\u064a\u062f \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631"},approved:{en:"Approved",ar:"\u062a\u0645\u062a \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629"},rejected:{en:"Rejected",ar:"\u0645\u0631\u0641\u0648\u0636"},all:{en:"All",ar:"\u0627\u0644\u0643\u0644"},applicantName:{en:"Applicant Name",ar:"\u0627\u0633\u0645 \u0645\u0642\u062f\u0645 \u0627\u0644\u0637\u0644\u0628"},serviceType:{en:"Service Type",ar:"\u0646\u0648\u0639 \u0627\u0644\u062e\u062f\u0645\u0629"},submissionDate:{en:"Submission Date",ar:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0642\u062f\u064a\u0645"},status:{en:"Status",ar:"\u0627\u0644\u062d\u0627\u0644\u0629"},uploadedDocuments:{en:"Uploaded Documents",ar:"\u0627\u0644\u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0627\u0644\u0645\u0631\u0641\u0648\u0639\u0629"},processing:{en:"Processing...",ar:"\u062c\u0627\u0631\u064d \u0627\u0644\u0645\u0639\u0627\u0644\u062c\u0629..."},unlock:{en:"Unlock",ar:"\u0641\u062a\u062d \u0627\u0644\u062d\u0642\u0648\u0644"},editHint:{en:"If any information is wrong, double-click the field to unlock and edit it.",ar:"\u0625\u0630\u0627 \u0643\u0627\u0646\u062a \u0647\u0646\u0627\u0643 \u0623\u062e\u0637\u0627\u0621 \u0641\u064a \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a\u060c \u0627\u0646\u0642\u0631 \u0645\u0631\u062a\u064a\u0646 \u0639\u0644\u0649 \u0627\u0644\u062d\u0642\u0644 \u0644\u0641\u062a\u062d\u0647 \u0648\u062a\u0639\u062f\u064a\u0644\u0647."},requiredFieldsHint:{en:"Fields marked with * must be completed.",ar:"\u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0634\u0627\u0631 \u0625\u0644\u064a\u0647\u0627 \u0628\u0639\u0644\u0627\u0645\u0629 * \u064a\u062c\u0628 \u062a\u0639\u0628\u0626\u062a\u0647\u0627."},registerMobileApp:{en:"Registration for Bank Mobile Application",ar:"\u0627\u0644\u062a\u0633\u062c\u064a\u0644 \u0641\u064a \u062a\u0637\u0628\u064a\u0642 \u0627\u0644\u0645\u0635\u0631\u0641"},registerSmsService:{en:"Registration for Bank SMS Service",ar:"\u0627\u0644\u062a\u0633\u062c\u064a\u0644 \u0641\u064a \u062e\u062f\u0645\u0629 \u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0642\u0635\u064a\u0631\u0629"},registerLocalCard:{en:"Registration for Local Card",ar:"\u0627\u0644\u062a\u0633\u062c\u064a\u0644 \u0644\u0644\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0645\u062d\u0644\u064a\u0629"},registerInternationalCard:{en:"Registration for International Card",ar:"\u0627\u0644\u062a\u0633\u062c\u064a\u0644 \u0644\u0644\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u062f\u0648\u0644\u064a\u0629"},completeAccountRequest:{en:"Complete Account Opening Request",ar:"\u0625\u062a\u0645\u0627\u0645 \u0637\u0644\u0628 \u0641\u062a\u062d \u0627\u0644\u062d\u0633\u0627\u0628"},accountSummary:{en:"Customer Information Summary",ar:"\u0645\u0644\u062e\u0635 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644"},customerId:{en:"Customer ID",ar:"\u0631\u0642\u0645 \u0627\u0644\u0639\u0645\u064a\u0644"},open:{en:"Open",ar:"\u0641\u062a\u062d"},noResults:{en:"No results found",ar:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0646\u062a\u0627\u0626\u062c"},branch:{en:"Branch ID",ar:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0631\u0639"},branchName:{en:"Branch Name",ar:"\u0627\u0633\u0645 \u0627\u0644\u0641\u0631\u0639"},cityCode:{en:"City Code",ar:"\u0631\u0645\u0632 \u0627\u0644\u0645\u062f\u064a\u0646\u0629"},branchDate:{en:"Branch Date",ar:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0641\u0631\u0639"},createAccount:{en:"Create Bank Account",ar:"\u0625\u0646\u0634\u0627\u0621 \u062d\u0633\u0627\u0628 \u0628\u0646\u0643\u064a"},reprintDocuments:{en:"Re-print Documents",ar:"\u0625\u0639\u0627\u062f\u0629 \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0645\u0633\u062a\u0646\u062f\u0627\u062a"},customerSignature:{en:"Customer Signature",ar:"\u062a\u0648\u0642\u064a\u0639 \u0627\u0644\u0639\u0645\u064a\u0644"},uploadFile:{en:"Upload File",ar:"\u062a\u062d\u0645\u064a\u0644 \u0645\u0644\u0641"},contractMustBeSigned:{en:"Contract must be signed by Customer",ar:"\u0646\u0645\u0627\u0630\u062c \u064a\u062c\u0628 \u0639\u0644\u0649 \u0627\u0644\u0639\u0645\u064a\u0644 \u062a\u0648\u0642\u064a\u0639\u0647\u0627"},docMobileApp:{en:"Document the Mobile APP registration form signed by the customer",ar:"\u062a\u0645 \u062a\u0648\u0642\u064a\u0639 \u0646\u0645\u0648\u0630\u062c \u062a\u0633\u062c\u064a\u0644 \u062a\u0637\u0628\u064a\u0642 \u0627\u0644\u0645\u0648\u0628\u0627\u064a\u0644 \u0645\u0646 \u0642\u0628\u0644 \u0627\u0644\u0639\u0645\u064a\u0644"},docSmsService:{en:"Document the SMS service registration form signed by the customer",ar:"\u062a\u0645 \u062a\u0648\u0642\u064a\u0639 \u0646\u0645\u0648\u0630\u062c \u062a\u0633\u062c\u064a\u0644 \u062e\u062f\u0645\u0629 \u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0642\u0635\u064a\u0631\u0629 \u0645\u0646 \u0642\u0628\u0644 \u0627\u0644\u0639\u0645\u064a\u0644"},docLocalCard:{en:"Document the Local Card registration form signed by the customer",ar:"\u062a\u0645 \u062a\u0648\u0642\u064a\u0639 \u0646\u0645\u0648\u0630\u062c \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0645\u062d\u0644\u064a\u0629 \u0645\u0646 \u0642\u0628\u0644 \u0627\u0644\u0639\u0645\u064a\u0644"},docInternationalCard:{en:"Document the International Card registration form signed by the customer",ar:"\u062a\u0645 \u062a\u0648\u0642\u064a\u0639 \u0646\u0645\u0648\u0630\u062c \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u062f\u0648\u0644\u064a\u0629 \u0645\u0646 \u0642\u0628\u0644 \u0627\u0644\u0639\u0645\u064a\u0644"},docBankAgreement:{en:"Document the bank agreement form signed by the customer",ar:"\u062a\u0645 \u062a\u0648\u0642\u064a\u0639 \u0627\u062a\u0641\u0627\u0642\u064a\u0629 \u0627\u0644\u0628\u0646\u0643 \u0627\u0644\u0645\u0648\u0642\u0639\u0629 \u0645\u0646 \u0642\u0628\u0644 \u0627\u0644\u0639\u0645\u064a\u0644"},accountNumber:{en:"Account Number",ar:"\u0631\u0642\u0645 \u0627\u0644\u062d\u0633\u0627\u0628"},creating:{en:"Creating...",ar:"\u062c\u0627\u0631\u064d \u0627\u0644\u0625\u0646\u0634\u0627\u0621..."},dateOfIssue:{en:"Passport Issuing Date",ar:"\u062a\u0627\u0631\u064a\u062e \u0627\u0635\u062f\u0627\u0631 \u062c\u0648\u0627\u0632 \u0627\u0644\u0633\u0641\u0631"},expiryDate:{en:"Passport Expiry Date",ar:"\u062a\u0627\u0631\u064a\u062e \u0635\u0644\u0627\u062d\u064a\u0629 \u062c\u0648\u0627\u0632 \u0627\u0644\u0633\u0641\u0631"},fullNameArabic:{en:"Arabic Name",ar:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644 \u0628\u0627\u0644\u0639\u0631\u0628\u064a"},givenNameEng:{en:"English Name",ar:"\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0627\u0646\u062c\u0644\u064a\u0632\u064a"},issuingPlace:{en:"Issuing Place",ar:"\u0645\u0643\u0627\u0646 \u0627\u0644\u0627\u0635\u062f\u0627\u0631"},passportNo:{en:"Passport No",ar:"\u0631\u0642\u0645 \u062c\u0648\u0627\u0632 \u0627\u0644\u0633\u0641\u0631"},placeOfBirth:{en:"Place of Birth",ar:"\u0645\u0643\u0627\u0646 \u0627\u0644\u0645\u064a\u0644\u0627\u062f"},surnameEng:{en:"English surname",ar:"\u0627\u0644\u0644\u0642\u0628 \u0628\u0627\u0644\u0627\u0646\u062c\u0644\u064a\u0632\u064a"},surnameAra:{en:"Arabic surname",ar:"\u0627\u0644\u0644\u0642\u0628 \u0628\u0627\u0644\u0639\u0631\u0628\u064a"},sex:{en:"Sex",ar:"\u0627\u0644\u062c\u0646\u0633"},birthDay:{en:"Day of Birth",ar:"\u064a\u0648\u0645 \u0627\u0644\u0645\u064a\u0644\u0627\u062f"},birthMonth:{en:"Month of Birth",ar:"\u0634\u0647\u0631 \u0627\u0644\u0645\u064a\u0644\u0627\u062f"},birthYear:{en:"Year of Birth",ar:"\u0633\u0646\u0629 \u0627\u0644\u0645\u064a\u0644\u0627\u062f"},familyId:{en:"Family ID",ar:"\u0631\u0642\u0645 \u0648\u0631\u0642\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629"},nationalId:{en:"National ID",ar:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0648\u0637\u0646\u064a"},true:{en:"True",ar:"\u0646\u0639\u0645"},uploaded:{en:"Uploaded",ar:"\u062a\u0645 \u0627\u0644\u062a\u062d\u0645\u064a\u0644"},yes:{en:"Yes",ar:"\u0646\u0639\u0645"},no:{en:"No",ar:"\u0644\u0627"},label:{en:"Field",ar:"\u0627\u0644\u062d\u0642\u0644"},value:{en:"Value",ar:"\u0627\u0644\u0642\u064a\u0645\u0629"},termsAndConditions:{en:"Terms and Conditions",ar:"\u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645"},agreePrefix:{en:"I agree to the",ar:"\u0623\u0648\u0627\u0641\u0642 \u0639\u0644\u0649"},termsContent:{en:"By using Daman Islamic Bank digital services you allow the bank to use your data at any time.",ar:"\u0628\u0627\u0633\u062a\u062e\u062f\u0627\u0645\u0643 \u0644\u062e\u062f\u0645\u0627\u062a \u0645\u0635\u0631\u0641 \u0627\u0644\u0636\u0645\u0627\u0646 \u0627\u0644\u0625\u0633\u0644\u0627\u0645\u064a \u0627\u0644\u0631\u0642\u0645\u064a\u0629 \u0641\u0625\u0646\u0643 \u062a\u0633\u0645\u062d \u0644\u0644\u0645\u0635\u0631\u0641 \u0628\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0628\u064a\u0627\u0646\u0627\u062a\u0643 \u0641\u064a \u0623\u064a \u0648\u0642\u062a."},close:{en:"Close",ar:"\u0625\u063a\u0644\u0627\u0642"},enterOtpPhone:{en:"Enter the OTP sent to your phone",ar:"\u0623\u062f\u062e\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0627\u0644\u0645\u0631\u0633\u0644 \u0625\u0644\u0649 \u0647\u0627\u062a\u0641\u0643"},enterOtpEmail:{en:"Enter the OTP sent to your email",ar:"\u0623\u062f\u062e\u0644 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0627\u0644\u0645\u0631\u0633\u0644 \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"},take_picture:{en:"Take a picture",ar:"\u0627\u0644\u062a\u0642\u0637 \u0635\u0648\u0631\u0629"}},x=function(e){return v[e]?v[e][arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en"]:e},C={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"",k=e=>{let{onNavigate:t}=e;const{setLanguage:n,language:r}=A(),[i,o]=(0,a.useState)("");return(0,s.jsx)("div",{className:"lang-selection-page",children:(0,s.jsxs)("div",{className:"lang-selection-box",children:[(0,s.jsx)("img",{src:w,alt:"Daman Islamic Bank",className:"lang-logo"}),(0,s.jsxs)("div",{className:"lang-buttons-container",children:[(0,s.jsx)("button",{className:"lang-btn",onClick:()=>{n("en"),t("landing")},children:x("english",r)}),(0,s.jsx)("button",{className:"lang-btn",onClick:()=>{n("ar"),t("landing")},children:x("arabic",r)}),(0,s.jsx)("button",{className:"lang-btn",onClick:async()=>{o("testing");try{(await fetch("".concat(C,"/api/test-db"))).ok?o("success"):o("failed")}catch(Vu){o("failed")}},children:x("testDb",r)}),i&&(0,s.jsx)("p",{className:"db-status ".concat("success"===i?"success":"failed"===i?"error":""),children:x("testing"===i?"testingDb":"success"===i?"dbConnected":"dbFailed",r)})]})]})})},B=()=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,s.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),S=()=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),(0,s.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),I=()=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),(0,s.jsx)("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),N=()=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,s.jsx)("polyline",{points:"14 2 14 8 20 8"}),(0,s.jsx)("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),(0,s.jsx)("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),(0,s.jsx)("polyline",{points:"10 9 9 9 8 9"})]}),F=()=>(0,s.jsxs)("svg",{className:"success-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 52 52",width:"52",height:"52",children:[(0,s.jsxs)("defs",{children:[(0,s.jsx)("filter",{id:"shadow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:(0,s.jsx)("feDropShadow",{dx:"0",dy:"2",stdDeviation:"3",floodColor:"#4caf50",floodOpacity:"0.6"})}),(0,s.jsxs)("linearGradient",{id:"successGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#4caf50"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#8bc34a"})]})]}),(0,s.jsx)("style",{children:"\n        .success-icon circle {\n          stroke-dasharray: 157;\n          stroke-dashoffset: 157;\n          animation: draw-circle 0.6s ease-out forwards;\n        }\n        .success-icon path {\n          stroke-dasharray: 48;\n          stroke-dashoffset: 48;\n          animation: draw-check 0.3s 0.6s ease-out forwards;\n        }\n        @keyframes draw-circle {\n          to { stroke-dashoffset: 0; }\n        }\n        @keyframes draw-check {\n          to { stroke-dashoffset: 0; }\n        }\n      "}),(0,s.jsx)("circle",{cx:"26",cy:"26",r:"25",fill:"none",stroke:"url(#successGradient)",strokeWidth:"2.5",filter:"url(#shadow)"}),(0,s.jsx)("path",{fill:"none",stroke:"url(#successGradient)",strokeWidth:"3.5",strokeLinecap:"round",d:"M14.1 27.2l7.1 7.2 16.7-16.8"})]}),E=()=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"5"}),(0,s.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),(0,s.jsx)("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),(0,s.jsx)("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),(0,s.jsx)("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),(0,s.jsx)("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),(0,s.jsx)("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),(0,s.jsx)("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),(0,s.jsx)("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),_=()=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),T=()=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,s.jsx)("path",{d:"M12 2.5a5.5 5.5 0 0 1 5.5 5.5c0 1.573-1.022 3.204-2.272 4.428-.465.46-.93.89-1.385 1.294l-.06.052c-.52.452-1.044.866-1.577 1.216l-.21.138a.5.5 0 0 1-.492 0l-.21-.138c-.533-.35-1.057-.764-1.577-1.216l-.06-.052c-.455-.403-.92-.833-1.385-1.294C7.522 11.204 6.5 9.573 6.5 8a5.5 5.5 0 0 1 5.5-5.5zm0 1.5a4 4 0 0 0-4 4c0 1.206.812 2.59 1.95 3.687.421.411.84.793 1.27 1.14l.05.043c.472.4.94.76 1.4.973.46-.213.928-.573 1.4-.973l.05-.043c.43-.347.85-.73 1.27-1.14C15.688 10.59 16.5 9.206 16.5 8a4 4 0 0 0-4-4zm-6 15a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm.5 2a.5.5 0 0 0 0 1h11a.5.5 0 0 0 0-1h-11z"})}),L=()=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,s.jsx)("path",{d:"M19.5 2a.5.5 0 0 1 .5.5v19a.5.5 0 0 1-.5.5h-15a.5.5 0 0 1-.5-.5v-19a.5.5 0 0 1 .5-.5h15zm-.5 1h-14v18h14v-18zM8 6a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 8 6zm.5 3a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7zm0 4a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4z"})}),D=()=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,s.jsx)("path",{d:"M12 2.5a5.5 5.5 0 0 1 5.5 5.5c0 1.573-1.022 3.204-2.272 4.428-.465.46-.93.89-1.385 1.294l-.06.052c-.52.452-1.044.866-1.577 1.216l-.21.138a.5.5 0 0 1-.492 0l-.21-.138c-.533-.35-1.057-.764-1.577-1.216l-.06-.052c-.455-.403-.92-.833-1.385-1.294C7.522 11.204 6.5 9.573 6.5 8a5.5 5.5 0 0 1 5.5-5.5zM12 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8zm-6 13a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"})}),R=()=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,s.jsx)("path",{d:"M12 1.25a3.75 3.75 0 1 0 0 7.5 3.75 3.75 0 0 0 0-7.5zM8.25 5a3.75 3.75 0 1 1 7.5 0 3.75 3.75 0 0 1-7.5 0zM12 10.5A6.75 6.75 0 0 0 5.25 17.25a.75.75 0 0 0 .75.75h12a.75.75 0 0 0 .75-.75A6.75 6.75 0 0 0 12 10.5z"})}),U=()=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,s.jsx)("path",{d:"M8 3a3 3 0 1 0 0 6 3 3 0 0 0 0-6zm3 .5a.5.5 0 0 1 .5.5v2.5h2.5a.5.5 0 0 1 0 1h-6a.5.5 0 0 1 0-1H10V4a.5.5 0 0 1 .5-.5zM8 9a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm1 2h-2a6 6 0 0 0-6 6v1a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1v-1a6 6 0 0 0-6-6h-2a1 1 0 0 1 0 2h2a4 4 0 0 1 4 4v.5H3v-.5a4 4 0 0 1 4-4h2a1 1 0 0 1 0-2z"})}),O=()=>(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,s.jsx)("path",{d:"M0 5.5A1.5 1.5 0 0 1 1.5 4h14A1.5 1.5 0 0 1 17 5.5V11H0V5.5zM1.5 5a.5.5 0 0 0-.5.5v4h15V5.5a.5.5 0 0 0-.5-.5h-14zM0 20v-7h17v7a1.5 1.5 0 0 1-1.5 1.5h-14A1.5 1.5 0 0 1 0 20zm16-1H1v-5h15v5zM19 4h3.5a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5H19v-1h3v-14h-3V4zm-6-2h2v2h-2V2zM5 7h2v2H5V7zm4 0h2v2H9V7z"})}),M=()=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",className:"upload-icon",children:[(0,s.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,s.jsx)("polyline",{points:"17 8 12 3 7 8"}),(0,s.jsx)("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),P=()=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,s.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,s.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,s.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),Q=()=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),(0,s.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),j=()=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"30px",viewBox:"0 0 30 30",width:"30px",fill:"currentColor",children:[(0,s.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,s.jsx)("path",{d:"M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z"})]}),H=()=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",viewBox:"0 0 30 30",children:[(0,s.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM9 11H7V9h2v2zm4 0h-2V9h2v2zm4 0h-2V9h2v2z"}),(0,s.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"})]}),z=()=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zM20 18H4v-6h16v6zm0-10H4V6h16v2z"}),(0,s.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"})]}),W=()=>(0,s.jsx)("svg",{xmlns:"http://www.w.w3.org/2000/svg",height:"30",width:"30",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("text",{x:"2",y:"16","font-family":"sans-serif","font-size":"9","font-weight":"bold",children:"VISA"})}),V=()=>{const{language:e,toggleLanguage:t}=A();return(0,s.jsxs)("div",{className:"language-switcher",onClick:t,children:[(0,s.jsx)("span",{className:"en"===e?"active":"",children:x("english",e)}),(0,s.jsx)("span",{className:"ar"===e?"active":"",children:x("arabic",e)})]})},G=()=>{const{theme:e,toggleTheme:t}=l();return(0,s.jsx)("div",{className:"theme-switcher",onClick:t,children:(0,s.jsx)("div",{className:"theme-switcher-button",children:"light"===e?(0,s.jsx)(E,{}):(0,s.jsx)(_,{})})})},K=e=>{let{noBackground:t=!1}=e;const{language:n}=A();return(0,s.jsx)("footer",{className:"footer".concat(t?" footer-transparent":""),children:x("copyRight",n)})},q=e=>{let{onNavigate:t}=e;const{language:n}=A(),{theme:r}=l(),{setFormData:i}=p();return(0,a.useEffect)(()=>{fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"","/api/clear-cache"),{method:"POST"}).catch(()=>{}),i({provider:"gemini"})},[i]),(0,s.jsxs)("div",{className:"landing-container",children:[(0,s.jsxs)("div",{className:"header-switchers",style:{position:"absolute",top:20,right:20},children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsxs)("div",{className:"content-wrapper",children:[(0,s.jsx)("img",{src:"light"===r?b:w,alt:"Bank Logo",className:"landing-logo"}),(0,s.jsx)("h1",{className:"landing-title",children:x("welcomeTitle",n)}),(0,s.jsx)("p",{className:"landing-subtitle",children:x("welcomeSub",n)}),(0,s.jsxs)("div",{className:"landing-buttons-container",children:[(0,s.jsxs)("button",{onClick:()=>t("selectUser"),children:[(0,s.jsx)(T,{}),(0,s.jsx)("span",{children:x("openAccount",n)})]}),(0,s.jsxs)("button",{onClick:()=>t("completeAccount"),className:"btn-secondary",children:[(0,s.jsx)(L,{}),(0,s.jsx)("span",{children:x("completeAccount",n)})]}),(0,s.jsxs)("button",{onClick:()=>t("eServices"),className:"btn-secondary",children:[(0,s.jsx)(L,{}),(0,s.jsx)("span",{children:x("registerEServices",n)})]})]})]}),(0,s.jsx)(K,{noBackground:!0})]})},X={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"",J=e=>{let{onNavigate:t}=e;(0,a.useEffect)(()=>{const e=document.querySelector(".tilt-effect");if(!e)return;const t=t=>{const{left:n,top:r,width:a,height:i}=e.getBoundingClientRect(),s=t.clientX-n,o=(t.clientY-r-i/2)/(i/2)*-1*10,l=(s-a/2)/(a/2)*10;e.style.transform="perspective(1000px) scale(1.02) rotateX(".concat(o,"deg) rotateY(").concat(l,"deg)")},n=()=>{e.style.transform="perspective(1000px) scale(1) rotateX(0) rotateY(0)"};return e.addEventListener("mousemove",t),e.addEventListener("mouseleave",n),()=>{e.removeEventListener("mousemove",t),e.removeEventListener("mouseleave",n)}},[]);const{language:n}=A(),{formData:i,setFormData:o}=p(),l=async(e,n)=>{o(t=>r(r({},t),{},{serviceType:e}));try{await fetch("".concat(X,"/api/cache-form"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r(r({},i),{},{serviceType:e}))})}catch(Vu){console.error(Vu)}t(n)};return(0,s.jsxs)("div",{className:"app-container",children:[(0,s.jsxs)("header",{className:"header",children:[(0,s.jsx)("img",{src:b,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]})]}),(0,s.jsxs)("main",{className:"main center-main",children:[(0,s.jsx)("div",{className:"background",children:(0,s.jsx)("div",{className:"overlay"})}),(0,s.jsxs)("div",{className:"menu-card tilt-effect",children:[(0,s.jsx)("h2",{children:x("selectService",n)}),(0,s.jsxs)("button",{onClick:()=>l("personal","personalDocs"),children:[(0,s.jsx)(D,{}),(0,s.jsx)("span",{children:x("personal",n)})]}),(0,s.jsxs)("button",{onClick:()=>l("expat","expatDocs"),children:[(0,s.jsx)(D,{}),(0,s.jsx)("span",{children:x("expat",n)})]}),(0,s.jsxs)("button",{onClick:()=>l("guaranteed","guaranteedDocs"),children:[(0,s.jsx)(R,{}),(0,s.jsx)("span",{children:x("guaranteed",n)})]}),(0,s.jsxs)("button",{onClick:()=>l("businessmen","businessmenDocs"),children:[(0,s.jsx)(U,{}),(0,s.jsx)("span",{children:x("businessmen",n)})]}),(0,s.jsxs)("button",{onClick:()=>l("companies","companiesDocs"),children:[(0,s.jsx)(O,{}),(0,s.jsx)("span",{children:x("companies",n)})]})]})]}),(0,s.jsx)(K,{})]})},Y=e=>{let{onNavigate:t,backPage:n,nextPage:i}=e;const{language:o}=A(),[l,c]=(0,a.useState)({}),u=(e,t)=>{c(n=>r(r({},n),{},{[t]:e.target.files[0]}))};return(0,s.jsxs)("div",{className:"form-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:w,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsxs)("button",{onClick:()=>t(n),className:"btn-back",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"15 18 9 12 15 6"})}),(0,s.jsx)("span",{children:x("back",o)})]})]}),(0,s.jsxs)("main",{className:"form-main",children:[(0,s.jsx)("h2",{className:"form-title",children:x("requiredDocs",o)}),(0,s.jsxs)("div",{className:"docs-grid",children:[(0,s.jsxs)("div",{className:"upload-box",children:[(0,s.jsx)("p",{children:x("bankStatement",o)}),(0,s.jsx)("div",{className:"upload-placeholder",children:(0,s.jsx)("input",{type:"file",accept:"image/*",required:!0,capture:"environment",onChange:e=>u(e,"bankStatement")})})]}),(0,s.jsxs)("div",{className:"upload-box",children:[(0,s.jsx)("p",{children:x("taxCard",o)}),(0,s.jsx)("div",{className:"upload-placeholder",children:(0,s.jsx)("input",{type:"file",accept:"image/*",required:!0,capture:"environment",onChange:e=>u(e,"taxCard")})})]}),(0,s.jsxs)("div",{className:"upload-box",children:[(0,s.jsx)("p",{children:x("commercialChamberCertificate",o)}),(0,s.jsx)("div",{className:"upload-placeholder",children:(0,s.jsx)("input",{type:"file",accept:"image/*",required:!0,capture:"environment",onChange:e=>u(e,"commercialChamberCertificate")})})]}),(0,s.jsxs)("div",{className:"upload-box",children:[(0,s.jsx)("p",{children:x("legalRepAuth",o)}),(0,s.jsx)("div",{className:"upload-placeholder",children:(0,s.jsx)("input",{type:"file",accept:"image/*",required:!0,capture:"environment",onChange:e=>u(e,"legalRepAuth")})})]}),(0,s.jsxs)("div",{className:"upload-box",children:[(0,s.jsx)("p",{children:x("commercialRegisterCopy",o)}),(0,s.jsx)("div",{className:"upload-placeholder",children:(0,s.jsx)("input",{type:"file",accept:"image/*",required:!0,capture:"environment",onChange:e=>u(e,"commercialRegisterCopy")})})]}),(0,s.jsxs)("div",{className:"upload-box",children:[(0,s.jsx)("p",{children:x("nationalIdPhotos",o)}),(0,s.jsx)("div",{className:"multi-upload-placeholders",children:(0,s.jsx)("input",{type:"file",accept:"image/*",required:!0,capture:"environment",multiple:!0,onChange:e=>u(e,"nationalIdPhotos")})})]}),(0,s.jsxs)("div",{className:"upload-box",children:[(0,s.jsx)("p",{children:x("personalPhotos",o)}),(0,s.jsx)("div",{className:"multi-upload-placeholders",children:(0,s.jsx)("input",{type:"file",accept:"image/*",required:!0,capture:"environment",multiple:!0,onChange:e=>u(e,"personalPhotos")})})]})]}),(0,s.jsx)("div",{className:"form-actions",children:(0,s.jsx)("button",{className:"btn-next",onClick:()=>t(i),disabled:!(7===Object.keys(l).length),children:x("next",o)})})]}),(0,s.jsx)(K,{})]})},Z={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"",$=e=>{let{onNavigate:t,backPage:n,nextPage:i}=e;const{language:o}=A(),{formData:l,setFormData:c}=p(),[u,d]=(0,a.useState)([]),[h,f]=(0,a.useState)([]),[m,g]=(0,a.useState)(r({country:"",city:"",area:"",residentialAddress:""},l.addressInfo||{}));(0,a.useEffect)(()=>{fetch("".concat(Z,"/api/countries")).then(e=>e.json()).then(d).catch(()=>{})},[]),(0,a.useEffect)(()=>{m.country?fetch("".concat(Z,"/api/cities?country=").concat(m.country)).then(e=>e.json()).then(e=>f(e)).catch(()=>f([])):f([])},[m.country]),(0,a.useEffect)(()=>{var e,t;const n=(null===(e=l.personalInfo)||void 0===e?void 0:e.referenceNumber)||(null===(t=l.personalInfo)||void 0===t?void 0:t.reference_number);n&&async function(){try{const e=await fetch("".concat(Z,"/api/address-info?reference=").concat(encodeURIComponent(n)));if(e.ok){const t=await e.json();if(t){const e={country:t.country||"",city:t.city||"",area:t.area||"",residentialAddress:t.residential_address||""};g(t=>r(r({},t),e)),c(t=>r(r({},t),{},{addressInfo:e}))}}}catch(Vu){console.error(Vu)}}()},[l.personalInfo,c]);const y=e=>{const{name:t,value:n}=e.target;g(e=>r(r({},e),{},{[t]:n}))};return(0,s.jsxs)("div",{className:"form-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:w,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsxs)("button",{onClick:()=>t(n),className:"btn-back",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"15 18 9 12 15 6"})}),(0,s.jsx)("span",{children:x("back",o)})]})]}),(0,s.jsx)("main",{className:"form-main",children:(0,s.jsxs)("form",{className:"form-container",onSubmit:e=>{e.preventDefault(),(async()=>{c(e=>r(r({},e),{},{addressInfo:m}));try{await fetch("".concat(Z,"/api/cache-form"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r(r({},l),{},{addressInfo:m}))})}catch(e){console.error(e)}t(i)})()},noValidate:!0,children:[(0,s.jsxs)("div",{className:"form-section",children:[(0,s.jsx)("h3",{children:x("addressInfoTitle",o)}),(0,s.jsx)("p",{className:"guide-message",children:x("requiredFieldsHint",o)}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("country",o)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsxs)("select",{className:"form-input",required:!0,name:"country",value:m.country,onChange:y,children:[(0,s.jsx)("option",{value:"",children:x("country",o)}),u.map(e=>(0,s.jsx)("option",{value:e.code,children:"ar"===o?e.name_ar:e.name_en},e.code))]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("city",o)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsxs)("select",{name:"city",value:m.city,onChange:y,required:!0,className:"form-input",children:[(0,s.jsx)("option",{value:"",children:x("city",o)}),h.length>0?h.map(e=>(0,s.jsx)("option",{value:e.city_code,children:"ar"===o?e.name_ar:e.name_en},e.city_code)):(0,s.jsx)("option",{value:"other",children:x("other",o)})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("area",o)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsx)("input",{name:"area",value:m.area,onChange:y,type:"text",required:!0,className:"form-input",placeholder:x("area",o)})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("residentialAddress",o)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsx)("input",{name:"residentialAddress",value:m.residentialAddress,onChange:y,type:"text",required:!0,className:"form-input",placeholder:x("residentialAddress",o)})]})]}),(0,s.jsx)("div",{className:"form-actions",children:(0,s.jsx)("button",{type:"submit",className:"btn-next",disabled:!m.country||!m.city||!m.area||!m.residentialAddress,children:x("next",o)})})]})}),(0,s.jsx)(K,{})]})},ee={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"",te=e=>{let{onNavigate:t,backPage:n,nextPage:i}=e;const{language:o}=A(),{formData:l,setFormData:c}=p(),[u,d]=(0,a.useState)([]),[h,f]=(0,a.useState)([]),[m,g]=(0,a.useState)([]),[y,b]=(0,a.useState)(r({employmentStatus:"",jobTitle:"",employer:"",employerAddress:"",employerPhone:"",sourceOfIncome:"",monthlyIncome:"",workSector:"",fieldOfWork:"",workStartDate:"",workCountry:"",workCity:""},l.workInfo||{}));(0,a.useEffect)(()=>{fetch("".concat(ee,"/api/income-sources")).then(e=>e.json()).then(d).catch(()=>{}),fetch("".concat(ee,"/api/countries")).then(e=>e.json()).then(f).catch(()=>{})},[]),(0,a.useEffect)(()=>{y.workCountry?fetch("".concat(ee,"/api/cities?country=").concat(y.workCountry)).then(e=>e.json()).then(e=>g(e)).catch(()=>g([])):g([])},[y.workCountry]),(0,a.useEffect)(()=>{var e,t;const n=(null===(e=l.personalInfo)||void 0===e?void 0:e.referenceNumber)||(null===(t=l.personalInfo)||void 0===t?void 0:t.reference_number);n&&async function(){try{const e=await fetch("".concat(ee,"/api/work-info?reference=").concat(encodeURIComponent(n)));if(e.ok){const t=await e.json();if(t){t.work_start_date&&(t.workStartDate=new Date(t.work_start_date).toISOString().split("T")[0]);const e={employmentStatus:t.employment_status||"",jobTitle:t.job_title||"",employer:t.employer||"",employerAddress:t.employer_address||"",employerPhone:t.employer_phone||"",sourceOfIncome:t.source_of_income||"",monthlyIncome:t.monthly_income||"",workSector:t.work_sector||"",fieldOfWork:t.field_of_work||"",workStartDate:t.work_start_date?new Date(t.work_start_date).toISOString().split("T")[0]:"",workCountry:t.work_country||"",workCity:t.work_city||""};b(t=>r(r({},t),e)),c(t=>r(r({},t),{},{workInfo:e}))}}}catch(Vu){console.error(Vu)}}()},[l.personalInfo,c]);const v=e=>{const{name:t,value:n}=e.target;b(e=>r(r({},e),{},{[t]:n}))},C=y.jobTitle&&y.employer&&y.workSector&&y.fieldOfWork&&y.workStartDate&&y.sourceOfIncome&&y.monthlyIncome&&y.workCountry&&y.workCity;return(0,s.jsxs)("div",{className:"form-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:w,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsxs)("button",{onClick:()=>t(n),className:"btn-back",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"15 18 9 12 15 6"})}),(0,s.jsx)("span",{children:x("back",o)})]})]}),(0,s.jsx)("main",{className:"form-main",children:(0,s.jsxs)("form",{className:"form-container",onSubmit:e=>{e.preventDefault(),(async()=>{c(e=>r(r({},e),{},{workInfo:y}));try{await fetch("".concat(ee,"/api/cache-form"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r(r({},l),{},{workInfo:y}))})}catch(e){console.error(e)}t(i)})()},noValidate:!0,children:[(0,s.jsxs)("div",{className:"form-section",children:[(0,s.jsx)("h3",{children:x("workInfoTitle",o)}),(0,s.jsx)("p",{className:"guide-message",children:x("requiredFieldsHint",o)}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("jobTitle",o)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsx)("input",{name:"jobTitle",value:y.jobTitle,onChange:v,type:"text",required:!0,className:"form-input",placeholder:x("jobTitle",o)})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("employer",o)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsx)("input",{name:"employer",value:y.employer,onChange:v,type:"text",required:!0,className:"form-input",placeholder:x("employer",o)})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("workSector",o)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsxs)("select",{name:"workSector",value:y.workSector,onChange:v,className:"form-input",required:!0,children:[(0,s.jsx)("option",{value:"",children:x("workSector",o)}),(0,s.jsx)("option",{value:"private",children:x("workSectorPrivate",o)}),(0,s.jsx)("option",{value:"public",children:x("workSectorPublic",o)}),(0,s.jsx)("option",{value:"freelance",children:x("workSectorFreelance",o)})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("fieldOfWork",o)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsx)("input",{name:"fieldOfWork",value:y.fieldOfWork,onChange:v,type:"text",required:!0,className:"form-input",placeholder:x("fieldOfWork",o)})]}),(0,s.jsxs)("div",{className:"form-group date-input-container",children:[(0,s.jsxs)("label",{children:[x("workStartDate",o)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsx)("input",{name:"workStartDate",value:y.workStartDate,onChange:v,type:"text",required:!0,className:"form-input",placeholder:x("workStartDate",o),onFocus:e=>e.target.type="date",onBlur:e=>e.target.type="text"}),(0,s.jsx)(P,{})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:x("employerAddress",o)}),(0,s.jsx)("input",{name:"employerAddress",value:y.employerAddress,onChange:v,type:"text",className:"form-input",placeholder:x("employerAddress",o)})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("country",o)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsxs)("select",{name:"workCountry",value:y.workCountry,onChange:v,required:!0,className:"form-input",children:[(0,s.jsx)("option",{value:"",children:x("country",o)}),h.map(e=>(0,s.jsx)("option",{value:e.code,children:"ar"===o?e.name_ar:e.name_en},e.code))]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("city",o)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsxs)("select",{name:"workCity",value:y.workCity,onChange:v,required:!0,className:"form-input",children:[(0,s.jsx)("option",{value:"",children:x("city",o)}),m.length>0?m.map(e=>(0,s.jsx)("option",{value:e.city_code,children:"ar"===o?e.name_ar:e.name_en},e.city_code)):(0,s.jsx)("option",{value:"other",children:x("other",o)})]})]}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsxs)("div",{className:"phone-input-group",children:[(0,s.jsx)("span",{className:"phone-prefix",children:"+218"}),(0,s.jsx)("input",{name:"employerPhone",value:y.employerPhone,onChange:v,type:"tel",className:"form-input",placeholder:x("employerPhone",o)})]})}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("sourceOfIncome",o)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsxs)("select",{name:"sourceOfIncome",value:y.sourceOfIncome,onChange:v,className:"form-input",required:!0,children:[(0,s.jsx)("option",{value:"",children:x("sourceOfIncome",o)}),u.map(e=>(0,s.jsx)("option",{value:e.name_en,children:"ar"===o?e.name_ar:e.name_en},e.id))]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("monthlyIncome",o)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsxs)("select",{name:"monthlyIncome",value:y.monthlyIncome,onChange:v,className:"form-input",required:!0,children:[(0,s.jsx)("option",{value:"",children:x("monthlyIncome",o)}),(0,s.jsx)("option",{value:"<2000",children:x("incomeLess2000",o)}),(0,s.jsx)("option",{value:"2000-5000",children:x("income2000to5000",o)}),(0,s.jsx)("option",{value:">5000",children:x("incomeMore5000",o)})]})]}),"personal"!==l.serviceType&&(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:x("residenceCertificate",o)}),(0,s.jsx)("input",{type:"file",accept:"image/*",className:"form-input",required:"expat"===l.serviceType})]})]}),(0,s.jsx)("div",{className:"form-actions",children:(0,s.jsx)("button",{type:"submit",className:"btn-next",disabled:!C,children:x("next",o)})})]})}),(0,s.jsx)(K,{})]})},ne={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"";async function re(e){try{await fetch("".concat(ne,"/api/log"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})})}catch(Vu){console.error("Log failed",Vu)}}async function ae(e){try{await fetch("".concat(ne,"/api/error-log"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})})}catch(Vu){console.error("Error log failed",Vu)}}const ie=e=>{let{message:t}=e;return(0,s.jsxs)("div",{className:"loading-overlay",children:[(0,s.jsx)("div",{className:"loading-spinner"}),t&&(0,s.jsx)("p",{className:"loading-message",children:t})]})},se=e=>{let{onClose:t}=e;const{language:n}=A();return(0,s.jsx)("div",{className:"modal-overlay",onClick:t,children:(0,s.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("h3",{children:x("termsAndConditions",n)}),(0,s.jsx)("p",{style:{whiteSpace:"pre-wrap"},children:x("termsContent",n)}),(0,s.jsx)("button",{className:"btn-next",onClick:t,children:x("close",n)})]})})},oe={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"";async function le(e){const t=await fetch("".concat(oe,"/api/cache-extracted/").concat(e));if(!t.ok)throw new Error("Fetch failed");return t.json()}function ce(e){if(!e)return"";const t=e.toString().trim().toLowerCase();return t.includes("liby")||t.includes("\u0644\u064a\u0628\u064a")||t.includes("\u0644\u064a\u0628\u064a\u0627")?"libyan":"other"}function ue(e,t){return"passport"===e?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e||"object"!==typeof e)return e;const t={"Full Name (Arabic)":"fullNameArabic","Given Name (English)":"givenNameEng","Surname (English)":"surnameEng","Passport No":"passportNo","Date of Birth":"dateOfBirth","Place of Birth":"placeOfBirth","Date of Issue":"dateOfIssue","Issuing Place":"issuingPlace",Sex:"sex",Nationality:"nationality","Expiry Date":"expiryDate"},n={};return Object.keys(e).forEach(r=>{n[t[r]||r]=e[r]}),n}(t):"nationalId"===e?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e||"object"!==typeof e)return e;const t={"Family Record Number":"familyId","National ID":"nationalId",Sex:"sex","Day of Birth":"birthDay","Month of Birth":"birthMonth","Year of Birth":"birthYear","Mother's Full Name":"motherFullName","Marital Status":"maritalStatus"},n={};return Object.keys(e).forEach(r=>{n[t[r]||r]=e[r]}),n}(t):t}const Ae=e=>{let{onNavigate:t,backPage:n,flow:i,state:o}=e;const{language:l}=A(),{formData:c,setFormData:u}=p(),[d,h]=(0,a.useState)({firstNameAr:"",middleNameAr:"",lastNameAr:"",surnameAr:"",motherFullName:"",maritalStatus:"",firstNameEn:"",middleNameEn:"",lastNameEn:"",surnameEn:"",passportNumber:"",passportIssueDate:"",passportExpiryDate:"",birthPlace:"",dob:"",gender:"",nationality:"",familyRecordNumber:"",nidDigits:Array(12).fill(""),phone:"",enableEmail:!1,email:"",residenceExpiry:"",censusCardNumber:"",documentType:""}),[f,m]=(0,a.useState)({}),[g,y]=(0,a.useState)([]),[b,v]=(0,a.useState)(!1),[C,k]=(0,a.useState)(""),[B,S]=(0,a.useState)({agree1:!1,agree2:!1}),[I,N]=(0,a.useState)(!1),[F,E]=(0,a.useState)(!1),[_,T]=(0,a.useState)(1),[L,D]=(0,a.useState)(""),[R,U]=(0,a.useState)(""),[O,M]=(0,a.useState)(0),[j,H]=(0,a.useState)(!1);(0,a.useEffect)(()=>{!async function(){v(!0),k("");try{const e=await le("passport"),t=await le("nationalId"),n=ue("passport",e||{}),a=ue("nationalId",t||{});let i=r({},d);if(n&&Object.keys(n).length){const e=(n.fullNameArabic||"").trim().split(/\s+/);i.firstNameAr=e[0]||"",i.middleNameAr=e[1]||"",i.lastNameAr=e[2]||"",i.surnameAr=e.length>3?e.slice(3).join(" "):"";const t=(n.givenNameEng||"").trim().split(/\s+/);i.firstNameEn=t[0]||"",i.middleNameEn=t[1]||"",i.lastNameEn=t[2]||"",i.surnameEn=n.surnameEng||"",i.dob=n.dateOfBirth||"",i.gender="M"===n.sex?"male":"F"===n.sex?"female":n.sex||"",i.nationality=ce(n.nationality)||"",i.passportNumber=n.passportNo||"",i.passportIssueDate=n.dateOfIssue||"",i.passportExpiryDate=n.expiryDate||"",i.birthPlace=n.placeOfBirth||""}a&&Object.keys(a).length&&(i.nidDigits=a.nationalId?a.nationalId.replace(/\D/g,"").slice(0,12).split(""):Array(12).fill(""),i.gender||(i.gender="M"===a.sex?"male":"F"===a.sex?"female":a.sex||""),i.dob||(i.dob=a.birthYear&&a.birthMonth&&a.birthDay?"".concat(a.birthYear,"-").concat(a.birthMonth.toString().padStart(2,"0"),"-").concat(a.birthDay.toString().padStart(2,"0")):""),i.familyRecordNumber=a.familyId||"",i.motherFullName=a.motherFullName||"",i.maritalStatus=a.maritalStatus||""),h(i),u(e=>r(r({},e),{},{personalInfo:i}));const s={};Object.keys(i).forEach(e=>{!i[e]||Array.isArray(i[e])&&!i[e].some(e=>e)||(s[e]=!0)}),m(s)}catch(Vu){console.error(Vu),k(x("error_extracting_data",l))}finally{v(!1)}}()},[]),(0,a.useEffect)(()=>{if(O<=0)return;const e=setInterval(()=>M(e=>e-1),1e3);return()=>clearInterval(e)},[O]),(0,a.useEffect)(()=>{F||M(0)},[F]);const z=(e,t)=>{const{name:n,value:a,type:i,checked:s}=e.target;if(!f[n])if(n.startsWith("agree"))S(e=>r(r({},e),{},{[n]:s}));else if("enableEmail"===n)h(e=>r(r({},e),{},{enableEmail:s}));else if(n.startsWith("nidDigit")){const n=[...d.nidDigits];n[t]=a.replace(/[^0-9]/g,"").slice(-1),h(e=>r(r({},e),{},{nidDigits:n})),a&&e.target.nextSibling&&e.target.nextSibling.focus()}else if(["fullName","firstNameAr","middleNameAr","lastNameAr","surnameAr","motherFullName"].includes(n)){const e=a.replace(/[^\u0600-\u06FF\s]/g,"");h(t=>r(r({},t),{},{[n]:e}))}else if(["firstNameEn","middleNameEn","lastNameEn","surnameEn"].includes(n)){const e=a.replace(/[^A-Za-z\s]/g,"");h(t=>r(r({},t),{},{[n]:e}))}else if("phone"===n){const e=a.replace(/[^0-9]/g,"");h(t=>r(r({},t),{},{phone:e}))}else if("familyRecordNumber"===n){const e=a.replace(/[^0-9]/g,"");h(t=>r(r({},t),{},{familyRecordNumber:e}))}else h(e=>r(r({},e),{},{[n]:a}))},W=(e,t)=>{m(t=>r(r({},t),{},{[e]:!1})),g.includes(e)||y(t=>[...t,e]),re("manual_edit_".concat(e));const n=t.currentTarget.closest(".form-group");n&&(n.classList.add("unlock-animation"),setTimeout(()=>{n.classList.remove("unlock-animation")},500))},q=e=>({readOnly:!!f[e],className:"form-input".concat(f[e]?" locked":""),onDoubleClick:t=>W(e,t)}),X=["firstNameAr","middleNameAr","lastNameAr","surnameAr","firstNameEn","middleNameEn","lastNameEn","surnameEn","motherFullName","dob","birthPlace","gender","maritalStatus","nationality","passportNumber","passportIssueDate","passportExpiryDate","familyRecordNumber","phone"].every(e=>{const t=d[e];return Array.isArray(t)?t.every(Boolean):""!==(t||"").toString().trim()})&&(!d.enableEmail||""!==d.email.trim()),J=()=>{E(!1),T(1),D(""),U(""),u(e=>r(r({},e),{},{personalInfo:r(r({},d),{},{phone:"+218".concat(d.phone)})})),fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"","/api/cache-form"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r(r({},c),{},{personalInfo:r(r({},d),{},{phone:"+218".concat(d.phone)})}))}).catch(e=>console.error(e)),t("confirm",{form:d,manualFields:g})},Y=()=>{E(!1),T(1),D(""),U(""),M(0)};return(0,s.jsxs)("div",{className:"form-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:w,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsxs)("button",{onClick:()=>t(n),className:"btn-back",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"15 18 9 12 15 6"})}),(0,s.jsx)("span",{children:x("back",l)})]})]}),(0,s.jsxs)("main",{className:"form-main",children:[(0,s.jsx)("h2",{className:"form-title",children:x("personalInfo",l)}),(0,s.jsx)("p",{className:"guide-message",children:x("requiredFieldsHint",l)}),C&&(0,s.jsx)("p",{className:"error-message",children:C}),(0,s.jsxs)("form",{className:"form-container",style:{maxWidth:"900px"},onSubmit:e=>{e&&e.preventDefault(),B.agree1&&B.agree2?(N(!1),T(1),D(""),U(""),E(!0)):N(!0)},noValidate:!0,children:[(0,s.jsx)("p",{className:"guide-message",children:x("editHint",l)}),(0,s.jsxs)("div",{className:"form-grid-columns",children:[(0,s.jsxs)("div",{className:"form-column",style:{direction:"rtl",textAlign:"right"},children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("firstNameAr",l)," *"]}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r({name:"firstNameAr",value:d.firstNameAr,onChange:z,required:!0,type:"text"},q("firstNameAr"))),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("middleNameAr",l)," *"]}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r({name:"middleNameAr",value:d.middleNameAr,onChange:z,required:!0,type:"text"},q("middleNameAr"))),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("lastNameAr",l)," *"]}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r({name:"lastNameAr",value:d.lastNameAr,onChange:z,required:!0,type:"text"},q("lastNameAr"))),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("surnameAr",l)," *"]}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r({name:"surnameAr",value:d.surnameAr,onChange:z,required:!0,type:"text"},q("surnameAr"))),(0,s.jsx)(Q,{className:"lock-icon"})]})]})]}),(0,s.jsxs)("div",{className:"form-column",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("firstNameEn",l)," *"]}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r({name:"firstNameEn",value:d.firstNameEn,onChange:z,required:!0,type:"text"},q("firstNameEn"))),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("middleNameEn",l)," *"]}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r({name:"middleNameEn",value:d.middleNameEn,onChange:z,required:!0,type:"text"},q("middleNameEn"))),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("lastNameEn",l)," *"]}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r({name:"lastNameEn",value:d.lastNameEn,onChange:z,required:!0,type:"text"},q("lastNameEn"))),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("surnameEn",l)," *"]}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r({name:"surnameEn",value:d.surnameEn,onChange:z,required:!0,type:"text"},q("surnameEn"))),(0,s.jsx)(Q,{className:"lock-icon"})]})]})]})]}),(0,s.jsx)("hr",{style:{margin:"20px 0"}}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("motherFullName",l)," *"]}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r({name:"motherFullName",value:d.motherFullName,onChange:z,required:!0,type:"text"},q("motherFullName"))),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"company-form-grid",children:[(0,s.jsxs)("div",{className:"form-group date-input-container",children:[(0,s.jsxs)("label",{children:[x("dateOfBirth",l)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsxs)("div",{style:{position:"relative",width:"100%"},children:[(0,s.jsx)("input",r(r({name:"dob",value:d.dob,onChange:z,type:"text",required:!0},q("dob")),{},{onFocus:e=>e.target.type="date",onBlur:e=>e.target.type="text"})),(0,s.jsx)(P,{})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("birthPlace",l)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r({name:"birthPlace",value:d.birthPlace,onChange:z,type:"text",required:!0},q("birthPlace"))),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("gender",l)," *"]}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsxs)("select",r(r({name:"gender",value:d.gender,onChange:z,required:!0},q("gender")),{},{children:[(0,s.jsx)("option",{value:"",children:x("gender",l)}),(0,s.jsx)("option",{value:"male",children:x("male",l)}),(0,s.jsx)("option",{value:"female",children:x("female",l)})]})),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("maritalStatus",l)," *"]}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsxs)("select",r(r({name:"maritalStatus",value:d.maritalStatus,onChange:z,required:!0},q("maritalStatus")),{},{children:[(0,s.jsx)("option",{value:"",children:x("maritalStatus",l)}),(0,s.jsx)("option",{value:"single",children:x("single",l)}),(0,s.jsx)("option",{value:"married",children:x("married",l)}),(0,s.jsx)("option",{value:"divorced",children:x("divorced",l)}),(0,s.jsx)("option",{value:"widowed",children:x("widowed",l)})]})),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("nationality",l)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsxs)("select",r(r({name:"nationality",value:d.nationality,onChange:z,disabled:f.nationality,required:!0},q("nationality")),{},{children:[(0,s.jsx)("option",{value:"",children:x("nationality",l)}),(0,s.jsx)("option",{value:"libyan",children:x("libyan",l)}),(0,s.jsx)("option",{value:"other",children:x("other",l)})]})),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("passportNumber",l)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r({name:"passportNumber",value:d.passportNumber,onChange:z,type:"text",required:!0},q("passportNumber"))),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group date-input-container",children:[(0,s.jsxs)("label",{children:[x("passportIssueDate",l)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsxs)("div",{style:{position:"relative",width:"100%"},children:[(0,s.jsx)("input",r(r({name:"passportIssueDate",value:d.passportIssueDate,onChange:z,type:"text",required:!0},q("passportIssueDate")),{},{onFocus:e=>e.target.type="date",onBlur:e=>e.target.type="text"})),(0,s.jsx)(P,{})]})]}),(0,s.jsxs)("div",{className:"form-group date-input-container",children:[(0,s.jsxs)("label",{children:[x("passportExpiryDate",l)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsxs)("div",{style:{position:"relative",width:"100%"},children:[(0,s.jsx)("input",r(r({name:"passportExpiryDate",value:d.passportExpiryDate,onChange:z,type:"text",required:!0},q("passportExpiryDate")),{},{onFocus:e=>e.target.type="date",onBlur:e=>e.target.type="text"})),(0,s.jsx)(P,{})]})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("familyRecordNumber",l)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r({name:"familyRecordNumber",value:d.familyRecordNumber,onChange:z,required:!0,type:"text"},q("familyRecordNumber"))),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("nid",l)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsx)("div",{className:"national-id-group",onDoubleClick:e=>W("nidDigits",e),children:d.nidDigits.map((e,t)=>(0,s.jsx)("input",{name:"nidDigit".concat(t),value:e,onChange:e=>z(e,t),onKeyDown:e=>(e=>{"Backspace"===e.key&&!e.target.value&&e.target.previousSibling&&e.target.previousSibling.focus()})(e),onPaste:e=>((e,t)=>{const n=e.clipboardData.getData("text").replace(/\D/g,"").slice(0,d.nidDigits.length-t);if(!n)return;e.preventDefault();const a=[...d.nidDigits];for(let r=0;r<n.length;r++)void 0!==a[t+r]&&(a[t+r]=n[r]);h(e=>r(r({},e),{},{nidDigits:a}));const i=e.target.parentElement.querySelectorAll("input"),s=t+n.length;i[s]&&i[s].focus()})(e,t),required:!0,type:"text",maxLength:"1",className:"national-id-input".concat(f.nidDigits?" locked":""),readOnly:!!f.nidDigits},t))})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("phoneNumber",l)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsxs)("div",{className:"phone-input-group",children:[(0,s.jsx)("span",{className:"phone-prefix",children:"+218"}),(0,s.jsx)("input",r(r({name:"phone",value:d.phone,onChange:z,required:!0,type:"tel"},q("phone")),{},{placeholder:x("phoneNumber",l),className:"form-input"}))]}),(0,s.jsx)(Q,{className:"lock-icon"})]}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",name:"enableEmail",checked:d.enableEmail,onChange:z})," ",x("enableEmail",l)]})}),d.enableEmail&&(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("email",l)," ",(0,s.jsx)("span",{className:"required-star",children:"*"})]}),(0,s.jsx)("input",r(r({name:"email",value:d.email,onChange:z,required:!0,type:"email"},q("email")),{},{placeholder:x("email",l)})),(0,s.jsx)(Q,{className:"lock-icon"})]}),(0,s.jsxs)("div",{className:"form-actions",children:[(0,s.jsxs)("div",{className:"agreements",children:[(0,s.jsxs)("label",{className:"agreement-item",children:[(0,s.jsxs)("div",{className:"custom-checkbox",children:[(0,s.jsx)("input",{name:"agree1",type:"checkbox",checked:B.agree1,onChange:z,required:!0}),(0,s.jsx)("span",{className:"checkmark"})]}),(0,s.jsx)("span",{children:x("certifyCorrect",l)})]}),(0,s.jsxs)("label",{className:"agreement-item",children:[(0,s.jsxs)("div",{className:"custom-checkbox",children:[(0,s.jsx)("input",{name:"agree2",type:"checkbox",checked:B.agree2,onChange:z,required:!0}),(0,s.jsx)("span",{className:"checkmark"})]}),(0,s.jsxs)("span",{children:[x("agreePrefix",l)," ",(0,s.jsx)("button",{type:"button",className:"terms-link",onClick:()=>H(!0),children:x("termsAndConditions",l)})]})]})]}),I&&(0,s.jsx)("p",{className:"error-message",children:x("agreeError",l)}),(0,s.jsx)("button",{className:"btn-next",type:"submit",disabled:!X||!B.agree1||!B.agree2,children:x("submitRequest",l)})]})]})]}),(0,s.jsx)(K,{}),j&&(0,s.jsx)(se,{onClose:()=>H(!1)}),F&&(0,s.jsx)("div",{className:"modal-overlay",onClick:Y,children:(0,s.jsxs)("div",{className:"modal-content verify-dialog",onClick:e=>e.stopPropagation(),children:[1===_?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{children:x("verifyContact",l)}),(0,s.jsxs)("p",{children:[x("phoneNumber",l),": +218",d.phone]}),d.enableEmail&&(0,s.jsxs)("p",{children:[x("email",l),": ",d.email]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{children:x(2===_?"enterOtpPhone":"enterOtpEmail",l)}),(0,s.jsx)("input",{className:"otp-input",type:"text",value:L,maxLength:"4",onChange:e=>D(e.target.value.replace(/\D/g,""))}),(0,s.jsx)("div",{className:"otp-timer",children:O>0?(0,s.jsxs)("span",{className:"otp-countdown",children:[x("otpCountdown",l),": ",(e=>{const t=String(Math.floor(e/60)).padStart(2,"0"),n=String(e%60).padStart(2,"0");return"".concat(t,":").concat(n)})(O)]}):(0,s.jsx)("button",{className:"btn-next resend-btn",onClick:async()=>{try{2===_?await fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"","/api/send-otp"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:"+218".concat(d.phone),language:l})}):3===_&&await fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"","/api/send-otp"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d.email,language:l})}),M(120)}catch(Vu){console.error(Vu)}},children:x("resendOtp",l)})}),R&&(0,s.jsx)("p",{className:"error-message",children:R})]}),(0,s.jsxs)("div",{className:"verify-actions",children:[(0,s.jsx)("button",{className:"btn-back",onClick:Y,children:x("cancel",l)}),(0,s.jsx)("button",{className:"btn-next",onClick:async()=>{if(1===_)try{return await fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"","/api/send-otp"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:"+218".concat(d.phone),language:l})}),T(2),M(120),void D("")}catch(Vu){console.error(Vu)}else if(2===_){try{const e=await fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"","/api/verify-otp"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:"+218".concat(d.phone),otp:L})});if((await e.json()).verified)return d.enableEmail?(await fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"","/api/send-otp"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d.email,language:l})}),T(3),M(120),void D("")):void J()}catch(Vu){console.error(Vu)}U(x("incorrectOtp",l))}else{try{const e=await fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"","/api/verify-otp"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d.email,otp:L})});if((await e.json()).verified)return void J()}catch(Vu){console.error(Vu)}U(x("incorrectEmailOtp",l))}},children:x("confirm",l)})]})]})}),b&&(0,s.jsx)(ie,{message:x("extracting_data",l)})]})},de=e=>{let{onNavigate:t,backPage:n,nextPage:i}=e;const{language:o}=A(),[l,c]=(0,a.useState)({companyName:"",country:"",tradeName:"",city:"",registrationNo:"",headOffice:"",licenseNo:"",postalCode:"",registrationDate:"",companyType:"",businessActivity:""}),u=e=>{const{name:t,value:n}=e.target;c(e=>r(r({},e),{},{[t]:n}))};return(0,s.jsxs)("div",{className:"form-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:w,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsxs)("button",{onClick:()=>t(n),className:"btn-back",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"15 18 9 12 15 6"})}),(0,s.jsx)("span",{children:x("back",o)})]})]}),(0,s.jsx)("main",{className:"form-main",children:(0,s.jsxs)("form",{className:"form-container",onSubmit:e=>{e.preventDefault(),t(i)},noValidate:!0,children:[(0,s.jsxs)("div",{className:"form-section",children:[(0,s.jsx)("h3",{children:"Basic Company Information"}),(0,s.jsxs)("div",{className:"company-form-grid",children:[(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"companyName",value:l.companyName,onChange:u,type:"text",required:!0,className:"form-input",placeholder:"Full Company Name"})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"country",value:l.country,onChange:u,type:"text",required:!0,className:"form-input",placeholder:"Country"})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"tradeName",value:l.tradeName,onChange:u,type:"text",required:!0,className:"form-input",placeholder:"Trade Name"})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"city",value:l.city,onChange:u,type:"text",required:!0,className:"form-input",placeholder:"City"})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"registrationNo",value:l.registrationNo,onChange:u,type:"text",required:!0,className:"form-input",placeholder:"Commercial Registration No."})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"headOffice",value:l.headOffice,onChange:u,type:"text",required:!0,className:"form-input",placeholder:"Head Office Address"})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"licenseNo",value:l.licenseNo,onChange:u,type:"text",required:!0,className:"form-input",placeholder:"Activity License No."})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"postalCode",value:l.postalCode,onChange:u,type:"text",required:!0,className:"form-input",placeholder:"Postal Code"})}),(0,s.jsxs)("div",{className:"form-group date-input-container",children:[(0,s.jsx)("input",{name:"registrationDate",value:l.registrationDate,onChange:u,type:"text",required:!0,className:"form-input",placeholder:"Company Registration Date",onFocus:e=>e.target.type="date",onBlur:e=>e.target.type="text"}),(0,s.jsx)(P,{})]}),(0,s.jsx)("div",{className:"form-group"}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsxs)("select",{name:"companyType",value:l.companyType,onChange:u,className:"form-input",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Company Type"}),(0,s.jsx)("option",{value:"limited",children:"Limited Liability"}),(0,s.jsx)("option",{value:"joint",children:"Joint Stock"})]})}),(0,s.jsx)("div",{className:"form-group"}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsxs)("select",{name:"businessActivity",value:l.businessActivity,onChange:u,className:"form-input",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Business Activity"}),(0,s.jsx)("option",{value:"trade",children:"Trade"}),(0,s.jsx)("option",{value:"services",children:"Services"}),(0,s.jsx)("option",{value:"industry",children:"Industry"})]})})]})]}),(0,s.jsx)("div",{className:"form-actions",children:(0,s.jsx)("button",{type:"submit",className:"btn-next",children:x("next",o)})})]})}),(0,s.jsx)(K,{})]})},he=e=>{let{onNavigate:t,backPage:n,nextPage:r}=e;const{language:a}=A();return(0,s.jsxs)("div",{className:"form-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:w,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsxs)("button",{onClick:()=>t(n),className:"btn-back",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"15 18 9 12 15 6"})}),(0,s.jsx)("span",{children:x("back",a)})]})]}),(0,s.jsx)("main",{className:"form-main",children:(0,s.jsxs)("form",{className:"form-container",onSubmit:e=>{e.preventDefault(),t(r)},noValidate:!0,children:[(0,s.jsxs)("div",{className:"form-section",children:[(0,s.jsx)("h3",{children:"Company Contact Information"}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsxs)("div",{className:"phone-input-group",children:[(0,s.jsx)("span",{className:"phone-prefix",children:"+218"}),(0,s.jsx)("input",{type:"tel",required:!0,className:"form-input",placeholder:"Main Phone Number"})]})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{type:"email",required:!0,className:"form-input",placeholder:"Official Email"})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{type:"text",className:"form-input",placeholder:"Website (if any)"})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{type:"text",className:"form-input",placeholder:"Branch Address (if any)"})})]}),(0,s.jsx)("div",{className:"form-actions",children:(0,s.jsx)("button",{type:"submit",className:"btn-next",children:x("next",a)})})]})}),(0,s.jsx)(K,{})]})},pe=e=>{let{onNavigate:t,backPage:n,nextPage:i}=e;const{language:o}=A(),[l,c]=(0,a.useState)(Array(12).fill("")),[u,d]=(0,a.useState)({fullName:"",passportNumber:"",capacity:"",phone:"",email:""}),h=e=>{const{name:t,value:n}=e.target;d(e=>r(r({},e),{},{[t]:n}))},p=e=>{"Backspace"===e.key&&!e.target.value&&e.target.previousSibling&&e.target.previousSibling.focus()};return(0,s.jsxs)("div",{className:"form-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:w,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsxs)("button",{onClick:()=>t(n),className:"btn-back",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"15 18 9 12 15 6"})}),(0,s.jsx)("span",{children:x("back",o)})]})]}),(0,s.jsx)("main",{className:"form-main",children:(0,s.jsxs)("form",{className:"form-container",onSubmit:e=>{e.preventDefault(),t(i)},noValidate:!0,children:[(0,s.jsxs)("div",{className:"form-section",children:[(0,s.jsx)("h3",{children:"Legal Representative Information"}),(0,s.jsx)("p",{style:{marginTop:"-15px",marginBottom:"20px"},children:"This data is for the person responsible for opening the account in the company's name."}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"fullName",value:u.fullName,onChange:h,type:"text",required:!0,className:"form-input",placeholder:"Full Name"})}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"National ID"}),(0,s.jsx)("div",{className:"national-id-group",children:l.map((e,t)=>(0,s.jsx)("input",{value:e,onChange:e=>((e,t)=>{const n=[...l];n[t]=e.target.value,c(n)})(e,t),type:"text",maxLength:"1",onKeyDown:p,className:"national-id-input",required:!0},t))})]}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"passportNumber",value:u.passportNumber,onChange:h,type:"text",required:!0,className:"form-input",placeholder:"Passport Number"})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsxs)("select",{name:"capacity",value:u.capacity,onChange:h,className:"form-input",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Legal Representative's Capacity"}),(0,s.jsx)("option",{value:"owner",children:"Owner"}),(0,s.jsx)("option",{value:"ceo",children:"CEO"}),(0,s.jsx)("option",{value:"manager",children:"Manager"})]})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsxs)("div",{className:"phone-input-group",children:[(0,s.jsx)("span",{className:"phone-prefix",children:"+218"}),(0,s.jsx)("input",{name:"phone",value:u.phone,onChange:h,type:"tel",required:!0,className:"form-input",placeholder:"Mobile Phone Number"})]})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"email",value:u.email,onChange:h,type:"email",required:!0,className:"form-input",placeholder:"Personal Email"})})]}),(0,s.jsx)("div",{className:"form-actions",children:(0,s.jsx)("button",{type:"submit",className:"btn-next",children:x("next",o)})})]})}),(0,s.jsx)(K,{})]})},fe=e=>{let{onNavigate:t,backPage:n}=e;const{language:i}=A(),[o,l]=(0,a.useState)({monthlyIncome:"",currency:"",sourceOfRevenue:"",purpose:"",certify:!1,agree:!1}),[c,u]=(0,a.useState)(""),[d,h]=(0,a.useState)(!1),p=e=>{const{name:t,value:n,type:a,checked:i}=e.target;l(e=>r(r({},e),{},{[t]:"checkbox"===a?i:n}))};return(0,s.jsxs)("div",{className:"form-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:w,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsxs)("button",{onClick:()=>t(n),className:"btn-back",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"15 18 9 12 15 6"})}),(0,s.jsx)("span",{children:x("back",i)})]})]}),(0,s.jsx)("main",{className:"form-main",children:(0,s.jsxs)("form",{className:"form-container",onSubmit:e=>{e.preventDefault(),o.certify&&o.agree?(u(""),t("success")):u(x("agreeError",i))},noValidate:!0,children:[(0,s.jsxs)("div",{className:"form-section",children:[(0,s.jsx)("h3",{children:"Financial Information"}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"monthlyIncome",value:o.monthlyIncome,onChange:p,type:"text",required:!0,className:"form-input",placeholder:"Average Monthly Income for the Company"})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"currency",value:o.currency,onChange:p,type:"text",required:!0,className:"form-input",placeholder:"Primary Account Currency"})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"sourceOfRevenue",value:o.sourceOfRevenue,onChange:p,type:"text",required:!0,className:"form-input",placeholder:"Main Source of Revenue"})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"purpose",value:o.purpose,onChange:p,type:"text",required:!0,className:"form-input",placeholder:"Purpose of Opening the Account"})})]}),(0,s.jsxs)("div",{className:"form-actions",children:[(0,s.jsxs)("div",{className:"agreements",children:[(0,s.jsxs)("label",{className:"agreement-item",children:[(0,s.jsxs)("div",{className:"custom-checkbox",children:[(0,s.jsx)("input",{name:"certify",type:"checkbox",checked:o.certify,onChange:p,required:!0}),(0,s.jsx)("span",{className:"checkmark"})]}),(0,s.jsx)("span",{children:x("certifyCorrect",i)})]}),(0,s.jsxs)("label",{className:"agreement-item",children:[(0,s.jsxs)("div",{className:"custom-checkbox",children:[(0,s.jsx)("input",{name:"agree",type:"checkbox",checked:o.agree,onChange:p,required:!0}),(0,s.jsx)("span",{className:"checkmark"})]}),(0,s.jsxs)("span",{children:[x("agreePrefix",i)," ",(0,s.jsx)("button",{type:"button",className:"terms-link",onClick:()=>h(!0),children:x("termsAndConditions",i)})]})]})]}),c&&(0,s.jsx)("p",{className:"error-message",children:c}),(0,s.jsx)("button",{type:"submit",className:"btn-next",children:x("submitRequest",i)})]})]})}),(0,s.jsx)(K,{}),d&&(0,s.jsx)(se,{onClose:()=>h(!1)})]})},me=e=>{let{onNavigate:t,state:n}=e;const{language:r}=A(),{setFormData:i}=p(),o=null===n||void 0===n?void 0:n.referenceNumber,l=null===n||void 0===n?void 0:n.createdAt,c=null===n||void 0===n?void 0:n.aiModel;return(0,a.useEffect)(()=>{fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"","/api/clear-cache"),{method:"POST"}).catch(()=>{}),i({provider:"gemini"})},[i]),(0,s.jsxs)("div",{className:"form-page success-page sequential-docs-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:w,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]})]}),(0,s.jsxs)("main",{className:"form-main",style:{textAlign:"center"},children:[(0,s.jsx)(F,{}),(0,s.jsx)("h1",{className:"success-title",children:x("successTitle",r)}),(0,s.jsx)("p",{className:"success-message",children:x("successMsg",r)}),o&&(0,s.jsxs)("div",{className:"reference-number",children:[x("referenceLabel",r),": ",o]}),l&&(0,s.jsxs)("p",{children:[x("createdAt",r),":"," ",new Date(l).toLocaleString()]}),c&&(0,s.jsxs)("p",{children:[x("aiModelUsed",r),": ",c]}),(0,s.jsx)("button",{className:"btn-next",onClick:()=>t("landing"),children:x("backToHome",r)})]}),(0,s.jsx)(K,{})]})};var ge=n(2284),ye=Uint8Array,be=Uint16Array,we=Int32Array,ve=new ye([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),xe=new ye([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ce=new ye([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ke=function(e,t){for(var n=new be(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var a=new we(n[30]);for(r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)a[i]=i-n[r]<<5|r;return{b:n,r:a}},Be=ke(ve,2),Se=Be.b,Ie=Be.r;Se[28]=258,Ie[258]=28;for(var Ne=ke(xe,0),Fe=Ne.b,Ee=Ne.r,_e=new be(32768),Te=0;Te<32768;++Te){var Le=(43690&Te)>>1|(21845&Te)<<1;Le=(61680&(Le=(52428&Le)>>2|(13107&Le)<<2))>>4|(3855&Le)<<4,_e[Te]=((65280&Le)>>8|(255&Le)<<8)>>1}var De=function(e,t,n){for(var r=e.length,a=0,i=new be(t);a<r;++a)e[a]&&++i[e[a]-1];var s,o=new be(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;if(n){s=new be(1<<t);var l=15-t;for(a=0;a<r;++a)if(e[a])for(var c=a<<4|e[a],u=t-e[a],A=o[e[a]-1]++<<u,d=A|(1<<u)-1;A<=d;++A)s[_e[A]>>l]=c}else for(s=new be(r),a=0;a<r;++a)e[a]&&(s[a]=_e[o[e[a]-1]++]>>15-e[a]);return s},Re=new ye(288);for(Te=0;Te<144;++Te)Re[Te]=8;for(Te=144;Te<256;++Te)Re[Te]=9;for(Te=256;Te<280;++Te)Re[Te]=7;for(Te=280;Te<288;++Te)Re[Te]=8;var Ue=new ye(32);for(Te=0;Te<32;++Te)Ue[Te]=5;var Oe=De(Re,9,0),Me=De(Re,9,1),Pe=De(Ue,5,0),Qe=De(Ue,5,1),je=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},He=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},ze=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},We=function(e){return(e+7)/8|0},Ve=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new ye(e.subarray(t,n))},Ge=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ke=function(e,t,n){var r=new Error(t||Ge[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Ke),!n)throw r;return r},qe=function(e,t,n,r){var a=e.length,i=r?r.length:0;if(!a||t.f&&!t.l)return n||new ye(0);var s=!n,o=s||2!=t.i,l=t.i;s&&(n=new ye(3*a));var c=function(e){var t=n.length;if(e>t){var r=new ye(Math.max(2*t,e));r.set(n),n=r}},u=t.f||0,A=t.p||0,d=t.b||0,h=t.l,p=t.d,f=t.m,m=t.n,g=8*a;do{if(!h){u=He(e,A,1);var y=He(e,A+1,3);if(A+=3,!y){var b=e[(E=We(A)+4)-4]|e[E-3]<<8,w=E+b;if(w>a){l&&Ke(0);break}o&&c(d+b),n.set(e.subarray(E,w),d),t.b=d+=b,t.p=A=8*w,t.f=u;continue}if(1==y)h=Me,p=Qe,f=9,m=5;else if(2==y){var v=He(e,A,31)+257,x=He(e,A+10,15)+4,C=v+He(e,A+5,31)+1;A+=14;for(var k=new ye(C),B=new ye(19),S=0;S<x;++S)B[Ce[S]]=He(e,A+3*S,7);A+=3*x;var I=je(B),N=(1<<I)-1,F=De(B,I,1);for(S=0;S<C;){var E,_=F[He(e,A,N)];if(A+=15&_,(E=_>>4)<16)k[S++]=E;else{var T=0,L=0;for(16==E?(L=3+He(e,A,3),A+=2,T=k[S-1]):17==E?(L=3+He(e,A,7),A+=3):18==E&&(L=11+He(e,A,127),A+=7);L--;)k[S++]=T}}var D=k.subarray(0,v),R=k.subarray(v);f=je(D),m=je(R),h=De(D,f,1),p=De(R,m,1)}else Ke(1);if(A>g){l&&Ke(0);break}}o&&c(d+131072);for(var U=(1<<f)-1,O=(1<<m)-1,M=A;;M=A){var P=(T=h[ze(e,A)&U])>>4;if((A+=15&T)>g){l&&Ke(0);break}if(T||Ke(2),P<256)n[d++]=P;else{if(256==P){M=A,h=null;break}var Q=P-254;if(P>264){var j=ve[S=P-257];Q=He(e,A,(1<<j)-1)+Se[S],A+=j}var H=p[ze(e,A)&O],z=H>>4;H||Ke(3),A+=15&H;R=Fe[z];if(z>3){j=xe[z];R+=ze(e,A)&(1<<j)-1,A+=j}if(A>g){l&&Ke(0);break}o&&c(d+131072);var W=d+Q;if(d<R){var V=i-R,G=Math.min(R,W);for(V+d<0&&Ke(3);d<G;++d)n[d]=r[V+d]}for(;d<W;++d)n[d]=n[d-R]}}t.l=h,t.p=M,t.b=d,t.f=u,h&&(u=1,t.m=f,t.d=p,t.n=m)}while(!u);return d!=n.length&&s?Ve(n,0,d):n.subarray(0,d)},Xe=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},Je=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},Ye=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var a=n.length,i=n.slice();if(!a)return{t:at,l:0};if(1==a){var s=new ye(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,u=1,A=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=a-1;)o=n[n[c].f<n[A].f?c++:A++],l=n[c!=u&&n[c].f<n[A].f?c++:A++],n[u++]={s:-1,f:o.f+l.f,l:o,r:l};var d=i[0].s;for(r=1;r<a;++r)i[r].s>d&&(d=i[r].s);var h=new be(d+1),p=Ze(n[u-1],h,0);if(p>t){r=0;var f=0,m=p-t,g=1<<m;for(i.sort(function(e,t){return h[t.s]-h[e.s]||e.f-t.f});r<a;++r){var y=i[r].s;if(!(h[y]>t))break;f+=g-(1<<p-h[y]),h[y]=t}for(f>>=m;f>0;){var b=i[r].s;h[b]<t?f-=1<<t-h[b]++-1:++r}for(;r>=0&&f;--r){var w=i[r].s;h[w]==t&&(--h[w],++f)}p=t}return{t:new ye(h),l:p}},Ze=function(e,t,n){return-1==e.s?Math.max(Ze(e.l,t,n+1),Ze(e.r,t,n+1)):t[e.s]=n},$e=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new be(++t),r=0,a=e[0],i=1,s=function(e){n[r++]=e},o=1;o<=t;++o)if(e[o]==a&&o!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)s(32754);i>2&&(s(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(s(a),--i;i>6;i-=6)s(8304);i>2&&(s(i-3<<5|8208),i=0)}for(;i--;)s(a);i=1,a=e[o]}return{c:n.subarray(0,r),n:t}},et=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},tt=function(e,t,n){var r=n.length,a=We(t+2);e[a]=255&r,e[a+1]=r>>8,e[a+2]=255^e[a],e[a+3]=255^e[a+1];for(var i=0;i<r;++i)e[a+i+4]=n[i];return 8*(a+4+r)},nt=function(e,t,n,r,a,i,s,o,l,c,u){Xe(t,u++,n),++a[256];for(var A=Ye(a,15),d=A.t,h=A.l,p=Ye(i,15),f=p.t,m=p.l,g=$e(d),y=g.c,b=g.n,w=$e(f),v=w.c,x=w.n,C=new be(19),k=0;k<y.length;++k)++C[31&y[k]];for(k=0;k<v.length;++k)++C[31&v[k]];for(var B=Ye(C,7),S=B.t,I=B.l,N=19;N>4&&!S[Ce[N-1]];--N);var F,E,_,T,L=c+5<<3,D=et(a,Re)+et(i,Ue)+s,R=et(a,d)+et(i,f)+s+14+3*N+et(C,S)+2*C[16]+3*C[17]+7*C[18];if(l>=0&&L<=D&&L<=R)return tt(t,u,e.subarray(l,l+c));if(Xe(t,u,1+(R<D)),u+=2,R<D){F=De(d,h,0),E=d,_=De(f,m,0),T=f;var U=De(S,I,0);Xe(t,u,b-257),Xe(t,u+5,x-1),Xe(t,u+10,N-4),u+=14;for(k=0;k<N;++k)Xe(t,u+3*k,S[Ce[k]]);u+=3*N;for(var O=[y,v],M=0;M<2;++M){var P=O[M];for(k=0;k<P.length;++k){var Q=31&P[k];Xe(t,u,U[Q]),u+=S[Q],Q>15&&(Xe(t,u,P[k]>>5&127),u+=P[k]>>12)}}}else F=Oe,E=Re,_=Pe,T=Ue;for(k=0;k<o;++k){var j=r[k];if(j>255){Je(t,u,F[(Q=j>>18&31)+257]),u+=E[Q+257],Q>7&&(Xe(t,u,j>>23&31),u+=ve[Q]);var H=31&j;Je(t,u,_[H]),u+=T[H],H>3&&(Je(t,u,j>>5&8191),u+=xe[H])}else Je(t,u,F[j]),u+=E[j]}return Je(t,u,F[256]),u+E[256]},rt=new we([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),at=new ye(0),it=function(e,t,n,r,a,i){var s=i.z||e.length,o=new ye(r+s+5*(1+Math.ceil(s/7e3))+a),l=o.subarray(r,o.length-a),c=i.l,u=7&(i.r||0);if(t){u&&(l[0]=i.r>>3);for(var A=rt[t-1],d=A>>13,h=8191&A,p=(1<<n)-1,f=i.p||new be(32768),m=i.h||new be(p+1),g=Math.ceil(n/3),y=2*g,b=function(t){return(e[t]^e[t+1]<<g^e[t+2]<<y)&p},w=new we(25e3),v=new be(288),x=new be(32),C=0,k=0,B=i.i||0,S=0,I=i.w||0,N=0;B+2<s;++B){var F=b(B),E=32767&B,_=m[F];if(f[E]=_,m[F]=E,I<=B){var T=s-B;if((C>7e3||S>24576)&&(T>423||!c)){u=nt(e,l,0,w,v,x,k,S,N,B-N,u),S=C=k=0,N=B;for(var L=0;L<286;++L)v[L]=0;for(L=0;L<30;++L)x[L]=0}var D=2,R=0,U=h,O=E-_&32767;if(T>2&&F==b(B-O))for(var M=Math.min(d,T)-1,P=Math.min(32767,B),Q=Math.min(258,T);O<=P&&--U&&E!=_;){if(e[B+D]==e[B+D-O]){for(var j=0;j<Q&&e[B+j]==e[B+j-O];++j);if(j>D){if(D=j,R=O,j>M)break;var H=Math.min(O,j-2),z=0;for(L=0;L<H;++L){var W=B-O+L&32767,V=W-f[W]&32767;V>z&&(z=V,_=W)}}}O+=(E=_)-(_=f[E])&32767}if(R){w[S++]=268435456|Ie[D]<<18|Ee[R];var G=31&Ie[D],K=31&Ee[R];k+=ve[G]+xe[K],++v[257+G],++x[K],I=B+D,++C}else w[S++]=e[B],++v[e[B]]}}for(B=Math.max(B,I);B<s;++B)w[S++]=e[B],++v[e[B]];u=nt(e,l,c,w,v,x,k,S,N,B-N,u),c||(i.r=7&u|l[u/8|0]<<3,u-=7,i.h=m,i.p=f,i.i=B,i.w=I)}else{for(B=i.w||0;B<s+c;B+=65535){var q=B+65535;q>=s&&(l[u/8|0]=c,q=s),u=tt(l,u+1,e.subarray(B,q))}i.i=s}return Ve(o,0,r+We(u)+a)},st=function(){var e=1,t=0;return{p:function(n){for(var r=e,a=t,i=0|n.length,s=0;s!=i;){for(var o=Math.min(s+2655,i);s<o;++s)a+=r+=n[s];r=(65535&r)+15*(r>>16),a=(65535&a)+15*(a>>16)}e=r,t=a},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},ot=function(e,t,n,r,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),s=new ye(i.length+e.length);s.set(i),s.set(e,i.length),e=s,a.w=i.length}return it(e,null==t.level?6:t.level,null==t.mem?a.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,r,a)},lt=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},ct=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=st();a.p(t.dictionary),lt(e,2,a.d())}},ut=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Ke(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Ke(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function At(e,t){t||(t={});var n=st();n.p(e);var r=ot(e,t,t.dictionary?6:2,4);return ct(r,t),lt(r,r.length-4,n.d()),r}function dt(e,t){return qe(e.subarray(ut(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var ht="undefined"!=typeof TextDecoder&&new TextDecoder;try{ht.decode(at,{stream:!0})}catch(Vu){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var pt=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function ft(){pt.console&&"function"==typeof pt.console.log&&pt.console.log.apply(pt.console,arguments)}var mt={log:ft,warn:function(e){pt.console&&("function"==typeof pt.console.warn?pt.console.warn.apply(pt.console,arguments):ft.call(null,arguments))},error:function(e){pt.console&&("function"==typeof pt.console.error?pt.console.error.apply(pt.console,arguments):ft(e))}};function gt(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){xt(r.response,t,n)},r.onerror=function(){mt.error("could not download file")},r.send()}function yt(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function bt(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(a3){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var wt,vt,xt=pt.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,ge.A)(window))||window!==pt?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=pt.URL||pt.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener","string"==typeof e?(a.href=e,a.origin!==location.origin?yt(a.href)?gt(e,t,n):bt(a,a.target="_blank"):bt(a)):(a.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(a.href)},4e4),setTimeout(function(){bt(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(yt(e))gt(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){bt(r)})}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,ge.A)(t)&&(mt.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return gt(e,t,n);var a="application/octet-stream"===e.type,i=/constructor/i.test(pt.HTMLElement)||pt.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&i)&&"object"===("undefined"==typeof FileReader?"undefined":(0,ge.A)(FileReader))){var o=new FileReader;o.onloadend=function(){var e=o.result;e=s?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},o.readAsDataURL(e)}else{var l=pt.URL||pt.webkitURL,c=l.createObjectURL(e);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});function Ct(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],r=0;r<n.length;r++){var a=n[r].re,i=n[r].process,s=a.exec(e);s&&(t=i(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}function kt(e,t){var n=e[0],r=e[1],a=e[2],i=e[3];n=St(n,r,a,i,t[0],7,-680876936),i=St(i,n,r,a,t[1],12,-389564586),a=St(a,i,n,r,t[2],17,606105819),r=St(r,a,i,n,t[3],22,-1044525330),n=St(n,r,a,i,t[4],7,-176418897),i=St(i,n,r,a,t[5],12,1200080426),a=St(a,i,n,r,t[6],17,-1473231341),r=St(r,a,i,n,t[7],22,-45705983),n=St(n,r,a,i,t[8],7,1770035416),i=St(i,n,r,a,t[9],12,-1958414417),a=St(a,i,n,r,t[10],17,-42063),r=St(r,a,i,n,t[11],22,-1990404162),n=St(n,r,a,i,t[12],7,1804603682),i=St(i,n,r,a,t[13],12,-40341101),a=St(a,i,n,r,t[14],17,-1502002290),n=It(n,r=St(r,a,i,n,t[15],22,1236535329),a,i,t[1],5,-165796510),i=It(i,n,r,a,t[6],9,-1069501632),a=It(a,i,n,r,t[11],14,643717713),r=It(r,a,i,n,t[0],20,-373897302),n=It(n,r,a,i,t[5],5,-701558691),i=It(i,n,r,a,t[10],9,38016083),a=It(a,i,n,r,t[15],14,-660478335),r=It(r,a,i,n,t[4],20,-405537848),n=It(n,r,a,i,t[9],5,568446438),i=It(i,n,r,a,t[14],9,-1019803690),a=It(a,i,n,r,t[3],14,-187363961),r=It(r,a,i,n,t[8],20,1163531501),n=It(n,r,a,i,t[13],5,-1444681467),i=It(i,n,r,a,t[2],9,-51403784),a=It(a,i,n,r,t[7],14,1735328473),n=Nt(n,r=It(r,a,i,n,t[12],20,-1926607734),a,i,t[5],4,-378558),i=Nt(i,n,r,a,t[8],11,-2022574463),a=Nt(a,i,n,r,t[11],16,1839030562),r=Nt(r,a,i,n,t[14],23,-35309556),n=Nt(n,r,a,i,t[1],4,-1530992060),i=Nt(i,n,r,a,t[4],11,1272893353),a=Nt(a,i,n,r,t[7],16,-155497632),r=Nt(r,a,i,n,t[10],23,-1094730640),n=Nt(n,r,a,i,t[13],4,681279174),i=Nt(i,n,r,a,t[0],11,-358537222),a=Nt(a,i,n,r,t[3],16,-722521979),r=Nt(r,a,i,n,t[6],23,76029189),n=Nt(n,r,a,i,t[9],4,-640364487),i=Nt(i,n,r,a,t[12],11,-421815835),a=Nt(a,i,n,r,t[15],16,530742520),n=Ft(n,r=Nt(r,a,i,n,t[2],23,-995338651),a,i,t[0],6,-198630844),i=Ft(i,n,r,a,t[7],10,1126891415),a=Ft(a,i,n,r,t[14],15,-1416354905),r=Ft(r,a,i,n,t[5],21,-57434055),n=Ft(n,r,a,i,t[12],6,1700485571),i=Ft(i,n,r,a,t[3],10,-1894986606),a=Ft(a,i,n,r,t[10],15,-1051523),r=Ft(r,a,i,n,t[1],21,-2054922799),n=Ft(n,r,a,i,t[8],6,1873313359),i=Ft(i,n,r,a,t[15],10,-30611744),a=Ft(a,i,n,r,t[6],15,-1560198380),r=Ft(r,a,i,n,t[13],21,1309151649),n=Ft(n,r,a,i,t[4],6,-145523070),i=Ft(i,n,r,a,t[11],10,-1120210379),a=Ft(a,i,n,r,t[2],15,718787259),r=Ft(r,a,i,n,t[9],21,-343485551),e[0]=Ot(n,e[0]),e[1]=Ot(r,e[1]),e[2]=Ot(a,e[2]),e[3]=Ot(i,e[3])}function Bt(e,t,n,r,a,i){return t=Ot(Ot(t,e),Ot(r,i)),Ot(t<<a|t>>>32-a,n)}function St(e,t,n,r,a,i,s){return Bt(t&n|~t&r,e,t,a,i,s)}function It(e,t,n,r,a,i,s){return Bt(t&r|n&~r,e,t,a,i,s)}function Nt(e,t,n,r,a,i,s){return Bt(t^n^r,e,t,a,i,s)}function Ft(e,t,n,r,a,i,s){return Bt(n^(t|~r),e,t,a,i,s)}function Et(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)kt(r,_t(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(kt(r,a),t=0;t<16;t++)a[t]=0;return a[14]=8*n,kt(r,a),r}function _t(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}wt=pt.atob.bind(pt),vt=pt.btoa.bind(pt);var Tt="0123456789abcdef".split("");function Lt(e){for(var t="",n=0;n<4;n++)t+=Tt[e>>8*n+4&15]+Tt[e>>8*n&15];return t}function Dt(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Rt(e){return Et(e).map(Dt).join("")}var Ut="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=Lt(e[t]);return e.join("")}(Et("hello"));function Ot(e,t){if(Ut){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function Mt(e,t){var n,r,a,i;if(e!==n){for(var s=(a=e,i=1+(256/e.length|0),new Array(i+1).join(a)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var u=o[l];c=(c+u+s.charCodeAt(l))%256,o[l]=o[c],o[c]=u}n=e,r=o}else o=r;var A=t.length,d=0,h=0,p="";for(l=0;l<A;l++)h=(h+(u=o[d=(d+1)%256]))%256,o[d]=o[h],o[h]=u,s=o[(o[d]+o[h])%256],p+=String.fromCharCode(t.charCodeAt(l)^s);return p}var Pt={print:4,modify:8,copy:16,"annot-forms":32};function Qt(e,t,n,r){this.v=1,this.r=2;var a=192;e.forEach(function(e){if(void 0!==Pt.perm)throw new Error("Invalid permission: "+e);a+=Pt[e]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var i=(t+this.padding).substr(0,32),s=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,s),this.P=-(1+(255^a)),this.encryptionKey=Rt(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Mt(this.encryptionKey,this.padding)}function jt(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var a=e.charCodeAt(r);t+=a<33||35===a||37===a||40===a||41===a||47===a||60===a||62===a||91===a||93===a||123===a||125===a||a>126?"#"+("0"+a.toString(16)).slice(-2):e[r]}return t}function Ht(e){if("object"!==(0,ge.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,r){if(r=r||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var a=Math.random().toString(35);return t[e][a]=[n,!!r],a},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[n]){var s=t[n][i];try{s[0].apply(e,r)}catch(n){pt.console&&mt.error("jsPDF PubSub Error",n.message,n)}s[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function zt(e){if(!(this instanceof zt))return new zt(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function Wt(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Vt(e,t,n,r,a){if(!(this instanceof Vt))return new Vt(e,t,n,r,a);this.type="axial"===e?2:3,this.coords=t,this.colors=n,Wt.call(this,r,a)}function Gt(e,t,n,r,a){if(!(this instanceof Gt))return new Gt(e,t,n,r,a);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,Wt.call(this,r,a)}function Kt(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],a=arguments[2],i=arguments[3],s=[],o=1,l=16,c="S",u=null;"object"===(0,ge.A)(e=e||{})&&(n=e.orientation,r=e.unit||r,a=e.format||a,i=e.compress||e.compressPdf||i,null!==(u=e.encryption||null)&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),s=e.filters||(!0===i?["FlateEncode"]:s),r=r||"mm",n=(""+(n||"P")).toLowerCase();var A=e.putOnlyUsedFonts||!1,d={},h={internal:{},__private__:{}};h.__private__.PubSub=Ht;var p="1.3",f=h.__private__.getPdfVersion=function(){return p};h.__private__.setPdfVersion=function(e){p=e};var m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return m};var g=h.__private__.getPageFormat=function(e){return m[e]};a=a||"a4";var y="compat",b="advanced",w=y;function v(){this.saveGraphicsState(),Y(new Te(de,0,0,-de,0,xn()*de).toString()+" cm"),this.setFontSize(this.getFontSize()/de),c="n",w=b}function x(){this.restoreGraphicsState(),c="S",w=y}var C=h.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};h.advancedAPI=function(e){var t=w===y;return t&&v.call(this),"function"!=typeof e||(e(this),t&&x.call(this)),this},h.compatAPI=function(e){var t=w===b;return t&&x.call(this),"function"!=typeof e||(e(this),t&&v.call(this)),this},h.isAdvancedAPI=function(){return w===b};var k,B=function(e){if(w!==b)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},S=h.roundToPrecision=h.__private__.roundToPrecision=function(e,n){var r=t||n;if(isNaN(e)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(r).replace(/0+$/,"")};k=h.hpf=h.__private__.hpf="number"==typeof l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return S(e,l)}:"smart"===l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return S(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return S(e,16)};var I=h.f2=h.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return S(e,2)},N=h.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return S(e,3)},F=h.scale=h.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return w===y?e*de:w===b?e:void 0},E=function(e){return F(function(e){return w===y?xn()-e:w===b?e:void 0}(e))};h.__private__.setPrecision=h.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var _,T="00000000000000000000000000000000",L=h.__private__.getFileId=function(){return T},D=h.__private__.setFileId=function(e){return T=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():T.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==u&&(kt=new Qt(u.userPermissions,u.userPassword,u.ownerPassword,T)),T};h.setFileId=function(e){return D(e),this},h.getFileId=function(){return L()};var R=h.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",r=Math.floor(Math.abs(t/60)),a=Math.abs(t%60),i=[n,Q(r),"'",Q(a),"'"].join("");return["D:",e.getFullYear(),Q(e.getMonth()+1),Q(e.getDate()),Q(e.getHours()),Q(e.getMinutes()),Q(e.getSeconds()),i].join("")},U=h.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,r=parseInt(e.substr(8,2),10),a=parseInt(e.substr(10,2),10),i=parseInt(e.substr(12,2),10),s=parseInt(e.substr(14,2),10);return new Date(t,n,r,a,i,s,0)},O=h.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=R(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return _=t},M=h.__private__.getCreationDate=function(e){var t=_;return"jsDate"===e&&(t=U(_)),t};h.setCreationDate=function(e){return O(e),this},h.getCreationDate=function(e){return M(e)};var P,Q=h.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},j=h.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},H=0,z=[],W=[],V=0,G=[],K=[],q=!1,X=W;h.__private__.setCustomOutputDestination=function(e){q=!0,X=e};var J=function(e){q||(X=e)};h.__private__.resetCustomOutputDestination=function(){q=!1,X=W};var Y=h.__private__.out=function(e){return e=e.toString(),V+=e.length+1,X.push(e),X},Z=h.__private__.write=function(e){return Y(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},$=h.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n);t--;)r[t]=e.charCodeAt(t);return n},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return ee};var te=e.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(e){return te=w===b?e/de:e,this};var ne,re=h.__private__.getFontSize=h.getFontSize=function(){return w===y?te:te*de},ae=e.R2L||!1;h.__private__.setR2L=h.setR2L=function(e){return ae=e,this},h.__private__.getR2L=h.getR2L=function(){return ae};var ie,se=h.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))ne=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');ne=e}else ne=parseInt(e,10)};h.__private__.getZoomMode=function(){return ne};var oe,le=h.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');ie=e};h.__private__.getPageMode=function(){return ie};var ce=h.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');oe=e};h.__private__.getLayoutMode=function(){return oe},h.__private__.setDisplayMode=h.setDisplayMode=function(e,t,n){return se(e),ce(t),le(n),this};var ue={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(e){if(-1===Object.keys(ue).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ue[e]},h.__private__.getDocumentProperties=function(){return ue},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(e){for(var t in ue)ue.hasOwnProperty(t)&&e[t]&&(ue[t]=e[t]);return this},h.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(ue).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ue[e]=t};var Ae,de,he,pe,fe,me={},ye={},be=[],we={},ve={},xe={},Ce={},ke=null,Be=0,Se=[],Ie=new Ht(h),Ne=e.hotfixes||[],Fe={},Ee={},_e=[],Te=function e(t,n,r,a,i,s){if(!(this instanceof e))return new e(t,n,r,a,i,s);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(a)&&(a=1),isNaN(i)&&(i=0),isNaN(s)&&(s=0),this._matrix=[t,n,r,a,i,s]};Object.defineProperty(Te.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Te.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Te.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Te.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Te.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Te.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Te.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Te.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Te.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Te.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Te.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Te.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Te.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Te.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Te.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Te.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Te.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(k).join(e)},Te.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,r=e.shx*this.sx+e.sy*this.shx,a=e.shx*this.shy+e.sy*this.sy,i=e.tx*this.sx+e.ty*this.shx+this.tx,s=e.tx*this.shy+e.ty*this.sy+this.ty;return new Te(t,n,r,a,i,s)},Te.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,a=this.tx,i=this.ty,s=Math.sqrt(e*e+t*t),o=(e/=s)*n+(t/=s)*r;n-=e*o,r-=t*o;var l=Math.sqrt(n*n+r*r);return o/=l,e*(r/=l)<t*(n/=l)&&(e=-e,t=-t,o=-o,s=-s),{scale:new Te(s,0,0,l,0,0),translate:new Te(1,0,0,1,a,i),rotate:new Te(e,t,-t,e,0,0),skew:new Te(1,0,o,1,0,0)}},Te.prototype.toString=function(e){return this.join(" ")},Te.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,a=this.tx,i=this.ty,s=1/(e*r-t*n),o=r*s,l=-t*s,c=-n*s,u=e*s;return new Te(o,l,c,u,-o*a-c*i,-l*a-u*i)},Te.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new fn(t,n)},Te.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new fn(e.x+e.w,e.y+e.h));return new mn(t.x,t.y,n.x-t.x,n.y-t.y)},Te.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,a=this.tx,i=this.ty;return new Te(e,t,n,r,a,i)},h.Matrix=Te;var Le=h.matrixMult=function(e,t){return t.multiply(e)},De=new Te(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=De;var Re=function(e,t){if(!ve[e]){var n=(t instanceof Vt?"Sh":"P")+(Object.keys(we).length+1).toString(10);t.id=n,ve[e]=n,we[n]=t,Ie.publish("addPattern",t)}};h.ShadingPattern=Vt,h.TilingPattern=Gt,h.addShadingPattern=function(e,t){return B("addShadingPattern()"),Re(e,t),this},h.beginTilingPattern=function(e){B("beginTilingPattern()"),yn(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},h.endTilingPattern=function(e,t){B("endTilingPattern()"),t.stream=K[P].join("\n"),Re(e,t),Ie.publish("endTilingPattern",t),_e.pop().restore()};var Ue=h.__private__.newObject=function(){var e=Oe();return Me(e,!0),e},Oe=h.__private__.newObjectDeferred=function(){return H++,z[H]=function(){return V},H},Me=function(e,t){return t="boolean"==typeof t&&t,z[e]=V,t&&Y(e+" 0 obj"),e},Pe=h.__private__.newAdditionalObject=function(){var e={objId:Oe(),content:""};return G.push(e),e},Qe=Oe(),je=Oe(),He=h.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var r="#",a=0;a<3;a++)r+=("0"+Math.floor(255*parseFloat(t[a])).toString(16)).slice(-2);return r},ze=h.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,r=e.ch2,a=e.ch3,i=e.ch4,s="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var o=new Ct(n);if(o.ok)n=o.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var l=parseInt(n.substr(1),16);n=l>>16&255,r=l>>8&255,a=255&l}if(void 0===r||void 0===i&&n===r&&r===a)if("string"==typeof n)t=n+" "+s[0];else if(2===e.precision)t=I(n/255)+" "+s[0];else t=N(n/255)+" "+s[0];else if(void 0===i||"object"===(0,ge.A)(i)){if(i&&!isNaN(i.a)&&0===i.a)return["1.","1.","1.",s[1]].join(" ");if("string"==typeof n)t=[n,r,a,s[1]].join(" ");else if(2===e.precision)t=[I(n/255),I(r/255),I(a/255),s[1]].join(" ");else t=[N(n/255),N(r/255),N(a/255),s[1]].join(" ")}else if("string"==typeof n)t=[n,r,a,i,s[2]].join(" ");else if(2===e.precision)t=[I(n),I(r),I(a),I(i),s[2]].join(" ");else t=[N(n),N(r),N(a),N(i),s[2]].join(" ");return t},We=h.__private__.getFilters=function(){return s},Ve=h.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||We(),r=e.alreadyAppliedFilters||[],a=e.addLength1||!1,i=t.length,s=e.objectId,o=function(e){return e};if(null!==u&&void 0===s)throw new Error("ObjectId must be passed to putStream for file encryption");null!==u&&(o=kt.encryptor(s,0));var l={};!0===n&&(n=["FlateEncode"]);var c=e.additionalKeyValues||[],A=(l=void 0!==Kt.API.processDataByFilters?Kt.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===a&&c.push({key:"Length1",value:i})),0!=A.length)if(A.split("/").length-1==1)c.push({key:"Filter",value:A});else{c.push({key:"Filter",value:"["+A+"]"});for(var d=0;d<c.length;d+=1)if("DecodeParms"===c[d].key){for(var h=[],p=0;p<l.reverseChain.split("/").length-1;p+=1)h.push("null");h.push(c[d].value),c[d].value="["+h.join(" ")+"]"}}Y("<<");for(var f=0;f<c.length;f++)Y("/"+c[f].key+" "+c[f].value);Y(">>"),0!==l.data.length&&(Y("stream"),Y(o(l.data)),Y("endstream"))},Ge=h.__private__.putPage=function(e){var t=e.number,n=e.data,r=e.objId,a=e.contentsObjId;Me(r,!0),Y("<</Type /Page"),Y("/Parent "+e.rootDictionaryObjId+" 0 R"),Y("/Resources "+e.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(k(e.mediaBox.bottomLeftX))+" "+parseFloat(k(e.mediaBox.bottomLeftY))+" "+k(e.mediaBox.topRightX)+" "+k(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&Y("/CropBox ["+k(e.cropBox.bottomLeftX)+" "+k(e.cropBox.bottomLeftY)+" "+k(e.cropBox.topRightX)+" "+k(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&Y("/BleedBox ["+k(e.bleedBox.bottomLeftX)+" "+k(e.bleedBox.bottomLeftY)+" "+k(e.bleedBox.topRightX)+" "+k(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&Y("/TrimBox ["+k(e.trimBox.bottomLeftX)+" "+k(e.trimBox.bottomLeftY)+" "+k(e.trimBox.topRightX)+" "+k(e.trimBox.topRightY)+"]"),null!==e.artBox&&Y("/ArtBox ["+k(e.artBox.bottomLeftX)+" "+k(e.artBox.bottomLeftY)+" "+k(e.artBox.topRightX)+" "+k(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&Y("/UserUnit "+e.userUnit),Ie.publish("putPage",{objId:r,pageContext:Se[t],pageNumber:t,page:n}),Y("/Contents "+a+" 0 R"),Y(">>"),Y("endobj");var i=n.join("\n");return w===b&&(i+="\nQ"),Me(a,!0),Ve({data:i,filters:We(),objectId:a}),Y("endobj"),r},Ke=h.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=Be;e++)Se[e].objId=Oe(),Se[e].contentsObjId=Oe();for(e=1;e<=Be;e++)n.push(Ge({number:e,data:K[e],objId:Se[e].objId,contentsObjId:Se[e].contentsObjId,mediaBox:Se[e].mediaBox,cropBox:Se[e].cropBox,bleedBox:Se[e].bleedBox,trimBox:Se[e].trimBox,artBox:Se[e].artBox,userUnit:Se[e].userUnit,rootDictionaryObjId:Qe,resourceDictionaryObjId:je}));Me(Qe,!0),Y("<</Type /Pages");var r="/Kids [";for(t=0;t<Be;t++)r+=n[t]+" 0 R ";Y(r+"]"),Y("/Count "+Be),Y(">>"),Y("endobj"),Ie.publish("postPutPages")},qe=function(e){Ie.publish("putFont",{font:e,out:Y,newObject:Ue,putStream:Ve}),!0!==e.isAlreadyPutted&&(e.objectNumber=Ue(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+jt(e.postScriptName)),Y("/Subtype /Type1"),"string"==typeof e.encoding&&Y("/Encoding /"+e.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},Xe=function(e){e.objectNumber=Ue();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[k(e.x),k(e.y),k(e.x+e.width),k(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");Ve({data:n,additionalKeyValues:t,objectId:e.objectNumber}),Y("endobj")},Je=function(e,t){t||(t=21);var n=Ue(),r=function(e,t){var n,r=[],a=1/(t-1);for(n=0;n<1;n+=a)r.push(n);if(r.push(1),0!=e[0].offset){var i={offset:0,color:e[0].color};e.unshift(i)}if(1!=e[e.length-1].offset){var s={offset:1,color:e[e.length-1].color};e.push(s)}for(var o="",l=0,c=0;c<r.length;c++){for(n=r[c];n>e[l+1].offset;)l++;var u=e[l].offset,A=(n-u)/(e[l+1].offset-u),d=e[l].color,h=e[l+1].color;o+=j(Math.round((1-A)*d[0]+A*h[0]).toString(16))+j(Math.round((1-A)*d[1]+A*h[1]).toString(16))+j(Math.round((1-A)*d[2]+A*h[2]).toString(16))}return o.trim()}(e.colors,t),a=[];a.push({key:"FunctionType",value:"0"}),a.push({key:"Domain",value:"[0.0 1.0]"}),a.push({key:"Size",value:"["+t+"]"}),a.push({key:"BitsPerSample",value:"8"}),a.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),a.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ve({data:r,additionalKeyValues:a,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),Y("endobj"),e.objectNumber=Ue(),Y("<< /ShadingType "+e.type),Y("/ColorSpace /DeviceRGB");var i="/Coords ["+k(parseFloat(e.coords[0]))+" "+k(parseFloat(e.coords[1]))+" ";2===e.type?i+=k(parseFloat(e.coords[2]))+" "+k(parseFloat(e.coords[3])):i+=k(parseFloat(e.coords[2]))+" "+k(parseFloat(e.coords[3]))+" "+k(parseFloat(e.coords[4]))+" "+k(parseFloat(e.coords[5])),Y(i+="]"),e.matrix&&Y("/Matrix ["+e.matrix.toString()+"]"),Y("/Function "+n+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},Ye=function(e,t){var n=Oe(),r=Ue();t.push({resourcesOid:n,objectOid:r}),e.objectNumber=r;var a=[];a.push({key:"Type",value:"/Pattern"}),a.push({key:"PatternType",value:"1"}),a.push({key:"PaintType",value:"1"}),a.push({key:"TilingType",value:"1"}),a.push({key:"BBox",value:"["+e.boundingBox.map(k).join(" ")+"]"}),a.push({key:"XStep",value:k(e.xStep)}),a.push({key:"YStep",value:k(e.yStep)}),a.push({key:"Resources",value:n+" 0 R"}),e.matrix&&a.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),Ve({data:e.stream,additionalKeyValues:a,objectId:e.objectNumber}),Y("endobj")},Ze=function(e){for(var t in e.objectNumber=Ue(),Y("<<"),e)switch(t){case"opacity":Y("/ca "+I(e[t]));break;case"stroke-opacity":Y("/CA "+I(e[t]))}Y(">>"),Y("endobj")},$e=function(e){Me(e.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in Y("/Font <<"),me)me.hasOwnProperty(e)&&(!1===A||!0===A&&d.hasOwnProperty(e))&&Y("/"+e+" "+me[e].objectNumber+" 0 R");Y(">>")}(),function(){if(Object.keys(we).length>0){for(var e in Y("/Shading <<"),we)we.hasOwnProperty(e)&&we[e]instanceof Vt&&we[e].objectNumber>=0&&Y("/"+e+" "+we[e].objectNumber+" 0 R");Ie.publish("putShadingPatternDict"),Y(">>")}}(),function(e){if(Object.keys(we).length>0){for(var t in Y("/Pattern <<"),we)we.hasOwnProperty(t)&&we[t]instanceof h.TilingPattern&&we[t].objectNumber>=0&&we[t].objectNumber<e&&Y("/"+t+" "+we[t].objectNumber+" 0 R");Ie.publish("putTilingPatternDict"),Y(">>")}}(e.objectOid),function(){if(Object.keys(xe).length>0){var e;for(e in Y("/ExtGState <<"),xe)xe.hasOwnProperty(e)&&xe[e].objectNumber>=0&&Y("/"+e+" "+xe[e].objectNumber+" 0 R");Ie.publish("putGStateDict"),Y(">>")}}(),function(){for(var e in Y("/XObject <<"),Fe)Fe.hasOwnProperty(e)&&Fe[e].objectNumber>=0&&Y("/"+e+" "+Fe[e].objectNumber+" 0 R");Ie.publish("putXobjectDict"),Y(">>")}(),Y(">>"),Y("endobj")},et=function(){var e=[];(function(){for(var e in me)me.hasOwnProperty(e)&&(!1===A||!0===A&&d.hasOwnProperty(e))&&qe(me[e])})(),function(){var e;for(e in xe)xe.hasOwnProperty(e)&&Ze(xe[e])}(),function(){for(var e in Fe)Fe.hasOwnProperty(e)&&Xe(Fe[e])}(),function(e){var t;for(t in we)we.hasOwnProperty(t)&&(we[t]instanceof Vt?Je(we[t]):we[t]instanceof Gt&&Ye(we[t],e))}(e),Ie.publish("putResources"),e.forEach($e),$e({resourcesOid:je,objectOid:Number.MAX_SAFE_INTEGER}),Ie.publish("postPutResources")},tt=function(e){ye[e.fontName]=ye[e.fontName]||{},ye[e.fontName][e.fontStyle]=e.id},nt=function(e,t,n,r,a){var i={id:"F"+(Object.keys(me).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:r,isStandardFont:a||!1,metadata:{}};return Ie.publish("addFont",{font:i,instance:this}),me[i.id]=i,tt(i),i.id},rt=h.__private__.pdfEscape=h.pdfEscape=function(e,t){return function(e,t){var n,r,a,i,s,o,l,c,u;if(a=(t=t||{}).sourceEncoding||"Unicode",s=t.outputEncoding,(t.autoencode||s)&&me[Ae].metadata&&me[Ae].metadata[a]&&me[Ae].metadata[a].encoding&&(i=me[Ae].metadata[a].encoding,!s&&me[Ae].encoding&&(s=me[Ae].encoding),!s&&i.codePages&&(s=i.codePages[0]),"string"==typeof s&&(s=i[s]),s)){for(l=!1,o=[],n=0,r=e.length;n<r;n++)(c=s[e.charCodeAt(n)])?o.push(String.fromCharCode(c)):o.push(e[n]),o[n].charCodeAt(0)>>8&&(l=!0);e=o.join("")}for(n=e.length;void 0===l&&0!==n;)e.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return e;for(o=t.noBOM?[]:[254,255],n=0,r=e.length;n<r;n++){if((u=(c=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");o.push(u),o.push(c-(u<<8))}return String.fromCharCode.apply(void 0,o)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},at=h.__private__.beginPage=function(e){K[++Be]=[],Se[Be]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},ot(Be),J(K[P])},it=function(e,t){var r,i,s;switch(n=t||n,"string"==typeof e&&(r=g(e.toLowerCase()),Array.isArray(r)&&(i=r[0],s=r[1])),Array.isArray(e)&&(i=e[0]*de,s=e[1]*de),isNaN(i)&&(i=a[0],s=a[1]),(i>14400||s>14400)&&(mt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),i=Math.min(14400,i),s=Math.min(14400,s)),a=[i,s],n.substr(0,1)){case"l":s>i&&(a=[s,i]);break;case"p":i>s&&(a=[s,i])}at(a),Yt(Xt),Y(sn),0!==dn&&Y(dn+" J"),0!==hn&&Y(hn+" j"),Ie.publish("addPage",{pageNumber:Be})},st=function(e){e>0&&e<=Be&&(K.splice(e,1),Se.splice(e,1),Be--,P>Be&&(P=Be),this.setPage(P))},ot=function(e){e>0&&e<=Be&&(P=e)},lt=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return K.length-1},ct=function(e,t,n){var r,a=void 0;return n=n||{},e=void 0!==e?e:me[Ae].fontName,t=void 0!==t?t:me[Ae].fontStyle,r=e.toLowerCase(),void 0!==ye[r]&&void 0!==ye[r][t]?a=ye[r][t]:void 0!==ye[e]&&void 0!==ye[e][t]?a=ye[e][t]:!1===n.disableWarning&&mt.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),a||n.noFallback||null==(a=ye.times[t])&&(a=ye.times.normal),a},ut=h.__private__.putInfo=function(){var e=Ue(),t=function(e){return e};for(var n in null!==u&&(t=kt.encryptor(e,0)),Y("<<"),Y("/Producer ("+rt(t("jsPDF "+Kt.version))+")"),ue)ue.hasOwnProperty(n)&&ue[n]&&Y("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+rt(t(ue[n]))+")");Y("/CreationDate ("+rt(t(_))+")"),Y(">>"),Y("endobj")},At=h.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Qe;switch(Ue(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+t+" 0 R"),ne||(ne="fullwidth"),ne){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+ne;"%"===n.substr(n.length-1)&&(ne=parseInt(ne)/100),"number"==typeof ne&&Y("/OpenAction [3 0 R /XYZ null null "+I(ne)+"]")}switch(oe||(oe="continuous"),oe){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}ie&&Y("/PageMode /"+ie),Ie.publish("putCatalog"),Y(">>"),Y("endobj")},dt=h.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(H+1)),Y("/Root "+H+" 0 R"),Y("/Info "+(H-1)+" 0 R"),null!==u&&Y("/Encrypt "+kt.oid+" 0 R"),Y("/ID [ <"+T+"> <"+T+"> ]"),Y(">>")},ht=h.__private__.putHeader=function(){Y("%PDF-"+p),Y("%\xba\xdf\xac\xe0")},ft=h.__private__.putXRef=function(){var e="0000000000";Y("xref"),Y("0 "+(H+1)),Y("0000000000 65535 f ");for(var t=1;t<=H;t++)"function"==typeof z[t]?Y((e+z[t]()).slice(-10)+" 00000 n "):void 0!==z[t]?Y((e+z[t]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},gt=h.__private__.buildDocument=function(){H=0,V=0,W=[],z=[],G=[],Qe=Oe(),je=Oe(),J(W),Ie.publish("buildDocument"),ht(),Ke(),function(){Ie.publish("putAdditionalObjects");for(var e=0;e<G.length;e++){var t=G[e];Me(t.objId,!0),Y(t.content),Y("endobj")}Ie.publish("postPutAdditionalObjects")}(),et(),null!==u&&(kt.oid=Ue(),Y("<<"),Y("/Filter /Standard"),Y("/V "+kt.v),Y("/R "+kt.r),Y("/U <"+kt.toHexString(kt.U)+">"),Y("/O <"+kt.toHexString(kt.O)+">"),Y("/P "+kt.P),Y(">>"),Y("endobj")),ut(),At();var e=V;return ft(),dt(),Y("startxref"),Y(""+e),Y("%%EOF"),J(K[P]),W.join("\n")},yt=h.__private__.getBlob=function(e){return new Blob([$(e)],{type:"application/pdf"})},bt=h.output=h.__private__.output=function(e){return e.foo=function(){try{return e.apply(this,arguments)}catch(e){var t=e.stack||"";~t.indexOf(" at ")&&(t=t.split(" at ")[1]);var n="Error in function "+t.split("\n")[0].split("<")[0]+": "+e.message;if(!pt.console)throw new Error(n);pt.console.error(n,e),pt.alert&&alert(n)}},e.foo.bar=e,e.foo}(function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return gt();case"save":h.save(t.filename);break;case"arraybuffer":return $(gt());case"blob":return yt(gt());case"bloburi":case"bloburl":if(void 0!==pt.URL&&"function"==typeof pt.URL.createObjectURL)return pt.URL&&pt.URL.createObjectURL(yt(gt()))||void 0;mt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=gt();try{n=vt(r)}catch(e){n=vt(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(pt)){var a="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",i=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(a=t.pdfObjectUrl,i="");var s='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+a+'"'+i+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",o=pt.open();return null!==o&&o.document.write(s),o}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(pt)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=pt.open();if(null!==c){c.document.write(l);var u=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(u.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(pt))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var A='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',d=pt.open();if(null!==d&&(d.document.write(A),d.document.title=t.filename),d||"undefined"==typeof safari)return d;break;case"datauri":case"dataurl":return pt.document.location.href=this.output("datauristring",t);default:return null}}),wt=function(e){return!0===Array.isArray(Ne)&&Ne.indexOf(e)>-1};switch(r){case"pt":de=1;break;case"mm":de=72/25.4;break;case"cm":de=72/2.54;break;case"in":de=72;break;case"px":de=1==wt("px_scaling")?.75:96/72;break;case"pc":case"em":de=12;break;case"ex":de=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);de=r}var kt=null;O(),D();var Bt=h.__private__.getPageInfo=h.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Se[e].objId,pageNumber:e,pageContext:Se[e]}},St=h.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Se)if(Se[t].objId===e)break;return Bt(t)},It=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Se[P].objId,pageNumber:P,pageContext:Se[P]}};h.addPage=function(){return it.apply(this,arguments),this},h.setPage=function(){return ot.apply(this,arguments),J.call(this,K[P]),this},h.insertPage=function(e){return this.addPage(),this.movePage(P,e),this},h.movePage=function(e,t){var n,r;if(e>t){n=K[e],r=Se[e];for(var a=e;a>t;a--)K[a]=K[a-1],Se[a]=Se[a-1];K[t]=n,Se[t]=r,this.setPage(t)}else if(e<t){n=K[e],r=Se[e];for(var i=e;i<t;i++)K[i]=K[i+1],Se[i]=Se[i+1];K[t]=n,Se[t]=r,this.setPage(t)}return this},h.deletePage=function(){return st.apply(this,arguments),this},h.__private__.text=h.text=function(e,t,n,r,a){var i,s,o,l,c,u,A,h,p,f=(r=r||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var m=n;n=t,t=e,e=m}if(arguments[3]instanceof Te==0?(o=arguments[4],l=arguments[5],"object"===(0,ge.A)(A=arguments[3])&&null!==A||("string"==typeof o&&(l=o,o=null),"string"==typeof A&&(l=A,A=null),"number"==typeof A&&(o=A,A=null),r={flags:A,angle:o,align:l})):(B("The transform parameter of text() with a Matrix value"),p=a),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return f;var g,y="",v="number"==typeof r.lineHeightFactor?r.lineHeightFactor:qt,x=f.internal.scaleFactor;function C(e){return e=e.split("\t").join(Array(r.TabLen||9).join(" ")),rt(e,A)}function S(e){for(var t,n=e.concat(),r=[],a=n.length;a--;)"string"==typeof(t=n.shift())?r.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?r.push(t[0]):r.push([t[0],t[1],t[2]]);return r}function I(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var r,a,i=e.concat(),s=[],o=i.length;o--;)"string"==typeof(r=i.shift())?s.push(t(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(a=t(r[0],r[1],r[2]),s.push([a[0],a[1],a[2]]));n=s}return n}var N=!1,E=!0;if("string"==typeof e)N=!0;else if(Array.isArray(e)){var _=e.concat();s=[];for(var T,L=_.length;L--;)("string"!=typeof(T=_.shift())||Array.isArray(T)&&"string"!=typeof T[0])&&(E=!1);N=E}if(!1===N)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var D=te/f.internal.scaleFactor,R=D*(v-1);switch(r.baseline){case"bottom":n-=R;break;case"top":n+=D-R;break;case"hanging":n+=D-2*R;break;case"middle":n+=D/2-R}if((u=r.maxWidth||0)>0&&("string"==typeof e?e=f.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(f.splitTextToSize(t,u))},[]))),i={text:e,x:t,y:n,options:r,mutex:{pdfEscape:rt,activeFontKey:Ae,fonts:me,activeFontSize:te}},Ie.publish("preProcessText",i),e=i.text,o=(r=i.options).angle,p instanceof Te==0&&o&&"number"==typeof o){o*=Math.PI/180,0===r.rotationDirection&&(o=-o),w===b&&(o=-o);var U=Math.cos(o),O=Math.sin(o);p=new Te(U,O,-O,U,0,0)}else o&&o instanceof Te&&(p=o);w!==b||p||(p=De),void 0!==(c=r.charSpace||un)&&(y+=k(F(c))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(h=r.horizontalScale)&&(y+=k(100*h)+" Tz\n"),r.lang;var M=-1,P=void 0!==r.renderingMode?r.renderingMode:r.stroke,Q=f.internal.getCurrentPageInfo().pageContext;switch(P){case 0:case!1:case"fill":M=0;break;case 1:case!0:case"stroke":M=1;break;case 2:case"fillThenStroke":M=2;break;case 3:case"invisible":M=3;break;case 4:case"fillAndAddForClipping":M=4;break;case 5:case"strokeAndAddPathForClipping":M=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":M=6;break;case 7:case"addToPathForClipping":M=7}var j=void 0!==Q.usedRenderingMode?Q.usedRenderingMode:-1;-1!==M?y+=M+" Tr\n":-1!==j&&(y+="0 Tr\n"),-1!==M&&(Q.usedRenderingMode=M),l=r.align||"left";var H,z=te*v,W=f.internal.pageSize.getWidth(),V=me[Ae];c=r.charSpace||un,u=r.maxWidth||0,A=Object.assign({autoencode:!0,noBOM:!0},r.flags);var G=[],K=function(e){return f.getStringUnitWidth(e,{font:V,charSpace:c,fontSize:te,doKerning:!1})*te/x};if("[object Array]"===Object.prototype.toString.call(e)){var q;s=S(e),"left"!==l&&(H=s.map(K));var X,J=0;if("right"===l){t-=H[0],e=[],L=s.length;for(var Z=0;Z<L;Z++)0===Z?(X=tn(t),q=nn(n)):(X=F(J-H[Z]),q=-z),e.push([s[Z],X,q]),J=H[Z]}else if("center"===l){t-=H[0]/2,e=[],L=s.length;for(var $=0;$<L;$++)0===$?(X=tn(t),q=nn(n)):(X=F((J-H[$])/2),q=-z),e.push([s[$],X,q]),J=H[$]}else if("left"===l){e=[],L=s.length;for(var ee=0;ee<L;ee++)e.push(s[ee])}else if("justify"===l&&"Identity-H"===V.encoding){e=[],L=s.length,u=0!==u?u:W;for(var ne=0,re=0;re<L;re++)if(q=0===re?nn(n):-z,X=0===re?tn(t):ne,re<L-1){var ie=F((u-H[re])/(s[re].split(" ").length-1)),se=s[re].split(" ");e.push([se[0]+" ",X,q]),ne=0;for(var oe=1;oe<se.length;oe++){var le=(K(se[oe-1]+" "+se[oe])-K(se[oe]))*x+ie;oe==se.length-1?e.push([se[oe],le,0]):e.push([se[oe]+" ",le,0]),ne-=le}}else e.push([s[re],X,q]);e.push(["",ne,0])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],L=s.length,u=0!==u?u:W,re=0;re<L;re++)q=0===re?nn(n):-z,X=0===re?tn(t):0,re<L-1?G.push(k(F((u-H[re])/(s[re].split(" ").length-1)))):G.push(0),e.push([s[re],X,q])}}!0===("boolean"==typeof r.R2L?r.R2L:ae)&&(e=I(e,function(e,t,n){return[e.split("").reverse().join(""),t,n]})),i={text:e,x:t,y:n,options:r,mutex:{pdfEscape:rt,activeFontKey:Ae,fonts:me,activeFontSize:te}},Ie.publish("postProcessText",i),e=i.text,g=i.mutex.isHex||!1;var ce=me[Ae].encoding;"WinAnsiEncoding"!==ce&&"StandardEncoding"!==ce||(e=I(e,function(e,t,n){return[C(e),t,n]})),s=S(e),e=[];for(var ue,de,he,pe=Array.isArray(s[0])?1:0,fe="",ye=function(e,t,n){var a="";return n instanceof Te?(n="number"==typeof r.angle?Le(n,new Te(1,0,0,1,e,t)):Le(new Te(1,0,0,1,e,t),n),w===b&&(n=Le(new Te(1,0,0,-1,0,0),n)),a=n.join(" ")+" Tm\n"):a=k(e)+" "+k(t)+" Td\n",a},be=0;be<s.length;be++){switch(fe="",pe){case 1:he=(g?"<":"(")+s[be][0]+(g?">":")"),ue=parseFloat(s[be][1]),de=parseFloat(s[be][2]);break;case 0:he=(g?"<":"(")+s[be]+(g?">":")"),ue=tn(t),de=nn(n)}void 0!==G&&void 0!==G[be]&&(fe=G[be]+" Tw\n"),0===be?e.push(fe+ye(ue,de,p)+he):0===pe?e.push(fe+he):1===pe&&e.push(fe+ye(ue,de,p)+he)}e=0===pe?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var we="BT\n/";return we+=Ae+" "+te+" Tf\n",we+=k(te*v)+" TL\n",we+=ln+"\n",we+=y,we+=e,Y(we+="ET"),d[Ae]=!0,f};var Nt=h.__private__.clip=h.clip=function(e){return Y("evenodd"===e?"W*":"W"),this};h.clipEvenOdd=function(){return Nt("evenodd")},h.__private__.discardPath=h.discardPath=function(){return Y("n"),this};var Ft=h.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(e){return Ft(e)&&(c=e),this};var Et=h.__private__.getStyle=h.getStyle=function(e){var t=c;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},_t=h.close=function(){return Y("h"),this};h.stroke=function(){return Y("S"),this},h.fill=function(e){return Tt("f",e),this},h.fillEvenOdd=function(e){return Tt("f*",e),this},h.fillStroke=function(e){return Tt("B",e),this},h.fillStrokeEvenOdd=function(e){return Tt("B*",e),this};var Tt=function(e,t){"object"===(0,ge.A)(t)?Rt(t,e):Y(e)},Lt=function(e){null===e||w===b&&void 0===e||(e=Et(e),Y(e))};function Dt(e,t,n,r,a){var i=new Gt(t||this.boundingBox,n||this.xStep,r||this.yStep,this.gState,a||this.matrix);i.stream=this.stream;var s=e+"$$"+this.cloneIndex+++"$$";return Re(s,i),i}var Rt=function(e,t){var n=ve[e.key],r=we[n];if(r instanceof Vt)Y("q"),Y(Ut(t)),r.gState&&h.setGState(r.gState),Y(e.matrix.toString()+" cm"),Y("/"+n+" sh"),Y("Q");else if(r instanceof Gt){var a=new Te(1,0,0,-1,0,xn());e.matrix&&(a=a.multiply(e.matrix||De),n=Dt.call(r,e.key,e.boundingBox,e.xStep,e.yStep,a).id),Y("q"),Y("/Pattern cs"),Y("/"+n+" scn"),r.gState&&h.setGState(r.gState),Y(t),Y("Q")}},Ut=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ot=h.moveTo=function(e,t){return Y(k(F(e))+" "+k(E(t))+" m"),this},Mt=h.lineTo=function(e,t){return Y(k(F(e))+" "+k(E(t))+" l"),this},Pt=h.curveTo=function(e,t,n,r,a,i){return Y([k(F(e)),k(E(t)),k(F(n)),k(E(r)),k(F(a)),k(E(i)),"c"].join(" ")),this};h.__private__.line=h.line=function(e,t,n,r,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Ft(a))throw new Error("Invalid arguments passed to jsPDF.line");return w===y?this.lines([[n-e,r-t]],e,t,[1,1],a||"S"):this.lines([[n-e,r-t]],e,t,[1,1]).stroke()},h.__private__.lines=h.lines=function(e,t,n,r,a,i){var s,o,l,c,u,A,d,h,p,f,m,g;if("number"==typeof e&&(g=n,n=t,t=e,e=g),r=r||[1,1],i=i||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(r)||!Ft(a)||"boolean"!=typeof i)throw new Error("Invalid arguments passed to jsPDF.lines");for(Ot(t,n),s=r[0],o=r[1],c=e.length,f=t,m=n,l=0;l<c;l++)2===(u=e[l]).length?(f=u[0]*s+f,m=u[1]*o+m,Mt(f,m)):(A=u[0]*s+f,d=u[1]*o+m,h=u[2]*s+f,p=u[3]*o+m,f=u[4]*s+f,m=u[5]*o+m,Pt(A,d,h,p,f,m));return i&&_t(),Lt(a),this},h.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.c;switch(n.op){case"m":Ot(r[0],r[1]);break;case"l":Mt(r[0],r[1]);break;case"c":Pt.apply(this,r);break;case"h":_t()}}return this},h.__private__.rect=h.rect=function(e,t,n,r,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Ft(a))throw new Error("Invalid arguments passed to jsPDF.rect");return w===y&&(r=-r),Y([k(F(e)),k(E(t)),k(F(n)),k(F(r)),"re"].join(" ")),Lt(a),this},h.__private__.triangle=h.triangle=function(e,t,n,r,a,i,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(a)||isNaN(i)||!Ft(s))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,r-t],[a-n,i-r],[e-a,t-i]],e,t,[1,1],s,!0),this},h.__private__.roundedRect=h.roundedRect=function(e,t,n,r,a,i,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(a)||isNaN(i)||!Ft(s))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var o=4/3*(Math.SQRT2-1);return a=Math.min(a,.5*n),i=Math.min(i,.5*r),this.lines([[n-2*a,0],[a*o,0,a,i-i*o,a,i],[0,r-2*i],[0,i*o,-a*o,i,-a,i],[2*a-n,0],[-a*o,0,-a,-i*o,-a,-i],[0,2*i-r],[0,-i*o,a*o,-i,a,-i]],e+a,t,[1,1],s,!0),this},h.__private__.ellipse=h.ellipse=function(e,t,n,r,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Ft(a))throw new Error("Invalid arguments passed to jsPDF.ellipse");var i=4/3*(Math.SQRT2-1)*n,s=4/3*(Math.SQRT2-1)*r;return Ot(e+n,t),Pt(e+n,t-s,e+i,t-r,e,t-r),Pt(e-i,t-r,e-n,t-s,e-n,t),Pt(e-n,t+s,e-i,t+r,e,t+r),Pt(e+i,t+r,e+n,t+s,e+n,t),Lt(a),this},h.__private__.circle=h.circle=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||!Ft(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,r)},h.setFont=function(e,t,n){return n&&(t=C(t,n)),Ae=ct(e,t,{disableWarning:!1}),this};var Wt=h.__private__.getFont=h.getFont=function(){return me[ct.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var e,t,n={};for(e in ye)if(ye.hasOwnProperty(e))for(t in n[e]=[],ye[e])ye[e].hasOwnProperty(t)&&n[e].push(t);return n},h.addFont=function(e,t,n,r,a){var i=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==i.indexOf(arguments[3])?a=arguments[3]:arguments[3]&&-1==i.indexOf(arguments[3])&&(n=C(n,r)),nt.call(this,e,t,n,a=a||"Identity-H")};var qt,Xt=e.lineWidth||.200025,Jt=h.__private__.getLineWidth=h.getLineWidth=function(){return Xt},Yt=h.__private__.setLineWidth=h.setLineWidth=function(e){return Xt=e,Y(k(F(e))+" w"),this};h.__private__.setLineDash=Kt.API.setLineDash=Kt.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map(function(e){return k(F(e))}).join(" "),t=k(F(t)),Y("["+e+"] "+t+" d"),this};var Zt=h.__private__.getLineHeight=h.getLineHeight=function(){return te*qt};h.__private__.getLineHeight=h.getLineHeight=function(){return te*qt};var $t=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(qt=e),this},en=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return qt};$t(e.lineHeight);var tn=h.__private__.getHorizontalCoordinate=function(e){return F(e)},nn=h.__private__.getVerticalCoordinate=function(e){return w===b?e:Se[P].mediaBox.topRightY-Se[P].mediaBox.bottomLeftY-F(e)},rn=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(e){return k(tn(e))},an=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(e){return k(nn(e))},sn=e.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return He(sn)},h.__private__.setStrokeColor=h.setDrawColor=function(e,t,n,r){return sn=ze({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),Y(sn),this};var on=e.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return He(on)},h.__private__.setFillColor=h.setFillColor=function(e,t,n,r){return on=ze({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),Y(on),this};var ln=e.textColor||"0 g",cn=h.__private__.getTextColor=h.getTextColor=function(){return He(ln)};h.__private__.setTextColor=h.setTextColor=function(e,t,n,r){return ln=ze({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this};var un=e.charSpace,An=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(un||0)};h.__private__.setCharSpace=h.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return un=e,this};var dn=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(e){var t=h.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return dn=t,Y(t+" J"),this};var hn=0;h.__private__.setLineJoin=h.setLineJoin=function(e){var t=h.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return hn=t,Y(t+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(k(F(e))+" M"),this},h.GState=zt,h.setGState=function(e){(e="string"==typeof e?xe[Ce[e]]:pn(null,e)).equals(ke)||(Y("/"+e.id+" gs"),ke=e)};var pn=function(e,t){if(!e||!Ce[e]){var n=!1;for(var r in xe)if(xe.hasOwnProperty(r)&&xe[r].equals(t)){n=!0;break}if(n)t=xe[r];else{var a="GS"+(Object.keys(xe).length+1).toString(10);xe[a]=t,t.id=a}return e&&(Ce[e]=t.id),Ie.publish("addGState",t),t}};h.addGState=function(e,t){return pn(e,t),this},h.saveGraphicsState=function(){return Y("q"),be.push({key:Ae,size:te,color:ln}),this},h.restoreGraphicsState=function(){Y("Q");var e=be.pop();return Ae=e.key,te=e.size,ln=e.color,ke=null,this},h.setCurrentTransformationMatrix=function(e){return Y(e.toString()+" cm"),this},h.comment=function(e){return Y("#"+e),this};var fn=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var r=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var a="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return a},set:function(e){a=e.toString()}}),this},mn=function(e,t,n,r){fn.call(this,e,t),this.type="rect";var a=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}});var i=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return i},set:function(e){isNaN(e)||(i=parseFloat(e))}}),this},gn=function(){this.page=Be,this.currentPage=P,this.pages=K.slice(0),this.pagesContext=Se.slice(0),this.x=he,this.y=pe,this.matrix=fe,this.width=wn(P),this.height=xn(P),this.outputDestination=X,this.id="",this.objectNumber=-1};gn.prototype.restore=function(){Be=this.page,P=this.currentPage,Se=this.pagesContext,K=this.pages,he=this.x,pe=this.y,fe=this.matrix,vn(P,this.width),Cn(P,this.height),X=this.outputDestination};var yn=function(e,t,n,r,a){_e.push(new gn),Be=P=0,K=[],he=e,pe=t,fe=a,at([n,r])};for(var bn in h.beginFormObject=function(e,t,n,r,a){return yn(e,t,n,r,a),this},h.endFormObject=function(e){return function(e){if(Ee[e])_e.pop().restore();else{var t=new gn,n="Xo"+(Object.keys(Fe).length+1).toString(10);t.id=n,Ee[e]=n,Fe[n]=t,Ie.publish("addFormObject",t),_e.pop().restore()}}(e),this},h.doFormObject=function(e,t){var n=Fe[Ee[e]];return Y("q"),Y(t.toString()+" cm"),Y("/"+n.id+" Do"),Y("Q"),this},h.getFormObject=function(e){var t=Fe[Ee[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},h.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(xt(yt(gt()),e),"function"==typeof xt.unload&&pt.setTimeout&&setTimeout(xt.unload,911),this):new Promise(function(t,n){try{var r=xt(yt(gt()),e);"function"==typeof xt.unload&&pt.setTimeout&&setTimeout(xt.unload,911),t(r)}catch(e){n(e.message)}})},Kt.API)Kt.API.hasOwnProperty(bn)&&("events"===bn&&Kt.API.events.length?function(e,t){var n,r,a;for(a=t.length-1;-1!==a;a--)n=t[a][0],r=t[a][1],e.subscribe.apply(e,[n].concat("function"==typeof r?[r]:r))}(Ie,Kt.API.events):h[bn]=Kt.API[bn]);var wn=h.getPageWidth=function(e){return(Se[e=e||P].mediaBox.topRightX-Se[e].mediaBox.bottomLeftX)/de},vn=h.setPageWidth=function(e,t){Se[e].mediaBox.topRightX=t*de+Se[e].mediaBox.bottomLeftX},xn=h.getPageHeight=function(e){return(Se[e=e||P].mediaBox.topRightY-Se[e].mediaBox.bottomLeftY)/de},Cn=h.setPageHeight=function(e,t){Se[e].mediaBox.topRightY=t*de+Se[e].mediaBox.bottomLeftY};return h.internal={pdfEscape:rt,getStyle:Et,getFont:Wt,getFontSize:re,getCharSpace:An,getTextColor:cn,getLineHeight:Zt,getLineHeightFactor:en,getLineWidth:Jt,write:Z,getHorizontalCoordinate:tn,getVerticalCoordinate:nn,getCoordinateString:rn,getVerticalCoordinateString:an,collections:{},newObject:Ue,newAdditionalObject:Pe,newObjectDeferred:Oe,newObjectDeferredBegin:Me,getFilters:We,putStream:Ve,events:Ie,scaleFactor:de,pageSize:{getWidth:function(){return wn(P)},setWidth:function(e){vn(P,e)},getHeight:function(){return xn(P)},setHeight:function(e){Cn(P,e)}},encryptionOptions:u,encryption:kt,getEncryptor:function(e){return null!==u?kt.encryptor(e,0):function(e){return e}},output:bt,getNumberOfPages:lt,pages:K,out:Y,f2:I,f3:N,getPageInfo:Bt,getPageInfoByObjId:St,getCurrentPageInfo:It,getPDFVersion:f,Point:fn,Rectangle:mn,Matrix:Te,hasHotfix:wt},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return wn(P)},set:function(e){vn(P,e)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return xn(P)},set:function(e){Cn(P,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=ee.length;t<n;t++){var r=nt.call(this,e[t][0],e[t][1],e[t][2],ee[t][3],!0);!1===A&&(d[r]=!0);var a=e[t][0].split("-");tt({id:r,fontName:a[0],fontStyle:a[1]||""})}Ie.publish("addFonts",{fonts:me,dictionary:ye})}.call(h,ee),Ae="F1",it(a,n),Ie.publish("initialized"),h}Qt.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Qt.prototype.toHexString=function(e){return e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Qt.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Qt.prototype.processOwnerPassword=function(e,t){return Mt(Rt(t).substr(0,5),e)},Qt.prototype.encryptor=function(e,t){var n=Rt(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return Mt(n,e)}},zt.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||(0,ge.A)(e)!==(0,ge.A)(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return 0===r},Kt.API={events:[]},Kt.version="3.0.1";var qt=Kt.API,Xt=1,Jt=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Yt=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Zt=function(e){return e.toFixed(2)},$t=function(e){return e.toFixed(5)};qt.__acroform__={};var en=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},tn=function(e){return e*Xt},nn=function(e){var t=new wn,n=Dn.internal.getHeight(e)||0,r=Dn.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Zt(r)),Number(Zt(n))],t},rn=qt.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},an=qt.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},sn=qt.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(e&1<<t)?0:1},on=qt.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return sn(e,t-1)},ln=qt.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return rn(e,t-1)},cn=qt.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return an(e,t-1)},un=qt.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,a=e[0],i=e[1],s=e[2],o=e[3],l={};return l.lowerLeft_X=n(a)||0,l.lowerLeft_Y=r(i+o)||0,l.upperRight_X=n(a+s)||0,l.upperRight_Y=r(i)||0,[Number(Zt(l.lowerLeft_X)),Number(Zt(l.lowerLeft_Y)),Number(Zt(l.upperRight_X)),Number(Zt(l.upperRight_Y))]},An=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=dn(e,n),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Zt(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=nn(e);return i.scope=e.scope,i.stream=t.join("\n"),i}},dn=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},a=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(e){return e.split("\n")}):a.map(function(e){return[e]});var i=n,s=Dn.internal.getHeight(e)||0;s=s<0?-s:s;var o=Dn.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(t,n,r){if(t+1<a.length){var i=n+" "+a[t+1][0];return hn(i,e,r).width<=o-4}return!1};i++;e:for(;i>0;){t="",i--;var c,u,A=hn("3",e,i).height,d=e.multiline?s-i:(s-A)/2,h=d+=2,p=0,f=0,m=0;if(i<=0){t="(...) Tj\n",t+="% Width of Text: "+hn(t,e,i=12).width+", FieldWidth:"+o+"\n";break}for(var g="",y=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var w=!1;if(1!==a[b].length&&m!==a[b].length-1){if((A+2)*(y+2)+2>s)continue e;g+=a[b][m],w=!0,f=b,b--}else{g=" "==(g+=a[b][m]+" ").substr(g.length-1)?g.substr(0,g.length-1):g;var v=parseInt(b),x=l(v,g,i),C=b>=a.length-1;if(x&&!C){g+=" ",m=0;continue}if(x||C){if(C)f=v;else if(e.multiline&&(A+2)*(y+2)+2>s)continue e}else{if(!e.multiline)continue e;if((A+2)*(y+2)+2>s)continue e;f=v}}for(var k="",B=p;B<=f;B++){var S=a[B];if(e.multiline){if(B===f){k+=S[m]+" ",m=(m+1)%S.length;continue}if(B===p){k+=S[S.length-1]+" ";continue}}k+=S[0]+" "}switch(k=" "==k.substr(k.length-1)?k.substr(0,k.length-1):k,u=hn(k,e,i).width,e.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;default:c=2}t+=Zt(c)+" "+Zt(h)+" Td\n",t+="("+Jt(k)+") Tj\n",t+=-Zt(c)+" 0 Td\n",h=-(i+2),u=0,p=w?f:f+1,y++,g=""}break}return r.text=t,r.fontSize=i,r},hn=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:a}},pn={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},fn=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find(function(e){return e.type===n.type&&e.object===n.object})&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},mn=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(xn.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(pn)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Xt=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new vn,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){!function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0}(e)}),e.internal.events.subscribe("buildDocument",function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r.objId=void 0,r.hasAnnotation&&fn(r,e)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(t){!function(e,t){var n=!e;for(var r in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(r)){var a=e[r],i=[],s=a.Rect;if(a.Rect&&(a.Rect=un(a.Rect,t)),t.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Dn.createDefaultAppearanceStream(a),"object"===(0,ge.A)(a)&&"function"==typeof a.getKeyValueListForStream&&(i=a.getKeyValueListForStream()),a.Rect=s,a.hasAppearanceStream&&!a.appearanceStreamContent){var o=An(a);i.push({key:"AP",value:"<</N "+o+">>"}),t.internal.acroformPlugin.xForms.push(o)}if(a.appearanceStreamContent){var l="";for(var c in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(c)){var u=a.appearanceStreamContent[c];if(l+="/"+c+" ",l+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var r in u)if(u.hasOwnProperty(r)){var A=u[r];"function"==typeof A&&(A=A.call(t,a)),l+="/"+r+" "+A+" ",t.internal.acroformPlugin.xForms.indexOf(A)>=0||t.internal.acroformPlugin.xForms.push(A)}}else"function"==typeof(A=u)&&(A=A.call(t,a)),l+="/"+r+" "+A,t.internal.acroformPlugin.xForms.indexOf(A)>=0||t.internal.acroformPlugin.xForms.push(A);l+=">>"}i.push({key:"AP",value:"<<\n"+l+">>"})}t.internal.putStream({additionalKeyValues:i,objectId:a.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,a=e[n];t.internal.newObjectDeferredBegin(a.objId,!0),"object"===(0,ge.A)(a)&&"function"==typeof a.putStream&&a.putStream(),delete e[r]}}(t.internal.acroformPlugin.xForms,t)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}},gn=qt.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(e){return e};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(0!==i&&(a+=" "),(0,ge.A)(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":"/"!==e[i].substr(0,1)?(void 0!==t&&n&&(r=n.internal.getEncryptor(t)),a+="("+Jt(r(e[i].toString()))+")"):a+=e[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},yn=function(e,t,n){var r=function(e){return e};return void 0!==t&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+Jt(r(e))+")"},bn=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};bn.prototype.toString=function(){return this.objId+" 0 R"},bn.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},bn.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)});for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var r=t[n],a=this[r];a&&(Array.isArray(a)?e.push({key:r,value:gn(a,this.objId,this.scope)}):a instanceof bn?(a.scope=this.scope,e.push({key:r,value:a.objId+" 0 R"})):"function"!=typeof a&&e.push({key:r,value:a}))}return e};var wn=function(){bn.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};en(wn,bn);var vn=function(){bn.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Jt(t(e))+")"}},set:function(t){e=t}})};en(vn,bn);var xn=function e(){bn.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(t,3))},set:function(e){!0===Boolean(e)?this.F=ln(t,3):this.F=cn(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(e){r=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(e){r[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(e){r[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(e){r[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(e){r[3]=e}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof En)return;i="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Jt(t(i))+")"},set:function(e){i=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(e){s=e}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/Xt:c},set:function(e){c=e}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(e){u=e}});var A="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!A||this instanceof En||this instanceof Tn))return yn(A,this.objId,this.scope)},set:function(e){e=e.toString(),A=e}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof In==0?yn(d,this.objId,this.scope):d},set:function(e){e=e.toString(),d=this instanceof In==0?"("===e.substr(0,1)?Yt(e.substr(1,e.length-2)):Yt(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof In==1?Yt(d.substr(1,d.length-1)):d},set:function(e){e=e.toString(),d=this instanceof In==1?"/"+e:e}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof In==0?yn(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof In==0?"("===e.substr(0,1)?Yt(e.substr(1,e.length-2)):Yt(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof In==1?Yt(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof In==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,f=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return f},set:function(e){e=Boolean(e),f=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(e){p=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=ln(this.Ff,1):this.Ff=cn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=ln(this.Ff,2):this.Ff=cn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=ln(this.Ff,3):this.Ff=cn(this.Ff,3)}});var m=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==m)return m},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');m=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(m){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:m=2;break;case"center":case 1:m=1;break;default:m=0}}})};en(xn,bn);var Cn=function(){xn.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return gn(t,this.objId,this.scope)},set:function(e){var n,r;r=[],"string"==typeof(n=e)&&(r=function(e,t,n){n||(n=1);for(var r,a=[];r=t.exec(e);)a.push(r[n]);return a}(n,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=ln(this.Ff,18):this.Ff=cn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=ln(this.Ff,19):this.Ff=cn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=ln(this.Ff,20),t.sort()):this.Ff=cn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=ln(this.Ff,22):this.Ff=cn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=ln(this.Ff,23):this.Ff=cn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=ln(this.Ff,27):this.Ff=cn(this.Ff,27)}}),this.hasAppearanceStream=!1};en(Cn,xn);var kn=function(){Cn.call(this),this.fontName="helvetica",this.combo=!1};en(kn,Cn);var Bn=function(){kn.call(this),this.combo=!0};en(Bn,kn);var Sn=function(){Bn.call(this),this.edit=!0};en(Sn,Bn);var In=function(){xn.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=ln(this.Ff,15):this.Ff=cn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=ln(this.Ff,16):this.Ff=cn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=ln(this.Ff,17):this.Ff=cn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=ln(this.Ff,26):this.Ff=cn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,r=[];for(n in r.push("<<"),t)r.push("/"+n+" ("+Jt(e(t[n]))+")");return r.push(">>"),r.join("\n")}},set:function(e){"object"===(0,ge.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};en(In,xn);var Nn=function(){In.call(this),this.pushButton=!0};en(Nn,In);var Fn=function(){In.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};en(Fn,In);var En=function(){var e,t;xn.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),r)n.push("/"+t+" ("+Jt(e(r[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===(0,ge.A)(e)&&(r=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(e){"string"==typeof e&&(r.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Dn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};en(En,xn),Fn.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Fn.prototype.createOption=function(e){var t=new En;return t.Parent=this,t.optionName=e,this.Kids.push(t),Rn.call(this.scope,t),t};var _n=function(){In.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Dn.CheckBox.createAppearanceStream()};en(_n,In);var Tn=function(){xn.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=ln(this.Ff,13):this.Ff=cn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=ln(this.Ff,21):this.Ff=cn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=ln(this.Ff,23):this.Ff=cn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=ln(this.Ff,24):this.Ff=cn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=ln(this.Ff,25):this.Ff=cn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=ln(this.Ff,26):this.Ff=cn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};en(Tn,xn);var Ln=function(){Tn.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(on(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=ln(this.Ff,14):this.Ff=cn(this.Ff,14)}}),this.password=!0};en(Ln,Tn);var Dn={CheckBox:{createAppearanceStream:function(){return{N:{On:Dn.CheckBox.YesNormal},D:{On:Dn.CheckBox.YesPushDown,Off:Dn.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=nn(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=dn(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Zt(Dn.internal.getWidth(e))+" "+Zt(Dn.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Zt(i.fontSize)+" Tf "+a),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=nn(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),a=[],i=Dn.internal.getHeight(e),s=Dn.internal.getWidth(e),o=dn(e,e.caption);return a.push("1 g"),a.push("0 0 "+Zt(s)+" "+Zt(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Zt(s-1)+" "+Zt(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+n+" "+Zt(o.fontSize)+" Tf "+r),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join("\n"),t},OffPushDown:function(e){var t=nn(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Zt(Dn.internal.getWidth(e))+" "+Zt(Dn.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Dn.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Dn.RadioButton.Circle.YesNormal,t.D[e]=Dn.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=nn(e);t.scope=e.scope;var n=[],r=Dn.internal.getWidth(e)<=Dn.internal.getHeight(e)?Dn.internal.getWidth(e)/4:Dn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Dn.internal.Bezier_C,i=Number((r*a).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+$t(Dn.internal.getWidth(e)/2)+" "+$t(Dn.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=nn(e);t.scope=e.scope;var n=[],r=Dn.internal.getWidth(e)<=Dn.internal.getHeight(e)?Dn.internal.getWidth(e)/4:Dn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),i=Number((a*Dn.internal.Bezier_C).toFixed(5)),s=Number((r*Dn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+$t(Dn.internal.getWidth(e)/2)+" "+$t(Dn.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),n.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),n.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),n.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+$t(Dn.internal.getWidth(e)/2)+" "+$t(Dn.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=nn(e);t.scope=e.scope;var n=[],r=Dn.internal.getWidth(e)<=Dn.internal.getHeight(e)?Dn.internal.getWidth(e)/4:Dn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),i=Number((a*Dn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+$t(Dn.internal.getWidth(e)/2)+" "+$t(Dn.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),n.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),n.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),n.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Dn.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Dn.RadioButton.Cross.YesNormal,t.D[e]=Dn.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=nn(e);t.scope=e.scope;var n=[],r=Dn.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Zt(Dn.internal.getWidth(e)-2)+" "+Zt(Dn.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Zt(r.x1.x)+" "+Zt(r.x1.y)+" m"),n.push(Zt(r.x2.x)+" "+Zt(r.x2.y)+" l"),n.push(Zt(r.x4.x)+" "+Zt(r.x4.y)+" m"),n.push(Zt(r.x3.x)+" "+Zt(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=nn(e);t.scope=e.scope;var n=Dn.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Zt(Dn.internal.getWidth(e))+" "+Zt(Dn.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Zt(Dn.internal.getWidth(e)-2)+" "+Zt(Dn.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Zt(n.x1.x)+" "+Zt(n.x1.y)+" m"),r.push(Zt(n.x2.x)+" "+Zt(n.x2.y)+" l"),r.push(Zt(n.x4.x)+" "+Zt(n.x4.y)+" m"),r.push(Zt(n.x3.x)+" "+Zt(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=nn(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Zt(Dn.internal.getWidth(e))+" "+Zt(Dn.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Dn.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Dn.internal.getWidth(e),n=Dn.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},Dn.internal.getWidth=function(e){var t=0;return"object"===(0,ge.A)(e)&&(t=tn(e.Rect[2])),t},Dn.internal.getHeight=function(e){var t=0;return"object"===(0,ge.A)(e)&&(t=tn(e.Rect[3])),t};var Rn=qt.addField=function(e){if(mn(this,e),!(e instanceof xn))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};qt.AcroFormChoiceField=Cn,qt.AcroFormListBox=kn,qt.AcroFormComboBox=Bn,qt.AcroFormEditBox=Sn,qt.AcroFormButton=In,qt.AcroFormPushButton=Nn,qt.AcroFormRadioButton=Fn,qt.AcroFormCheckBox=_n,qt.AcroFormTextField=Tn,qt.AcroFormPasswordField=Ln,qt.AcroFormAppearance=Dn,qt.AcroForm={ChoiceField:Cn,ListBox:kn,ComboBox:Bn,EditBox:Sn,Button:In,PushButton:Nn,RadioButton:Fn,CheckBox:_n,TextField:Tn,PasswordField:Ln,Appearance:Dn},Kt.AcroForm={ChoiceField:Cn,ListBox:kn,ComboBox:Bn,EditBox:Sn,Button:In,PushButton:Nn,RadioButton:Fn,CheckBox:_n,TextField:Tn,PasswordField:Ln,Appearance:Dn};Kt.AcroForm;function Un(e){return e.reduce(function(e,t,n){return e[t]=n,e},{})}!function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(e,r){var a,i,s,o,l,c=t;if("RGBA"===(r=r||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(x(e))for(l in n)for(s=n[l],a=0;a<s.length;a+=1){for(o=!0,i=0;i<s[a].length;i+=1)if(void 0!==s[a][i]&&s[a][i]!==e[i]){o=!1;break}if(!0===o){c=l;break}}else for(l in n)for(s=n[l],a=0;a<s.length;a+=1){for(o=!0,i=0;i<s[a].length;i+=1)if(void 0!==s[a][i]&&s[a][i]!==e.charCodeAt(i)){o=!1;break}if(!0===o){c=l;break}}return c===t&&r!==t&&(c=r),c},a=function e(t){for(var n=this.internal.write,r=this.internal.putStream,a=(0,this.internal.getFilters)();-1!==a.indexOf("FlateEncode");)a.splice(a.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var i=[];if(i.push({key:"Type",value:"/XObject"}),i.push({key:"Subtype",value:"/Image"}),i.push({key:"Width",value:t.width}),i.push({key:"Height",value:t.height}),t.colorSpace===m.INDEXED?i.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(i.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===m.DEVICE_CMYK&&i.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),i.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&i.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var s="",o=0,l=t.transparency.length;o<l;o++)s+=t.transparency[o]+" "+t.transparency[o]+" ";i.push({key:"Mask",value:"["+s+"]"})}void 0!==t.sMask&&i.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(r({data:t.data,additionalKeyValues:i,alreadyAppliedFilters:c,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var u="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,A={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:u,data:t.sMask};"filter"in t&&(A.filter=t.filter),e.call(this,A)}if(t.colorSpace===m.INDEXED){var d=this.internal.newObject();r({data:k(new Uint8Array(t.palette)),objectId:d}),n("endobj")}},i=function(){var e=this.internal.collections.addImage_images;for(var t in e)a.call(this,e[t])},s=function(){var e,t=this.internal.collections.addImage_images,n=this.internal.write;for(var r in t)n("/I"+(e=t[r]).index,e.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var e=this.internal.collections.addImage_images;return o.call(this),e},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(t){return"function"==typeof e["process"+t.toUpperCase()]},A=function(e){return"object"===(0,ge.A)(e)&&1===e.nodeType},d=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var r=""+t.getAttribute("src");if(0===r.indexOf("data:image/"))return wt(unescape(r).split("base64,").pop());var a=e.loadFile(r,!0);if(void 0!==a)return a}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var i;switch(n){case"PNG":i="image/png";break;case"WEBP":i="image/webp";break;default:i="image/jpeg"}return wt(t.toDataURL(i,1).split("base64,").pop())}},h=function(e){var t=this.internal.collections.addImage_images;if(t)for(var n in t)if(e===t[n].alias)return t[n]},p=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},f=function(e,t,n,r,a,i){var s=p.call(this,n,r,a),o=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,u=l.call(this);if(n=s[0],r=s[1],u[a.index]=a,i){i*=Math.PI/180;var A=Math.cos(i),d=Math.sin(i),h=function(e){return e.toFixed(4)},f=[h(A),h(d),h(-1*d),h(A),0,0,"cm"]}this.internal.write("q"),i?(this.internal.write([1,"0","0",1,o(e),c(t+r),"cm"].join(" ")),this.internal.write(f.join(" ")),this.internal.write([o(n),"0","0",o(r),"0","0","cm"].join(" "))):this.internal.write([o(n),"0","0",o(r),o(e),c(t+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+a.index+" Do"),this.internal.write("Q")},m=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var g=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(e){var t,n,r=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;else if(x(e))for(n=e.byteLength/2,t=0;t<n;t++)r=(r<<5)-r+e[t],r|=0;return r},b=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},w=e.__addimage__.extractImageFromDataUrl=function(e){if(null==e)return null;if(!(e=e.trim()).startsWith("data:"))return null;var t=e.indexOf(",");return t<0?null:e.substring(0,t).trim().endsWith("base64")?e.substring(t+1):null},v=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return v()&&e instanceof ArrayBuffer};var x=e.__addimage__.isArrayBufferView=function(e){return v()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},C=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n},k=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=x(e)?e:new Uint8Array(e),r=0;r<n.length;r+=8192)t+=String.fromCharCode.apply(null,n.subarray(r,r+8192));return t};e.addImage=function(){var e,n,r,a,i,s,l,c,u;if("number"==typeof arguments[1]?(n=t,r=arguments[1],a=arguments[2],i=arguments[3],s=arguments[4],l=arguments[5],c=arguments[6],u=arguments[7]):(n=arguments[1],r=arguments[2],a=arguments[3],i=arguments[4],s=arguments[5],l=arguments[6],c=arguments[7],u=arguments[8]),"object"===(0,ge.A)(e=arguments[0])&&!A(e)&&"imageData"in e){var d=e;e=d.imageData,n=d.format||n||t,r=d.x||r||0,a=d.y||a||0,i=d.w||d.width||i,s=d.h||d.height||s,l=d.alias||l,c=d.compression||c,u=d.rotation||d.angle||u}var h=this.internal.getFilters();if(void 0===c&&-1!==h.indexOf("FlateEncode")&&(c="SLOW"),isNaN(r)||isNaN(a))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var p=B.call(this,e,n,l,c);return f.call(this,r,a,i,s,p,u),this};var B=function(n,a,i,s){var o,l,p;if("string"==typeof n&&r(n)===t){n=unescape(n);var f=S(n,!1);(""!==f||void 0!==(f=e.loadFile(n,!0)))&&(n=f)}if(A(n)&&(n=d(n,a)),a=r(n,a),!u(a))throw new Error("addImage does not support files of type '"+a+"', please ensure that a plugin for '"+a+"' support is added.");if((null==(p=i)||0===p.length)&&(i=function(e){return"string"==typeof e||x(e)?y(e):x(e.data)?y(e.data):null}(n)),(o=h.call(this,i))||(v()&&(n instanceof Uint8Array||"RGBA"===a||(l=n,n=C(n))),o=this["process"+a.toUpperCase()](n,c.call(this),i,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:g.NONE}(s),l)),!o)throw new Error("An unknown error occurred whilst processing the image.");return o},S=e.__addimage__.convertBase64ToBinaryString=function(e,t){t="boolean"!=typeof t||t;var n,r="";if("string"==typeof e){var a;n=null!==(a=w(e))&&void 0!==a?a:e;try{r=wt(n)}catch(e){if(t)throw b(n)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return r};e.getImageProperties=function(n){var a,i,s="";if(A(n)&&(n=d(n)),"string"==typeof n&&r(n)===t&&(""===(s=S(n,!1))&&(s=e.loadFile(n)||""),n=s),i=r(n),!u(i))throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if(!v()||n instanceof Uint8Array||(n=C(n)),!(a=this["process"+i.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return a.fileType=i,a}}(Kt.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};Kt.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var n,r,a,i=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,u=0;u<l.length&&!c;u++)switch((n=l[u]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var A=0;A<l.length;A++){n=l[A];var d=this.internal.pdfEscape,h=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),f=this.internal.newAdditionalObject(),m=this.internal.getEncryptor(p.objId),g=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(r="/Rect ["+i(n.bounds.x)+" "+s(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y)+"] ")+"/Contents ("+d(m(n.contents))+")",a+=" /Popup "+f.objId+" 0 R",a+=" /P "+o.objId+" 0 R",a+=" /T ("+d(m(g))+") >>",p.content=a;var y=p.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+i(n.bounds.x+30)+" "+s(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+s(n.bounds.y)+"] ")+" /Parent "+y,n.open&&(a+=" /Open true"),a+=" >>",f.content=a,this.internal.write(p.objId,"0 R",f.objId,"0 R");break;case"freetext":r="/Rect ["+i(n.bounds.x)+" "+s(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y+n.bounds.h)+"] ";var b=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+d(h(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+b+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var w=this.annotations._nameMap[n.options.name];n.options.pageNumber=w.page,n.options.top=w.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+d(h(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var v=s(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+v+" "+n.options.zoom+"]"}""!=a&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,n,r,a){var i=this.internal.getCurrentPageInfo(),s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString;i.pageContext.annotations.push({finalBounds:{x:s(e),y:o(t),w:s(e+n),h:o(t+r)},options:a,type:"link"})},e.textWithLink=function(e,t,n,r){var a,i,s=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){i=r.maxWidth;var l=this.splitTextToSize(e,i).length;a=Math.ceil(o*l)}else i=s,a=o;return this.text(e,t,n,r),n+=.2*o,"center"===r.align&&(t-=s/2),"right"===r.align&&(t-=s),this.link(t,n-o,i,a,r),s},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(Kt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},s=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},o=e.__arabicParser__.isArabicEndLetter=function(e){return s(e)&&i(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return s(e)&&a.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return s(e)&&i(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return s(e)&&i(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return s(e)&&i(e)&&t[e.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return s(e)&&i(e)&&4==t[e.charCodeAt(0)].length},A=e.__arabicParser__.resolveLigatures=function(e){var t=0,r=n,a="",i=0;for(t=0;t<e.length;t+=1)void 0!==r[e.charCodeAt(t)]?(i++,"number"==typeof(r=r[e.charCodeAt(t)])&&(a+=String.fromCharCode(r),r=n,i=0),t===e.length-1&&(r=n,a+=e.charAt(t-(i-1)),t-=i-1,i=0)):(r=n,a+=e.charAt(t-i),t-=i,i=0);return a};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==r[e.charCodeAt(0)]};var d=e.__arabicParser__.getCorrectForm=function(e,t,n){return s(e)?!1===i(e)?-1:!c(e)||!s(t)&&!s(n)||!s(n)&&o(t)||o(e)&&!s(t)||o(e)&&l(t)||o(e)&&o(t)?0:u(e)&&s(t)&&!o(t)&&s(n)&&c(n)?3:o(e)||!s(n)?1:2:-1},h=function(e){var n=0,r=0,a=0,i="",o="",l="",c=(e=e||"").split("\\s+"),u=[];for(n=0;n<c.length;n+=1){for(u.push(""),r=0;r<c[n].length;r+=1)i=c[n][r],o=c[n][r-1],l=c[n][r+1],s(i)?(a=d(i,o,l),u[n]+=-1!==a?String.fromCharCode(t[i.charCodeAt(0)][a]):i):u[n]+=i;u[n]=A(u[n])}return u.join(" ")},p=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var r=0;for(n=[],r=0;r<t.length;r+=1)Array.isArray(t[r])?n.push([h(t[r][0]),t[r][1],t[r][2]]):n.push([h(t[r])]);e=n}else e=h(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",p])}(Kt.API),Kt.API.autoPrint=function(e){var t;if("javascript"===((e=e||{}).variant=e.variant||"non-conform",e.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")});return this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(e){r=e}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(e){a=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Kt.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var a=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var i=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return i},set:function(e){i=e}});var s=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return s},set:function(e){s=e}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){r.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),a=t.font||this.getFont(),i=t.scaleFactor||this.internal.scaleFactor,s=0,o=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var u=t.maxWidth;u>0?"string"==typeof e?e=this.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(c.splitTextToSize(t,u))},[])):e=Array.isArray(e)?e:[e];for(var A=0;A<e.length;A++)s<(l=this.getStringUnitWidth(e[A],{font:a})*n)&&(s=l);return 0!==s&&(o=e.length),{w:s/=i,h:Math.max((o*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/i,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){var e;e=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var a=this.internal.__cell__.lastCell,s=this.internal.__cell__.padding,o=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==a.lineNumber&&(a.lineNumber===e.lineNumber?(e.x=(a.x||0)+(a.width||0),e.y=a.y||0):a.y+a.height+e.height+o.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=o.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=a.y+a.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-s,e.y+s,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+s,{align:"center",baseline:"top",maxWidth:e.width-s-s}):this.text(e.text,e.x+s,e.y+s,{align:"left",baseline:"top",maxWidth:e.width-s-s})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,l,c,u){if(r.call(this),!l)throw new Error("No data for PDF table.");var A,d,h,p,f=[],m=[],g=[],y={},b={},w=[],v=[],x=(u=u||{}).autoSize||!1,C=!1!==u.printHeaders,k=u.css&&void 0!==u.css["font-size"]?16*u.css["font-size"]:u.fontSize||12,B=u.margins||Object.assign({width:this.getPageWidth()},t),S="number"==typeof u.padding?u.padding:3,I=u.headerBackgroundColor||"#c8c8c8",N=u.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=C,this.internal.__cell__.margins=B,this.internal.__cell__.table_font_size=k,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=I,this.internal.__cell__.headerTextColor=N,this.setFontSize(k),null==c)m=f=Object.keys(l[0]),g=f.map(function(){return"left"});else if(Array.isArray(c)&&"object"===(0,ge.A)(c[0]))for(f=c.map(function(e){return e.name}),m=c.map(function(e){return e.prompt||e.name||""}),g=c.map(function(e){return e.align||"left"}),A=0;A<c.length;A+=1)b[c[A].name]=c[A].width*(19.049976/25.4);else Array.isArray(c)&&"string"==typeof c[0]&&(m=f=c,g=f.map(function(){return"left"}));if(x||Array.isArray(c)&&"string"==typeof c[0])for(A=0;A<f.length;A+=1){for(y[p=f[A]]=l.map(function(e){return e[p]}),this.setFont(void 0,"bold"),w.push(this.getTextDimensions(m[A],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),d=y[p],this.setFont(void 0,"normal"),h=0;h<d.length;h+=1)w.push(this.getTextDimensions(d[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);b[p]=Math.max.apply(null,w)+S+S,w=[]}if(C){var F={};for(A=0;A<f.length;A+=1)F[f[A]]={},F[f[A]].text=m[A],F[f[A]].align=g[A];var E=o.call(this,F,b);v=f.map(function(t){return new i(e,n,b[t],E,F[t].text,void 0,F[t].align)}),this.setTableHeaderRow(v),this.printHeaderRow(1,!1)}var _=c.reduce(function(e,t){return e[t.name]=t.align,e},{});for(A=0;A<l.length;A+=1){"rowStart"in u&&u.rowStart instanceof Function&&u.rowStart({row:A,data:l[A]},this);var T=o.call(this,l[A],b);for(h=0;h<f.length;h+=1){var L=l[A][f[h]];"cellStart"in u&&u.cellStart instanceof Function&&u.cellStart({row:A,col:h,data:L},this),s.call(this,new i(e,n,b[f[h]],T,L,A+2,_[f[h]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var o=function(e,t){var n=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,a=this.internal.scaleFactor;return Object.keys(e).map(function(r){var a=e[r];return this.splitTextToSize(a.hasOwnProperty("text")?a.text:a,t[r]-n-n)},this).map(function(e){return this.getLineHeightFactor()*e.length*r/a+n+n},this).reduce(function(e,t){return Math.max(e,t)},0)};e.setTableHeaderRow=function(e){r.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var a;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var o=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(o[0],o[1],o[2],o[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){a=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(a.y=this.internal.__cell__.margins.top||0,l.push(a)),a.lineNumber=e;var u=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,a),this.setTextColor(u)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(Kt.API);var On={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Mn=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Pn=Un(Mn),Qn=[100,200,300,400,500,600,700,800,900],jn=Un(Qn);function Hn(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(e){return On[e=e||"normal"]?e:"normal"}(e.style),r=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),a=function(e){return"number"==typeof Pn[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,n,r].join(" ")}}}function zn(e,t,n,r){var a;for(a=n;a>=0&&a<t.length;a+=r)if(e[t[a]])return e[t[a]];for(a=n;a>=0&&a<t.length;a-=r)if(e[t[a]])return e[t[a]]}var Wn={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Vn={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Gn(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Kn(e){return e.trimLeft()}function qn(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Xn(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var Jn,Yn,Zn,$n=["times"];!function(e){var t,n,r,a,i,s,o,l,c,u=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new l,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new s,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new s,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new A(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var A=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(e){r=Boolean(e)}});var a=0;Object.defineProperty(this,"posX",{get:function(){return a},set:function(e){isNaN(e)||(a=e)}});var i=0;Object.defineProperty(this,"posY",{get:function(){return i},set:function(e){isNaN(e)||(i=e)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),c.margin=t}});var s=!1;Object.defineProperty(this,"autoPaging",{get:function(){return s},set:function(e){s=e}});var o=0;Object.defineProperty(this,"lastBreak",{get:function(){return o},set:function(e){o=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(e){e instanceof u&&(c=e)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(e){c.path=e}});var A=[];Object.defineProperty(this,"ctxStack",{get:function(){return A},set:function(e){A=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=d(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=d(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var h=null;function p(e,t){if(null===h){var n=function(e){var t=[];return Object.keys(e).forEach(function(n){e[n].forEach(function(e){var r=null;switch(e){case"bold":r={family:n,weight:"bold"};break;case"italic":r={family:n,style:"italic"};break;case"bolditalic":r={family:n,weight:"bold",style:"italic"};break;case"":case"normal":r={family:n}}null!==r&&(r.ref={name:n,style:e},t.push(r))})}),t}(e.getFontList());h=function(e){for(var t={},n=0;n<e.length;++n){var r=Hn(e[n]),a=r.family,i=r.stretch,s=r.style,o=r.weight;t[a]=t[a]||{},t[a][i]=t[a][i]||{},t[a][i][s]=t[a][i][s]||{},t[a][i][s][o]=r}return t}(n.concat(t))}return h}var f=null;Object.defineProperty(this,"fontFaces",{get:function(){return f},set:function(e){h=null,f=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1];t[2];var r=t[3],a=t[4];t[5];var i=t[6],s=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(a)[2];a="px"===s?Math.floor(parseFloat(a)*this.pdf.internal.scaleFactor):"em"===s?Math.floor(parseFloat(a)*this.pdf.getFontSize()):Math.floor(parseFloat(a)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(a);var o=function(e){var t,n,r=[],a=e.trim();if(""===a)return $n;if(a in Vn)return[Vn[a]];for(;""!==a;){switch(n=null,t=(a=Kn(a)).charAt(0)){case'"':case"'":n=qn(a.substring(1),t);break;default:n=Xn(a)}if(null===n)return $n;if(r.push(n[0]),""!==(a=Kn(n[1]))&&","!==a.charAt(0))return $n;a=a.replace(/^,/,"")}return r}(i);if(this.fontFaces){var l=function(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",a=Object.assign({},Wn,n.genericFontFamilies||{}),i=null,s=null,o=0;o<t.length;++o)if(a[(i=Hn(t[o])).family]&&(i.family=a[i.family]),e.hasOwnProperty(i.family)){s=e[i.family];break}if(!(s=s||e[r]))throw new Error("Could not find a font-family for the rule '"+Gn(i)+"' and default family '"+r+"'.");if(s=function(e,t){if(t[e])return t[e];var n=Pn[e],r=n<=Pn.normal?-1:1,a=zn(t,Mn,n,r);if(!a)throw new Error("Could not find a matching font-stretch value for "+e);return a}(i.stretch,s),s=function(e,t){if(t[e])return t[e];for(var n=On[e],r=0;r<n.length;++r)if(t[n[r]])return t[n[r]];throw new Error("Could not find a matching font-style for "+e)}(i.style,s),!(s=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=jn[e],r=zn(t,Qn,n,e<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+e);return r}(i.weight,s)))throw new Error("Failed to resolve a font for the rule '"+Gn(i)+"'.");return s}(p(this.pdf,this.fontFaces),o.map(function(e){return{family:e,stretch:"normal",weight:r,style:n}}));this.pdf.setFont(l.ref.name,l.ref.style)}else{var c="";("bold"===r||parseInt(r,10)>=700||"bold"===n)&&(c="bold"),"italic"===n&&(c+="italic"),0===c.length&&(c="normal");for(var u="",A={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},d=0;d<o.length;d++){if(void 0!==this.pdf.internal.getFont(o[d],c,{noFallback:!0,disableWarning:!0})){u=o[d];break}if("bolditalic"===c&&void 0!==this.pdf.internal.getFont(o[d],"bold",{noFallback:!0,disableWarning:!0}))u=o[d],c="bold";else if(void 0!==this.pdf.internal.getFont(o[d],"normal",{noFallback:!0,disableWarning:!0})){u=o[d],c="normal";break}}if(""===u)for(var h=0;h<o.length;h++)if(A[o[h]]){u=A[o[h]];break}u=""===u?"Times":u,this.pdf.setFont(u,c)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,O.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,O.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};A.prototype.setLineDash=function(e){this.lineDash=e},A.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},A.prototype.fill=function(){w.call(this,"fill",!1)},A.prototype.stroke=function(){w.call(this,"stroke",!1)},A.prototype.beginPath=function(){this.path=[{type:"begin"}]},A.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw mt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new s(e,t)},A.prototype.closePath=function(){var e=new s(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,ge.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new s(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(e.x,e.y)},A.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw mt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new s(n.x,n.y)},A.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},A.prototype.quadraticCurveTo=function(e,t,n,r){if(isNaN(n)||isNaN(r)||isNaN(e)||isNaN(t))throw mt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var a=this.ctx.transform.applyToPoint(new s(n,r)),i=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"qct",x1:i.x,y1:i.y,x:a.x,y:a.y}),this.ctx.lastPoint=new s(a.x,a.y)},A.prototype.bezierCurveTo=function(e,t,n,r,a,i){if(isNaN(a)||isNaN(i)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw mt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var o=this.ctx.transform.applyToPoint(new s(a,i)),l=this.ctx.transform.applyToPoint(new s(e,t)),c=this.ctx.transform.applyToPoint(new s(n,r));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:o.x,y:o.y}),this.ctx.lastPoint=new s(o.x,o.y)},A.prototype.arc=function(e,t,n,r,a,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(a))throw mt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(i=Boolean(i),!this.ctx.transform.isIdentity){var o=this.ctx.transform.applyToPoint(new s(e,t));e=o.x,t=o.y;var l=this.ctx.transform.applyToPoint(new s(0,n)),c=this.ctx.transform.applyToPoint(new s(0,0));n=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(a-r)>=2*Math.PI&&(r=0,a=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:r,endAngle:a,counterclockwise:i})},A.prototype.arcTo=function(e,t,n,r,a){throw new Error("arcTo not implemented.")},A.prototype.rect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw mt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},A.prototype.fillRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw mt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var a={};"butt"!==this.lineCap&&(a.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(a.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,r),this.fill(),a.hasOwnProperty("lineCap")&&(this.lineCap=a.lineCap),a.hasOwnProperty("lineJoin")&&(this.lineJoin=a.lineJoin)}},A.prototype.strokeRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw mt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(e,t,n,r),this.stroke())},A.prototype.clearRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw mt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,r))},A.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},A.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},A.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var d=function(e){var t,n,r,a;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,r=0,a=0;else{var i=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==i)t=parseInt(i[1]),n=parseInt(i[2]),r=parseInt(i[3]),a=1;else if(null!==(i=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(i[1]),n=parseInt(i[2]),r=parseInt(i[3]),a=parseFloat(i[4]);else{if(a=1,"string"==typeof e&&"#"!==e.charAt(0)){var s=new Ct(e);e=s.ok?s.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,r=e.substring(3,4),r+=r):(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:t,g:n,b:r,a:a,style:e}},h=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},p=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};A.prototype.fillText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw mt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!h.call(this)){var a=D(this.ctx.transform.rotation),i=this.ctx.transform.scaleX;N.call(this,{text:e,x:t,y:n,scale:i,angle:a,align:this.textAlign,maxWidth:r})}},A.prototype.strokeText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw mt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){r=isNaN(r)?void 0:r;var a=D(this.ctx.transform.rotation),i=this.ctx.transform.scaleX;N.call(this,{text:e,x:t,y:n,scale:i,renderingMode:"stroke",angle:a,align:this.textAlign,maxWidth:r})}},A.prototype.measureText=function(e){if("string"!=typeof e)throw mt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,r=t.internal.getFontSize(),a=t.getStringUnitWidth(e)*r/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:a*=Math.round(96*n/72*1e4)/1e4})},A.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw mt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new l(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},A.prototype.rotate=function(e){if(isNaN(e))throw mt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new l(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},A.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw mt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new l(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},A.prototype.transform=function(e,t,n,r,a,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(a)||isNaN(i))throw mt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var s=new l(e,t,n,r,a,i);this.ctx.transform=this.ctx.transform.multiply(s)},A.prototype.setTransform=function(e,t,n,r,a,i){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,r=isNaN(r)?1:r,a=isNaN(a)?0:a,i=isNaN(i)?0:i,this.ctx.transform=new l(e,t,n,r,a,i)};var f=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};A.prototype.drawImage=function(e,t,n,r,a,i,s,c,u){var A=this.pdf.getImageProperties(e),d=1,h=1,p=1,g=1;void 0!==r&&void 0!==c&&(p=c/r,g=u/a,d=A.width/r*c/r,h=A.height/a*u/a),void 0===i&&(i=t,s=n,t=0,n=0),void 0!==r&&void 0===c&&(c=r,u=a),void 0===r&&void 0===c&&(c=A.width,u=A.height);for(var w,x=this.ctx.transform.decompose(),C=D(x.rotate.shx),k=new l,B=(k=(k=(k=k.multiply(x.translate)).multiply(x.skew)).multiply(x.scale)).applyToRectangle(new o(i-t*p,s-n*g,r*d,a*h)),S=m.call(this,B),I=[],N=0;N<S.length;N+=1)-1===I.indexOf(S[N])&&I.push(S[N]);if(b(I),this.autoPaging)for(var F=I[0],E=I[I.length-1],_=F;_<E+1;_++){this.pdf.setPage(_);var T=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],L=1===_?this.posY+this.margin[0]:this.margin[0],R=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],U=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],O=1===_?0:R+(_-2)*U;if(0!==this.ctx.clip_path.length){var M=this.path;w=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(w,this.posX+this.margin[3],-O+L+this.ctx.prevPageLastElemOffset),v.call(this,"fill",!0),this.path=M}var P=JSON.parse(JSON.stringify(B));P=y([P],this.posX+this.margin[3],-O+L+this.ctx.prevPageLastElemOffset)[0];var Q=(_>F||_<E)&&f.call(this);Q&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],T,U,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",P.x,P.y,P.w,P.h,null,null,C),Q&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",B.x,B.y,B.w,B.h,null,null,C)};var m=function(e,t,n){var r=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var a=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":r.push(Math.floor((e.y+a)/n)+1);break;case"arc":r.push(Math.floor((e.y+a-e.radius)/n)+1),r.push(Math.floor((e.y+a+e.radius)/n)+1);break;case"qct":var i=R(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);r.push(Math.floor((i.y+a)/n)+1),r.push(Math.floor((i.y+i.h+a)/n)+1);break;case"bct":var s=U(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);r.push(Math.floor((s.y+a)/n)+1),r.push(Math.floor((s.y+s.h+a)/n)+1);break;case"rect":r.push(Math.floor((e.y+a)/n)+1),r.push(Math.floor((e.y+e.h+a)/n)+1)}for(var o=0;o<r.length;o+=1)for(;this.pdf.internal.getNumberOfPages()<r[o];)g.call(this);return r},g=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,r=this.lineCap,a=this.lineWidth,i=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=r,this.lineWidth=a,this.lineJoin=i},y=function(e,t,n){for(var r=0;r<e.length;r++)switch(e[r].type){case"bct":e[r].x2+=t,e[r].y2+=n;case"qct":e[r].x1+=t,e[r].y1+=n;default:e[r].x+=t,e[r].y+=n}return e},b=function(e){return e.sort(function(e,t){return e-t})},w=function(e,t){for(var n,r,a=this.fillStyle,i=this.strokeStyle,s=this.lineCap,o=this.lineWidth,l=Math.abs(o*this.ctx.transform.scaleX),c=this.lineJoin,u=JSON.parse(JSON.stringify(this.path)),A=JSON.parse(JSON.stringify(this.path)),d=[],h=0;h<A.length;h++)if(void 0!==A[h].x)for(var p=m.call(this,A[h]),w=0;w<p.length;w+=1)-1===d.indexOf(p[w])&&d.push(p[w]);for(var x=0;x<d.length;x++)for(;this.pdf.internal.getNumberOfPages()<d[x];)g.call(this);if(b(d),this.autoPaging)for(var C=d[0],k=d[d.length-1],B=C;B<k+1;B++){this.pdf.setPage(B),this.fillStyle=a,this.strokeStyle=i,this.lineCap=s,this.lineWidth=l,this.lineJoin=c;var S=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],I=1===B?this.posY+this.margin[0]:this.margin[0],N=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],F=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],E=1===B?0:N+(B-2)*F;if(0!==this.ctx.clip_path.length){var _=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(n,this.posX+this.margin[3],-E+I+this.ctx.prevPageLastElemOffset),v.call(this,e,!0),this.path=_}if(r=JSON.parse(JSON.stringify(u)),this.path=y(r,this.posX+this.margin[3],-E+I+this.ctx.prevPageLastElemOffset),!1===t||0===B){var T=(B>C||B<k)&&f.call(this);T&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],S,F,null).clip().discardPath()),v.call(this,e,t),T&&this.pdf.restoreGraphicsState()}this.lineWidth=o}else this.lineWidth=l,v.call(this,e,t),this.lineWidth=o;this.path=u},v=function(e,t){if(("stroke"!==e||t||!p.call(this))&&("stroke"===e||t||!h.call(this))){for(var n,r,a=[],i=this.path,s=0;s<i.length;s++){var o=i[s];switch(o.type){case"begin":a.push({begin:!0});break;case"close":a.push({close:!0});break;case"mt":a.push({start:o,deltas:[],abs:[]});break;case"lt":var l=a.length;if(i[s-1]&&!isNaN(i[s-1].x)&&(n=[o.x-i[s-1].x,o.y-i[s-1].y],l>0))for(;l>=0;l--)if(!0!==a[l-1].close&&!0!==a[l-1].begin){a[l-1].deltas.push(n),a[l-1].abs.push(o);break}break;case"bct":n=[o.x1-i[s-1].x,o.y1-i[s-1].y,o.x2-i[s-1].x,o.y2-i[s-1].y,o.x-i[s-1].x,o.y-i[s-1].y],a[a.length-1].deltas.push(n);break;case"qct":var c=i[s-1].x+2/3*(o.x1-i[s-1].x),u=i[s-1].y+2/3*(o.y1-i[s-1].y),A=o.x+2/3*(o.x1-o.x),d=o.y+2/3*(o.y1-o.y),f=o.x,m=o.y;n=[c-i[s-1].x,u-i[s-1].y,A-i[s-1].x,d-i[s-1].y,f-i[s-1].x,m-i[s-1].y],a[a.length-1].deltas.push(n);break;case"arc":a.push({deltas:[],abs:[],arc:!0}),Array.isArray(a[a.length-1].abs)&&a[a.length-1].abs.push(o)}}r=t?null:"stroke"===e?"stroke":"fill";for(var g=!1,y=0;y<a.length;y++)if(a[y].arc)for(var b=a[y].abs,w=0;w<b.length;w++){var v=b[w];"arc"===v.type?k.call(this,v.x,v.y,v.radius,v.startAngle,v.endAngle,v.counterclockwise,void 0,t,!g):F.call(this,v.x,v.y),g=!0}else if(!0===a[y].close)this.pdf.internal.out("h"),g=!1;else if(!0!==a[y].begin){var x=a[y].start.x,C=a[y].start.y;E.call(this,a[y].deltas,x,C),g=!0}r&&B.call(this,r),t&&S.call(this)}},x=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},C=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};A.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},A.prototype.createPattern=function(){return this.createLinearGradient()},A.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(e,t,n,r,a,i,s,o,l){for(var c=T.call(this,n,r,a,i),u=0;u<c.length;u++){var A=c[u];0===u&&(l?I.call(this,A.x1+e,A.y1+t):F.call(this,A.x1+e,A.y1+t)),_.call(this,e,t,A.x2,A.y2,A.x3,A.y3,A.x4,A.y4)}o?S.call(this):B.call(this,s)},B=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},S=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(e,t){this.pdf.internal.out(n(e)+" "+r(t)+" m")},N=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),r=x.call(this,e.y),a=C.call(this,r)-n.h,i=this.ctx.transform.applyToPoint(new s(e.x,r)),c=this.ctx.transform.decompose(),u=new l;u=(u=(u=u.multiply(c.translate)).multiply(c.skew)).multiply(c.scale);for(var A,d,h,p=this.ctx.transform.applyToRectangle(new o(e.x,r,n.w,n.h)),g=u.applyToRectangle(new o(e.x,a,n.w,n.h)),w=m.call(this,g),k=[],B=0;B<w.length;B+=1)-1===k.indexOf(w[B])&&k.push(w[B]);if(b(k),this.autoPaging)for(var S=k[0],I=k[k.length-1],N=S;N<I+1;N++){this.pdf.setPage(N);var F=1===N?this.posY+this.margin[0]:this.margin[0],E=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_=this.pdf.internal.pageSize.height-this.margin[2],T=_-this.margin[0],L=this.pdf.internal.pageSize.width-this.margin[1],D=L-this.margin[3],R=1===N?0:E+(N-2)*T;if(0!==this.ctx.clip_path.length){var U=this.path;A=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(A,this.posX+this.margin[3],-1*R+F),v.call(this,"fill",!0),this.path=U}var O=y([JSON.parse(JSON.stringify(g))],this.posX+this.margin[3],-R+F+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(d=this.pdf.internal.getFontSize(),this.pdf.setFontSize(d*e.scale),h=this.lineWidth,this.lineWidth=h*e.scale);var M="text"!==this.autoPaging;if(M||O.y+O.h<=_){if(M||O.y>=F&&O.x<=L){var P=M?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||L-O.x)[0],Q=y([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-R+F+this.ctx.prevPageLastElemOffset)[0],j=M&&(N>S||N<I)&&f.call(this);j&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],D,T,null).clip().discardPath()),this.pdf.text(P,Q.x,Q.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),j&&this.pdf.restoreGraphicsState()}}else O.y<_&&(this.ctx.prevPageLastElemOffset+=_-O.y);e.scale>=.01&&(this.pdf.setFontSize(d),this.lineWidth=h)}else e.scale>=.01&&(d=this.pdf.internal.getFontSize(),this.pdf.setFontSize(d*e.scale),h=this.lineWidth,this.lineWidth=h*e.scale),this.pdf.text(e.text,i.x+this.posX,i.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(d),this.lineWidth=h)},F=function(e,t,a,i){a=a||0,i=i||0,this.pdf.internal.out(n(e+a)+" "+r(t+i)+" l")},E=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},_=function(e,n,r,s,o,l,c,u){this.pdf.internal.out([t(a(r+e)),t(i(s+n)),t(a(o+e)),t(i(l+n)),t(a(c+e)),t(i(u+n)),"c"].join(" "))},T=function(e,t,n,r){for(var a=2*Math.PI,i=Math.PI/2;t>n;)t-=a;var s=Math.abs(n-t);s<a&&r&&(s=a-s);for(var o=[],l=r?-1:1,c=t;s>1e-5;){var u=c+l*Math.min(s,i);o.push(L.call(this,e,c,u)),s-=Math.abs(u-c),c=u}return o},L=function(e,t,n){var r=(n-t)/2,a=e*Math.cos(r),i=e*Math.sin(r),s=a,o=-i,l=s*s+o*o,c=l+s*a+o*i,u=4/3*(Math.sqrt(2*l*c)-c)/(s*i-o*a),A=s-u*o,d=o+u*s,h=A,p=-d,f=r+t,m=Math.cos(f),g=Math.sin(f);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:A*m-d*g,y2:A*g+d*m,x3:h*m-p*g,y3:h*g+p*m,x4:e*Math.cos(n),y4:e*Math.sin(n)}},D=function(e){return 180*e/Math.PI},R=function(e,t,n,r,a,i){var s=e+.5*(n-e),l=t+.5*(r-t),c=a+.5*(n-a),u=i+.5*(r-i),A=Math.min(e,a,s,c),d=Math.max(e,a,s,c),h=Math.min(t,i,l,u),p=Math.max(t,i,l,u);return new o(A,h,d-A,p-h)},U=function(e,t,n,r,a,i,s,l){var c,u,A,d,h,p,f,m,g,y,b,w,v,x,C=n-e,k=r-t,B=a-n,S=i-r,I=s-a,N=l-i;for(u=0;u<41;u++)g=(f=(A=e+(c=u/40)*C)+c*((h=n+c*B)-A))+c*(h+c*(a+c*I-h)-f),y=(m=(d=t+c*k)+c*((p=r+c*S)-d))+c*(p+c*(i+c*N-p)-m),0==u?(b=g,w=y,v=g,x=y):(b=Math.min(b,g),w=Math.min(w,y),v=Math.max(v,g),x=Math.max(x,y));return new o(Math.round(b),Math.round(w),Math.round(v-b),Math.round(x-w))},O=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(Kt.API),function(e){var t=function(e){var t,n,r,a,i,s,o,l,c,u;for(/[^\x00-\xFF]/.test(e),n=[],r=0,a=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;a>r;r+=4)0!==(i=(e.charCodeAt(r)<<24)+(e.charCodeAt(r+1)<<16)+(e.charCodeAt(r+2)<<8)+e.charCodeAt(r+3))?(s=(i=((i=((i=((i=(i-(u=i%85))/85)-(c=i%85))/85)-(l=i%85))/85)-(o=i%85))/85)%85,n.push(s+33,o+33,l+33,c+33,u+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,r,a,i,s=String,o="length",l=255,c="charCodeAt",u="slice",A="replace";for(e[u](-2),e=e[u](0,-2)[A](/\s/g,"")[A]("z","!!!!!"),r=[],a=0,i=(e+=t="uuuuu"[u](e[o]%5||5))[o];i>a;a+=5)n=52200625*(e[c](a)-33)+614125*(e[c](a+1)-33)+7225*(e[c](a+2)-33)+85*(e[c](a+3)-33)+(e[c](a+4)-33),r.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(r,t[o]),s.fromCharCode.apply(s,r)},r=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",r=0;r<e.length;r+=2)n+=String.fromCharCode("0x"+(e[r]+e[r+1]));return n},a=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=At(t)).reduce(function(e,t){return e+String.fromCharCode(t)},"")};e.processDataByFilters=function(e,i){var s=0,o=e||"",l=[];for("string"==typeof(i=i||[])&&(i=[i]),s=0;s<i.length;s+=1)switch(i[s]){case"ASCII85Decode":case"/ASCII85Decode":o=n(o),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":o=t(o),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":o=r(o),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":o=o.split("").map(function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)}).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":o=a(o),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[s]+'" is not implemented')}return{data:o,reverseChain:l.reverse().join(" ")}}}(Kt.API),function(e){e.loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var r=void 0;try{r=function(e,t,n){var r=new XMLHttpRequest,a=0,i=function(e){var t=e.length,n=[],r=String.fromCharCode;for(a=0;a<t;a+=1)n.push(r(255&e.charCodeAt(a)));return n.join("")};if(r.open("GET",e,!t),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(r.onload=function(){200===r.status?n(i(this.responseText)):n(void 0)}),r.send(null),t&&200===r.status)return i(r.responseText)}(e,t,n)}catch(e){}return r}(e,t,n)},e.loadImageFile=e.loadFile}(Kt.API),function(e){function t(){return(pt.html2canvas?Promise.resolve(pt.html2canvas):Promise.resolve().then(n.t.bind(n,5239,23))).catch(function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))}).then(function(e){return e.default?e.default:e})}function r(){return(pt.DOMPurify?Promise.resolve(pt.DOMPurify):n.e(977).then(n.bind(n,7977))).catch(function(e){return Promise.reject(new Error("Could not load dompurify: "+e))}).then(function(e){return e.default?e.default:e})}var a=function(e){var t=(0,ge.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},i=function(e,t){var n=document.createElement(e);for(var r in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[r]=t.style[r];return n},s=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(Promise.resolve(),n);return(r=r.setProgress(1,e,1,[e])).set(t)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(e,t){return e.__proto__=t||s.prototype,e},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch(a(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(r).then(function(t){return this.set({src:i("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},s.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,n){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),a=t.firstChild;a;a=a.nextSibling)!0!==n&&1===a.nodeType&&"SCRIPT"===a.nodeName||r.appendChild(e(a,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft},!0)),r}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,a=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete a.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var i=0;i<n.length;++i){var s=n[i],o=s.src.find(function(e){return"truetype"===e.format});o&&t.addFont(o.url,s.ref.name,s.ref.style)}return a.windowHeight=a.windowHeight||0,a.windowHeight=0==a.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):a.windowHeight,t.context2d.save(!0),e(this.prop.container,a)}).then(function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},s.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},s.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},s.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(e){if("object"!==a(e))return this;var t=Object.keys(e||{}).map(function(t){if(t in s.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},s.prototype.get=function(e,t){return this.then(function(){var n=e in s.template.prop?this.prop[e]:this.opt[e];return t?t(n):n})},s.prototype.setMargin=function(e){return this.then(function(){switch(a(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},s.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then(function(){(e=e||Kt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},s.prototype.setProgress=function(e,t,n,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(e,t,n,r){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},s.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,function(t){return n.updateProgress(null,e),t}).then(e,t).then(function(e){return n.updateProgress(1),e})})},s.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:s.convert(Object.assign({},this),Promise.prototype),a=n.call(r,e,t);return s.convert(a,this.__proto__)},s.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},s.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},s.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return s.convert(t,this)},s.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},s.prototype.error=function(e){return this.then(function(){throw new Error(e)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Kt.getPageSize=function(e,t,n){if("object"===(0,ge.A)(e)){var r=e;e=r.orientation,t=r.unit||t,n=r.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var a,i=(""+n).toLowerCase(),s={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":a=1;break;case"mm":a=72/25.4;break;case"cm":a=72/2.54;break;case"in":a=72;break;case"px":a=.75;break;case"pc":case"em":a=12;break;case"ex":a=6;break;default:throw"Invalid unit: "+t}var o,l=0,c=0;if(s.hasOwnProperty(i))l=s[i][1]/a,c=s[i][0]/a;else try{l=n[1],c=n[0]}catch(x){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",c>l&&(o=c,c=l,l=o);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>c&&(o=c,c=l,l=o)}return{width:c,height:l,unit:t,k:a,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(Hn):null;var n=new s(t);return t.worker?n:n.from(e).doCallback()}}(Kt.API),Kt.API.addJS=function(e){return Zn=e,this.internal.events.subscribe("postPutResources",function(){Jn=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Jn+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Yn=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Zn+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==Jn&&void 0!==Yn&&this.internal.out("/Names <</JavaScript "+Jn+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),a=0;a<r.length;a++){var i=r[a],s=n.exec(i);if(null!=s){var o=s[1];e.internal.newObjectDeferredBegin(o,!1)}e.internal.write(i)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(a=0;a<l;a++){var u=e.internal.newObject();c.push(u);var A=e.internal.getPageInfo(a+1);e.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var d=e.internal.newObject();for(e.internal.write("<< /Names [ "),a=0;a<c.length;a++)e.internal.write("(page_"+(a+1)+")"+c[a]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+d+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var r={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(r),r},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<t.children.length;r++){var a=t.children[r];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(t)),r>0&&this.line("/Prev "+this.makeRef(t.children[r-1])),r<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[r+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var i=this.count=this.count_r({count:0},a);if(i>0&&this.line("/Count "+i),a.options&&a.options.pageNumber){var s=e.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+s.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var o=0;o<t.children.length;o++)this.renderItems(t.children[o])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(Kt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,r,a,i,s){var o,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=i||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(o=function(e){for(var n,r=256*e.charCodeAt(4)+e.charCodeAt(5),a=e.length,i={width:0,height:0,numcomponents:1},s=4;s<a;s+=2){if(s+=r,-1!==t.indexOf(e.charCodeAt(s+1))){n=256*e.charCodeAt(s+5)+e.charCodeAt(s+6),i={width:256*e.charCodeAt(s+7)+e.charCodeAt(s+8),height:n,numcomponents:e.charCodeAt(s+9)};break}r=256*e.charCodeAt(s+2)+e.charCodeAt(s+3)}return i}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}c={data:e,width:o.width,height:o.height,colorSpace:s,bitsPerComponent:8,filter:l,index:n,alias:r}}return c}}(Kt.API);var er,tr,nr,rr,ar,ir=function(){var e,t,n;function r(e){var t,n,r,a,i,s,o,l,c,u,A,d,h,p;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},s=null;;){switch(t=this.readUInt32(),c=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":s&&this.animation.frames.push(s),this.pos+=4,s={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},i=this.readUInt16(),a=this.readUInt16()||100,s.delay=1e3*i/a,s.disposeOp=this.data[this.pos++],s.blendOp=this.data[this.pos++],s.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,t-=4),e=(null!=s?s.data:void 0)||this.imgData,d=0;0<=t?d<t:d>t;0<=t?++d:--d)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((u=r-this.transparency.indexed.length)>0)for(h=0;0<=u?h<u:h>u;0<=u?++h:--h)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":o=(A=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,A.slice(0,o)),this.text[l]=String.fromCharCode.apply(String,A.slice(o+1));break;case"IEND":return s&&this.animation.frames.push(s),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)n.push(this.data[this.pos++]);return n},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*t),r=0,a=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function i(i,s,o,l){var c,u,A,d,h,p,f,m,g,y,b,w,v,x,C,k,B,S,I,N,F,E=Math.ceil((a.width-i)/o),_=Math.ceil((a.height-s)/l),T=a.width==E&&a.height==_;for(x=t*E,w=T?n:new Uint8Array(x*_),p=e.length,v=0,u=0;v<_&&r<p;){switch(e[r++]){case 0:for(d=B=0;B<x;d=B+=1)w[u++]=e[r++];break;case 1:for(d=S=0;S<x;d=S+=1)c=e[r++],h=d<t?0:w[u-t],w[u++]=(c+h)%256;break;case 2:for(d=I=0;I<x;d=I+=1)c=e[r++],A=(d-d%t)/t,C=v&&w[(v-1)*x+A*t+d%t],w[u++]=(C+c)%256;break;case 3:for(d=N=0;N<x;d=N+=1)c=e[r++],A=(d-d%t)/t,h=d<t?0:w[u-t],C=v&&w[(v-1)*x+A*t+d%t],w[u++]=(c+Math.floor((h+C)/2))%256;break;case 4:for(d=F=0;F<x;d=F+=1)c=e[r++],A=(d-d%t)/t,h=d<t?0:w[u-t],0===v?C=k=0:(C=w[(v-1)*x+A*t+d%t],k=A&&w[(v-1)*x+(A-1)*t+d%t]),f=h+C-k,m=Math.abs(f-h),y=Math.abs(f-C),b=Math.abs(f-k),g=m<=y&&m<=b?h:y<=b?C:k,w[u++]=(c+g)%256;break;default:throw new Error("Invalid filter algorithm: "+e[r-1])}if(!T){var L=((s+v*l)*a.width+i)*t,D=v*x;for(d=0;d<E;d+=1){for(var R=0;R<t;R+=1)n[L++]=w[D++];L+=(o-1)*t}}v++}}return e=dt(e),1==a.interlaceMethod?(i(0,0,8,8),i(4,0,8,8),i(0,4,4,8),i(2,0,4,4),i(0,2,2,4),i(1,0,2,2),i(0,1,1,2)):i(0,0,1,1),n},r.prototype.decodePalette=function(){var e,t,n,r,a,i,s,o,l;for(n=this.palette,i=this.transparency.indexed||[],a=new Uint8Array((i.length||0)+n.length),r=0,e=0,t=s=0,o=n.length;s<o;t=s+=3)a[r++]=n[t],a[r++]=n[t+1],a[r++]=n[t+2],a[r++]=null!=(l=i[e++])?l:255;return a},r.prototype.copyToImageData=function(e,t){var n,r,a,i,s,o,l,c,u,A,d;if(r=this.colors,u=null,n=this.hasAlphaChannel,this.palette.length&&(u=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),r=4,n=!0),c=(a=e.data||e).length,s=u||t,i=o=0,1===r)for(;i<c;)l=u?4*t[i/4]:o,A=s[l++],a[i++]=A,a[i++]=A,a[i++]=A,a[i++]=n?s[l++]:255,o=l;else for(;i<c;)l=u?4*t[i/4]:o,a[i++]=s[l++],a[i++]=s[l++],a[i++]=s[l++],a[i++]=n?s[l++]:255,o=l},r.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var a=function(){if("[object Window]"===Object.prototype.toString.call(pt)){try{t=pt.document.createElement("canvas"),n=t.getContext("2d")}catch(e){return!1}return!0}return!1};return a(),e=function(e){var r;if(!0===a())return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(r=new Image).src=t.toDataURL(),r;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(t){var n,r,a,i,s,o,l,c;if(this.animation){for(c=[],r=s=0,o=(l=this.animation.frames).length;s<o;r=++s)n=l[r],a=t.createImageData(n.width,n.height),i=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(a,i),n.imageData=a,c.push(n.image=e(a));return c}},r.prototype.renderFrame=function(e,t){var n,r,a;return n=(r=this.animation.frames)[t],a=r[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=a?a.disposeOp:void 0)?e.clearRect(a.xOffset,a.yOffset,a.width,a.height):2===(null!=a?a.disposeOp:void 0)&&e.putImageData(a.imageData,a.xOffset,a.yOffset),0===n.blendOp&&e.clearRect(n.xOffset,n.yOffset,n.width,n.height),e.drawImage(n.image,n.xOffset,n.yOffset)},r.prototype.animate=function(e){var t,n,r,a,i,s,o=this;return n=0,s=this.animation,a=s.numFrames,r=s.frames,i=s.numPlays,(t=function(){var s,l;if(s=n++%a,l=r[s],o.renderFrame(e,s),a>1&&n/a<i)return o.animation._timeout=setTimeout(t,l.delay)})()},r.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},r.prototype.render=function(e){var t,n;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(n=t.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),t.putImageData(n,0,0))},r}();function sr(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,s=1<<1+(7&a);e[t++],e[t++];var o=null,l=null;i&&(o=t,l=s,t+=3*s);var c=!0,u=[],A=0,d=null,h=0,p=null;for(this.width=n,this.height=r;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,p=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((I=e[t++])>=0))throw Error("Invalid block size");if(0===I)break;t+=I}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var f=e[t++];A=e[t++]|e[t++]<<8,d=e[t++],0==(1&f)&&(d=null),h=f>>2&7,t++;break;case 254:for(;;){if(!((I=e[t++])>=0))throw Error("Invalid block size");if(0===I)break;t+=I}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var m=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,w=e[t++],v=w>>6&1,x=1<<1+(7&w),C=o,k=l,B=!1;w>>7&&(B=!0,C=t,k=x,t+=3*x);var S=t;for(t++;;){var I;if(!((I=e[t++])>=0))throw Error("Invalid block size");if(0===I)break;t+=I}u.push({x:m,y:g,width:y,height:b,has_local_palette:B,palette_offset:C,palette_size:k,data_offset:S,data_length:t-S,transparent_index:d,interlaced:!!v,delay:A,disposal:h});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(e){if(e<0||e>=u.length)throw new Error("Frame index out of range.");return u[e]},this.decodeAndBlitFrameBGRA=function(t,r){var a=this.frameInfo(t),i=a.width*a.height,s=new Uint8Array(i);or(e,a.data_offset,s,i);var o=a.palette_offset,l=a.transparent_index;null===l&&(l=256);var c=a.width,u=n-c,A=c,d=4*(a.y*n+a.x),h=4*((a.y+a.height)*n+a.x),p=d,f=4*u;!0===a.interlaced&&(f+=4*n*7);for(var m=8,g=0,y=s.length;g<y;++g){var b=s[g];if(0===A&&(A=c,(p+=f)>=h&&(f=4*u+4*n*(m-1),p=d+(c+u)*(m<<1),m>>=1)),b===l)p+=4;else{var w=e[o+3*b],v=e[o+3*b+1],x=e[o+3*b+2];r[p++]=x,r[p++]=v,r[p++]=w,r[p++]=255}--A}},this.decodeAndBlitFrameRGBA=function(t,r){var a=this.frameInfo(t),i=a.width*a.height,s=new Uint8Array(i);or(e,a.data_offset,s,i);var o=a.palette_offset,l=a.transparent_index;null===l&&(l=256);var c=a.width,u=n-c,A=c,d=4*(a.y*n+a.x),h=4*((a.y+a.height)*n+a.x),p=d,f=4*u;!0===a.interlaced&&(f+=4*n*7);for(var m=8,g=0,y=s.length;g<y;++g){var b=s[g];if(0===A&&(A=c,(p+=f)>=h&&(f=4*u+4*n*(m-1),p=d+(c+u)*(m<<1),m>>=1)),b===l)p+=4;else{var w=e[o+3*b],v=e[o+3*b+1],x=e[o+3*b+2];r[p++]=w,r[p++]=v,r[p++]=x,r[p++]=255}--A}}}function or(e,t,n,r){for(var a=e[t++],i=1<<a,s=i+1,o=s+1,l=a+1,c=(1<<l)-1,u=0,A=0,d=0,h=e[t++],p=new Int32Array(4096),f=null;;){for(;u<16&&0!==h;)A|=e[t++]<<u,u+=8,1===h?h=e[t++]:--h;if(u<l)break;var m=A&c;if(A>>=l,u-=l,m!==i){if(m===s)break;for(var g=m<o?m:f,y=0,b=g;b>i;)b=p[b]>>8,++y;var w=b;if(d+y+(g!==m?1:0)>r)return void mt.log("Warning, gif stream longer than expected.");n[d++]=w;var v=d+=y;for(g!==m&&(n[d++]=w),b=g;y--;)b=p[b],n[--v]=255&b,b>>=8;null!==f&&o<4096&&(p[o++]=f<<8|w,o>=c+1&&l<12&&(++l,c=c<<1|1)),f=m}else o=s+1,c=(1<<(l=a+1))-1,f=null}return d!==r&&mt.log("Warning, gif stream shorter than expected."),n}function lr(e){var t,n,r,a,i,s=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),A=new Array(65535),d=new Array(65535),h=new Array(64),p=new Array(64),f=[],m=0,g=7,y=new Array(64),b=new Array(64),w=new Array(64),v=new Array(256),x=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],S=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],E=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],_=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function T(e,t){for(var n=0,r=0,a=new Array,i=1;i<=16;i++){for(var s=1;s<=e[i];s++)a[t[r]]=[],a[t[r]][0]=n,a[t[r]][1]=i,r++,n++;n*=2}return a}function L(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(m|=1<<g),n--,--g<0&&(255==m?(D(255),D(0)):D(m),g=7,m=0)}function D(e){f.push(e)}function R(e){D(e>>8&255),D(255&e)}function U(e,t,n,r,a){for(var i,s=a[0],o=a[240],l=function(e,t){var n,r,a,i,s,o,l,c,u,A,d=0;for(u=0;u<8;++u){n=e[d],r=e[d+1],a=e[d+2],i=e[d+3],s=e[d+4],o=e[d+5],l=e[d+6];var p=n+(c=e[d+7]),f=n-c,m=r+l,g=r-l,y=a+o,b=a-o,w=i+s,v=i-s,x=p+w,C=p-w,k=m+y,B=m-y;e[d]=x+k,e[d+4]=x-k;var S=.707106781*(B+C);e[d+2]=C+S,e[d+6]=C-S;var I=.382683433*((x=v+b)-(B=g+f)),N=.5411961*x+I,F=1.306562965*B+I,E=.707106781*(k=b+g),_=f+E,T=f-E;e[d+5]=T+N,e[d+3]=T-N,e[d+1]=_+F,e[d+7]=_-F,d+=8}for(d=0,u=0;u<8;++u){n=e[d],r=e[d+8],a=e[d+16],i=e[d+24],s=e[d+32],o=e[d+40],l=e[d+48];var L=n+(c=e[d+56]),D=n-c,R=r+l,U=r-l,O=a+o,M=a-o,P=i+s,Q=i-s,j=L+P,H=L-P,z=R+O,W=R-O;e[d]=j+z,e[d+32]=j-z;var V=.707106781*(W+H);e[d+16]=H+V,e[d+48]=H-V;var G=.382683433*((j=Q+M)-(W=U+D)),K=.5411961*j+G,q=1.306562965*W+G,X=.707106781*(z=M+U),J=D+X,Y=D-X;e[d+40]=Y+K,e[d+24]=Y-K,e[d+8]=J+q,e[d+56]=J-q,d++}for(u=0;u<64;++u)A=e[u]*t[u],h[u]=A>0?A+.5|0:A-.5|0;return h}(e,t),c=0;c<64;++c)p[C[c]]=l[c];var u=p[0]-n;n=p[0],0==u?L(r[0]):(L(r[d[i=32767+u]]),L(A[i]));for(var f=63;f>0&&0==p[f];)f--;if(0==f)return L(s),n;for(var m,g=1;g<=f;){for(var y=g;0==p[g]&&g<=f;)++g;var b=g-y;if(b>=16){m=b>>4;for(var w=1;w<=m;++w)L(o);b&=15}i=32767+p[g],L(a[(b<<4)+d[i]]),L(A[i]),g++}return 63!=f&&L(s),n}function O(e){e=Math.min(Math.max(e,1),100),i!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=s((t[n]*e+50)/100);r=Math.min(Math.max(r,1),255),o[C[n]]=r}for(var a=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],i=0;i<64;i++){var A=s((a[i]*e+50)/100);A=Math.min(Math.max(A,1),255),l[C[i]]=A}for(var d=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],h=0,p=0;p<8;p++)for(var f=0;f<8;f++)c[h]=1/(o[C[h]]*d[p]*d[f]*8),u[h]=1/(l[C[h]]*d[p]*d[f]*8),h++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),i=e)}this.encode=function(e,i){i&&O(i),f=new Array,m=0,g=7,R(65496),R(65504),R(16),D(74),D(70),D(73),D(70),D(0),D(1),D(1),D(0),R(1),R(1),D(0),D(0),function(){R(65499),R(132),D(0);for(var e=0;e<64;e++)D(o[e]);D(1);for(var t=0;t<64;t++)D(l[t])}(),function(e,t){R(65472),R(17),D(8),R(t),R(e),D(3),D(1),D(17),D(0),D(2),D(17),D(1),D(3),D(17),D(1)}(e.width,e.height),function(){R(65476),R(418),D(0);for(var e=0;e<16;e++)D(k[e+1]);for(var t=0;t<=11;t++)D(B[t]);D(16);for(var n=0;n<16;n++)D(S[n+1]);for(var r=0;r<=161;r++)D(I[r]);D(1);for(var a=0;a<16;a++)D(N[a+1]);for(var i=0;i<=11;i++)D(F[i]);D(17);for(var s=0;s<16;s++)D(E[s+1]);for(var o=0;o<=161;o++)D(_[o])}(),R(65498),R(12),D(3),D(1),D(0),D(2),D(17),D(3),D(17),D(0),D(63),D(0);var s=0,A=0,d=0;m=0,g=7,this.encode.displayName="_encode_";for(var h,p,v,C,T,M,P,Q,j,H=e.data,z=e.width,W=e.height,V=4*z,G=0;G<W;){for(h=0;h<V;){for(T=V*G+h,P=-1,Q=0,j=0;j<64;j++)M=T+(Q=j>>3)*V+(P=4*(7&j)),G+Q>=W&&(M-=V*(G+1+Q-W)),h+P>=V&&(M-=h+P-V+4),p=H[M++],v=H[M++],C=H[M++],y[j]=(x[p]+x[v+256|0]+x[C+512|0]>>16)-128,b[j]=(x[p+768|0]+x[v+1024|0]+x[C+1280|0]>>16)-128,w[j]=(x[p+1280|0]+x[v+1536|0]+x[C+1792|0]>>16)-128;s=U(y,c,s,t,r),A=U(b,u,A,n,a),d=U(w,u,d,n,a),h+=32}G+=8}if(g>=0){var K=[];K[1]=g+1,K[0]=(1<<g+1)-1,L(K)}return R(65497),new Uint8Array(f)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)v[t]=e(t)}(),t=T(k,B),n=T(N,F),r=T(S,I),a=T(E,_),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var r=e;r<t;r++)d[32767+r]=n,A[32767+r]=[],A[32767+r][1]=n,A[32767+r][0]=r;for(var a=-(t-1);a<=-e;a++)d[32767+a]=n,A[32767+a]=[],A[32767+a][1]=n,A[32767+a][0]=t-1+a;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)x[e]=19595*e,x[e+256|0]=38470*e,x[e+512|0]=7471*e+32768,x[e+768|0]=-11059*e,x[e+1024|0]=-21709*e,x[e+1280|0]=32768*e+8421375,x[e+1536|0]=-27439*e,x[e+1792|0]=-5329*e}(),O(e)}function cr(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ur(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var r=0;4>r;r++)if(e[t+r]!=n.charCodeAt(r))return!0;return!1}function r(e,t,n,r,a){for(var i=0;i<a;i++)e[t+i]=n[r+i]}function a(e,t,n,r){for(var a=0;a<r;a++)e[t+a]=n}function i(e){return new Int32Array(e)}function s(e,t){for(var n=[],r=0;r<e;r++)n.push(new t);return n}function o(e,t){var n=[];return function e(n,r,a){for(var i=a[r],s=0;s<i&&(n.push(a.length>r+1?[]:new t),!(a.length<r+1));s++)e(n[s],r+1,a)}(n,0,e),n}var l=function(){var e=this;function l(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function c(e,n,r,a,i){t(!(a%r));do{e[n+(a-=r)]=i}while(0<a)}function u(e,n,r,a,s){if(t(2328>=s),512>=s)var o=i(512);else if(null==(o=i(s)))return 0;return function(e,n,r,a,s,o){var u,d,h=n,p=1<<r,f=i(16),m=i(16);for(t(0!=s),t(null!=a),t(null!=e),t(0<r),d=0;d<s;++d){if(15<a[d])return 0;++f[a[d]]}if(f[0]==s)return 0;for(m[1]=0,u=1;15>u;++u){if(f[u]>1<<u)return 0;m[u+1]=m[u]+f[u]}for(d=0;d<s;++d)u=a[d],0<a[d]&&(o[m[u]++]=d);if(1==m[15])return(a=new A).g=0,a.value=o[0],c(e,h,1,p,a),p;var g,y=-1,b=p-1,w=0,v=1,x=1,C=1<<r;for(d=0,u=1,s=2;u<=r;++u,s<<=1){if(v+=x<<=1,0>(x-=f[u]))return 0;for(;0<f[u];--f[u])(a=new A).g=u,a.value=o[d++],c(e,h+w,s,C,a),w=l(w,u)}for(u=r+1,s=2;15>=u;++u,s<<=1){if(v+=x<<=1,0>(x-=f[u]))return 0;for(;0<f[u];--f[u]){if(a=new A,(w&b)!=y){for(h+=C,g=1<<(y=u)-r;15>y&&!(0>=(g-=f[y]));)++y,g<<=1;p+=C=1<<(g=y-r),e[n+(y=w&b)].g=g+r,e[n+y].value=h-n-y}a.g=u-r,a.value=o[d++],c(e,h+(w>>r),s,C,a),w=l(w,u)}}return v!=2*m[15]-1?0:p}(e,n,r,a,s,o)}function A(){this.value=this.g=0}function d(){this.value=this.g=0}function h(){this.G=s(5,A),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Pn,d)}function p(e,n,r,a){t(null!=e),t(null!=n),t(2147483648>a),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=r,e.Jd=n,e.Yc=r+a,e.Zc=4<=a?r+a-4+1:r,S(e)}function f(e,t){for(var n=0;0<t--;)n|=N(e,128)<<t;return n}function m(e,t){var n=f(e,t);return I(e)?-n:n}function g(e,n,r,a){var i,s=0;for(t(null!=e),t(null!=n),t(4294967288>a),e.Sb=a,e.Ra=0,e.u=0,e.h=0,4<a&&(a=4),i=0;i<a;++i)s+=n[r+i]<<8*i;e.Ra=s,e.bb=a,e.oa=n,e.pa=r}function y(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<Hn-8>>>0,++e.bb,e.u-=8;C(e)&&(e.h=1,e.u=0)}function b(e,n){if(t(0<=n),!e.h&&n<=jn){var r=x(e)&Qn[n];return e.u+=n,y(e),r}return e.h=1,e.u=0}function w(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function v(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function x(e){return e.Ra>>>(e.u&Hn-1)>>>0}function C(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>Hn}function k(e,t){e.u=t,e.h=C(e)}function B(e){e.u>=zn&&(t(e.u>=zn),y(e))}function S(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function I(e){return f(e,1)}function N(e,t){var n=e.Ca;0>e.b&&S(e);var r=e.b,a=n*t>>>8,i=(e.I>>>r>a)+0;for(i?(n-=a,e.I-=a+1<<r>>>0):n=a+1,r=n,a=0;256<=r;)a+=8,r>>=8;return r=7^a+Wn[r],e.b-=r,e.Ca=(n<<r)-1,i}function F(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function E(e,t){return e[t+0]|e[t+1]<<8}function _(e,t){return E(e,t)|e[t+2]<<16}function T(e,t){return E(e,t)|E(e,t+2)<<16}function L(e,n){var r=1<<n;return t(null!=e),t(0<n),e.X=i(r),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function D(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),r(n.X,0,e.X,0,1<<n.Xa)}function R(){this.X=[],this.Xa=this.Mb=0}function U(e,n,r,a){t(null!=r),t(null!=a);var i=r[0],s=a[0];return 0==i&&(i=(e*s+n/2)/n),0==s&&(s=(n*i+e/2)/e),0>=i||0>=s?0:(r[0]=i,a[0]=s,1)}function O(e,t){return e+(1<<t)-1>>>t}function M(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function P(t,n){e[n]=function(n,r,a,i,s,o,l){var c;for(c=0;c<s;++c){var u=e[t](o[l+c-1],a,i+c);o[l+c]=M(n[r+c],u)}}}function Q(){this.ud=this.hd=this.jd=0}function j(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function H(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function z(e,t){return H(e+(e-t+.5>>1))}function W(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function V(e,t,n,r,a,i,s){for(r=i[s-1],n=0;n<a;++n)i[s+n]=r=M(e[t+n],r)}function G(e,t,n,r,a){var i;for(i=0;i<n;++i){var s=e[t+i],o=s>>8&255,l=16711935&(l=(l=16711935&s)+((o<<16)+o));r[a+i]=(4278255360&s)+l>>>0}}function K(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function q(e,t,n,r,a,i){var s;for(s=0;s<r;++s){var o=t[n+s],l=o>>>8,c=o,u=255&(u=(u=o>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(u<<24>>24)>>>5)),a[i+s]=(4278255360&o)+(u<<16)+c}}function X(t,n,r,a,i){e[n]=function(e,t,n,r,s,o,l,c,u){for(r=l;r<c;++r)for(l=0;l<u;++l)s[o++]=i(n[a(e[t++])])},e[t]=function(t,n,s,o,l,c,u){var A=8>>t.b,d=t.Ea,h=t.K[0],p=t.w;if(8>A)for(t=(1<<t.b)-1,p=(1<<A)-1;n<s;++n){var f,m=0;for(f=0;f<d;++f)f&t||(m=a(o[l++])),c[u++]=i(h[m&p]),m>>=A}else e["VP8LMapColor"+r](o,l,h,p,c,u,n,s,d)}}function J(e,t,n,r,a){for(n=t+n;t<n;){var i=e[t++];r[a++]=i>>16&255,r[a++]=i>>8&255,r[a++]=255&i}}function Y(e,t,n,r,a){for(n=t+n;t<n;){var i=e[t++];r[a++]=i>>16&255,r[a++]=i>>8&255,r[a++]=255&i,r[a++]=i>>24&255}}function Z(e,t,n,r,a){for(n=t+n;t<n;){var i=(s=e[t++])>>16&240|s>>12&15,s=240&s|s>>28&15;r[a++]=i,r[a++]=s}}function $(e,t,n,r,a){for(n=t+n;t<n;){var i=(s=e[t++])>>16&248|s>>13&7,s=s>>5&224|s>>3&31;r[a++]=i,r[a++]=s}}function ee(e,t,n,r,a){for(n=t+n;t<n;){var i=e[t++];r[a++]=255&i,r[a++]=i>>8&255,r[a++]=i>>16&255}}function te(e,t,n,a,i,s){if(0==s)for(n=t+n;t<n;)F(a,((s=e[t++])[0]>>24|s[1]>>8&65280|s[2]<<8&16711680|s[3]<<24)>>>0),i+=32;else r(a,i,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function re(e){return e==zr||e==Wr||e==Vr||e==Gr}function ae(){this.eb=[],this.size=this.A=this.fb=0}function ie(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function se(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ae,this.f.kb=new ie,this.sd=null}function oe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function ue(e,t){var n=e.T,a=t.ba.f.RGBA,i=a.eb,s=a.fb+e.ka*a.A,o=ga[t.ba.S],l=e.y,c=e.O,u=e.f,A=e.N,d=e.ea,h=e.W,p=t.cc,f=t.dc,m=t.Mc,g=t.Nc,y=e.ka,b=e.ka+e.T,w=e.U,v=w+1>>1;for(0==y?o(l,c,null,null,u,A,d,h,u,A,d,h,i,s,null,null,w):(o(t.ec,t.fc,l,c,p,f,m,g,u,A,d,h,i,s-a.A,i,s,w),++n);y+2<b;y+=2)p=u,f=A,m=d,g=h,A+=e.Rc,h+=e.Rc,s+=2*a.A,o(l,(c+=2*e.fa)-e.fa,l,c,p,f,m,g,u,A,d,h,i,s-a.A,i,s,w);return c+=e.fa,e.j+b<e.o?(r(t.ec,t.fc,l,c,w),r(t.cc,t.dc,u,A,v),r(t.Mc,t.Nc,d,h,v),n--):1&b||o(l,c,null,null,u,A,d,h,u,A,d,h,i,s+a.A,null,null,w),n}function Ae(e,n,r){var a=e.F,i=[e.J];if(null!=a){var s=e.U,o=n.ba.S,l=o==Qr||o==Vr;n=n.ba.f.RGBA;var c=[0],u=e.ka;c[0]=e.T,e.Kb&&(0==u?--c[0]:(--u,i[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-u));var A=n.eb;u=n.fb+u*n.A,e=Br(a,i[0],e.width,s,c,A,u+(l?0:3),n.A),t(r==c),e&&re(o)&&Cr(A,u,l,s,c,n.A)}return 0}function de(e){var t=e.ma,n=t.ba.S,r=11>n,a=n==Or||n==Pr||n==Qr||n==jr||12==n||re(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Un(t.Oa,e,a?11:12))return 0;if(a&&re(n)&&bn(),e.da)alert("todo:use_scaling");else{if(r){if(t.Ib=ce,e.Kb){if(n=e.U+1>>1,t.memory=i(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=ue,bn()}}else alert("todo:EmitYUV");a&&(t.Jb=Ae,r&&gn())}if(r&&!_a){for(e=0;256>e;++e)Ta[e]=89858*(e-128)+Sa>>Ba,Ra[e]=-22014*(e-128)+Sa,Da[e]=-45773*(e-128),La[e]=113618*(e-128)+Sa>>Ba;for(e=Ia;e<Na;++e)t=76283*(e-16)+Sa>>Ba,Ua[e-Ia]=Ve(t,255),Oa[e-Ia]=Ve(t+8>>4,15);_a=1}return 1}function he(e){var n=e.ma,r=e.U,a=e.T;return t(!(1&e.ka)),0>=r||0>=a?0:(r=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,r),n.Dc+=r,1)}function pe(e){e.ma.memory=null}function fe(e,t,n,r){return 47!=b(e,8)?0:(t[0]=b(e,14)+1,n[0]=b(e,14)+1,r[0]=b(e,1),0!=b(e,3)?0:!e.h)}function me(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+b(t,n)+1}function ge(e,t){return 120<t?t-120:1<=(n=((n=Zr[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function ye(e,t,n){var r=x(n),a=e[t+=255&r].g-8;return 0<a&&(k(n,n.u+8),r=x(n),t+=e[t].value,t+=r&(1<<a)-1),k(n,n.u+e[t].g),e[t].value}function be(e,n,r){return r.g+=e.g,r.value+=e.value<<n>>>0,t(8>=r.g),e.g}function we(e,n,r){var a=e.xc;return t((n=0==a?0:e.vc[e.md*(r>>a)+(n>>a)])<e.Wb),e.Ya[n]}function ve(e,n,a,i){var s=e.ab,o=e.c*n,l=e.C;n=l+n;var c=a,u=i;for(i=e.Ta,a=e.Ua;0<s--;){var A=e.gc[s],d=l,h=n,p=c,f=u,m=(u=i,c=a,A.Ea);switch(t(d<h),t(h<=A.nc),A.hc){case 2:Kn(p,f,(h-d)*m,u,c);break;case 0:var g=d,y=h,b=u,w=c,v=(S=A).Ea;0==g&&(Vn(p,f,null,null,1,b,w),V(p,f+1,0,0,v-1,b,w+1),f+=v,w+=v,++g);for(var x=1<<S.b,C=x-1,k=O(v,S.b),B=S.K,S=S.w+(g>>S.b)*k;g<y;){var I=B,N=S,F=1;for(Gn(p,f,b,w-v,1,b,w);F<v;){var E=(F&~C)+x;E>v&&(E=v),(0,Zn[I[N++]>>8&15])(p,f+ +F,b,w+F-v,E-F,b,w+F),F=E}f+=v,w+=v,++g&C||(S+=k)}h!=A.nc&&r(u,c-m,u,c+(h-d-1)*m,m);break;case 1:for(m=p,y=f,v=(p=A.Ea)-(w=p&~(b=(f=1<<A.b)-1)),g=O(p,A.b),x=A.K,A=A.w+(d>>A.b)*g;d<h;){for(C=x,k=A,B=new Q,S=y+w,I=y+p;y<S;)K(C[k++],B),$n(B,m,y,f,u,c),y+=f,c+=f;y<I&&(K(C[k++],B),$n(B,m,y,v,u,c),y+=v,c+=v),++d&b||(A+=g)}break;case 3:if(p==u&&f==c&&0<A.b){for(y=u,p=m=c+(h-d)*m-(w=(h-d)*O(A.Ea,A.b)),f=u,b=c,g=[],w=(v=w)-1;0<=w;--w)g[w]=f[b+w];for(w=v-1;0<=w;--w)y[p+w]=g[w];qn(A,d,h,u,m,u,c)}else qn(A,d,h,p,f,u,c)}c=i,u=a}u!=a&&r(i,a,c,u,o)}function xe(e,n){var r=e.V,a=e.Ba+e.c*e.C,i=n-e.C;if(t(n<=e.l.o),t(16>=i),0<i){var s=e.l,o=e.Ta,l=e.Ua,c=s.width;if(ve(e,i,r,a),i=l=[l],t((r=e.C)<(a=n)),t(s.v<s.va),a>s.o&&(a=s.o),r<s.j){var u=s.j-r;r=s.j,i[0]+=u*c}if(r>=a?r=0:(i[0]+=4*s.v,s.ka=r-s.j,s.U=s.va-s.v,s.T=a-r,r=1),r){if(l=l[0],11>(r=e.ca).S){var A=r.f.RGBA,d=(a=r.S,i=s.U,s=s.T,u=A.eb,A.A),h=s;for(A=A.fb+e.Ma*A.A;0<h--;){var p=o,f=l,m=i,g=u,y=A;switch(a){case Ur:er(p,f,m,g,y);break;case Or:tr(p,f,m,g,y);break;case zr:tr(p,f,m,g,y),Cr(g,y,0,m,1,0);break;case Mr:ar(p,f,m,g,y);break;case Pr:te(p,f,m,g,y,1);break;case Wr:te(p,f,m,g,y,1),Cr(g,y,0,m,1,0);break;case Qr:te(p,f,m,g,y,0);break;case Vr:te(p,f,m,g,y,0),Cr(g,y,1,m,1,0);break;case jr:nr(p,f,m,g,y);break;case Gr:nr(p,f,m,g,y),kr(g,y,m,1,0);break;case Hr:rr(p,f,m,g,y);break;default:t(0)}l+=c,A+=d}e.Ma+=s}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=r.height)}}e.C=n,t(e.C<=e.i)}function Ce(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,r=e.Ya[t].H;if(0<n[1][r[1]+0].g||0<n[2][r[2]+0].g||0<n[3][r[3]+0].g)return 0}return 1}function ke(e,n,r,a,i,s){if(0!=e.Z){var o=e.qd,l=e.rd;for(t(null!=ma[e.Z]);n<r;++n)ma[e.Z](o,l,a,i,a,i,s),o=a,l=i,i+=s;e.qd=o,e.rd=l}}function Be(e,n){var r=e.l.ma,a=0==r.Z||1==r.Z?e.l.j:e.C;if(a=e.C<a?a:e.C,t(n<=e.l.o),n>a){var i=e.l.width,s=r.ca,o=r.tb+i*a,l=e.V,c=e.Ba+e.c*a,u=e.gc;t(1==e.ab),t(3==u[0].hc),Jn(u[0],a,n,l,c,s,o),ke(r,a,n,s,o,i)}e.C=e.Ma=n}function Se(e,n,r,a,i,s,o){var l=e.$/a,c=e.$%a,u=e.m,A=e.s,d=r+e.$,h=d;i=r+a*i;var p=r+a*s,f=280+A.ua,m=e.Pb?l:16777216,g=0<A.ua?A.Wa:null,y=A.wc,b=d<p?we(A,c,l):null;t(e.C<s),t(p<=i);var w=!1;e:for(;;){for(;w||d<p;){var v=0;if(l>=m){var S=d-r;t((m=e).Pb),m.wd=m.m,m.xd=S,0<m.s.ua&&D(m.s.Wa,m.s.vb),m=l+ea}if(c&y||(b=we(A,c,l)),t(null!=b),b.Qb&&(n[d]=b.qb,w=!0),!w)if(B(u),b.jc){v=u,S=n;var I=d,N=b.pd[x(v)&Pn-1];t(b.jc),256>N.g?(k(v,v.u+N.g),S[I]=N.value,v=0):(k(v,v.u+N.g-256),t(256<=N.value),v=N.value),0==v&&(w=!0)}else v=ye(b.G[0],b.H[0],u);if(u.h)break;if(w||256>v){if(!w)if(b.nd)n[d]=(b.qb|v<<8)>>>0;else{if(B(u),w=ye(b.G[1],b.H[1],u),B(u),S=ye(b.G[2],b.H[2],u),I=ye(b.G[3],b.H[3],u),u.h)break;n[d]=(I<<24|w<<16|v<<8|S)>>>0}if(w=!1,++d,++c>=a&&(c=0,++l,null!=o&&l<=s&&!(l%16)&&o(e,l),null!=g))for(;h<d;)v=n[h++],g.X[(506832829*v&4294967295)>>>g.Mb]=v}else if(280>v){if(v=me(v-256,u),S=ye(b.G[4],b.H[4],u),B(u),S=ge(a,S=me(S,u)),u.h)break;if(d-r<S||i-d<v)break e;for(I=0;I<v;++I)n[d+I]=n[d+I-S];for(d+=v,c+=v;c>=a;)c-=a,++l,null!=o&&l<=s&&!(l%16)&&o(e,l);if(t(d<=i),c&y&&(b=we(A,c,l)),null!=g)for(;h<d;)v=n[h++],g.X[(506832829*v&4294967295)>>>g.Mb]=v}else{if(!(v<f))break e;for(w=v-280,t(null!=g);h<d;)v=n[h++],g.X[(506832829*v&4294967295)>>>g.Mb]=v;v=d,t(!(w>>>(S=g).Xa)),n[v]=S.X[w],w=!0}w||t(u.h==C(u))}if(e.Pb&&u.h&&d<i)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&D(e.s.vb,e.s.Wa);else{if(u.h)break e;null!=o&&o(e,l>s?s:l),e.a=0,e.$=d-r}return 1}return e.a=3,0}function Ie(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function Ne(){var t=new on;return null==t?null:(t.a=0,t.xb=fa,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),Kn=G,$n=q,er=J,tr=Y,nr=Z,rr=$,ar=ee,e.VP8LMapColor32b=Xn,e.VP8LMapColor8b=Yn,t)}function Fe(e,n,r,o,l){var c=1,d=[e],p=[n],f=o.m,m=o.s,g=null,y=0;e:for(;;){if(r)for(;c&&b(f,1);){var w=d,v=p,C=o,S=1,I=C.m,N=C.gc[C.ab],F=b(I,2);if(C.Oc&1<<F)c=0;else{switch(C.Oc|=1<<F,N.hc=F,N.Ea=w[0],N.nc=v[0],N.K=[null],++C.ab,t(4>=C.ab),F){case 0:case 1:N.b=b(I,3)+2,S=Fe(O(N.Ea,N.b),O(N.nc,N.b),0,C,N.K),N.K=N.K[0];break;case 3:var E,_=b(I,8)+1,T=16<_?0:4<_?1:2<_?2:3;if(w[0]=O(N.Ea,T),N.b=T,E=S=Fe(_,1,0,C,N.K)){var D,R=_,U=N,P=1<<(8>>U.b),Q=i(P);if(null==Q)E=0;else{var j=U.K[0],H=U.w;for(Q[0]=U.K[0][0],D=1;D<1*R;++D)Q[D]=M(j[H+D],Q[D-1]);for(;D<4*P;++D)Q[D]=0;U.K[0]=null,U.K[0]=Q,E=1}}S=E;break;case 2:break;default:t(0)}c=S}}if(d=d[0],p=p[0],c&&b(f,1)&&!(c=1<=(y=b(f,4))&&11>=y)){o.a=3;break e}var z;if(z=c)t:{var W,V,G,K=o,q=d,X=p,J=y,Y=r,Z=K.m,$=K.s,ee=[null],te=1,ne=0,re=$r[J];n:for(;;){if(Y&&b(Z,1)){var ae=b(Z,3)+2,ie=O(q,ae),se=O(X,ae),oe=ie*se;if(!Fe(ie,se,0,K,ee))break n;for(ee=ee[0],$.xc=ae,W=0;W<oe;++W){var le=ee[W]>>8&65535;ee[W]=le,le>=te&&(te=le+1)}}if(Z.h)break n;for(V=0;5>V;++V){var ce=Xr[V];!V&&0<J&&(ce+=1<<J),ne<ce&&(ne=ce)}var ue=s(te*re,A),Ae=te,de=s(Ae,h);if(null==de)var he=null;else t(65536>=Ae),he=de;var pe=i(ne);if(null==he||null==pe||null==ue){K.a=1;break n}var fe=ue;for(W=G=0;W<te;++W){var me=he[W],ge=me.G,ye=me.H,we=0,ve=1,xe=0;for(V=0;5>V;++V){ce=Xr[V],ge[V]=fe,ye[V]=G,!V&&0<J&&(ce+=1<<J);r:{var Ce,ke=ce,Be=K,Ne=pe,Ee=fe,_e=G,Te=0,Le=Be.m,De=b(Le,1);if(a(Ne,0,0,ke),De){var Re=b(Le,1)+1,Ue=b(Le,1),Oe=b(Le,0==Ue?1:8);Ne[Oe]=1,2==Re&&(Ne[Oe=b(Le,8)]=1);var Me=1}else{var Pe=i(19),Qe=b(Le,4)+4;if(19<Qe){Be.a=3;var je=0;break r}for(Ce=0;Ce<Qe;++Ce)Pe[Yr[Ce]]=b(Le,3);var He=void 0,ze=void 0,We=Be,Ve=Pe,Ge=ke,Ke=Ne,qe=0,Xe=We.m,Je=8,Ye=s(128,A);a:for(;u(Ye,0,7,Ve,19);){if(b(Xe,1)){var Ze=2+2*b(Xe,3);if((He=2+b(Xe,Ze))>Ge)break a}else He=Ge;for(ze=0;ze<Ge&&He--;){B(Xe);var $e=Ye[0+(127&x(Xe))];k(Xe,Xe.u+$e.g);var et=$e.value;if(16>et)Ke[ze++]=et,0!=et&&(Je=et);else{var tt=16==et,nt=et-16,rt=qr[nt],at=b(Xe,Kr[nt])+rt;if(ze+at>Ge)break a;for(var it=tt?Je:0;0<at--;)Ke[ze++]=it}}qe=1;break a}qe||(We.a=3),Me=qe}(Me=Me&&!Le.h)&&(Te=u(Ee,_e,8,Ne,ke)),Me&&0!=Te?je=Te:(Be.a=3,je=0)}if(0==je)break n;if(ve&&1==Jr[V]&&(ve=0==fe[G].g),we+=fe[G].g,G+=je,3>=V){var st,ot=pe[0];for(st=1;st<ce;++st)pe[st]>ot&&(ot=pe[st]);xe+=ot}}if(me.nd=ve,me.Qb=0,ve&&(me.qb=(ge[3][ye[3]+0].value<<24|ge[1][ye[1]+0].value<<16|ge[2][ye[2]+0].value)>>>0,0==we&&256>ge[0][ye[0]+0].value&&(me.Qb=1,me.qb+=ge[0][ye[0]+0].value<<8)),me.jc=!me.Qb&&6>xe,me.jc){var lt,ct=me;for(lt=0;lt<Pn;++lt){var ut=lt,At=ct.pd[ut],dt=ct.G[0][ct.H[0]+ut];256<=dt.value?(At.g=dt.g+256,At.value=dt.value):(At.g=0,At.value=0,ut>>=be(dt,8,At),ut>>=be(ct.G[1][ct.H[1]+ut],16,At),ut>>=be(ct.G[2][ct.H[2]+ut],0,At),be(ct.G[3][ct.H[3]+ut],24,At))}}}$.vc=ee,$.Wb=te,$.Ya=he,$.yc=ue,z=1;break t}z=0}if(!(c=z)){o.a=3;break e}if(0<y){if(m.ua=1<<y,!L(m.Wa,y)){o.a=1,c=0;break e}}else m.ua=0;var ht=o,pt=d,ft=p,mt=ht.s,gt=mt.xc;if(ht.c=pt,ht.i=ft,mt.md=O(pt,gt),mt.wc=0==gt?-1:(1<<gt)-1,r){o.xb=pa;break e}if(null==(g=i(d*p))){o.a=1,c=0;break e}c=(c=Se(o,g,0,d,p,p,null))&&!f.h;break e}return c?(null!=l?l[0]=g:(t(null==g),t(r)),o.$=0,r||Ie(m)):Ie(m),c}function Ee(e,n){var r=e.c*e.i,a=r+n+16*n;return t(e.c<=n),e.V=i(a),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+r+n,1)}function _e(e,n){var r=e.C,a=n-r,i=e.V,s=e.Ba+e.c*r;for(t(n<=e.l.o);0<a;){var o=16<a?16:a,l=e.l.ma,c=e.l.width,u=c*o,A=l.ca,d=l.tb+c*r,h=e.Ta,p=e.Ua;ve(e,o,i,s),Sr(h,p,A,d,u),ke(l,r,r+o,A,d,c),a-=o,i+=o*e.c,r+=o}t(r==n),e.C=e.Ma=n}function Te(){this.ub=this.yd=this.td=this.Rb=0}function Le(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function De(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Re(){this.Yb=function(){var e=[];return function e(t,n,r){for(var a=r[n],i=0;i<a&&(t.push(r.length>n+1?[]:0),!(r.length<n+1));i++)e(t[i],n+1,r)}(e,0,[3,11]),e}()}function Ue(){this.jb=i(3),this.Wc=o([4,8],Re),this.Xc=o([4,17],Re)}function Oe(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Me(){this.ld=this.La=this.dd=this.tc=0}function Pe(){this.Na=this.la=0}function Qe(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function je(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function He(){this.uc=this.M=this.Nb=0,this.wa=Array(new Me),this.Y=0,this.ya=Array(new je),this.aa=0,this.l=new Ge}function ze(){this.y=i(16),this.f=i(8),this.ea=i(8)}function We(){this.cb=this.a=0,this.sc="",this.m=new w,this.Od=new Te,this.Kc=new Le,this.ed=new Oe,this.Qa=new De,this.Ic=this.$c=this.Aa=0,this.D=new He,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,w),this.ia=0,this.pb=s(4,Qe),this.Pa=new Ue,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ze),this.Hd=0,this.rb=Array(new Pe),this.sb=0,this.wa=Array(new Me),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new je),this.L=this.aa=0,this.gd=o([4,2],Me),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ve(e,t){return 0>e?0:e>t?t:e}function Ge(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ke(){var e=new We;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,ra||(ra=Ye)),e}function qe(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function Xe(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Je(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return qe(e,2,"null VP8Io passed to VP8GetHeaders()");var r=n.data,i=n.w,s=n.ha;if(4>s)return qe(e,7,"Truncated header.");var o=r[i+0]|r[i+1]<<8|r[i+2]<<16,l=e.Od;if(l.Rb=!(1&o),l.td=o>>1&7,l.yd=o>>4&1,l.ub=o>>5,3<l.td)return qe(e,3,"Incorrect keyframe parameters.");if(!l.yd)return qe(e,4,"Frame not displayable.");i+=3,s-=3;var c=e.Kc;if(l.Rb){if(7>s)return qe(e,7,"cannot parse picture header");if(!Xe(r,i,s))return qe(e,3,"Bad code word");c.c=16383&(r[i+4]<<8|r[i+3]),c.Td=r[i+4]>>6,c.i=16383&(r[i+6]<<8|r[i+5]),c.Ud=r[i+6]>>6,i+=7,s-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,n.width=c.c,n.height=c.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,a((o=e.Pa).jb,0,255,o.jb.length),t(null!=(o=e.Qa)),o.Cb=0,o.Bb=0,o.Fb=1,a(o.Zb,0,0,o.Zb.length),a(o.Lb,0,0,o.Lb)}if(l.ub>s)return qe(e,7,"bad partition length");p(o=e.m,r,i,l.ub),i+=l.ub,s-=l.ub,l.Rb&&(c.Ld=I(o),c.Kd=I(o)),c=e.Qa;var u,A=e.Pa;if(t(null!=o),t(null!=c),c.Cb=I(o),c.Cb){if(c.Bb=I(o),I(o)){for(c.Fb=I(o),u=0;4>u;++u)c.Zb[u]=I(o)?m(o,7):0;for(u=0;4>u;++u)c.Lb[u]=I(o)?m(o,6):0}if(c.Bb)for(u=0;3>u;++u)A.jb[u]=I(o)?f(o,8):255}else c.Bb=0;if(o.Ka)return qe(e,3,"cannot parse segment header");if((c=e.ed).zd=I(o),c.Tb=f(o,6),c.wb=f(o,3),c.Pc=I(o),c.Pc&&I(o)){for(A=0;4>A;++A)I(o)&&(c.vd[A]=m(o,6));for(A=0;4>A;++A)I(o)&&(c.od[A]=m(o,6))}if(e.L=0==c.Tb?0:c.zd?1:2,o.Ka)return qe(e,3,"cannot parse filter header");var d=s;if(s=u=i,i=u+d,c=d,e.Xb=(1<<f(e.m,2))-1,d<3*(A=e.Xb))r=7;else{for(u+=3*A,c-=3*A,d=0;d<A;++d){var h=r[s+0]|r[s+1]<<8|r[s+2]<<16;h>c&&(h=c),p(e.Jc[+d],r,u,h),u+=h,c-=h,s+=3}p(e.Jc[+A],r,u,c),r=u<i?0:5}if(0!=r)return qe(e,r,"cannot parse partitions");for(r=f(u=e.m,7),s=I(u)?m(u,4):0,i=I(u)?m(u,4):0,c=I(u)?m(u,4):0,A=I(u)?m(u,4):0,u=I(u)?m(u,4):0,d=e.Qa,h=0;4>h;++h){if(d.Cb){var g=d.Zb[h];d.Fb||(g+=r)}else{if(0<h){e.pb[h]=e.pb[0];continue}g=r}var y=e.pb[h];y.Sc[0]=ta[Ve(g+s,127)],y.Sc[1]=na[Ve(g+0,127)],y.Eb[0]=2*ta[Ve(g+i,127)],y.Eb[1]=101581*na[Ve(g+c,127)]>>16,8>y.Eb[1]&&(y.Eb[1]=8),y.Qc[0]=ta[Ve(g+A,117)],y.Qc[1]=na[Ve(g+u,127)],y.lc=g+u}if(!l.Rb)return qe(e,4,"Not a key frame.");for(I(o),l=e.Pa,r=0;4>r;++r){for(s=0;8>s;++s)for(i=0;3>i;++i)for(c=0;11>c;++c)A=N(o,ca[r][s][i][c])?f(o,8):oa[r][s][i][c],l.Wc[r][s].Yb[i][c]=A;for(s=0;17>s;++s)l.Xc[r][s]=l.Wc[r][ua[s]]}return e.kc=I(o),e.kc&&(e.Bd=f(o,8)),e.cb=1}function Ye(e,t,n,r,a,i,s){var o=t[a].Yb[n];for(n=0;16>a;++a){if(!N(e,o[n+0]))return a;for(;!N(e,o[n+1]);)if(o=t[++a].Yb[0],n=0,16==a)return 16;var l=t[a+1].Yb;if(N(e,o[n+2])){var c=e,u=0;if(N(c,(d=o)[(A=n)+3]))if(N(c,d[A+6])){for(o=0,A=2*(u=N(c,d[A+8]))+(d=N(c,d[A+9+u])),u=0,d=aa[A];d[o];++o)u+=u+N(c,d[o]);u+=3+(8<<A)}else N(c,d[A+7])?(u=7+2*N(c,165),u+=N(c,145)):u=5+N(c,159);else u=N(c,d[A+4])?3+N(c,d[A+5]):2;o=l[2]}else u=1,o=l[1];l=s+ia[a],0>(c=e).b&&S(c);var A,d=c.b,h=(A=c.Ca>>1)-(c.I>>d)>>31;--c.b,c.Ca+=h,c.Ca|=1,c.I-=(A+1&h)<<d,i[l]=((u^h)-h)*r[(0<a)+0]}return 16}function Ze(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,a(e.zc,0,0,e.zc.length),e.ja=0}function $e(e,n){if(null==e)return 0;if(null==n)return qe(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Je(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var o=Pa[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-o>>4,e.zb=n.j-o>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+o>>4,e.Hb=n.va+15+o>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(o=0;4>o;++o){var c;if(e.Qa.Cb){var u=e.Qa.Lb[o];e.Qa.Fb||(u+=l.Tb)}else u=l.Tb;for(c=0;1>=c;++c){var A=e.gd[o][c],d=u;if(l.Pc&&(d+=l.vd[0],c&&(d+=l.od[0])),0<(d=0>d?0:63<d?63:d)){var h=d;0<l.wb&&(h=4<l.wb?h>>2:h>>1)>9-l.wb&&(h=9-l.wb),1>h&&(h=1),A.dd=h,A.tc=2*d+h,A.ld=40<=d?2:15<=d?1:0}else A.tc=0;A.La=c}}}o=0}else qe(e,6,"Frame setup failed"),o=e.a;if(o=0==o){if(o){e.$c=0,0<e.Aa||(e.Ic=ja);e:{o=e.Ic,l=4*(h=e.za);var p=32*h,f=h+1,m=0<e.L?h*(0<e.Aa?2:1):0,g=(2==e.Aa?2:1)*h;if((A=l+832+(c=3*(16*o+Pa[e.L])/2*p)+(u=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=A)o=0;else{if(A>e.Vb){if(e.Vb=0,e.Ec=i(A),e.Fc=0,null==e.Ec){o=qe(e,1,"no memory during frame initialization.");break e}e.Vb=A}A=e.Ec,d=e.Fc,e.Ac=A,e.Bc=d,d+=l,e.Gd=s(p,ze),e.Hd=0,e.rb=s(f+1,Pe),e.sb=1,e.wa=m?s(m,Me):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=h),t(!0),e.oc=A,e.pc=d,d+=832,e.ya=s(g,je),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=h),e.R=16*h,e.B=8*h,h=(p=Pa[e.L])*e.R,p=p/2*e.B,e.sa=A,e.ta=d+h,e.qa=e.sa,e.ra=e.ta+16*o*e.R+p,e.Ha=e.qa,e.Ia=e.ra+8*o*e.B+p,e.$c=0,d+=c,e.mb=u?A:null,e.nb=u?d:null,t(d+u<=e.Fc+e.Vb),Ze(e),a(e.Ac,e.Bc,0,l),o=1}}if(o){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!_r){for(o=-255;255>=o;++o)Ir[255+o]=0>o?-o:o;for(o=-1020;1020>=o;++o)Nr[1020+o]=-128>o?-128:127<o?127:o;for(o=-112;112>=o;++o)Fr[112+o]=-16>o?-16:15<o?15:o;for(o=-255;510>=o;++o)Er[255+o]=0>o?0:255<o?255:o;_r=1}ir=ct,sr=it,lr=st,cr=ot,ur=lt,or=at,Ar=qt,dr=Xt,hr=Zt,pr=$t,fr=Jt,mr=Yt,gr=en,yr=tn,br=Ht,wr=zt,vr=Wt,xr=Vt,da[0]=kt,da[1]=At,da[2]=xt,da[3]=Ct,da[4]=Bt,da[5]=It,da[6]=St,da[7]=Nt,da[8]=Et,da[9]=Ft,Aa[0]=gt,Aa[1]=ht,Aa[2]=pt,Aa[3]=ft,Aa[4]=yt,Aa[5]=bt,Aa[6]=wt,ha[0]=Dt,ha[1]=dt,ha[2]=_t,ha[3]=Tt,ha[4]=Ut,ha[5]=Rt,ha[6]=Ot,o=1}else o=0}o&&(o=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var s,o=e.Jc[e.M&e.Xb],l=e.m,c=e;for(s=0;s<c.za;++s){var u=l,A=c,d=A.Ac,h=A.Bc+4*s,p=A.zc,f=A.ya[A.aa+s];if(A.Qa.Bb?f.$b=N(u,A.Pa.jb[0])?2+N(u,A.Pa.jb[2]):N(u,A.Pa.jb[1]):f.$b=0,A.kc&&(f.Ad=N(u,A.Bd)),f.Za=!N(u,145)+0,f.Za){var m=f.Ob,g=0;for(A=0;4>A;++A){var y,b=p[0+A];for(y=0;4>y;++y){b=la[d[h+y]][b];for(var w=sa[N(u,b[0])];0<w;)w=sa[2*w+N(u,b[w])];b=-w,d[h+y]=b}r(m,g,d,h,4),g+=4,p[0+A]=b}}else b=N(u,156)?N(u,128)?1:3:N(u,163)?2:0,f.Ob[0]=b,a(d,h,b,4),a(p,0,b,4);f.Dd=N(u,142)?N(u,114)?N(u,183)?1:3:2:0}if(c.m.Ka)return qe(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=o,u=(l=e).rb[l.sb-1],d=l.rb[l.sb+l.ja],s=l.ya[l.aa+l.ja],h=l.kc?s.Ad:0)u.la=d.la=0,s.Za||(u.Na=d.Na=0),s.Hc=0,s.Gc=0,s.ia=0;else{var v,x;if(u=d,d=c,h=l.Pa.Xc,p=l.ya[l.aa+l.ja],f=l.pb[p.$b],A=p.ad,m=0,g=l.rb[l.sb-1],b=y=0,a(A,m,0,384),p.Za)var C=0,k=h[3];else{w=i(16);var B=u.Na+g.Na;if(B=ra(d,h[1],B,f.Eb,0,w,0),u.Na=g.Na=(0<B)+0,1<B)ir(w,0,A,m);else{var S=w[0]+3>>3;for(w=0;256>w;w+=16)A[m+w]=S}C=1,k=h[0]}var I=15&u.la,F=15&g.la;for(w=0;4>w;++w){var E=1&F;for(S=x=0;4>S;++S)I=I>>1|(E=(B=ra(d,k,B=E+(1&I),f.Sc,C,A,m))>C)<<7,x=x<<2|(3<B?3:1<B?2:0!=A[m+0]),m+=16;I>>=4,F=F>>1|E<<7,y=(y<<8|x)>>>0}for(k=I,C=F>>4,v=0;4>v;v+=2){for(x=0,I=u.la>>4+v,F=g.la>>4+v,w=0;2>w;++w){for(E=1&F,S=0;2>S;++S)B=E+(1&I),I=I>>1|(E=0<(B=ra(d,h[2],B,f.Qc,0,A,m)))<<3,x=x<<2|(3<B?3:1<B?2:0!=A[m+0]),m+=16;I>>=2,F=F>>1|E<<5}b|=x<<4*v,k|=I<<4<<v,C|=(240&F)<<v}u.la=k,g.la=C,p.Hc=y,p.Gc=b,p.ia=43690&b?0:f.ia,h=!(y|b)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[s.$b][s.Za],l.wa[l.Y+l.ja].La|=!h),c.Ka)return qe(e,7,"Premature end-of-file encountered.")}if(Ze(e),l=n,c=1,s=(o=e).D,u=0<o.L&&o.M>=o.zb&&o.M<=o.Va,0==o.Aa)e:{if(s.M=o.M,s.uc=u,Dn(o,s),c=1,s=(x=o.D).Nb,u=(b=Pa[o.L])*o.R,d=b/2*o.B,w=16*s*o.R,S=8*s*o.B,h=o.sa,p=o.ta-u+w,f=o.qa,A=o.ra-d+S,m=o.Ha,g=o.Ia-d+S,F=0==(I=x.M),y=I>=o.Va-1,2==o.Aa&&Dn(o,x),x.uc)for(E=(B=o).D.M,t(B.D.uc),x=B.yb;x<B.Hb;++x){C=x,k=E;var _=(T=(j=B).D).Nb;v=j.R;var T=T.wa[T.Y+C],L=j.sa,D=j.ta+16*_*v+16*C,R=T.dd,U=T.tc;if(0!=U)if(t(3<=U),1==j.L)0<C&&wr(L,D,v,U+4),T.La&&xr(L,D,v,U),0<k&&br(L,D,v,U+4),T.La&&vr(L,D,v,U);else{var O=j.B,M=j.qa,P=j.ra+8*_*O+8*C,Q=j.Ha,j=j.Ia+8*_*O+8*C;_=T.ld,0<C&&(dr(L,D,v,U+4,R,_),pr(M,P,Q,j,O,U+4,R,_)),T.La&&(mr(L,D,v,U,R,_),yr(M,P,Q,j,O,U,R,_)),0<k&&(Ar(L,D,v,U+4,R,_),hr(M,P,Q,j,O,U+4,R,_)),T.La&&(fr(L,D,v,U,R,_),gr(M,P,Q,j,O,U,R,_))}}if(o.ia&&alert("todo:DitherRow"),null!=l.put){if(x=16*I,I=16*(I+1),F?(l.y=o.sa,l.O=o.ta+w,l.f=o.qa,l.N=o.ra+S,l.ea=o.Ha,l.W=o.Ia+S):(x-=b,l.y=h,l.O=p,l.f=f,l.N=A,l.ea=m,l.W=g),y||(I-=b),I>l.o&&(I=l.o),l.F=null,l.J=null,null!=o.Fa&&0<o.Fa.length&&x<I&&(l.J=dn(o,l,x,I-x),l.F=o.mb,null==l.F&&0==l.F.length)){c=qe(o,3,"Could not decode alpha data.");break e}x<l.j&&(b=l.j-x,x=l.j,t(!(1&b)),l.O+=o.R*b,l.N+=o.B*(b>>1),l.W+=o.B*(b>>1),null!=l.F&&(l.J+=l.width*b)),x<I&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=x-l.j,l.U=l.va-l.v,l.T=I-x,c=l.put(l))}s+1!=o.Ic||y||(r(o.sa,o.ta-u,h,p+16*o.R,u),r(o.qa,o.ra-d,f,A+8*o.B,d),r(o.Ha,o.Ia-d,m,g+8*o.B,d))}if(!c)return qe(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),o&=1}return o?(e.cb=0,o):0}function et(e,t,n,r,a){a=e[t+n+32*r]+(a>>3),e[t+n+32*r]=-256&a?0>a?0:255:a}function tt(e,t,n,r,a,i){et(e,t,0,n,r+a),et(e,t,1,n,r+i),et(e,t,2,n,r-i),et(e,t,3,n,r-a)}function nt(e){return(20091*e>>16)+e}function rt(e,t,n,r){var a,s=0,o=i(16);for(a=0;4>a;++a){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],u=(35468*e[t+4]>>16)-nt(e[t+12]),A=nt(e[t+4])+(35468*e[t+12]>>16);o[s+0]=l+A,o[s+1]=c+u,o[s+2]=c-u,o[s+3]=l-A,s+=4,t++}for(a=s=0;4>a;++a)l=(e=o[s+0]+4)+o[s+8],c=e-o[s+8],u=(35468*o[s+4]>>16)-nt(o[s+12]),et(n,r,0,0,l+(A=nt(o[s+4])+(35468*o[s+12]>>16))),et(n,r,1,0,c+u),et(n,r,2,0,c-u),et(n,r,3,0,l-A),s++,r+=32}function at(e,t,n,r){var a=e[t+0]+4,i=35468*e[t+4]>>16,s=nt(e[t+4]),o=35468*e[t+1]>>16;tt(n,r,0,a+s,e=nt(e[t+1]),o),tt(n,r,1,a+i,e,o),tt(n,r,2,a-i,e,o),tt(n,r,3,a-s,e,o)}function it(e,t,n,r,a){rt(e,t,n,r),a&&rt(e,t+16,n,r+4)}function st(e,t,n,r){sr(e,t+0,n,r,1),sr(e,t+32,n,r+128,1)}function ot(e,t,n,r){var a;for(e=e[t+0]+4,a=0;4>a;++a)for(t=0;4>t;++t)et(n,r,t,a,e)}function lt(e,t,n,r){e[t+0]&&cr(e,t+0,n,r),e[t+16]&&cr(e,t+16,n,r+4),e[t+32]&&cr(e,t+32,n,r+128),e[t+48]&&cr(e,t+48,n,r+128+4)}function ct(e,t,n,r){var a,s=i(16);for(a=0;4>a;++a){var o=e[t+0+a]+e[t+12+a],l=e[t+4+a]+e[t+8+a],c=e[t+4+a]-e[t+8+a],u=e[t+0+a]-e[t+12+a];s[0+a]=o+l,s[8+a]=o-l,s[4+a]=u+c,s[12+a]=u-c}for(a=0;4>a;++a)o=(e=s[0+4*a]+3)+s[3+4*a],l=s[1+4*a]+s[2+4*a],c=s[1+4*a]-s[2+4*a],u=e-s[3+4*a],n[r+0]=o+l>>3,n[r+16]=u+c>>3,n[r+32]=o-l>>3,n[r+48]=u-c>>3,r+=64}function ut(e,t,n){var r,a=t-32,i=Dr,s=255-e[a-1];for(r=0;r<n;++r){var o,l=i,c=s+e[t-1];for(o=0;o<n;++o)e[t+o]=l[c+e[a+o]];t+=32}}function At(e,t){ut(e,t,4)}function dt(e,t){ut(e,t,8)}function ht(e,t){ut(e,t,16)}function pt(e,t){var n;for(n=0;16>n;++n)r(e,t+32*n,e,t-32,16)}function ft(e,t){var n;for(n=16;0<n;--n)a(e,t,e[t-1],16),t+=32}function mt(e,t,n){var r;for(r=0;16>r;++r)a(t,n+32*r,e,16)}function gt(e,t){var n,r=16;for(n=0;16>n;++n)r+=e[t-1+32*n]+e[t+n-32];mt(r>>5,e,t)}function yt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t-1+32*n];mt(r>>4,e,t)}function bt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t+n-32];mt(r>>4,e,t)}function wt(e,t){mt(128,e,t)}function vt(e,t,n){return e+2*t+n+2>>2}function xt(e,t){var n,a=t-32;for(a=new Uint8Array([vt(e[a-1],e[a+0],e[a+1]),vt(e[a+0],e[a+1],e[a+2]),vt(e[a+1],e[a+2],e[a+3]),vt(e[a+2],e[a+3],e[a+4])]),n=0;4>n;++n)r(e,t+32*n,a,0,a.length)}function Ct(e,t){var n=e[t-1],r=e[t-1+32],a=e[t-1+64],i=e[t-1+96];F(e,t+0,16843009*vt(e[t-1-32],n,r)),F(e,t+32,16843009*vt(n,r,a)),F(e,t+64,16843009*vt(r,a,i)),F(e,t+96,16843009*vt(a,i,i))}function kt(e,t){var n,r=4;for(n=0;4>n;++n)r+=e[t+n-32]+e[t-1+32*n];for(r>>=3,n=0;4>n;++n)a(e,t+32*n,r,4)}function Bt(e,t){var n=e[t-1+0],r=e[t-1+32],a=e[t-1+64],i=e[t-1-32],s=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=vt(r,a,e[t-1+96]),e[t+1+96]=e[t+0+64]=vt(n,r,a),e[t+2+96]=e[t+1+64]=e[t+0+32]=vt(i,n,r),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=vt(s,i,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=vt(o,s,i),e[t+3+32]=e[t+2+0]=vt(l,o,s),e[t+3+0]=vt(c,l,o)}function St(e,t){var n=e[t+1-32],r=e[t+2-32],a=e[t+3-32],i=e[t+4-32],s=e[t+5-32],o=e[t+6-32],l=e[t+7-32];e[t+0+0]=vt(e[t+0-32],n,r),e[t+1+0]=e[t+0+32]=vt(n,r,a),e[t+2+0]=e[t+1+32]=e[t+0+64]=vt(r,a,i),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=vt(a,i,s),e[t+3+32]=e[t+2+64]=e[t+1+96]=vt(i,s,o),e[t+3+64]=e[t+2+96]=vt(s,o,l),e[t+3+96]=vt(o,l,l)}function It(e,t){var n=e[t-1+0],r=e[t-1+32],a=e[t-1+64],i=e[t-1-32],s=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=i+s+1>>1,e[t+1+0]=e[t+2+64]=s+o+1>>1,e[t+2+0]=e[t+3+64]=o+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=vt(a,r,n),e[t+0+64]=vt(r,n,i),e[t+0+32]=e[t+1+96]=vt(n,i,s),e[t+1+32]=e[t+2+96]=vt(i,s,o),e[t+2+32]=e[t+3+96]=vt(s,o,l),e[t+3+32]=vt(o,l,c)}function Nt(e,t){var n=e[t+0-32],r=e[t+1-32],a=e[t+2-32],i=e[t+3-32],s=e[t+4-32],o=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=n+r+1>>1,e[t+1+0]=e[t+0+64]=r+a+1>>1,e[t+2+0]=e[t+1+64]=a+i+1>>1,e[t+3+0]=e[t+2+64]=i+s+1>>1,e[t+0+32]=vt(n,r,a),e[t+1+32]=e[t+0+96]=vt(r,a,i),e[t+2+32]=e[t+1+96]=vt(a,i,s),e[t+3+32]=e[t+2+96]=vt(i,s,o),e[t+3+64]=vt(s,o,l),e[t+3+96]=vt(o,l,c)}function Ft(e,t){var n=e[t-1+0],r=e[t-1+32],a=e[t-1+64],i=e[t-1+96];e[t+0+0]=n+r+1>>1,e[t+2+0]=e[t+0+32]=r+a+1>>1,e[t+2+32]=e[t+0+64]=a+i+1>>1,e[t+1+0]=vt(n,r,a),e[t+3+0]=e[t+1+32]=vt(r,a,i),e[t+3+32]=e[t+1+64]=vt(a,i,i),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=i}function Et(e,t){var n=e[t-1+0],r=e[t-1+32],a=e[t-1+64],i=e[t-1+96],s=e[t-1-32],o=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=n+s+1>>1,e[t+0+32]=e[t+2+64]=r+n+1>>1,e[t+0+64]=e[t+2+96]=a+r+1>>1,e[t+0+96]=i+a+1>>1,e[t+3+0]=vt(o,l,c),e[t+2+0]=vt(s,o,l),e[t+1+0]=e[t+3+32]=vt(n,s,o),e[t+1+32]=e[t+3+64]=vt(r,n,s),e[t+1+64]=e[t+3+96]=vt(a,r,n),e[t+1+96]=vt(i,a,r)}function _t(e,t){var n;for(n=0;8>n;++n)r(e,t+32*n,e,t-32,8)}function Tt(e,t){var n;for(n=0;8>n;++n)a(e,t,e[t-1],8),t+=32}function Lt(e,t,n){var r;for(r=0;8>r;++r)a(t,n+32*r,e,8)}function Dt(e,t){var n,r=8;for(n=0;8>n;++n)r+=e[t+n-32]+e[t-1+32*n];Lt(r>>4,e,t)}function Rt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t+n-32];Lt(r>>3,e,t)}function Ut(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t-1+32*n];Lt(r>>3,e,t)}function Ot(e,t){Lt(128,e,t)}function Mt(e,t,n){var r=e[t-n],a=e[t+0],i=3*(a-r)+Tr[1020+e[t-2*n]-e[t+n]],s=Lr[112+(i+4>>3)];e[t-n]=Dr[255+r+Lr[112+(i+3>>3)]],e[t+0]=Dr[255+a-s]}function Pt(e,t,n,r){var a=e[t+0],i=e[t+n];return Rr[255+e[t-2*n]-e[t-n]]>r||Rr[255+i-a]>r}function Qt(e,t,n,r){return 4*Rr[255+e[t-n]-e[t+0]]+Rr[255+e[t-2*n]-e[t+n]]<=r}function jt(e,t,n,r,a){var i=e[t-3*n],s=e[t-2*n],o=e[t-n],l=e[t+0],c=e[t+n],u=e[t+2*n],A=e[t+3*n];return 4*Rr[255+o-l]+Rr[255+s-c]>r?0:Rr[255+e[t-4*n]-i]<=a&&Rr[255+i-s]<=a&&Rr[255+s-o]<=a&&Rr[255+A-u]<=a&&Rr[255+u-c]<=a&&Rr[255+c-l]<=a}function Ht(e,t,n,r){var a=2*r+1;for(r=0;16>r;++r)Qt(e,t+r,n,a)&&Mt(e,t+r,n)}function zt(e,t,n,r){var a=2*r+1;for(r=0;16>r;++r)Qt(e,t+r*n,1,a)&&Mt(e,t+r*n,1)}function Wt(e,t,n,r){var a;for(a=3;0<a;--a)Ht(e,t+=4*n,n,r)}function Vt(e,t,n,r){var a;for(a=3;0<a;--a)zt(e,t+=4,n,r)}function Gt(e,t,n,r,a,i,s,o){for(i=2*i+1;0<a--;){if(jt(e,t,n,i,s))if(Pt(e,t,n,o))Mt(e,t,n);else{var l=e,c=t,u=n,A=l[c-2*u],d=l[c-u],h=l[c+0],p=l[c+u],f=l[c+2*u],m=27*(y=Tr[1020+3*(h-d)+Tr[1020+A-p]])+63>>7,g=18*y+63>>7,y=9*y+63>>7;l[c-3*u]=Dr[255+l[c-3*u]+y],l[c-2*u]=Dr[255+A+g],l[c-u]=Dr[255+d+m],l[c+0]=Dr[255+h-m],l[c+u]=Dr[255+p-g],l[c+2*u]=Dr[255+f-y]}t+=r}}function Kt(e,t,n,r,a,i,s,o){for(i=2*i+1;0<a--;){if(jt(e,t,n,i,s))if(Pt(e,t,n,o))Mt(e,t,n);else{var l=e,c=t,u=n,A=l[c-u],d=l[c+0],h=l[c+u],p=Lr[112+(4+(f=3*(d-A))>>3)],f=Lr[112+(f+3>>3)],m=p+1>>1;l[c-2*u]=Dr[255+l[c-2*u]+m],l[c-u]=Dr[255+A+f],l[c+0]=Dr[255+d-p],l[c+u]=Dr[255+h-m]}t+=r}}function qt(e,t,n,r,a,i){Gt(e,t,n,1,16,r,a,i)}function Xt(e,t,n,r,a,i){Gt(e,t,1,n,16,r,a,i)}function Jt(e,t,n,r,a,i){var s;for(s=3;0<s;--s)Kt(e,t+=4*n,n,1,16,r,a,i)}function Yt(e,t,n,r,a,i){var s;for(s=3;0<s;--s)Kt(e,t+=4,1,n,16,r,a,i)}function Zt(e,t,n,r,a,i,s,o){Gt(e,t,a,1,8,i,s,o),Gt(n,r,a,1,8,i,s,o)}function $t(e,t,n,r,a,i,s,o){Gt(e,t,1,a,8,i,s,o),Gt(n,r,1,a,8,i,s,o)}function en(e,t,n,r,a,i,s,o){Kt(e,t+4*a,a,1,8,i,s,o),Kt(n,r+4*a,a,1,8,i,s,o)}function tn(e,t,n,r,a,i,s,o){Kt(e,t+4,1,a,8,i,s,o),Kt(n,r+4,1,a,8,i,s,o)}function nn(){this.ba=new se,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function an(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function sn(){this.ua=0,this.Wa=new R,this.vb=new R,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new h,this.yc=new A}function on(){this.xb=this.a=0,this.l=new Ge,this.ca=new se,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new v,this.Pb=0,this.wd=new v,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new sn,this.ab=0,this.gc=s(4,an),this.Oc=0}function ln(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ge,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function cn(e,t,n,r,a,i,s){for(e=null==e?0:e[t+0],t=0;t<s;++t)a[i+t]=e+n[r+t]&255,e=a[i+t]}function un(e,t,n,r,a,i,s){var o;if(null==e)cn(null,null,n,r,a,i,s);else for(o=0;o<s;++o)a[i+o]=e[t+o]+n[r+o]&255}function An(e,t,n,r,a,i,s){if(null==e)cn(null,null,n,r,a,i,s);else{var o,l=e[t+0],c=l,u=l;for(o=0;o<s;++o)c=u+(l=e[t+o])-c,u=n[r+o]+(-256&c?0>c?0:255:c)&255,c=l,a[i+o]=u}}function dn(e,n,a,s){var o=n.width,l=n.o;if(t(null!=e&&null!=n),0>a||0>=s||a+s>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new ln,(c=null==e.ga)||(c=n.width*n.o,t(0==e.Gb.length),e.Gb=i(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var u=e.Fa,A=e.P,d=e.qc,h=e.mb,p=e.nb,f=A+1,m=d-1,y=c.l;if(t(null!=u&&null!=h&&null!=n),ma[0]=null,ma[1]=cn,ma[2]=un,ma[3]=An,c.ca=h,c.tb=p,c.c=n.width,c.i=n.height,t(0<c.c&&0<c.i),1>=d)n=0;else if(c.$a=3&u[A+0],c.Z=u[A+0]>>2&3,c.Lc=u[A+0]>>4&3,A=u[A+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||A)n=0;else if(y.put=he,y.ac=de,y.bc=pe,y.ma=c,y.width=n.width,y.height=n.height,y.Da=n.Da,y.v=n.v,y.va=n.va,y.j=n.j,y.o=n.o,c.$a)e:{t(1==c.$a),n=Ne();t:for(;;){if(null==n){n=0;break e}if(t(null!=c),c.mc=n,n.c=c.c,n.i=c.i,n.l=c.l,n.l.ma=c,n.l.width=c.c,n.l.height=c.i,n.a=0,g(n.m,u,f,m),!Fe(c.c,c.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&Ce(n.s)?(c.ic=1,u=n.c*n.i,n.Ta=null,n.Ua=0,n.V=i(u),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(c.ic=0,n=Ee(n,c.c)),!n)break t;n=1;break e}c.mc=null,n=0}else n=m>=c.c*c.i;c=!n}if(c)return null;1!=e.ga.Lc?e.Ga=0:s=l-a}t(null!=e.ga),t(a+s<=l);e:{if(n=(u=e.ga).c,l=u.l.o,0==u.$a){if(f=e.rc,m=e.Vc,y=e.Fa,A=e.P+1+a*n,d=e.mb,h=e.nb+a*n,t(A<=e.P+e.qc),0!=u.Z)for(t(null!=ma[u.Z]),c=0;c<s;++c)ma[u.Z](f,m,y,A,d,h,n),f=d,m=h,h+=n,A+=n;else for(c=0;c<s;++c)r(d,h,y,A,n),f=d,m=h,h+=n,A+=n;e.rc=f,e.Vc=m}else{if(t(null!=u.mc),n=a+s,t(null!=(c=u.mc)),t(n<=c.i),c.C>=n)n=1;else if(u.ic||gn(),u.ic){u=c.V,f=c.Ba,m=c.c;var b=c.i,w=(y=1,A=c.$/m,d=c.$%m,h=c.m,p=c.s,c.$),v=m*b,x=m*n,k=p.wc,S=w<x?we(p,d,A):null;t(w<=v),t(n<=b),t(Ce(p));t:for(;;){for(;!h.h&&w<x;){if(d&k||(S=we(p,d,A)),t(null!=S),B(h),256>(b=ye(S.G[0],S.H[0],h)))u[f+w]=b,++w,++d>=m&&(d=0,++A<=n&&!(A%16)&&Be(c,A));else{if(!(280>b)){y=0;break t}b=me(b-256,h);var I,N=ye(S.G[4],S.H[4],h);if(B(h),!(w>=(N=ge(m,N=me(N,h)))&&v-w>=b)){y=0;break t}for(I=0;I<b;++I)u[f+w+I]=u[f+w+I-N];for(w+=b,d+=b;d>=m;)d-=m,++A<=n&&!(A%16)&&Be(c,A);w<x&&d&k&&(S=we(p,d,A))}t(h.h==C(h))}Be(c,A>n?n:A);break t}!y||h.h&&w<v?(y=0,c.a=h.h?5:3):c.$=w,n=y}else n=Se(c,c.V,c.Ba,c.c,c.i,n,_e);if(!n){s=0;break e}}a+s>=l&&(e.Cc=1),s=1}if(!s)return null;if(e.Cc&&(null!=(s=e.ga)&&(s.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+a*o}function hn(e,t,n,r,a,i){for(;0<a--;){var s,o=e,l=t+(n?1:0),c=e,u=t+(n?0:3);for(s=0;s<r;++s){var A=c[u+4*s];255!=A&&(A*=32897,o[l+4*s+0]=o[l+4*s+0]*A>>23,o[l+4*s+1]=o[l+4*s+1]*A>>23,o[l+4*s+2]=o[l+4*s+2]*A>>23)}t+=i}}function pn(e,t,n,r,a){for(;0<r--;){var i;for(i=0;i<n;++i){var s=e[t+2*i+0],o=15&(c=e[t+2*i+1]),l=4369*o,c=(240&c|c>>4)*l>>16;e[t+2*i+0]=(240&s|s>>4)*l>>16&240|(15&s|s<<4)*l>>16>>4&15,e[t+2*i+1]=240&c|o}t+=a}}function fn(e,t,n,r,a,i,s,o){var l,c,u=255;for(c=0;c<a;++c){for(l=0;l<r;++l){var A=e[t+l];i[s+4*l]=A,u&=A}t+=n,s+=o}return 255!=u}function mn(e,t,n,r,a){var i;for(i=0;i<a;++i)n[r+i]=e[t+i]>>8}function gn(){Cr=hn,kr=pn,Br=fn,Sr=mn}function yn(n,r,a){e[n]=function(e,n,i,s,o,l,c,u,A,d,h,p,f,m,g,y,b){var w,v=b-1>>1,x=o[l+0]|c[u+0]<<16,C=A[d+0]|h[p+0]<<16;t(null!=e);var k=3*x+C+131074>>2;for(r(e[n+0],255&k,k>>16,f,m),null!=i&&(k=3*C+x+131074>>2,r(i[s+0],255&k,k>>16,g,y)),w=1;w<=v;++w){var B=o[l+w]|c[u+w]<<16,S=A[d+w]|h[p+w]<<16,I=x+B+C+S+524296,N=I+2*(B+C)>>3;k=N+x>>1,x=(I=I+2*(x+S)>>3)+B>>1,r(e[n+2*w-1],255&k,k>>16,f,m+(2*w-1)*a),r(e[n+2*w-0],255&x,x>>16,f,m+(2*w-0)*a),null!=i&&(k=I+C>>1,x=N+S>>1,r(i[s+2*w-1],255&k,k>>16,g,y+(2*w-1)*a),r(i[s+2*w+0],255&x,x>>16,g,y+(2*w+0)*a)),x=B,C=S}1&b||(k=3*x+C+131074>>2,r(e[n+b-1],255&k,k>>16,f,m+(b-1)*a),null!=i&&(k=3*C+x+131074>>2,r(i[s+b-1],255&k,k>>16,g,y+(b-1)*a)))}}function bn(){ga[Ur]=ya,ga[Or]=wa,ga[Mr]=ba,ga[Pr]=va,ga[Qr]=xa,ga[jr]=Ca,ga[Hr]=ka,ga[zr]=wa,ga[Wr]=va,ga[Vr]=xa,ga[Gr]=Ca}function wn(e){return e&~Ea?0>e?0:255:e>>Fa}function vn(e,t){return wn((19077*e>>8)+(26149*t>>8)-14234)}function xn(e,t,n){return wn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function Cn(e,t){return wn((19077*e>>8)+(33050*t>>8)-17685)}function kn(e,t,n,r,a){r[a+0]=vn(e,n),r[a+1]=xn(e,t,n),r[a+2]=Cn(e,t)}function Bn(e,t,n,r,a){r[a+0]=Cn(e,t),r[a+1]=xn(e,t,n),r[a+2]=vn(e,n)}function Sn(e,t,n,r,a){var i=xn(e,t,n);t=i<<3&224|Cn(e,t)>>3,r[a+0]=248&vn(e,n)|i>>5,r[a+1]=t}function In(e,t,n,r,a){var i=240&Cn(e,t)|15;r[a+0]=240&vn(e,n)|xn(e,t,n)>>4,r[a+1]=i}function Nn(e,t,n,r,a){r[a+0]=255,kn(e,t,n,r,a+1)}function Fn(e,t,n,r,a){Bn(e,t,n,r,a),r[a+3]=255}function En(e,t,n,r,a){kn(e,t,n,r,a),r[a+3]=255}function Ve(e,t){return 0>e?0:e>t?t:e}function _n(t,n,r){e[t]=function(e,t,a,i,s,o,l,c,u){for(var A=c+(-2&u)*r;c!=A;)n(e[t+0],a[i+0],s[o+0],l,c),n(e[t+1],a[i+0],s[o+0],l,c+r),t+=2,++i,++o,c+=2*r;1&u&&n(e[t+0],a[i+0],s[o+0],l,c)}}function Tn(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function Ln(e,t,n,r,a){switch(e>>>30){case 3:sr(t,n,r,a,0);break;case 2:or(t,n,r,a);break;case 1:cr(t,n,r,a)}}function Dn(e,t){var n,i,s=t.M,o=t.Nb,l=e.oc,c=e.pc+40,u=e.oc,A=e.pc+584,d=e.oc,h=e.pc+600;for(n=0;16>n;++n)l[c+32*n-1]=129;for(n=0;8>n;++n)u[A+32*n-1]=129,d[h+32*n-1]=129;for(0<s?l[c-1-32]=u[A-1-32]=d[h-1-32]=129:(a(l,c-32-1,127,21),a(u,A-32-1,127,9),a(d,h-32-1,127,9)),i=0;i<e.za;++i){var p=t.ya[t.aa+i];if(0<i){for(n=-1;16>n;++n)r(l,c+32*n-4,l,c+32*n+12,4);for(n=-1;8>n;++n)r(u,A+32*n-4,u,A+32*n+4,4),r(d,h+32*n-4,d,h+32*n+4,4)}var f=e.Gd,m=e.Hd+i,g=p.ad,y=p.Hc;if(0<s&&(r(l,c-32,f[m].y,0,16),r(u,A-32,f[m].f,0,8),r(d,h-32,f[m].ea,0,8)),p.Za){var b=l,w=c-32+16;for(0<s&&(i>=e.za-1?a(b,w,f[m].y[15],4):r(b,w,f[m+1].y,0,4)),n=0;4>n;n++)b[w+128+n]=b[w+256+n]=b[w+384+n]=b[w+0+n];for(n=0;16>n;++n,y<<=2)b=l,w=c+Ma[n],da[p.Ob[n]](b,w),Ln(y,g,16*+n,b,w)}else if(b=Tn(i,s,p.Ob[0]),Aa[b](l,c),0!=y)for(n=0;16>n;++n,y<<=2)Ln(y,g,16*+n,l,c+Ma[n]);for(n=p.Gc,b=Tn(i,s,p.Dd),ha[b](u,A),ha[b](d,h),y=g,b=u,w=A,255&(p=n|0)&&(170&p?lr(y,256,b,w):ur(y,256,b,w)),p=d,y=h,255&(n>>=8)&&(170&n?lr(g,320,p,y):ur(g,320,p,y)),s<e.Ub-1&&(r(f[m].y,0,l,c+480,16),r(f[m].f,0,u,A+224,8),r(f[m].ea,0,d,h+224,8)),n=8*o*e.B,f=e.sa,m=e.ta+16*i+16*o*e.R,g=e.qa,p=e.ra+8*i+n,y=e.Ha,b=e.Ia+8*i+n,n=0;16>n;++n)r(f,m+n*e.R,l,c+32*n,16);for(n=0;8>n;++n)r(g,p+n*e.B,u,A+32*n,8),r(y,b+n*e.B,d,h+32*n,8)}}function Rn(e,r,a,i,s,o,l,c,u){var A=[0],d=[0],h=0,p=null!=u?u.kd:0,f=null!=u?u:new rn;if(null==e||12>a)return 7;f.data=e,f.w=r,f.ha=a,r=[r],a=[a],f.gb=[f.gb];e:{var m=r,y=a,b=f.gb;if(t(null!=e),t(null!=y),t(null!=b),b[0]=0,12<=y[0]&&!n(e,m[0],"RIFF")){if(n(e,m[0]+8,"WEBP")){b=3;break e}var w=T(e,m[0]+4);if(12>w||4294967286<w){b=3;break e}if(p&&w>y[0]-8){b=7;break e}b[0]=w,m[0]+=12,y[0]-=12}b=0}if(0!=b)return b;for(w=0<f.gb[0],a=a[0];;){e:{var x=e;y=r,b=a;var C=A,k=d,B=m=[0];if((N=h=[h])[0]=0,8>b[0])b=7;else{if(!n(x,y[0],"VP8X")){if(10!=T(x,y[0]+4)){b=3;break e}if(18>b[0]){b=7;break e}var S=T(x,y[0]+8),I=1+_(x,y[0]+12);if(2147483648<=I*(x=1+_(x,y[0]+15))){b=3;break e}null!=B&&(B[0]=S),null!=C&&(C[0]=I),null!=k&&(k[0]=x),y[0]+=18,b[0]-=18,N[0]=1}b=0}}if(h=h[0],m=m[0],0!=b)return b;if(y=!!(2&m),!w&&h)return 3;if(null!=o&&(o[0]=!!(16&m)),null!=l&&(l[0]=y),null!=c&&(c[0]=0),l=A[0],m=d[0],h&&y&&null==u){b=0;break}if(4>a){b=7;break}if(w&&h||!w&&!h&&!n(e,r[0],"ALPH")){a=[a],f.na=[f.na],f.P=[f.P],f.Sa=[f.Sa];e:{S=e,b=r,w=a;var N=f.gb;C=f.na,k=f.P,B=f.Sa,I=22,t(null!=S),t(null!=w),x=b[0];var F=w[0];for(t(null!=C),t(null!=B),C[0]=null,k[0]=null,B[0]=0;;){if(b[0]=x,w[0]=F,8>F){b=7;break e}var E=T(S,x+4);if(4294967286<E){b=3;break e}var L=8+E+1&-2;if(I+=L,0<N&&I>N){b=3;break e}if(!n(S,x,"VP8 ")||!n(S,x,"VP8L")){b=0;break e}if(F[0]<L){b=7;break e}n(S,x,"ALPH")||(C[0]=S,k[0]=x+8,B[0]=E),x+=L,F-=L}}if(a=a[0],f.na=f.na[0],f.P=f.P[0],f.Sa=f.Sa[0],0!=b)break}a=[a],f.Ja=[f.Ja],f.xa=[f.xa];e:if(N=e,b=r,w=a,C=f.gb[0],k=f.Ja,B=f.xa,S=b[0],x=!n(N,S,"VP8 "),I=!n(N,S,"VP8L"),t(null!=N),t(null!=w),t(null!=k),t(null!=B),8>w[0])b=7;else{if(x||I){if(N=T(N,S+4),12<=C&&N>C-12){b=3;break e}if(p&&N>w[0]-8){b=7;break e}k[0]=N,b[0]+=8,w[0]-=8,B[0]=I}else B[0]=5<=w[0]&&47==N[S+0]&&!(N[S+4]>>5),k[0]=w[0];b=0}if(a=a[0],f.Ja=f.Ja[0],f.xa=f.xa[0],r=r[0],0!=b)break;if(4294967286<f.Ja)return 3;if(null==c||y||(c[0]=f.xa?2:1),l=[l],m=[m],f.xa){if(5>a){b=7;break}c=l,p=m,y=o,null==e||5>a?e=0:5<=a&&47==e[r+0]&&!(e[r+4]>>5)?(w=[0],N=[0],C=[0],g(k=new v,e,r,a),fe(k,w,N,C)?(null!=c&&(c[0]=w[0]),null!=p&&(p[0]=N[0]),null!=y&&(y[0]=C[0]),e=1):e=0):e=0}else{if(10>a){b=7;break}c=m,null==e||10>a||!Xe(e,r+3,a-3)?e=0:(p=e[r+0]|e[r+1]<<8|e[r+2]<<16,y=16383&(e[r+7]<<8|e[r+6]),e=16383&(e[r+9]<<8|e[r+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=f.Ja||!y||!e?e=0:(l&&(l[0]=y),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],m=m[0],h&&(A[0]!=l||d[0]!=m))return 3;null!=u&&(u[0]=f,u.offset=r-u.w,t(4294967286>r-u.w),t(u.offset==u.ha-a));break}return 0==b||7==b&&h&&null==u?(null!=o&&(o[0]|=null!=f.na&&0<f.na.length),null!=i&&(i[0]=l),null!=s&&(s[0]=m),0):b}function Un(e,t,n){var r=t.width,a=t.height,i=0,s=0,o=r,l=a;if(t.Da=null!=e&&0<e.Da,t.Da&&(o=e.cd,l=e.bd,i=e.v,s=e.j,11>n||(i&=-2,s&=-2),0>i||0>s||0>=o||0>=l||i+o>r||s+l>a))return 0;if(t.v=i,t.j=s,t.va=i+o,t.o=s+l,t.U=o,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!U(o,l,n=[e.ib],i=[e.hb]))return 0;t.ib=n[0],t.hb=i[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*r/4&&t.hb<3*a/4,t.Kb=0),1}function On(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Mn(e,t,n,r){if(null==r||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var a=n.cd,s=n.bd,o=-2&n.v,l=-2&n.j;if(0>o||0>l||0>=a||0>=s||o+a>e||l+s>t)return 2;e=a,t=s}if(n.da){if(!U(e,t,a=[n.ib],s=[n.hb]))return 2;e=a[0],t=s[0]}}r.width=e,r.height=t;e:{var c=r.width,u=r.height;if(e=r.S,0>=c||0>=u||!(e>=Ur&&13>e))e=2;else{if(0>=r.Rd&&null==r.sd){o=s=a=t=0;var A=(l=c*Ha[e])*u;if(11>e||(s=(u+1)/2*(t=(c+1)/2),12==e&&(o=(a=c)*u)),null==(u=i(A+2*s+o))){e=1;break e}r.sd=u,11>e?((c=r.f.RGBA).eb=u,c.fb=0,c.A=l,c.size=A):((c=r.f.kb).y=u,c.O=0,c.fa=l,c.Fd=A,c.f=u,c.N=0+A,c.Ab=t,c.Cd=s,c.ea=u,c.W=0+A+s,c.Db=t,c.Ed=s,12==e&&(c.F=u,c.J=0+A+2*s),c.Tc=o,c.lb=a)}if(t=1,a=r.S,s=r.width,o=r.height,a>=Ur&&13>a)if(11>a)e=r.f.RGBA,t&=(l=Math.abs(e.A))*(o-1)+s<=e.size,t&=l>=s*Ha[a],t&=null!=e.eb;else{e=r.f.kb,l=(s+1)/2,A=(o+1)/2,c=Math.abs(e.fa),u=Math.abs(e.Ab);var d=Math.abs(e.Db),h=Math.abs(e.lb),p=h*(o-1)+s;t&=c*(o-1)+s<=e.Fd,t&=u*(A-1)+l<=e.Cd,t=(t&=d*(A-1)+l<=e.Ed)&c>=s&u>=l&d>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==a&&(t&=h>=s,t&=p<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=On(r)),e}var Pn=64,Qn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],jn=24,Hn=32,zn=8,Wn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];P("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return j(j(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return j(e,t[n-1])},e.Predictor7=function(e,t,n){return j(e,t[n+0])},e.Predictor8=function(e,t,n){return j(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return j(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return j(j(e,t[n-1]),j(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var r=t[n+0];return 0>=W(r>>24&255,e>>24&255,(t=t[n-1])>>24&255)+W(r>>16&255,e>>16&255,t>>16&255)+W(r>>8&255,e>>8&255,t>>8&255)+W(255&r,255&e,255&t)?r:e},e.Predictor12=function(e,t,n){var r=t[n+0];return(H((e>>24&255)+(r>>24&255)-((t=t[n-1])>>24&255))<<24|H((e>>16&255)+(r>>16&255)-(t>>16&255))<<16|H((e>>8&255)+(r>>8&255)-(t>>8&255))<<8|H((255&e)+(255&r)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var r=t[n-1];return(z((e=j(e,t[n+0]))>>24&255,r>>24&255)<<24|z(e>>16&255,r>>16&255)<<16|z(e>>8&255,r>>8&255)<<8|z(255&e,255&r))>>>0};var Vn=e.PredictorAdd0;e.PredictorAdd1=V,P("Predictor2","PredictorAdd2"),P("Predictor3","PredictorAdd3"),P("Predictor4","PredictorAdd4"),P("Predictor5","PredictorAdd5"),P("Predictor6","PredictorAdd6"),P("Predictor7","PredictorAdd7"),P("Predictor8","PredictorAdd8"),P("Predictor9","PredictorAdd9"),P("Predictor10","PredictorAdd10"),P("Predictor11","PredictorAdd11"),P("Predictor12","PredictorAdd12"),P("Predictor13","PredictorAdd13");var Gn=e.PredictorAdd2;X("ColorIndexInverseTransform","MapARGB","32b",function(e){return e>>8&255},function(e){return e}),X("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(e){return e},function(e){return e>>8&255});var Kn,qn=e.ColorIndexInverseTransform,Xn=e.MapARGB,Jn=e.VP8LColorIndexInverseTransformAlpha,Yn=e.MapAlpha,Zn=e.VP8LPredictorsAdd=[];Zn.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var $n,er,tr,nr,rr,ar,ir,sr,or,lr,cr,ur,Ar,dr,hr,pr,fr,mr,gr,yr,br,wr,vr,xr,Cr,kr,Br,Sr,Ir=i(511),Nr=i(2041),Fr=i(225),Er=i(767),_r=0,Tr=Nr,Lr=Fr,Dr=Er,Rr=Ir,Ur=0,Or=1,Mr=2,Pr=3,Qr=4,jr=5,Hr=6,zr=7,Wr=8,Vr=9,Gr=10,Kr=[2,3,7],qr=[3,3,11],Xr=[280,256,256,256,40],Jr=[0,1,1,1,0],Yr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Zr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],$r=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ea=8,ta=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],na=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ra=null,aa=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ia=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],sa=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],oa=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],la=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ca=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ua=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Aa=[],da=[],ha=[],pa=1,fa=2,ma=[],ga=[];yn("UpsampleRgbLinePair",kn,3),yn("UpsampleBgrLinePair",Bn,3),yn("UpsampleRgbaLinePair",En,4),yn("UpsampleBgraLinePair",Fn,4),yn("UpsampleArgbLinePair",Nn,4),yn("UpsampleRgba4444LinePair",In,2),yn("UpsampleRgb565LinePair",Sn,2);var ya=e.UpsampleRgbLinePair,ba=e.UpsampleBgrLinePair,wa=e.UpsampleRgbaLinePair,va=e.UpsampleBgraLinePair,xa=e.UpsampleArgbLinePair,Ca=e.UpsampleRgba4444LinePair,ka=e.UpsampleRgb565LinePair,Ba=16,Sa=1<<Ba-1,Ia=-227,Na=482,Fa=6,Ea=(256<<Fa)-1,_a=0,Ta=i(256),La=i(256),Da=i(256),Ra=i(256),Ua=i(Na-Ia),Oa=i(Na-Ia);_n("YuvToRgbRow",kn,3),_n("YuvToBgrRow",Bn,3),_n("YuvToRgbaRow",En,4),_n("YuvToBgraRow",Fn,4),_n("YuvToArgbRow",Nn,4),_n("YuvToRgba4444Row",In,2),_n("YuvToRgb565Row",Sn,2);var Ma=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Pa=[0,2,8],Qa=[8,7,6,4,4,2,2,2,1,1,1,1],ja=1;this.WebPDecodeRGBA=function(e,n,r,a,i){var s=Or,o=new nn,l=new se;o.ba=l,l.S=s,l.width=[l.width],l.height=[l.height];var c=l.width,u=l.height,A=new oe;if(null==A||null==e)var d=2;else t(null!=A),d=Rn(e,n,r,A.width,A.height,A.Pd,A.Qd,A.format,null);if(0!=d?c=0:(null!=c&&(c[0]=A.width[0]),null!=u&&(u[0]=A.height[0]),c=1),c){l.width=l.width[0],l.height=l.height[0],null!=a&&(a[0]=l.width),null!=i&&(i[0]=l.height);e:{if(a=new Ge,(i=new rn).data=e,i.w=n,i.ha=r,i.kd=1,n=[0],t(null!=i),(0==(e=Rn(i.data,i.w,i.ha,null,null,null,n,null,i))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=o),a.data=i.data,a.w=i.w+i.offset,a.ha=i.ha-i.offset,a.put=he,a.ac=de,a.bc=pe,a.ma=o,i.xa){if(null==(e=Ne())){o=1;break e}if(function(e,n){var r=[0],a=[0],i=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,g(e.m,n.data,n.w,n.ha),!fe(e.m,r,a,i)){e.a=3;break t}if(e.xb=fa,n.width=r[0],n.height=a[0],!Fe(r[0],a[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,a)){if(a=0==(n=Mn(a.width,a.height,o.Oa,o.ba))){t:{a=e;n:for(;;){if(null==a){a=0;break t}if(t(null!=a.s.yc),t(null!=a.s.Ya),t(0<a.s.Wb),t(null!=(r=a.l)),t(null!=(i=r.ma)),0!=a.xb){if(a.ca=i.ba,a.tb=i.tb,t(null!=a.ca),!Un(i.Oa,r,Pr)){a.a=2;break n}if(!Ee(a,r.width))break n;if(r.da)break n;if((r.da||re(a.ca.S))&&gn(),11>a.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=a.ca.f.kb.F&&gn()),a.Pb&&0<a.s.ua&&null==a.s.vb.X&&!L(a.s.vb,a.s.Wa.Xa)){a.a=1;break n}a.xb=0}if(!Se(a,a.V,a.Ba,a.c,a.i,r.o,xe))break n;i.Dc=a.Ma,a=1;break t}t(0!=a.a),a=0}a=!a}a&&(n=e.a)}else n=e.a}else{if(null==(e=new Ke)){o=1;break e}if(e.Fa=i.na,e.P=i.P,e.qc=i.Sa,Je(e,a)){if(0==(n=Mn(a.width,a.height,o.Oa,o.ba))){if(e.Aa=0,r=o.Oa,t(null!=(i=e)),null!=r){if(0<(c=0>(c=r.Md)?0:100<c?255:255*c/100)){for(u=A=0;4>u;++u)12>(d=i.pb[u]).lc&&(d.ia=c*Qa[0>d.lc?0:d.lc]>>3),A|=d.ia;A&&(alert("todo:VP8InitRandom"),i.ia=1)}i.Ga=r.Id,100<i.Ga?i.Ga=100:0>i.Ga&&(i.Ga=0)}$e(e,a)||(n=e.a)}}else n=e.a}0==n&&null!=o.Oa&&o.Oa.fd&&(n=On(o.ba))}o=n}s=0!=o?null:11>s?l.f.RGBA.eb:l.f.kb.y}else s=null;return s};var Ha=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var n="",r=0;r<4;r++)n+=String.fromCharCode(e[t++]);return n}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function A(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var d=[0],h=[0],p=[],f=new l,m=e,g=function(e,t){var n={},r=0,a=!1,i=0,s=0;if(n.frames=[],!function(e,t){for(var n=0;n<4;n++)if(e[t+n]!="RIFF".charCodeAt(n))return!0;return!1}(e,t)){for(A(e,t+=4),t+=8;t<e.length;){var o=c(e,t),l=A(e,t+=4);t+=4;var d=l+(1&l);switch(o){case"VP8 ":case"VP8L":void 0===n.frames[r]&&(n.frames[r]={}),(f=n.frames[r]).src_off=a?s:t-8,f.src_size=i+l+8,r++,a&&(a=!1,i=0,s=0);break;case"VP8X":(f=n.header={}).feature_flags=e[t];var h=t+4;f.canvas_width=1+u(e,h),h+=3,f.canvas_height=1+u(e,h),h+=3;break;case"ALPH":a=!0,i=d+8,s=t-8;break;case"ANIM":(f=n.header).bgcolor=A(e,t),h=t+4,f.loop_count=(m=e)[(g=h)+0]|m[g+1]<<8,h+=2;break;case"ANMF":var p,f;(f=n.frames[r]={}).offset_x=2*u(e,t),t+=3,f.offset_y=2*u(e,t),t+=3,f.width=1+u(e,t),t+=3,f.height=1+u(e,t),t+=3,f.duration=u(e,t),t+=3,p=e[t++],f.dispose=1&p,f.blend=p>>1&1}"ANMF"!=o&&(t+=d)}var m,g;return n}}(m,0);g.response=m,g.rgbaoutput=!0,g.dataurl=!1;var y=g.header?g.header:null,b=g.frames?g.frames:null;if(y){y.loop_counter=y.loop_count,d=[y.canvas_height],h=[y.canvas_width];for(var w=0;w<b.length&&0!=b[w].blend;w++);}var v=b[0],x=f.WebPDecodeRGBA(m,v.src_off,v.src_size,h,d);v.rgba=x,v.imgwidth=h[0],v.imgheight=d[0];for(var C=0;C<h[0]*d[0]*4;C++)p[C]=x[C];return this.width=h,this.height=d,this.data=p,this}!function(e){var t=function(t,r,l,c){var u=4,A=i;switch(c){case e.image_compression.FAST:u=1,A=a;break;case e.image_compression.MEDIUM:u=6,A=s;break;case e.image_compression.SLOW:u=9,A=o}var d=At(t=n(t,r,l,A),{level:u});return e.__addimage__.arrayBufferToBinaryString(d)},n=function(e,t,n,r){for(var a,i,s,o=e.length/t,l=new Uint8Array(e.length+o),A=c(),d=0;d<o;d+=1){if(s=d*t,a=e.subarray(s,s+t),r)l.set(r(a,n,i),s+d);else{for(var h,p=A.length,f=[];h<p;h+=1)f[h]=A[h](a,n,i);var m=u(f.concat());l.set(f[m],s+d)}i=a}return l},r=function(e){var t=Array.apply([],e);return t.unshift(0),t},a=function(e,t){var n,r=[],a=e.length;r[0]=1;for(var i=0;i<a;i+=1)n=e[i-t]||0,r[i+1]=e[i]-n+256&255;return r},i=function(e,t,n){var r,a=[],i=e.length;a[0]=2;for(var s=0;s<i;s+=1)r=n&&n[s]||0,a[s+1]=e[s]-r+256&255;return a},s=function(e,t,n){var r,a,i=[],s=e.length;i[0]=3;for(var o=0;o<s;o+=1)r=e[o-t]||0,a=n&&n[o]||0,i[o+1]=e[o]+256-(r+a>>>1)&255;return i},o=function(e,t,n){var r,a,i,s,o=[],c=e.length;o[0]=4;for(var u=0;u<c;u+=1)r=e[u-t]||0,a=n&&n[u]||0,i=n&&n[u-t]||0,s=l(r,a,i),o[u+1]=e[u]-s+256&255;return o},l=function(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),a=Math.abs(e-n),i=Math.abs(e+t-n-n);return r<=a&&r<=i?e:a<=i?t:n},c=function(){return[r,a,i,s,o]},u=function(e){var t=e.map(function(e){return e.reduce(function(e,t){return e+Math.abs(t)},0)});return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(n,r,a,i){var s,o,l,c,u,A,d,h,p,f,m,g,y,b,w,v=this.decode.FLATE_DECODE,x="";if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){if(n=(l=new ir(n)).imgData,o=l.bits,s=l.colorSpace,u=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){p=(h=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,m=new Uint8Array(p*l.colors),f=new Uint8Array(p);var C,k=l.pixelBitlength-l.bits;for(b=0,w=0;b<p;b++){for(y=h[b],C=0;C<k;)m[w++]=y>>>C&255,C+=l.bits;f[b]=y>>>C&255}}if(16===l.bits){p=(h=new Uint32Array(l.decodePixels().buffer)).length,m=new Uint8Array(p*(32/l.pixelBitlength)*l.colors),f=new Uint8Array(p*(32/l.pixelBitlength)),g=l.colors>1,b=0,w=0;for(var B=0;b<p;)y=h[b++],m[w++]=y>>>0&255,g&&(m[w++]=y>>>16&255,y=h[b++],m[w++]=y>>>0&255),f[B++]=y>>>16&255;o=8}i!==e.image_compression.NONE?(n=t(m,l.width*l.colors,l.colors,i),d=t(f,l.width,1,i)):(n=m,d=f,v=void 0)}if(3===l.colorType&&(s=this.color_spaces.INDEXED,A=l.palette,l.transparency.indexed)){var S=l.transparency.indexed,I=0;for(b=0,p=S.length;b<p;++b)I+=S[b];if((I/=255)===p-1&&-1!==S.indexOf(0))c=[S.indexOf(0)];else if(I!==p){for(h=l.decodePixels(),f=new Uint8Array(h.length),b=0,p=h.length;b<p;b++)f[b]=S[h[b]];d=t(f,l.width,1)}}var N=function(t){var n;switch(t){case e.image_compression.FAST:n=11;break;case e.image_compression.MEDIUM:n=13;break;case e.image_compression.SLOW:n=14;break;default:n=12}return n}(i);return v===this.decode.FLATE_DECODE&&(x="/Predictor "+N+" "),x+="/Colors "+u+" /BitsPerComponent "+o+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(d&&this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),{alias:a,data:n,index:r,filter:v,decodeParameters:x,transparency:c,palette:A,sMask:d,predictor:N,width:l.width,height:l.height,bitsPerComponent:o,colorSpace:s}}}}(Kt.API),function(e){e.processGIF89A=function(t,n,r,a){var i=new sr(t),s=i.width,o=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:o},u=new lr(100).encode(c,100);return e.processJPEG.call(this,u,n,r,a)},e.processGIF87A=e.processGIF89A}(Kt.API),cr.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:r,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},cr.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(e){mt.log("bit decode error:"+e)}},cr.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var l=this.palette[i>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}0!==n&&(this.pos+=4-n)}},cr.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*a*4,o=i>>4,l=15&i,c=this.palette[o];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*a+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}0!==t&&(this.pos+=4-t)}},cr.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*r;if(a<this.palette.length){var s=this.palette[a];this.data[i]=s.red,this.data[i+1]=s.green,this.data[i+2]=s.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}0!==e&&(this.pos+=4-e)}},cr.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(i&t)/t*255|0,o=(i>>5&t)/t*255|0,l=(i>>10&t)/t*255|0,c=i>>15?255:0,u=r*this.width*4+4*a;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=s,this.data[u+3]=c}this.pos+=e}},cr.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&n)/n*255|0,c=(s>>11)/t*255|0,u=a*this.width*4+4*i;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=e}},cr.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;this.data[s]=i,this.data[s+1]=a,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},cr.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=r,this.data[o+3]=s}},cr.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,a){var i=new cr(t,!1),s=i.width,o=i.height,l={data:i.getData(),width:s,height:o},c=new lr(100).encode(l,100);return e.processJPEG.call(this,c,n,r,a)}}(Kt.API),ur.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,a){var i=new ur(t),s=i.width,o=i.height,l={data:i.getData(),width:s,height:o},c=new lr(100).encode(l,100);return e.processJPEG.call(this,c,n,r,a)}}(Kt.API),Kt.API.processRGBA=function(e,t,n){for(var r=e.data,a=r.length,i=new Uint8Array(a/4*3),s=new Uint8Array(a/4),o=0,l=0,c=0;c<a;c+=4){var u=r[c],A=r[c+1],d=r[c+2],h=r[c+3];i[o++]=u,i[o++]=A,i[o++]=d,s[l++]=h}var p=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:p,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Kt.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},er=Kt.API,tr=er.getCharWidthsArray=function(e,t){var n,r,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,l=o.fof?o.fof:1,c=t.kerning?t.kerning:a.metadata.Unicode.kerning,u=c.fof?c.fof:1,A=!1!==t.doKerning,d=0,h=e.length,p=0,f=o[0]||l,m=[];for(n=0;n<h;n++)r=e.charCodeAt(n),"function"==typeof a.metadata.widthOfString?m.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(r))+s*(1e3/i)||0)/1e3):(d=A&&"object"===(0,ge.A)(c[r])&&!isNaN(parseInt(c[r][p],10))?c[r][p]/u:0,m.push((o[r]||f)/l+d)),p=r;return m},nr=er.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return er.processArabic&&(e=er.processArabic(e)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(e,n,a)/n:tr.apply(this,arguments).reduce(function(e,t){return e+t},0)},rr=function(e,t,n,r){for(var a=[],i=0,s=e.length,o=0;i!==s&&o+t[i]<n;)o+=t[i],i++;a.push(e.slice(0,i));var l=i;for(o=0;i!==s;)o+t[i]>r&&(a.push(e.slice(l,i)),o=0,l=i),o+=t[i],i++;return l!==i&&a.push(e.slice(l,i)),a},ar=function(e,t,n){n||(n={});var r,a,i,s,o,l,c,u=[],A=[u],d=n.textIndent||0,h=0,p=0,f=e.split(" "),m=tr.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?f[0].length+2:n.lineIndent||0){var g=Array(l).join(" "),y=[];f.map(function(e){(e=e.split(/\s*\n/)).length>1?y=y.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):y.push(e[0])}),f=y,l=nr.apply(this,[g,n])}for(i=0,s=f.length;i<s;i++){var b=0;if(r=f[i],l&&"\n"==r[0]&&(r=r.substr(1),b=1),d+h+(p=(a=tr.apply(this,[r,n])).reduce(function(e,t){return e+t},0))>t||b){if(p>t){for(o=rr.apply(this,[r,a,t-(d+h),t]),u.push(o.shift()),u=[o.pop()];o.length;)A.push([o.shift()]);p=a.slice(r.length-(u[0]?u[0].length:0)).reduce(function(e,t){return e+t},0)}else u=[r];A.push(u),d=p+l,h=m}else u.push(r),d+=h+p,h=m}return c=l?function(e,t){return(t?g:"")+e.join(" ")}:function(e){return e.join(" ")},A.map(c)},er.splitTextToSize=function(e,t,n){var r,a=(n=n||{}).fontSize||this.internal.getFontSize(),i=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var s=1*this.internal.scaleFactor*t/a;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=n.lineIndent;var o,l,c=[];for(o=0,l=r.length;o<l;o++)c=c.concat(ar.apply(this,[r[o],s,i]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},a=0;a<16;a++)n[t[a]]="0123456789abcdef"[a],r["0123456789abcdef"[a]]=t[a];var i=function(e){return"0x"+parseInt(e,10).toString(16)},s=e.__fontmetrics__.compress=function(e){var t,n,a,o,l=["{"];for(var c in e){if(t=e[c],isNaN(parseInt(c,10))?n="'"+c+"'":(c=parseInt(c,10),n=(n=i(c).slice(2)).slice(0,-1)+r[n.slice(-1)]),"number"==typeof t)t<0?(a=i(t).slice(3),o="-"):(a=i(t).slice(2),o=""),a=o+a.slice(0,-1)+r[a.slice(-1)];else{if("object"!==(0,ge.A)(t))throw new Error("Don't know what to do with value type "+(0,ge.A)(t)+".");a=s(t)}l.push(n+a)}return l.push("}"),l.join("")},o=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,r,a,i,s={},o=1,l=s,c=[],u="",A="",d=e.length-1,h=1;h<d;h+=1)"'"==(i=e[h])?t?(a=t.join(""),t=void 0):t=[]:t?t.push(i):"{"==i?(c.push([l,a]),l={},a=void 0):"}"==i?((r=c.pop())[0][r[1]]=l,a=void 0,l=r[0]):"-"==i?o=-1:void 0===a?n.hasOwnProperty(i)?(u+=n[i],a=parseInt(u,16)*o,o=1,u=""):u+=i:n.hasOwnProperty(i)?(A+=n[i],l[a]=parseInt(A,16)*o,o=1,a=void 0,A=""):A+=i;return s},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=u.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var r=c.Unicode[t.postScriptName];r&&(t.metadata.Unicode.encoding=r,t.encoding=r.codePages[0])}])}(Kt.API),function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n};e.API.events.push(["addFont",function(n){var r=void 0,a=n.font,i=n.instance;if(!a.isStandardFont){if(void 0===i)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if("string"!=typeof(r=!1===i.existsFileInVFS(a.postScriptName)?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");!function(n,r){r=/^\x00\x01\x00\x00/.test(r)?t(r):t(wt(r)),n.metadata=e.API.TTFFont.open(r),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(a,r)}}])}(Kt),function(){function e(){return(pt.canvg?Promise.resolve(pt.canvg):n.e(455).then(n.bind(n,8455))).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}Kt.API.addSvgAsImage=function(t,n,r,a,i,s,o,l){if(isNaN(n)||isNaN(r))throw mt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(i))throw mt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=a,c.height=i;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var A={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return e().then(function(e){return e.fromString(u,t,A)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(e){return e.render(A)}).then(function(){d.addImage(c.toDataURL("image/jpeg",1),n,r,a,i,o,l)})}}(),Kt.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var a=0;a<this.internal.pages[r].length;a++)this.internal.pages[r][a]=this.internal.pages[r][a].replace(t,n);return this},Kt.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,a,i,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],c=0,u=0,A=0;function d(e,t){var n,r=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var h=o.length;for(A=0;A<h;A+=1)n[o[A]].value=n[o[A]].defaultValue,n[o[A]].explicitSet=!1}if("object"===(0,ge.A)(e))for(a in e)if(i=e[a],d(o,a)&&void 0!==i){if("boolean"===n[a].type&&"boolean"==typeof i)n[a].value=i;else if("name"===n[a].type&&d(n[a].valueSet,i))n[a].value=i;else if("integer"===n[a].type&&Number.isInteger(i))n[a].value=i;else if("array"===n[a].type){for(c=0;c<i.length;c+=1)if(r=!0,1===i[c].length&&"number"==typeof i[c][0])l.push(String(i[c]-1));else if(i[c].length>1){for(u=0;u<i[c].length;u+=1)"number"!=typeof i[c][u]&&(r=!1);!0===r&&l.push([i[c][0]-1,i[c][1]-1].join(" "))}n[a].value="["+l.join(" ")+"]"}else n[a].value=n[a].defaultValue;n[a].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),i=unescape(encodeURIComponent("</x:xmpmeta>")),s=n.length+r.length+a.length+t.length+i.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+s+" >>"),this.internal.write("stream"),this.internal.write(t+n+r+a+i),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Kt.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,r=t.metadata.Unicode.widths,a=["","0","00","000","0000"],i=[""],s=0,o=e.length;s<o;++s){if(n=t.metadata.characterToGlyph(e.charCodeAt(s)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(s),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return i.join("");n=n.toString(16),i.push(a[4-n.length],n)}return i.join("")},r=function(e){var t,n,r,a,i,s,o;for(i="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],s=0,o=(n=Object.keys(e).sort(function(e,t){return e-t})).length;s<o;s++)t=n[s],r.length>=100&&(i+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(a=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),r.push("<"+t+"><"+a+">"));return r.length&&(i+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),i+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,a=t.out,i=t.newObject,s=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var o=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),c="",u=0;u<l.length;u++)c+=String.fromCharCode(l[u]);var A=i();s({data:c,addLength1:!0,objectId:A}),a("endobj");var d=i();s({data:r(n.metadata.toUnicode),addLength1:!0,objectId:d}),a("endobj");var h=i();a("<<"),a("/Type /FontDescriptor"),a("/FontName /"+jt(n.fontName)),a("/FontFile2 "+A+" 0 R"),a("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),a("/Flags "+n.metadata.flags),a("/StemV "+n.metadata.stemV),a("/ItalicAngle "+n.metadata.italicAngle),a("/Ascent "+n.metadata.ascender),a("/Descent "+n.metadata.decender),a("/CapHeight "+n.metadata.capHeight),a(">>"),a("endobj");var p=i();a("<<"),a("/Type /Font"),a("/BaseFont /"+jt(n.fontName)),a("/FontDescriptor "+h+" 0 R"),a("/W "+e.API.PDFObject.convert(o)),a("/CIDToGIDMap /Identity"),a("/DW 1000"),a("/Subtype /CIDFontType2"),a("/CIDSystemInfo"),a("<<"),a("/Supplement 0"),a("/Registry (Adobe)"),a("/Ordering ("+n.encoding+")"),a(">>"),a(">>"),a("endobj"),n.objectNumber=i(),a("<<"),a("/Type /Font"),a("/Subtype /Type0"),a("/ToUnicode "+d+" 0 R"),a("/BaseFont /"+jt(n.fontName)),a("/Encoding /"+n.encoding),a("/DescendantFonts ["+p+" 0 R]"),a(">>"),a("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,a=t.out,i=t.newObject,s=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var o=n.metadata.rawData,l="",c=0;c<o.length;c++)l+=String.fromCharCode(o[c]);var u=i();s({data:l,addLength1:!0,objectId:u}),a("endobj");var A=i();s({data:r(n.metadata.toUnicode),addLength1:!0,objectId:A}),a("endobj");var d=i();a("<<"),a("/Descent "+n.metadata.decender),a("/CapHeight "+n.metadata.capHeight),a("/StemV "+n.metadata.stemV),a("/Type /FontDescriptor"),a("/FontFile2 "+u+" 0 R"),a("/Flags 96"),a("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),a("/FontName /"+jt(n.fontName)),a("/ItalicAngle "+n.metadata.italicAngle),a("/Ascent "+n.metadata.ascender),a(">>"),a("endobj"),n.objectNumber=i();for(var h=0;h<n.metadata.hmtx.widths.length;h++)n.metadata.hmtx.widths[h]=parseInt(n.metadata.hmtx.widths[h]*(1e3/n.metadata.head.unitsPerEm));a("<</Subtype/TrueType/Type/Font/ToUnicode "+A+" 0 R/BaseFont/"+jt(n.fontName)+"/FontDescriptor "+d+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),a("endobj"),n.isAlreadyPutted=!0}}(t)}]);var a=function(e){var t,r=e.text||"",a=e.x,i=e.y,s=e.options||{},o=e.mutex||{},l=o.pdfEscape,c=o.activeFontKey,u=o.fonts,A=c,d="",h=0,p="",f=u[A].encoding;if("Identity-H"!==u[A].encoding)return{text:r,x:a,y:i,options:s,mutex:o};for(p=r,A=c,Array.isArray(r)&&(p=r[0]),h=0;h<p.length;h+=1)u[A].metadata.hasOwnProperty("cmap")&&(t=u[A].metadata.cmap.unicode.codeMap[p[h].charCodeAt(0)]),t||p[h].charCodeAt(0)<256&&u[A].metadata.hasOwnProperty("Unicode")?d+=p[h]:d+="";var m="";return parseInt(A.slice(1))<14||"WinAnsiEncoding"===f?m=l(d,A).split("").map(function(e){return e.charCodeAt(0).toString(16)}).join(""):"Identity-H"===f&&(m=n(d,u[A])),o.isHex=!0,{text:m,x:a,y:i,options:s,mutex:o}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],r={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var i=0;for(i=0;i<t.length;i+=1)Array.isArray(t[i])&&3===t[i].length?n.push([a(Object.assign({},r,{text:t[i][0]})).text,t[i][1],t[i][2]]):n.push(a(Object.assign({},r,{text:t[i]})).text);e.text=n}else e.text=a(Object.assign({},r,{text:t})).text}])}(Kt),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(Kt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,r,a,i,s,o,l,c=t,u=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],A=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},h={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],f=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),m=!1,g=0;this.__bidiEngine__={};var y=function(e){var t=e.charCodeAt(),n=t>>8,r=h[n];return void 0!==r?c[256*r+(255&t)]:252===n||253===n?"AL":f.test(n)?"L":8===n?"R":"N"},b=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=y(e.charAt(n))))return!1;if("R"===t)return!0}return!1},w=function(e,t,s,o){var l,c,u,A,d=t[o];switch(d){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":m=!1;break;case"N":case"AN":break;case"EN":m&&(d="AN");break;case"AL":m=!0,d="R";break;case"WS":case"BN":d="N";break;case"CS":o<1||o+1>=t.length||"EN"!==(l=s[o-1])&&"AN"!==l||"EN"!==(c=t[o+1])&&"AN"!==c?d="N":m&&(c="AN"),d=c===l?c:"N";break;case"ES":d="EN"===(l=o>0?s[o-1]:"B")&&o+1<t.length&&"EN"===t[o+1]?"EN":"N";break;case"ET":if(o>0&&"EN"===s[o-1]){d="EN";break}if(m){d="N";break}for(u=o+1,A=t.length;u<A&&"ET"===t[u];)u++;d=u<A&&"EN"===t[u]?"EN":"N";break;case"NSM":if(a&&!i){for(A=t.length,u=o+1;u<A&&"NSM"===t[u];)u++;if(u<A){var h=e[o],p=h>=1425&&h<=2303||64286===h;if(l=t[u],p&&("R"===l||"AL"===l)){d="R";break}}}d=o<1||"B"===(l=t[o-1])?"N":s[o-1];break;case"B":m=!1,n=!0,d=g;break;case"S":r=!0,d="N"}return d},v=function(e,t,n){var r=e.split("");return n&&x(r,n,{hiLevel:g}),r.reverse(),t&&t.reverse(),r.join("")},x=function(e,t,a){var i,s,o,l,c,h=-1,p=e.length,f=0,b=[],v=g?A:u,x=[];for(m=!1,n=!1,r=!1,s=0;s<p;s++)x[s]=y(e[s]);for(o=0;o<p;o++){if(c=f,b[o]=w(e,x,b,o),i=240&(f=v[c][d[b[o]]]),f&=15,t[o]=l=v[f][5],i>0)if(16===i){for(s=h;s<o;s++)t[s]=1;h=-1}else h=-1;if(v[f][6])-1===h&&(h=o);else if(h>-1){for(s=h;s<o;s++)t[s]=l;h=-1}"B"===x[o]&&(t[o]=0),a.hiLevel|=l}r&&function(e,t,n){for(var r=0;r<n;r++)if("S"===e[r]){t[r]=g;for(var a=r-1;a>=0&&"WS"===e[a];a--)t[a]=g}}(x,t,p)},C=function(e,t,r,a,i){if(!(i.hiLevel<e)){if(1===e&&1===g&&!n)return t.reverse(),void(r&&r.reverse());for(var s,o,l,c,u=t.length,A=0;A<u;){if(a[A]>=e){for(l=A+1;l<u&&a[l]>=e;)l++;for(c=A,o=l-1;c<o;c++,o--)s=t[c],t[c]=t[o],t[o]=s,r&&(s=r[c],r[c]=r[o],r[o]=s);A=l}A++}}},k=function(e,t,n){var r=e.split(""),a={hiLevel:g};return n||(n=[]),x(r,n,a),function(e,t,n){if(0!==n.hiLevel&&l)for(var r,a=0;a<e.length;a++)1===t[a]&&(r=p.indexOf(e[a]))>=0&&(e[a]=p[r+1])}(r,n,a),C(2,r,t,n,a),C(1,r,t,n,a),r.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===i&&(i=b(e)),void 0===o&&(o=b(e))}(e,t),a||!s||o)if(a&&s&&i^o)g=i?1:0,e=v(e,t,n);else if(!a&&s&&o)g=i?1:0,e=k(e,t,n),e=v(e,t);else if(!a||i||s||o){if(a&&!s&&i^o)e=v(e,t),i?(g=0,e=k(e,t,n)):(g=1,e=k(e,t,n),e=v(e,t));else if(a&&i&&!s&&o)g=1,e=k(e,t,n),e=v(e,t);else if(!a&&!s&&i^o){var r=l;i?(g=1,e=k(e,t,n),g=0,l=!1,e=k(e,t,n),l=r):(g=0,e=k(e,t,n),e=v(e,t),g=1,l=!1,e=k(e,t,n),l=r,e=v(e,t))}}else g=0,e=k(e,t,n);else g=i?1:0,e=k(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(a=e.isInputVisual,s=e.isOutputVisual,i=e.isInputRtl,o=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text;e.x,e.y;var r=e.options||{};e.mutex,r.lang;var a=[];if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,n.setOptions(r),"[object Array]"===Object.prototype.toString.call(t)){var i=0;for(a=[],i=0;i<t.length;i+=1)"[object Array]"===Object.prototype.toString.call(t[i])?a.push([n.doBidiReorder(t[i][0]),t[i][1],t[i][2]]):a.push([n.doBidiReorder(t[i])]);e.text=a}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(Kt),Kt.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new dr(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new _r(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new hr(this.contents),this.head=new mr(this),this.name=new Cr(this),this.cmap=new yr(this),this.toUnicode={},this.hhea=new br(this),this.maxp=new kr(this),this.hmtx=new Br(this),this.post=new vr(this),this.os2=new wr(this),this.loca=new Er(this),this.glyf=new Ir(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,r,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,r,a;for(a=[],t=0,n=(r=this.bbox).length;t<n;t++)e=r[t],a.push(Math.round(e*this.scaleFactor));return a}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),0!=(32768&(t=r>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(a=this.familyClass)||2===a||3===a||4===a||5===a||7===a,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var r,a,i,s;for(i=0,a=0,s=(e=""+e).length;0<=s?a<s:a>s;a=0<=s?++a:--a)r=e.charCodeAt(a),i+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return i*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var Ar,dr=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,r,a,i,s,o;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),a=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^a)+65536*(255^i)+256*(255^s)+(255^o)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*a+65536*i+256*s+o},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,r,a;for(a=[],n=0,r=e.length;n<r;n++)t=e[n],a.push(this.writeByte(t));return a},e}(),hr=function(){var e;function t(e){var t,n,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:n>r;n=0<=r?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,r,a,i,s,o,l,c,u,A,d,h,p;for(p in d=Object.keys(t).length,o=Math.log(2),u=16*Math.floor(Math.log(d)/o),i=Math.floor(u/o),c=16*d-u,(r=new dr).writeInt(this.scalarType),r.writeShort(d),r.writeShort(u),r.writeShort(i),r.writeShort(c),a=16*d,l=r.pos+a,s=null,h=[],t)for(A=t[p],r.writeString(p),r.writeInt(e(A)),r.writeInt(l),r.writeInt(A.length),h=h.concat(A),"head"===p&&(s=l),l+=A.length;l%4;)h.push(0),l++;return r.write(h),n=2981146554-e(r.data),r.pos=s+8,r.writeUInt32(n),r.data},e=function(e){var t,n,r,a;for(e=Sr.call(e);e.length%4;)e.push(0);for(r=new dr(e),n=0,t=0,a=e.length;t<a;t=t+=4)n+=r.readUInt32();return 4294967295&n},t}(),pr={}.hasOwnProperty,fr=function(e,t){for(var n in t)pr.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Ar=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var mr=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fr(e,Ar),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new dr).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),gr=function(){function e(e,t){var n,r,a,i,s,o,l,c,u,A,d,h,p,f,m,g,y;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),u=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(d=e.readUInt16(),A=d/2,e.pos+=6,a=function(){var t,n;for(n=[],o=t=0;0<=A?t<A:t>A;o=0<=A?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,p=function(){var t,n;for(n=[],o=t=0;0<=A?t<A:t>A;o=0<=A?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],o=t=0;0<=A?t<A:t>A;o=0<=A?++t:--t)n.push(e.readUInt16());return n}(),c=function(){var t,n;for(n=[],o=t=0;0<=A?t<A:t>A;o=0<=A?++t:--t)n.push(e.readUInt16());return n}(),r=(this.length-e.pos+this.offset)/2,s=function(){var t,n;for(n=[],o=t=0;0<=r?t<r:t>r;o=0<=r?++t:--t)n.push(e.readUInt16());return n}(),o=m=0,y=a.length;m<y;o=++m)for(f=a[o],n=g=h=p[o];h<=f?g<=f:g>=f;n=h<=f?++g:--g)0===c[o]?i=n+l[o]:0!==(i=s[c[o]/2+(n-h)-(A-o)]||0)&&(i+=l[o]),this.codeMap[n]=65535&i}e.pos=u}return e.encode=function(e,t){var n,r,a,i,s,o,l,c,u,A,d,h,p,f,m,g,y,b,w,v,x,C,k,B,S,I,N,F,E,_,T,L,D,R,U,O,M,P,Q,j,H,z,W,V,G,K;switch(F=new dr,i=Object.keys(e).sort(function(e,t){return e-t}),t){case"macroman":for(p=0,f=function(){var e=[];for(h=0;h<256;++h)e.push(0);return e}(),g={0:0},a={},E=0,D=i.length;E<D;E++)null==g[W=e[r=i[E]]]&&(g[W]=++p),a[r]={old:e[r],new:g[e[r]]},f[r]=g[e[r]];return F.writeUInt16(1),F.writeUInt16(0),F.writeUInt32(12),F.writeUInt16(0),F.writeUInt16(262),F.writeUInt16(0),F.write(f),{charMap:a,subtable:F.data,maxGlyphID:p+1};case"unicode":for(I=[],u=[],y=0,g={},n={},m=l=null,_=0,R=i.length;_<R;_++)null==g[w=e[r=i[_]]]&&(g[w]=++y),n[r]={old:w,new:g[w]},s=g[w]-r,null!=m&&s===l||(m&&u.push(m),I.push(r),l=s),m=r;for(m&&u.push(m),u.push(65535),I.push(65535),B=2*(k=I.length),C=2*Math.pow(Math.log(k)/Math.LN2,2),A=Math.log(C/2)/Math.LN2,x=2*k-C,o=[],v=[],d=[],h=T=0,U=I.length;T<U;h=++T){if(S=I[h],c=u[h],65535===S){o.push(0),v.push(0);break}if(S-(N=n[S].new)>=32768)for(o.push(0),v.push(2*(d.length+k-h)),r=L=S;S<=c?L<=c:L>=c;r=S<=c?++L:--L)d.push(n[r].new);else o.push(N-S),v.push(0)}for(F.writeUInt16(3),F.writeUInt16(1),F.writeUInt32(12),F.writeUInt16(4),F.writeUInt16(16+8*k+2*d.length),F.writeUInt16(0),F.writeUInt16(B),F.writeUInt16(C),F.writeUInt16(A),F.writeUInt16(x),H=0,O=u.length;H<O;H++)r=u[H],F.writeUInt16(r);for(F.writeUInt16(0),z=0,M=I.length;z<M;z++)r=I[z],F.writeUInt16(r);for(V=0,P=o.length;V<P;V++)s=o[V],F.writeUInt16(s);for(G=0,Q=v.length;G<Q;G++)b=v[G],F.writeUInt16(b);for(K=0,j=d.length;K<j;K++)p=d[K],F.writeUInt16(p);return{charMap:n,subtable:F.data,maxGlyphID:y+1}}},e}(),yr=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fr(e,Ar),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,n,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)t=new gr(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var n,r;return null==t&&(t="macroman"),n=gr.encode(e,t),(r=new dr).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},e}(),br=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fr(e,Ar),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),wr=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fr(e,Ar),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),vr=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fr(e,Ar),e.prototype.tag="post",e.prototype.parse=function(e){var t,n,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)t=e.readByte(),r.push(this.names.push(e.readString(t)));return r;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,r;for(r=[],a=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;a=0<=n?++t:--t)r.push(e.readUInt32());return r}.call(this)}},e}(),xr=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Cr=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fr(e,Ar),e.prototype.tag="name",e.prototype.parse=function(e){var t,n,r,a,i,s,o,l,c,u,A;for(e.pos=this.offset,e.readShort(),t=e.readShort(),s=e.readShort(),n=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+s+e.readShort()});for(o={},a=c=0,u=n.length;c<u;a=++c)r=n[a],e.pos=r.offset,l=e.readString(r.length),i=new xr(l,r),null==o[A=r.nameID]&&(o[A]=[]),o[r.nameID].push(i);this.strings=o,this.copyright=o[0],this.fontFamily=o[1],this.fontSubfamily=o[2],this.uniqueSubfamily=o[3],this.fontName=o[4],this.version=o[5];try{this.postscriptName=o[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=o[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=o[7],this.manufacturer=o[8],this.designer=o[9],this.description=o[10],this.vendorUrl=o[11],this.designerUrl=o[12],this.license=o[13],this.licenseUrl=o[14],this.preferredFamily=o[15],this.preferredSubfamily=o[17],this.compatibleFull=o[18],this.sampleText=o[19]},e}(),kr=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fr(e,Ar),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),Br=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fr(e,Ar),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,n,r,a,i,s,o;for(e.pos=this.offset,this.metrics=[],t=0,s=this.file.hhea.numberOfMetrics;0<=s?t<s:t>s;t=0<=s?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,a;for(a=[],t=n=0;0<=r?n<r:n>r;t=0<=r?++n:--n)a.push(e.readInt16());return a}(),this.widths=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.metrics).length;e<t;e++)a=n[e],r.push(a.advance);return r}.call(this),n=this.widths[this.widths.length-1],o=[],t=i=0;0<=r?i<r:i>r;t=0<=r?++i:--i)o.push(this.widths.push(n));return o},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),Sr=[].slice,Ir=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fr(e,Ar),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,n,r,a,i,s,o,l,c,u;return e in this.cache?this.cache[e]:(a=this.file.loca,t=this.file.contents,n=a.indexOf(e),0===(r=a.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,i=(s=new dr(t.read(r))).readShort(),l=s.readShort(),u=s.readShort(),o=s.readShort(),c=s.readShort(),this.cache[e]=-1===i?new Fr(s,l,u,o,c):new Nr(s,i,l,u,o,c),this.cache[e]))},e.prototype.encode=function(e,t,n){var r,a,i,s,o;for(i=[],a=[],s=0,o=t.length;s<o;s++)r=e[t[s]],a.push(i.length),r&&(i=i.concat(r.encode(n)));return a.push(i.length),{table:i,offsets:a}},e}(),Nr=function(){function e(e,t,n,r,a,i){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=a,this.yMax=i,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Fr=function(){function e(e,t,n,r,a){var i,s;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;s=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&s;)i.pos+=1&s?4:2,128&s?i.pos+=8:64&s?i.pos+=4:8&s&&(i.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new dr(Sr.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),Er=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return fr(e,Ar),e.prototype.tag="loca",e.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=2)r.push(2*e.readUInt16());return r}.call(this):function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=4)r.push(e.readUInt32());return r}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),r=0,a=0,i=0;i<n.length;++i)if(n[i]=r,a<t.length&&t[a]==i){++a,n[i]=r;var s=this.offsets[i],o=this.offsets[i+1]-s;o>0&&(r+=o)}for(var l=new Array(4*n.length),c=0;c<n.length;++c)l[4*c+3]=255&n[c],l[4*c+2]=(65280&n[c])>>8,l[4*c+1]=(16711680&n[c])>>16,l[4*c]=(4278190080&n[c])>>24;return l},e}(),_r=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,r,a;for(t in r=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[t],e[t]=r[n];return e},e.prototype.glyphsFor=function(e){var t,n,r,a,i,s,o;for(r={},i=0,s=e.length;i<s;i++)r[a=e[i]]=this.font.glyf.glyphFor(a);for(a in t=[],r)(null!=(n=r[a])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(a in o=this.glyphsFor(t))n=o[a],r[a]=n;return r},e.prototype.encode=function(e,t){var n,r,a,i,s,o,l,c,u,A,d,h,p,f,m;for(r in n=yr.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),d={0:0},m=n.charMap)d[(o=m[r]).old]=o.new;for(h in A=n.maxGlyphID,i)h in d||(d[h]=A++);return c=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(d),u=Object.keys(c).sort(function(e,t){return e-t}),p=function(){var e,t,n;for(n=[],e=0,t=u.length;e<t;e++)s=u[e],n.push(c[s]);return n}(),a=this.font.glyf.encode(i,p,d),l=this.font.loca.encode(a.offsets,p),f={cmap:this.font.cmap.raw(),glyf:a.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(f["OS/2"]=this.font.os2.raw()),this.font.directory.encode(f)},e}();function Tr(e,t,n,r,a){r=r||{};var i=a.internal.scaleFactor,s=a.internal.getFontSize()/i,o=s*(a.getLineHeightFactor?a.getLineHeightFactor():1.15),l="",c=1;if("middle"!==r.valign&&"bottom"!==r.valign&&"center"!==r.halign&&"right"!==r.halign||(c=(l="string"===typeof e?e.split(/\r\n|\r|\n/g):e).length||1),n+=s*(2-1.15),"middle"===r.valign?n-=c/2*o:"bottom"===r.valign&&(n-=c*o),"center"===r.halign||"right"===r.halign){var u=s;if("center"===r.halign&&(u*=.5),l&&c>=1){for(var A=0;A<l.length;A++)a.text(l[A],t-a.getStringUnitWidth(l[A])*u,n),n+=o;return a}t-=a.getStringUnitWidth(e)*u}return"justify"===r.halign?a.text(e,t,n,{maxWidth:r.maxWidth||100,align:"justify"}):a.text(e,t,n),a}Kt.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var r,a,i,s;if(Array.isArray(n))return"["+function(){var e,a,i;for(i=[],e=0,a=n.length;e<a;e++)r=n[e],i.push(t.convert(r));return i}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(a in i=["<<"],n)s=n[a],i.push("/"+a+" "+t.convert(s));return i.push(">>"),i.join("\n")}return""+n},t}();var Lr={},Dr=function(){function e(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(e,t){void 0===t&&(t=null),t?t.__autoTableDocumentDefaults=e:Lr=e},e.unifyColor=function(e){return Array.isArray(e)?e:"number"===typeof e?[e,e,e]:"string"===typeof e?[e]:null},e.prototype.applyStyles=function(t,n){var r,a,i;void 0===n&&(n=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var s=this.jsPDFDocument.internal.getFont(),o=s.fontStyle,l=s.fontName;if(t.font&&(l=t.font),t.fontStyle){o=t.fontStyle;var c=this.getFontList()[l];c&&-1===c.indexOf(o)&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!n){var u=e.unifyColor(t.fillColor);u&&(r=this.jsPDFDocument).setFillColor.apply(r,u),(u=e.unifyColor(t.textColor))&&(a=this.jsPDFDocument).setTextColor.apply(a,u),(u=e.unifyColor(t.lineColor))&&(i=this.jsPDFDocument).setDrawColor.apply(i,u),"number"===typeof t.lineWidth&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(e,t,n){return this.jsPDFDocument.splitTextToSize(e,t,n)},e.prototype.rect=function(e,t,n,r,a){return this.jsPDFDocument.rect(e,t,n,r,a)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return Lr||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return null==e.width&&(e={width:e.getWidth(),height:e.getHeight()}),e},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),Rr=function(e,t){return Rr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Rr(e,t)};function Ur(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Rr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}"function"===typeof SuppressedError&&SuppressedError;var Or=function(e){function t(t){var n=e.call(this)||this;return n._element=t,n}return Ur(t,e),t}(Array);function Mr(e,t,n){n.applyStyles(t,!0);var r=(Array.isArray(e)?e:[e]).map(function(e){return n.getTextWidth(e)}).reduce(function(e,t){return Math.max(e,t)},0);return r}function Pr(e,t,n,r){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:i});var s=Qr(a,!1);s&&e.rect(n.x,n.y,t.getWidth(e.pageSize().width),r.y-n.y,s)}function Qr(e,t){var n=e>0,r=t||0===t;return n&&r?"DF":n?"S":r?"F":null}function jr(e,t){var n,r,a,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(3===e.length)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(2===e.length)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e=1===e.length?e[0]:t}return"object"===typeof e?("number"===typeof e.vertical&&(e.top=e.vertical,e.bottom=e.vertical),"number"===typeof e.horizontal&&(e.right=e.horizontal,e.left=e.horizontal),{left:null!==(n=e.left)&&void 0!==n?n:t,top:null!==(r=e.top)&&void 0!==r?r:t,right:null!==(a=e.right)&&void 0!==a?a:t,bottom:null!==(i=e.bottom)&&void 0!==i?i:t}):("number"!==typeof e&&(e=t),{top:e,right:e,bottom:e,left:e})}function Hr(e,t){var n=jr(t.settings.margin,0);return e.pageSize().width-(n.left+n.right)}function zr(e,t,n,r,a){var i={},s=96/72,o=Wr(t,function(e){return a.getComputedStyle(e).backgroundColor});null!=o&&(i.fillColor=o);var l=Wr(t,function(e){return a.getComputedStyle(e).color});null!=l&&(i.textColor=l);var c=function(e,t){var n=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],r=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=n.map(function(e){return parseInt(e||"0")/r}),s=jr(i,0);a>s.top&&(s.top=a);a>s.bottom&&(s.bottom=a);return s}(r,n);c&&(i.cellPadding=c);var u="borderTopColor",A=s*n,d=r.borderTopWidth;if(r.borderBottomWidth===d&&r.borderRightWidth===d&&r.borderLeftWidth===d){var h=(parseFloat(d)||0)/A;h&&(i.lineWidth=h)}else i.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/A,right:(parseFloat(r.borderRightWidth)||0)/A,bottom:(parseFloat(r.borderBottomWidth)||0)/A,left:(parseFloat(r.borderLeftWidth)||0)/A},i.lineWidth.top||(i.lineWidth.right?u="borderRightColor":i.lineWidth.bottom?u="borderBottomColor":i.lineWidth.left&&(u="borderLeftColor"));var p=Wr(t,function(e){return a.getComputedStyle(e)[u]});null!=p&&(i.lineColor=p);var f=["left","right","center","justify"];-1!==f.indexOf(r.textAlign)&&(i.halign=r.textAlign),-1!==(f=["middle","bottom","top"]).indexOf(r.verticalAlign)&&(i.valign=r.verticalAlign);var m=parseInt(r.fontSize||"");isNaN(m)||(i.fontSize=m/s);var g=function(e){var t="";("bold"===e.fontWeight||"bolder"===e.fontWeight||parseInt(e.fontWeight)>=700)&&(t="bold");"italic"!==e.fontStyle&&"oblique"!==e.fontStyle||(t+="italic");return t}(r);g&&(i.fontStyle=g);var y=(r.fontFamily||"").toLowerCase();return-1!==e.indexOf(y)&&(i.font=y),i}function Wr(e,t){var n=Vr(e,t);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var a=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])];return 0===parseInt(r[4])||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function Vr(e,t){var n=t(e);return"rgba(0, 0, 0, 0)"===n||"transparent"===n||"initial"===n||"inherit"===n?null==e.parentElement?null:Vr(e.parentElement,t):n}function Gr(e,t,n,r,a){var i,s,o;void 0===r&&(r=!1),void 0===a&&(a=!1),o="string"===typeof t?n.document.querySelector(t):t;var l=Object.keys(e.getFontList()),c=e.scaleFactor(),u=[],A=[],d=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:u,body:A,foot:d};for(var h=0;h<o.rows.length;h++){var p=o.rows[h],f=null===(s=null===(i=null===p||void 0===p?void 0:p.parentElement)||void 0===i?void 0:i.tagName)||void 0===s?void 0:s.toLowerCase(),m=Kr(l,c,n,p,r,a);m&&("thead"===f?u.push(m):"tfoot"===f?d.push(m):A.push(m))}return{head:u,body:A,foot:d}}function Kr(e,t,n,r,a,i){for(var s=new Or(r),o=0;o<r.cells.length;o++){var l=r.cells[o],c=n.getComputedStyle(l);if(a||"none"!==c.display){var u=void 0;i&&(u=zr(e,l,t,c,n)),s.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:u,_element:l,content:qr(l)})}}var A=n.getComputedStyle(r);if(s.length>0&&(a||"none"!==A.display))return s}function qr(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(e){return e.trim()}).join("\n"),t.innerText||t.textContent||""}function Xr(e,t,n,r,a){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),s=1;s<arguments.length;s++){var o=arguments[s];if(null!=o)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])}return i}function Jr(e,t){var n=new Dr(e),r=n.getDocumentOptions(),a=n.getGlobalOptions();!function(e,t,n){for(var r=0,a=[e,t,n];r<a.length;r++){var i=a[r];i&&"object"!==typeof i&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&"number"!==typeof i.startY&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}(a,r,t);var i,s=Xr({},a,r,t);"undefined"!==typeof window&&(i=window);var o=function(e,t,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(a){if("columnStyles"===a){var i=e[a],s=t[a],o=n[a];r.columnStyles=Xr({},i,s,o)}else{var l=[e,t,n].map(function(e){return e[a]||{}});r[a]=Xr({},l[0],l[1],l[2])}},i=0,s=Object.keys(r);i<s.length;i++){a(s[i])}return r}(a,r,t),l=function(e,t,n){for(var r={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,i=[e,t,n];a<i.length;a++){var s=i[a];s.didParseCell&&r.didParseCell.push(s.didParseCell),s.willDrawCell&&r.willDrawCell.push(s.willDrawCell),s.didDrawCell&&r.didDrawCell.push(s.didDrawCell),s.willDrawPage&&r.willDrawPage.push(s.willDrawPage),s.didDrawPage&&r.didDrawPage.push(s.didDrawPage)}return r}(a,r,t),c=function(e,t){var n,r,a,i,s,o,l,c,u,A,d,h,p,f,m=jr(t.margin,40/e.scaleFactor()),g=null!==(n=function(e,t){var n=e.getLastAutoTable(),r=e.scaleFactor(),a=e.pageNumber(),i=!1;if(n&&n.startPageNumber){i=n.startPageNumber+n.pageNumber-1===a}if("number"===typeof t)return t;if((null==t||!1===t)&&i&&null!=(null===n||void 0===n?void 0:n.finalY))return n.finalY+20/r;return null}(e,t.startY))&&void 0!==n?n:m.top;p=!0===t.showFoot?"everyPage":!1===t.showFoot?"never":null!==(r=t.showFoot)&&void 0!==r?r:"everyPage";f=!0===t.showHead?"everyPage":!1===t.showHead?"never":null!==(a=t.showHead)&&void 0!==a?a:"everyPage";var y=null!==(i=t.useCss)&&void 0!==i&&i,b=t.theme||(y?"plain":"striped"),w=!!t.horizontalPageBreak,v=null!==(s=t.horizontalPageBreakRepeat)&&void 0!==s?s:null;return{includeHiddenHtml:null!==(o=t.includeHiddenHtml)&&void 0!==o&&o,useCss:y,theme:b,startY:g,margin:m,pageBreak:null!==(l=t.pageBreak)&&void 0!==l?l:"auto",rowPageBreak:null!==(c=t.rowPageBreak)&&void 0!==c?c:"auto",tableWidth:null!==(u=t.tableWidth)&&void 0!==u?u:"auto",showHead:f,showFoot:p,tableLineWidth:null!==(A=t.tableLineWidth)&&void 0!==A?A:0,tableLineColor:null!==(d=t.tableLineColor)&&void 0!==d?d:200,horizontalPageBreak:w,horizontalPageBreakRepeat:v,horizontalPageBreakBehaviour:null!==(h=t.horizontalPageBreakBehaviour)&&void 0!==h?h:"afterAllRows"}}(n,s),u=function(e,t,n){var r=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var s=t.includeHiddenHtml;if(n){var o=Gr(e,t.html,n,s,t.useCss)||{};r=o.head||r,a=o.body||r,i=o.foot||r}else console.error("Cannot parse html in non browser environment")}var l=t.columns||function(e,t,n){var r=e[0]||t[0]||n[0]||[],a=[];return Object.keys(r).filter(function(e){return"_element"!==e}).forEach(function(e){var t,n=1;"object"!==typeof(t=Array.isArray(r)?r[parseInt(e)]:r[e])||Array.isArray(t)||(n=(null===t||void 0===t?void 0:t.colSpan)||1);for(var i=0;i<n;i++){var s={dataKey:Array.isArray(r)?a.length:e+(i>0?"_".concat(i):"")};a.push(s)}}),a}(r,a,i);return{columns:l,head:r,body:a,foot:i}}(n,s,i);return{id:t.tableId,content:u,hooks:l,styles:o,settings:c}}var Yr,Zr=function(e,t,n){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=n,this.doc=e.getDocument()},$r=function(e){function t(t,n,r,a,i,s){var o=e.call(this,t,n,s)||this;return o.cell=r,o.row=a,o.column=i,o.section=a.section,o}return Ur(t,e),t}(Zr),ea=function(){function e(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return e.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},e.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(e,t,n,r,a,i){for(var s=0,o=t;s<o.length;s++){var l=!1===(0,o[s])(new $r(e,this,n,r,a,i));if(n.text=Array.isArray(n.text)?n.text:[n.text],l)return!1}return!0},e.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var n=0,r=this.hooks.didDrawPage;n<r.length;n++){(0,r[n])(new Zr(e,this,t))}},e.prototype.callWillDrawPageHooks=function(e,t){for(var n=0,r=this.hooks.willDrawPage;n<r.length;n++){(0,r[n])(new Zr(e,this,t))}},e.prototype.getWidth=function(e){if("number"===typeof this.settings.tableWidth)return this.settings.tableWidth;if("wrap"===this.settings.tableWidth)return this.columns.reduce(function(e,t){return e+t.wrappedWidth},0);var t=this.settings.margin;return e-t.left-t.right},e}(),ta=function(){function e(e,t,n,r,a){void 0===a&&(a=!1),this.height=0,this.raw=e,e instanceof Or&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=n,this.cells=r,this.spansMultiplePages=a}return e.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(e,n){var r;return Math.max(e,(null===(r=t.cells[n.index])||void 0===r?void 0:r.height)||0)},0)},e.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(e){var n=t.cells[e.index];return!!n&&n.rowSpan>1}).length>0},e.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},e.prototype.getMinimumRowHeight=function(e,t){var n=this;return e.reduce(function(e,r){var a=n.cells[r.index];if(!a)return 0;var i=t.getLineHeight(a.styles.fontSize),s=a.padding("vertical")+i;return s>e?s:e},0)},e}(),na=function(){function e(e,t,n){var r;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=n,this.raw=e;var a=e;null==e||"object"!==typeof e||Array.isArray(e)?(this.rowSpan=1,this.colSpan=1):(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=null!==(r=e.content)&&void 0!==r?r:e,e._element&&(this.raw=e._element));var i=null!=a?""+a:"";this.text=i.split(/\r\n|\r|\n/g)}return e.prototype.getTextPos=function(){var e,t;if("top"===this.styles.valign)e=this.y+this.padding("top");else if("bottom"===this.styles.valign)e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}if("right"===this.styles.halign)t=this.x+this.width-this.padding("right");else if("center"===this.styles.halign){var r=this.width-this.padding("horizontal");t=this.x+r/2+this.padding("left")}else t=this.x+this.padding("left");return{x:t,y:e}},e.prototype.getContentHeight=function(e,t){void 0===t&&(t=1.15);var n=(Array.isArray(this.text)?this.text.length:1)*(this.styles.fontSize/e*t)+this.padding("vertical");return Math.max(n,this.styles.minCellHeight)},e.prototype.padding=function(e){var t=jr(this.styles.cellPadding,0);return"vertical"===e?t.top+t.bottom:"horizontal"===e?t.left+t.right:t[e]},e}(),ra=function(){function e(e,t,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=n}return e.prototype.getMaxCustomCellWidth=function(e){for(var t=0,n=0,r=e.allRows();n<r.length;n++){var a=r[n].cells[this.index];a&&"number"===typeof a.styles.cellWidth&&(t=Math.max(t,a.styles.cellWidth))}return t},e}();function aa(e,t){!function(e,t){var n=e.scaleFactor(),r=t.settings.horizontalPageBreak,a=Hr(e,t);t.allRows().forEach(function(i){for(var s=0,o=t.columns;s<o.length;s++){var l=o[s],c=i.cells[l.index];if(c){var u=t.hooks.didParseCell;t.callCellHooks(e,u,c,i,l,null);var A=c.padding("horizontal");c.contentWidth=Mr(c.text,c.styles,e)+A;var d=Mr(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,e);if(c.minReadableWidth=d+c.padding("horizontal"),"number"===typeof c.styles.cellWidth)c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if("wrap"===c.styles.cellWidth||!0===r)c.contentWidth>a?(c.minWidth=a,c.wrappedWidth=a):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var h=10/n;c.minWidth=c.styles.minCellWidth||h,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),t.allRows().forEach(function(e){for(var n=0,r=t.columns;n<r.length;n++){var a=r[n],i=e.cells[a.index];if(i&&1===i.colSpan)a.wrappedWidth=Math.max(a.wrappedWidth,i.wrappedWidth),a.minWidth=Math.max(a.minWidth,i.minWidth),a.minReadableWidth=Math.max(a.minReadableWidth,i.minReadableWidth);else{var s=t.styles.columnStyles[a.dataKey]||t.styles.columnStyles[a.index]||{},o=s.cellWidth||s.minCellWidth;o&&"number"===typeof o&&(a.minWidth=o,a.wrappedWidth=o)}i&&(i.colSpan>1&&!a.minWidth&&(a.minWidth=i.minWidth),i.colSpan>1&&!a.wrappedWidth&&(a.wrappedWidth=i.minWidth))}})}(e,t);var n=[],r=0;t.columns.forEach(function(e){var a=e.getMaxCustomCellWidth(t);a?e.width=a:(e.width=e.wrappedWidth,n.push(e)),r+=e.width});var a=t.getWidth(e.pageSize().width)-r;a&&(a=ia(n,a,function(e){return Math.max(e.minReadableWidth,e.minWidth)})),a&&(a=ia(n,a,function(e){return e.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),function(e){for(var t=e.allRows(),n=0;n<t.length;n++)for(var r=t[n],a=null,i=0,s=0,o=0;o<e.columns.length;o++){var l=e.columns[o];if((s-=1)>1&&e.columns[o+1])i+=l.width,delete r.cells[l.index];else if(a){var c=a;delete r.cells[l.index],a=null,c.width=l.width+i}else{if(!(c=r.cells[l.index]))continue;if(s=c.colSpan,i=0,c.colSpan>1){a=c,i+=l.width;continue}c.width=l.width+i}}}(t),function(e,t){for(var n={count:0,height:0},r=0,a=e.allRows();r<a.length;r++){for(var i=a[r],s=0,o=e.columns;s<o.length;s++){var l=o[s],c=i.cells[l.index];if(c){t.applyStyles(c.styles,!0);var u=c.width-c.padding("horizontal");if("linebreak"===c.styles.overflow)c.text=t.splitTextToSize(c.text,u+1/t.scaleFactor(),{fontSize:c.styles.fontSize});else if("ellipsize"===c.styles.overflow)c.text=sa(c.text,u,c.styles,t,"...");else if("hidden"===c.styles.overflow)c.text=sa(c.text,u,c.styles,t,"");else if("function"===typeof c.styles.overflow){var A=c.styles.overflow(c.text,u);c.text="string"===typeof A?[A]:A}c.contentHeight=c.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var d=c.contentHeight/c.rowSpan;c.rowSpan>1&&n.count*n.height<d*c.rowSpan?n={height:d,count:c.rowSpan}:n&&n.count>0&&n.height>d&&(d=n.height),d>i.height&&(i.height=d)}}n.count--}}(t,e),function(e){for(var t={},n=1,r=e.allRows(),a=0;a<r.length;a++)for(var i=r[a],s=0,o=e.columns;s<o.length;s++){var l=o[s],c=t[l.index];if(n>1)n--,delete i.cells[l.index];else if(c)c.cell.height+=i.height,n=c.cell.colSpan,delete i.cells[l.index],c.left--,c.left<=1&&delete t[l.index];else{var u=i.cells[l.index];if(!u)continue;if(u.height=i.height,u.rowSpan>1){var A=r.length-a,d=u.rowSpan>A?A:u.rowSpan;t[l.index]={cell:u,left:d,row:i}}}}}(t)}function ia(e,t,n){for(var r=t,a=e.reduce(function(e,t){return e+t.wrappedWidth},0),i=0;i<e.length;i++){var s=e[i],o=r*(s.wrappedWidth/a),l=s.width+o,c=n(s),u=l<c?c:l;t-=u-s.width,s.width=u}if(t=Math.round(1e10*t)/1e10){var A=e.filter(function(e){return!(t<0)||e.width>n(e)});A.length&&(t=ia(A,t,n))}return t}function sa(e,t,n,r,a){return e.map(function(e){return function(e,t,n,r,a){var i=1e4*r.scaleFactor();if(t=Math.ceil(t*i)/i,t>=Mr(e,n,r))return e;for(;t<Mr(e+a,n,r)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}(e,t,n,r,a)})}function oa(e,t){var n=new Dr(e),r=function(e,t){var n=e.content,r=function(e){return e.map(function(e,t){var n,r;return r="object"===typeof e&&null!==(n=e.dataKey)&&void 0!==n?n:t,new ra(r,e,t)})}(n.columns);if(0===n.head.length){(a=ca(r,"head"))&&n.head.push(a)}if(0===n.foot.length){var a;(a=ca(r,"foot"))&&n.foot.push(a)}var i=e.settings.theme,s=e.styles;return{columns:r,head:la("head",n.head,r,s,i,t),body:la("body",n.body,r,s,i,t),foot:la("foot",n.foot,r,s,i,t)}}(t,n.scaleFactor()),a=new ea(t,r);return aa(n,a),n.applyStyles(n.userStyles),a}function la(e,t,n,r,a,i){var s={},o=t.map(function(t,o){for(var l=0,c={},u=0,A=0,d=0,h=n;d<h.length;d++){var p=h[d];if(null==s[p.index]||0===s[p.index].left)if(0===A){var f=void 0,m={};"object"!==typeof(f=Array.isArray(t)?t[p.index-u-l]:t[p.dataKey])||Array.isArray(f)||(m=(null===f||void 0===f?void 0:f.styles)||{});var g=ua(e,p,o,a,r,i,m),y=new na(f,g,e);c[p.dataKey]=y,c[p.index]=y,A=y.colSpan-1,s[p.index]={left:y.rowSpan-1,times:A}}else A--,u++;else s[p.index].left--,A=s[p.index].times,l++}return new ta(t,o,e,c)});return o}function ca(e,t){var n={};return e.forEach(function(e){if(null!=e.raw){var r=function(e,t){if("head"===e){if("object"===typeof t)return t.header||null;if("string"===typeof t||"number"===typeof t)return t}else if("foot"===e&&"object"===typeof t)return t.footer;return null}(t,e.raw);null!=r&&(n[e.dataKey]=r)}}),Object.keys(n).length>0?n:null}function ua(e,t,n,r,a,i,s){var o,l={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}}[r];"head"===e?o=a.headStyles:"body"===e?o=a.bodyStyles:"foot"===e&&(o=a.footStyles);var c=Xr({},l.table,l[e],a.styles,o),u=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},A="body"===e?u:{},d="body"===e&&n%2===0?Xr({},l.alternateRow,a.alternateRowStyles):{},h=function(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}(i),p=Xr({},h,c,d,A);return Xr(p,s)}function Aa(e,t,n){var r;void 0===n&&(n={});var a=Hr(e,t),i=new Map,s=[],o=[],l=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?l=t.settings.horizontalPageBreakRepeat:"string"!==typeof t.settings.horizontalPageBreakRepeat&&"number"!==typeof t.settings.horizontalPageBreakRepeat||(l=[t.settings.horizontalPageBreakRepeat]),l.forEach(function(e){var n=t.columns.find(function(t){return t.dataKey===e||t.index===e});n&&!i.has(n.index)&&(i.set(n.index,!0),s.push(n.index),o.push(t.columns[n.index]),a-=n.wrappedWidth)});for(var c=!0,u=null!==(r=null===n||void 0===n?void 0:n.start)&&void 0!==r?r:0;u<t.columns.length;)if(i.has(u))u++;else{var A=t.columns[u].wrappedWidth;if(!(c||a>=A))break;c=!1,s.push(u),o.push(t.columns[u]),a-=A,u++}return{colIndexes:s,columns:o,lastIndex:u-1}}function da(e,t){var n=t.settings,r=n.startY,a=n.margin,i={x:a.left,y:r},s=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=r+a.bottom+s;"avoid"===n.pageBreak&&(o+=t.body.reduce(function(e,t){return e+t.height},0));var l=new Dr(e);("always"===n.pageBreak||null!=n.startY&&o>l.pageSize().height)&&(xa(l),i.y=a.top),t.callWillDrawPageHooks(l,i);var c=Xr({},i);t.startPageNumber=l.pageNumber(),n.horizontalPageBreak?function(e,t,n,r){var a=function(e,t){for(var n=[],r=0;r<t.columns.length;r++){var a=Aa(e,t,{start:r});a.columns.length&&(n.push(a),r=a.lastIndex)}return n}(e,t),i=t.settings;if("afterAllRows"===i.horizontalPageBreakBehaviour)a.forEach(function(a,i){e.applyStyles(e.userStyles),i>0?va(e,t,n,r,a.columns,!0):ha(e,t,r,a.columns),function(e,t,n,r,a){e.applyStyles(e.userStyles),t.body.forEach(function(i,s){var o=s===t.body.length-1;ga(e,t,i,o,n,r,a)})}(e,t,n,r,a.columns),fa(e,t,r,a.columns)});else for(var s=-1,o=a[0],l=function(){var i=s;if(o){e.applyStyles(e.userStyles);var l=o.columns;s>=0?va(e,t,n,r,l,!0):ha(e,t,r,l),i=pa(e,t,s+1,r,l),fa(e,t,r,l)}var c=i-s;a.slice(1).forEach(function(a){e.applyStyles(e.userStyles),va(e,t,n,r,a.columns,!0),pa(e,t,s+1,r,a.columns,c),fa(e,t,r,a.columns)}),s=i};s<t.body.length-1;)l()}(l,t,c,i):(l.applyStyles(l.userStyles),"firstPage"!==n.showHead&&"everyPage"!==n.showHead||t.head.forEach(function(e){return ya(l,t,e,i,t.columns)}),l.applyStyles(l.userStyles),t.body.forEach(function(e,n){var r=n===t.body.length-1;ga(l,t,e,r,c,i,t.columns)}),l.applyStyles(l.userStyles),"lastPage"!==n.showFoot&&"everyPage"!==n.showFoot||t.foot.forEach(function(e){return ya(l,t,e,i,t.columns)})),Pr(l,t,c,i),t.callEndPageHooks(l,i),t.finalY=i.y,e.lastAutoTable=t,l.applyStyles(l.userStyles)}function ha(e,t,n,r){var a=t.settings;e.applyStyles(e.userStyles),"firstPage"!==a.showHead&&"everyPage"!==a.showHead||t.head.forEach(function(a){return ya(e,t,a,n,r)})}function pa(e,t,n,r,a,i){e.applyStyles(e.userStyles),i=null!==i&&void 0!==i?i:t.body.length;var s=Math.min(n+i,t.body.length),o=-1;return t.body.slice(n,s).forEach(function(i,s){var l=n+s===t.body.length-1,c=wa(e,t,l,r);i.canEntireRowFit(c,a)&&(ya(e,t,i,r,a),o=n+s)}),o}function fa(e,t,n,r){var a=t.settings;e.applyStyles(e.userStyles),"lastPage"!==a.showFoot&&"everyPage"!==a.showFoot||t.foot.forEach(function(a){return ya(e,t,a,n,r)})}function ma(e,t,n){var r=n.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),i=Math.floor((t-a)/r);return Math.max(0,i)}function ga(e,t,n,r,a,i,s){var o=wa(e,t,r,i);if(n.canEntireRowFit(o,s))ya(e,t,n,i,s);else if(function(e,t,n,r){var a=e.pageSize().height,i=r.settings.margin,s=a-(i.top+i.bottom);"body"===t.section&&(s-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var o=t.getMinimumRowHeight(r.columns,e),l=o<n;if(o>s)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!l)return!1;var c=t.hasRowSpan(r.columns);return t.getMaxCellHeight(r.columns)>s?(c&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!c&&"avoid"!==r.settings.rowPageBreak}(e,n,o,t)){var l=function(e,t,n,r){var a={};e.spansMultiplePages=!0,e.height=0;for(var i=0,s=0,o=n.columns;s<o.length;s++){var l=o[s];if(m=e.cells[l.index]){Array.isArray(m.text)||(m.text=[m.text]),(f=Xr(f=new na(m.raw,m.styles,m.section),m)).text=[];var c=ma(m,t,r);m.text.length>c&&(f.text=m.text.splice(c,m.text.length));var u=r.scaleFactor(),A=r.getLineHeightFactor();m.contentHeight=m.getContentHeight(u,A),m.contentHeight>=t&&(m.contentHeight=t,f.styles.minCellHeight-=t),m.contentHeight>e.height&&(e.height=m.contentHeight),f.contentHeight=f.getContentHeight(u,A),f.contentHeight>i&&(i=f.contentHeight),a[l.index]=f}}var d=new ta(e.raw,-1,e.section,a,!0);d.height=i;for(var h=0,p=n.columns;h<p.length;h++){var f,m;l=p[h],(f=d.cells[l.index])&&(f.height=d.height),(m=e.cells[l.index])&&(m.height=e.height)}return d}(n,o,t,e);ya(e,t,n,i,s),va(e,t,a,i,s),ga(e,t,l,r,a,i,s)}else va(e,t,a,i,s),ga(e,t,n,r,a,i,s)}function ya(e,t,n,r,a){r.x=t.settings.margin.left;for(var i=0,s=a;i<s.length;i++){var o=s[i],l=n.cells[o.index];if(l)if(e.applyStyles(l.styles),l.x=r.x,l.y=r.y,!1!==t.callCellHooks(e,t.hooks.willDrawCell,l,n,o,r)){ba(e,l,r);var c=l.getTextPos();Tr(l.text,c.x,c.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,l,n,o,r),r.x+=o.width}else r.x+=o.width;else r.x+=o.width}r.y+=n.height}function ba(e,t,n){var r=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),"number"===typeof r.lineWidth){var a=Qr(r.lineWidth,r.fillColor);a&&e.rect(t.x,n.y,t.width,t.height,a)}else"object"===typeof r.lineWidth&&(r.fillColor&&e.rect(t.x,n.y,t.width,t.height,"F"),function(e,t,n,r){var a,i,s,o;r.top&&(a=n.x,i=n.y,s=n.x+t.width,o=n.y,r.right&&(s+=.5*r.right),r.left&&(a-=.5*r.left),l(r.top,a,i,s,o));r.bottom&&(a=n.x,i=n.y+t.height,s=n.x+t.width,o=n.y+t.height,r.right&&(s+=.5*r.right),r.left&&(a-=.5*r.left),l(r.bottom,a,i,s,o));r.left&&(a=n.x,i=n.y,s=n.x,o=n.y+t.height,r.top&&(i-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.left,a,i,s,o));r.right&&(a=n.x+t.width,i=n.y,s=n.x+t.width,o=n.y+t.height,r.top&&(i-=.5*r.top),r.bottom&&(o+=.5*r.bottom),l(r.right,a,i,s,o));function l(t,n,r,a,i){e.getDocument().setLineWidth(t),e.getDocument().line(n,r,a,i,"S")}}(e,t,n,r.lineWidth))}function wa(e,t,n,r){var a=t.settings.margin.bottom,i=t.settings.showFoot;return("everyPage"===i||"lastPage"===i&&n)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-r.y-a}function va(e,t,n,r,a,i){void 0===a&&(a=[]),void 0===i&&(i=!1),e.applyStyles(e.userStyles),"everyPage"!==t.settings.showFoot||i||t.foot.forEach(function(n){return ya(e,t,n,r,a)}),t.callEndPageHooks(e,r);var s=t.settings.margin;Pr(e,t,n,r),xa(e),t.pageNumber++,r.x=s.left,r.y=s.top,n.y=s.top,t.callWillDrawPageHooks(e,r),"everyPage"===t.settings.showHead&&(t.head.forEach(function(n){return ya(e,t,n,r,a)}),e.applyStyles(e.userStyles))}function xa(e){var t=e.pageNumber();return e.setPage(t+1),e.pageNumber()===t&&(e.addPage(),!0)}try{if("undefined"!==typeof window&&window){var Ca=window,ka=Ca.jsPDF||(null===(Yr=Ca.jspdf)||void 0===Yr?void 0:Yr.jsPDF);ka&&function(e){e.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return da(this,oa(this,Jr(this,e[0]))),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(e,t,n,r){Tr(e,t,n,r,this)},e.API.autoTableSetDefaults=function(e){return Dr.setDefaults(e,this),this},e.autoTableSetDefaults=function(e,t){Dr.setDefaults(e,t)},e.API.autoTableHtmlToJson=function(e,t){var n;if(void 0===t&&(t=!1),"undefined"===typeof window)return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var r=Gr(new Dr(this),e,window,t,!1),a=r.head,i=r.body,s=(null===(n=a[0])||void 0===n?void 0:n.map(function(e){return e.content}))||[];return{columns:s,rows:i,data:i}}}(ka)}}catch(X6){console.error("Could not apply autoTable plugin",X6)}const Ba={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"",Sa=[{key:"passport",labelKey:"passportPhoto"},{key:"nationalId",labelKey:"approvedNationalId"},{key:"letter",labelKey:"accountOpeningLetter"},{key:"photo",labelKey:"recentPersonalPhoto"}],Ia=e=>{var t;let{onNavigate:n,state:i}=e;const{language:o}=A(),{formData:l,setFormData:c}=p(),u=(null===i||void 0===i?void 0:i.manualFields)||[],[d,h]=(0,a.useState)(l||{}),[f,m]=(0,a.useState)(""),[g,y]=(0,a.useState)({}),[b,v]=(0,a.useState)(null),[C,k]=(0,a.useState)([]),[F,E]=(0,a.useState)((null===(t=d.personalInfo)||void 0===t?void 0:t.branchId)||"");(0,a.useEffect)(()=>{(async()=>{try{const e=await fetch("".concat(Ba,"/api/cached-uploads"));if(e.ok){const t=await e.json();y(t)}}catch(X6){console.error("Failed to fetch cached uploads",X6),ae("FETCH_CACHED_UPLOADS_ERROR ".concat(X6.message))}})(),fetch("".concat(Ba,"/api/branches")).then(e=>e.json()).then(k).catch(()=>{})},[]),(0,a.useEffect)(()=>{(async()=>{try{const e=ue("nationalId",await le("nationalId")||{});e&&Object.keys(e).length&&h(t=>{var n,a,i,s;return r(r({},t),{},{personalInfo:r(r({},t.personalInfo||{}),{},{familyRecordNumber:(null===(n=t.personalInfo)||void 0===n?void 0:n.familyRecordNumber)||e.familyId||"",nidDigits:null!==(a=t.personalInfo)&&void 0!==a&&a.nidDigits&&t.personalInfo.nidDigits.some(e=>e)?t.personalInfo.nidDigits:e.nationalId?e.nationalId.replace(/\D/g,"").slice(0,12).split(""):Array(12).fill(""),motherFullName:(null===(i=t.personalInfo)||void 0===i?void 0:i.motherFullName)||e.motherFullName||"",maritalStatus:(null===(s=t.personalInfo)||void 0===s?void 0:s.maritalStatus)||e.maritalStatus||""})})})}catch(Vu){console.error("Failed to load NID",Vu)}})()},[]);const _=(e,t,n)=>{const r=t||{};return 0===Object.keys(r).length?null:(0,s.jsxs)("div",{className:"confirmation-card",children:[(0,s.jsxs)("div",{className:"confirmation-card-header",children:[n,(0,s.jsx)("h2",{children:x(e,o)})]}),(0,s.jsx)("div",{className:"confirmation-card-body",children:(0,s.jsx)("ul",{className:"info-list",children:Object.entries(r).map(e=>{let[t,n]=e;if(n&&("object"!==typeof n||Array.isArray(n))&&"boolean"!==typeof n){const e="nidDigits"===t?x("nid",o):x(t,o)||t;return(0,s.jsxs)("li",{children:[(0,s.jsxs)("strong",{children:[e,":"]})," ",(0,s.jsx)("span",{children:Array.isArray(n)?n.join(""):String(n)})]},t)}return null})})})]})},T=()=>{v(null)};return(0,s.jsxs)("div",{className:"form-page confirmation-page sequential-docs-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:w,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]})]}),(0,s.jsxs)("main",{className:"form-main",children:[(0,s.jsx)("h1",{className:"form-title",children:x("confirmData",o)}),(0,s.jsx)("p",{className:"guide-message",children:x("requiredFieldsHint",o)}),(0,s.jsxs)("div",{className:"confirmation-grid",children:[_("personalInfo",d.personalInfo,(0,s.jsx)(B,{})),_("addressInfoTitle",d.addressInfo,(0,s.jsx)(S,{})),_("workInfoTitle",d.workInfo,(0,s.jsx)(I,{})),(L="requiredDocs",D=g,D&&0!==Object.keys(D).length?(0,s.jsxs)("div",{className:"confirmation-card",children:[(0,s.jsxs)("div",{className:"confirmation-card-header",children:[(0,s.jsx)(N,{}),(0,s.jsx)("h2",{children:x(L,o)})]}),(0,s.jsx)("div",{className:"confirmation-card-body",children:(0,s.jsx)("div",{className:"docs-grid",children:Object.entries(D).map(e=>{var t;let[n,r]=e;return(0,s.jsxs)("div",{className:"doc-item",onClick:()=>(e=>{v("".concat(Ba,"/").concat(e.replace(/\\/g,"/")))})(r),children:[(0,s.jsxs)("div",{className:"doc-preview-container",children:[(0,s.jsx)("img",{src:"".concat(Ba,"/").concat(r.replace(/\\/g,"/")),alt:n,className:"doc-preview"}),(0,s.jsx)("div",{className:"overlay",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,s.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})]}),(0,s.jsx)("p",{className:"doc-title",children:x(null===(t=Sa.find(e=>e.key===n))||void 0===t?void 0:t.labelKey,o)||n})]},n)})})})]}):null)]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[x("selectBranch",o)," *"]}),(0,s.jsxs)("select",{value:F,onChange:e=>E(e.target.value),required:!0,className:"branch-select",children:[(0,s.jsx)("option",{value:"",children:x("selectBranch",o)}),C.map(e=>(0,s.jsx)("option",{value:e.branch_id,children:"ar"===o?e.name_ar:e.name_en},e.branch_id))]})]}),f&&(0,s.jsx)("p",{className:"error-message",children:f}),(0,s.jsxs)("div",{className:"form-actions",children:[(0,s.jsx)("button",{className:"btn-export",onClick:async()=>{},children:x("exportPdf",o)}),(0,s.jsx)("button",{className:"btn-next",onClick:async()=>{m("");try{var e,t;let a=(null===(e=d.personalInfo)||void 0===e?void 0:e.referenceNumber)||(null===(t=d.personalInfo)||void 0===t?void 0:t.reference_number);if(!a){const e=await fetch("".concat(Ba,"/api/initialize-application"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({aiModel:l.provider,serviceType:l.serviceType})});if(e.ok){const t=await e.json();a=t.referenceNumber,c(e=>r(r({},e),{},{personalInfo:r(r({},e.personalInfo||{}),{},{referenceNumber:a})}))}else{const t=await e.text();ae("INIT_APP_ERROR ".concat(e.status," ").concat(t))}}const i=r(r({},d.personalInfo||{}),{},{branchId:F,language:o,referenceNumber:a,addressInfo:d.addressInfo,workInfo:d.workInfo,aiModel:l.provider,manualFields:u}),s=await fetch("".concat(Ba,"/api/submit-form"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(s.ok){const e=await s.json();n("success",{referenceNumber:e.referenceNumber,createdAt:e.createdAt,aiModel:l.provider})}else{const e=await s.text();ae("SUBMIT_ERROR ".concat(s.status," ").concat(e)),m(x("dbSaveError",o))}}catch(Vu){console.error(Vu),ae("SUBMIT_ERROR ".concat(Vu.message,"; STACK: ").concat(Vu.stack)),m(x("dbSaveError",o))}},disabled:!F,children:x("confirm",o)})]})]}),(0,s.jsx)(K,{}),b&&(0,s.jsx)("div",{className:"modal-overlay",onClick:T,children:(0,s.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("img",{src:b,alt:"Document Preview",className:"preview-image"}),(0,s.jsx)("button",{onClick:T,className:"close-button",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,s.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})})]});var L,D},Na=e=>{let{onNavigate:t}=e;const{language:n}=A();return(0,s.jsxs)("div",{className:"landing-container",children:[(0,s.jsxs)("div",{className:"header-switchers",style:{position:"absolute",top:20,right:20},children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsxs)("div",{className:"content-wrapper",children:[(0,s.jsx)("img",{src:w,alt:"Bank Logo",className:"landing-logo"}),(0,s.jsx)("h1",{className:"landing-title",children:x("eservicesTitle",n)}),(0,s.jsx)("p",{className:"landing-subtitle",children:x("eservicesSub",n)}),(0,s.jsx)("button",{className:"btn-next",onClick:()=>t("landing"),children:x("back",n)})]}),(0,s.jsx)(K,{})]})};var Fa=n(9938),Ea=n.n(Fa);class _a{constructor(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r}area(){return this.width*this.height}toRectangle(){return{left:this.x,top:this.y,width:this.width,height:this.height}}}async function Ta(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{lang:n="eng+ara",rect:r}=t,a=e instanceof File?URL.createObjectURL(e):e;try{const e={};r instanceof _a&&(e.rectangle=r.toRectangle());const t=(await Ea().recognize(a,n,e)).data.text;return re("TESSERACT_RESULT ".concat(t.substring(0,100))),t}catch(Vu){throw re("TESSERACT_ERROR ".concat(Vu.message)),Vu}finally{e instanceof File&&URL.revokeObjectURL(a)}}const La={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"",Da=e=>new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>t(r.result.split(",")[1]),r.onerror=n,r.readAsDataURL(e)}),Ra={type:"OBJECT",properties:{fullNameArabic:{type:"STRING"},givenNameEng:{type:"STRING"},surnameEng:{type:"STRING"},passportNo:{type:"STRING"},dateOfBirth:{type:"STRING"},placeOfBirth:{type:"STRING"},dateOfIssue:{type:"STRING"},issuingPlace:{type:"STRING"},sex:{type:"STRING"},nationality:{type:"STRING"},expiryDate:{type:"STRING"}}},Ua={type:"OBJECT",properties:{familyId:{type:"STRING"},nationalId:{type:"STRING"},sex:{type:"STRING"},birthDay:{type:"STRING"},birthMonth:{type:"STRING"},birthYear:{type:"STRING"},motherFullName:{type:"STRING"},maritalStatus:{type:"STRING"}}};async function Oa(e){try{const n=await fetch("".concat(La,"/api/gemini"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const e=(await n.json().catch(()=>({error:"Request failed with status "+n.status}))).error||"Request failed: ".concat(n.status);throw re("GEMINI_ERROR ".concat(n.status," ").concat(e)),new Error("Gemini request failed: ".concat(e))}const r=await n.json();if(re("GEMINI_RESPONSE ".concat(JSON.stringify(r))),r.candidates&&r.candidates[0].content.parts[0].text)try{return JSON.parse(r.candidates[0].content.parts[0].text)}catch(t){return null}return null}catch(Vu){throw re("GEMINI_ERROR ".concat(Vu.message)),Vu}}async function Ma(e,t,n){try{const a=await fetch("".concat(La,"/api/chatgpt"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,base64Data:t,mimeType:n})});if(!a.ok){const e=await a.text();throw re("CHATGPT_ERROR ".concat(a.status," ").concat(e)),new Error("OpenAI request failed: ".concat(a.status))}const i=await a.json();if(re("CHATGPT_RESPONSE ".concat(JSON.stringify(i))),i.choices&&i.choices[0].message&&i.choices[0].message.content)try{return JSON.parse(i.choices[0].message.content)}catch(r){return null}return null}catch(Vu){throw re("CHATGPT_ERROR ".concat(Vu.message)),Vu}}const Pa={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"";const Qa=e=>{let{provider:t,onChange:n}=e;const{language:r}=A();return(0,s.jsxs)("div",{className:"language-switcher ai-provider-switcher",children:[(0,s.jsx)("span",{className:"gemini"===t?"active":"",onClick:()=>n("gemini"),children:x("gemini",r)}),(0,s.jsx)("span",{className:"chatgpt"===t?"active":"",onClick:()=>n("chatgpt"),children:x("chatgpt",r)}),(0,s.jsx)("span",{className:"tesseract"===t?"active":"",onClick:()=>n("tesseract"),children:x("tesseract",r)})]})},ja=[{key:"passport",labelKey:"passportPhoto"},{key:"nationalId",labelKey:"approvedNationalId"},{key:"letter",labelKey:"accountOpeningLetter"}],Ha=e=>{let{onNavigate:t,backPage:n,nextPage:i,selfPage:o}=e;const{language:l}=A(),{setFormData:c,formData:u}=p(),[d,h]=(0,a.useState)(0),[f,m]=(0,a.useState)({}),[g,y]=(0,a.useState)(!1),[b,v]=(0,a.useState)(!1),[C,k]=(0,a.useState)(""),[B,S]=(0,a.useState)(null),[I,N]=(0,a.useState)(null),[F,E]=(0,a.useState)(!1),[_,T]=(0,a.useState)(!1),[L,D]=(0,a.useState)(!1),[R,U]=(0,a.useState)(u.provider||"chatgpt"),O=(0,a.useRef)(null);(0,a.useEffect)(()=>{c(e=>r(r({},e),{},{provider:R}))},[R,c]);const P=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?E(!0):"dragleave"===e.type&&E(!1)},Q=async e=>{if(!e)return;N(e),T(!1),D(!1);const t=new FileReader;t.onloadend=()=>S(t.result),t.readAsDataURL(e),y(!0),k("");try{var n;if(await async function(e,t){const n=new FormData;if(n.append("file",e),n.append("docType",t),!(await fetch("".concat(Pa,"/api/cache-upload"),{method:"POST",body:n})).ok)throw new Error("Upload failed");return!0}(e,ja[d].key),0===d&&(null===(n=u.personalInfo)||void 0===n||!n.referenceNumber)){const e=await fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL,"/api/initialize-application"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({aiModel:R,serviceType:u.serviceType})});if(e.ok){const t=await e.json();c(e=>r(r({},e),{},{personalInfo:r(r({},e.personalInfo),{},{referenceNumber:t.referenceNumber})}))}}let t={};if("passport"===ja[d].key){if(t=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gemini";const n=await Da(e),r="Extract the following fields from the passport image: Full Name (Arabic), Given Name (English), Surname (English), Passport No, Date of Birth, Place of Birth, Date of Issue, Issuing Place, Sex, Nationality, and Expiry Date. If any field is unclear, leave it blank and do not guess. Return the data in the specified JSON format.";if("chatgpt"===t)return Ma(r,n,e.type||"image/png");if("tesseract"===t)return{rawText:await Ta(e)};return Oa({contents:[{parts:[{text:r},{inlineData:{mimeType:e.type||"image/png",data:n}}]}],generationConfig:{responseMimeType:"application/json",responseSchema:Ra}})}(e,R),t=ue("passport",t),!t||!t.passportNo||!t.givenNameEng&&!t.fullNameArabic)return k(x("invalidPassport",l)),D(!1),T(!0),void y(!1);{const e=(t.givenNameEng||"").trim().split(/\s+/),n=e[0]||"",a=e.slice(1).join(" "),i="M"===t.sex?"male":"F"===t.sex?"female":t.sex||"";c(e=>r(r({},e),{},{personalInfo:r(r({},e.personalInfo||{}),{},{fullName:t.fullNameArabic,firstNameEn:n,middleNameEn:a,lastNameEn:t.surnameEng,dob:t.dateOfBirth,gender:i,nationality:ce(t.nationality),passportNumber:t.passportNo,passportIssueDate:t.dateOfIssue,passportExpiryDate:t.expiryDate,birthPlace:t.placeOfBirth}),passportData:t})),D(!0)}}else if("nationalId"===ja[d].key){if(t=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gemini";const n=await Da(e),r="Extract the following fields from the NID document image: Family Record Number (\u0631\u0642\u0645 \u0642\u064a\u062f \u0627\u0644\u0639\u0627\u0626\u0644\u0629), National ID (\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0648\u0637\u0646\u064a), Sex (\u0627\u0644\u062c\u0646\u0633), Day of Birth, Month of Birth, Year of Birth, Mother's Full Name, and Marital Status. If any field is unclear, leave it blank and do not guess. Return the data in the specified JSON format.";if("chatgpt"===t)return Ma(r,n,e.type||"image/png");if("tesseract"===t)return{rawText:await Ta(e)};return Oa({contents:[{parts:[{text:r},{inlineData:{mimeType:e.type||"image/png",data:n}}]}],generationConfig:{responseMimeType:"application/json",responseSchema:Ua}})}(e,R),t=ue("nationalId",t),!(t&&t.nationalId&&t.familyId))return k(x("invalidNid",l)),D(!1),T(!0),void y(!1);{const e=t.nationalId?t.nationalId.replace(/\D/g,"").slice(0,12).split(""):[];c(n=>{var a,i,s,o;const l="M"===t.sex?"male":"F"===t.sex?"female":t.sex||"",c=t.birthYear&&t.birthMonth&&t.birthDay?"".concat(t.birthYear,"-").concat(t.birthMonth.toString().padStart(2,"0"),"-").concat(t.birthDay.toString().padStart(2,"0")):(null===(a=n.personalInfo)||void 0===a?void 0:a.dob)||"";return r(r({},n),{},{personalInfo:r(r({},n.personalInfo||{}),{},{familyRecordNumber:t.familyId,nidDigits:e.length?e:(null===(i=n.personalInfo)||void 0===i?void 0:i.nidDigits)||Array(12).fill(""),gender:(null===(s=n.personalInfo)||void 0===s?void 0:s.gender)||l,dob:(null===(o=n.personalInfo)||void 0===o?void 0:o.dob)||c}),nidData:t})}),D(!0)}}else t={uploaded:!0},D(!0);m(e=>r(r({},e),{},{[ja[d].key]:t})),await async function(e,t){if(!(await fetch("".concat(oe,"/api/cache-extracted"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docType:e,data:t})})).ok)throw new Error("Cache failed");return!0}(ja[d].key,t),T(!0)}catch(Vu){console.error(Vu),k(x("error_extracting_data",l))}finally{y(!1)}},j=ja[d];return(0,s.jsxs)("div",{className:"form-page sequential-docs-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:w,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(Qa,{provider:R,onChange:U}),(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsxs)("button",{onClick:()=>t(n),className:"btn-back",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"15 18 9 12 15 6"})}),(0,s.jsx)("span",{children:x("back",l)})]})]}),(0,s.jsxs)("main",{className:"form-main",children:[(0,s.jsx)("input",{type:"file",ref:O,onChange:e=>Q(e.target.files[0]),accept:"image/*",style:{display:"none"}}),(0,s.jsxs)("div",{className:"controls-header",children:[(0,s.jsx)("h2",{className:"page-title",children:x(j.labelKey,l)}),B&&(0,s.jsxs)("button",{onClick:()=>{I&&Q(I)},className:"btn-refresh",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("polyline",{points:"23 4 23 10 17 10"}),(0,s.jsx)("polyline",{points:"1 20 1 14 7 14"}),(0,s.jsx)("path",{d:"M3.51 9a9 9 0 0114.13-3.36L23 10"}),(0,s.jsx)("path",{d:"M20.49 15a9 9 0 01-14.13 3.36L1 14"})]}),(0,s.jsx)("span",{children:x("refresh",l)})]})]}),B?(0,s.jsxs)("div",{className:"result-container",children:[(0,s.jsxs)("div",{className:"image-preview-box",children:[(0,s.jsxs)("div",{className:"image-container ".concat(g?"scanning":""),children:[(0,s.jsx)("img",{src:B,alt:"preview",className:"image-to-stamp ".concat(_?"stamped":"")}),(0,s.jsx)("div",{className:"scan-complete-overlay ".concat(_&&!g?"visible":""," ").concat(L?"":"invalid"),children:(0,s.jsx)("div",{className:"stamp-wrapper",children:(0,s.jsxs)("svg",{className:"stamp-icon ".concat(L?"":"invalid"),viewBox:"0 0 52 52",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("circle",{className:"stamp-circle ".concat(L?"":"invalid"),cx:"26",cy:"26",r:"25",fill:"none"}),L?(0,s.jsx)("path",{className:"stamp-check",fill:"none",d:"M14.1 27.2l7.1 7.2 16.7-16.8"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("line",{className:"stamp-cross",x1:"16",y1:"16",x2:"36",y2:"36"}),(0,s.jsx)("line",{className:"stamp-cross",x1:"36",y1:"16",x2:"16",y2:"36"})]})]})})})]}),(0,s.jsx)("button",{type:"button",onClick:()=>O.current.click(),className:"btn-change",style:{marginTop:"auto"},children:x("change_document",l)})]}),(0,s.jsxs)("div",{className:"data-result-box",children:[(0,s.jsx)("div",{className:"data-result-header",children:(0,s.jsx)("h3",{children:x("extractedData",l)})}),g?(0,s.jsxs)("div",{className:"loading-container",children:[(0,s.jsx)("div",{className:"arrow-spinner"}),(0,s.jsx)("p",{children:x("extracting_data",l)})]}):f[j.key]&&Object.keys(f[j.key]).length>0?(0,s.jsxs)("table",{className:"modern-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:x("label",l)}),(0,s.jsx)("th",{children:x("value",l)})]})}),(0,s.jsx)("tbody",{children:Object.entries(f[j.key]).map(e=>{let[t,n]=e;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:x(t,l)}),(0,s.jsx)("td",{children:String(n)||"N/A"})]},t)})})]}):(0,s.jsx)("div",{className:"loading-container",children:(0,s.jsx)("p",{children:x("not_found",l)})})]})]}):(0,s.jsxs)("div",{className:"upload-area ".concat(F?"drag-over":""),onClick:()=>O.current.click(),onDragEnter:P,onDragOver:P,onDragLeave:P,onDrop:e=>{e.preventDefault(),e.stopPropagation(),E(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&Q(e.dataTransfer.files[0])},children:[(0,s.jsx)("div",{className:"upload-icon",children:(0,s.jsx)(M,{})}),(0,s.jsx)("h2",{children:x("upload_prompt",l)})]}),C&&(0,s.jsx)("p",{className:"error-message",children:C}),(0,s.jsx)("div",{className:"form-actions",style:{marginTop:"30px"},children:(0,s.jsx)("button",{className:"btn-next",onClick:()=>{v(!0),setTimeout(()=>{d<ja.length-1?(h(e=>e+1),S(null),k(""),T(!1),D(!1),N(null),m({})):t("faceRegistration",{backPage:o,nextPage:i}),v(!1)},500)},disabled:!B||g||b||!L,children:b?(0,s.jsx)("div",{className:"loader"}):x("next",l)})})]}),(0,s.jsx)(K,{})]})};var za="/index.js",Wa=Object.defineProperty,Va=n(7291),Ga=(e,t)=>{for(var n in t)Wa(e,n,{get:t[n],enumerable:!0})};Ga({},{Abs:()=>Ns,Acos:()=>Fs,Acosh:()=>Es,AdadeltaOptimizer:()=>gb,AdagradOptimizer:()=>yb,AdamOptimizer:()=>bb,AdamaxOptimizer:()=>wb,Add:()=>_s,AddN:()=>Ts,All:()=>Ls,Any:()=>Ds,ArgMax:()=>Rs,ArgMin:()=>Us,Asin:()=>Os,Asinh:()=>Ms,Atan:()=>Ps,Atan2:()=>js,Atanh:()=>Qs,AvgPool:()=>Hs,AvgPool3D:()=>Ws,AvgPool3DGrad:()=>Vs,AvgPoolGrad:()=>zs,BackendWasm:()=>$2,BatchMatMul:()=>Gs,BatchToSpaceND:()=>Ks,Bincount:()=>qs,BitwiseAnd:()=>Xs,BroadcastArgs:()=>Ys,BroadcastTo:()=>Js,Callback:()=>J_,CallbackList:()=>_S,Cast:()=>Zs,Ceil:()=>$s,ClipByValue:()=>eo,Complex:()=>to,ComplexAbs:()=>no,Concat:()=>ro,Conv2D:()=>ao,Conv2DBackpropFilter:()=>io,Conv2DBackpropInput:()=>so,Conv3D:()=>oo,Conv3DBackpropFilterV2:()=>lo,Conv3DBackpropInputV2:()=>co,Cos:()=>uo,Cosh:()=>Ao,CropAndResize:()=>fo,Cumprod:()=>ho,Cumsum:()=>po,CustomCallback:()=>DS,DataStorage:()=>Ci,DenseBincount:()=>mo,DepthToSpace:()=>go,DepthwiseConv2dNative:()=>yo,DepthwiseConv2dNativeBackpropFilter:()=>bo,DepthwiseConv2dNativeBackpropInput:()=>wo,Diag:()=>vo,Dilation2D:()=>xo,Dilation2DBackpropFilter:()=>ko,Dilation2DBackpropInput:()=>Co,Draw:()=>Bo,ENV:()=>Bs,EarlyStopping:()=>$_,Einsum:()=>Io,Elu:()=>No,EluGrad:()=>Fo,Environment:()=>vs,Equal:()=>_o,Erf:()=>Eo,Exp:()=>To,ExpandDims:()=>Lo,Expm1:()=>Do,FFT:()=>Ro,Fill:()=>Uo,FlipLeftRight:()=>Oo,Floor:()=>Mo,FloorDiv:()=>Po,FromPixels:()=>Hc,FusedBatchNorm:()=>Qo,FusedConv2D:()=>Vc,FusedDepthwiseConv2D:()=>Gc,GPGPUContext:()=>Yz,GatherNd:()=>Ho,GatherV2:()=>jo,GraphModel:()=>jL,Greater:()=>zo,GreaterEqual:()=>Wo,History:()=>LS,IFFT:()=>Go,Identity:()=>Vo,Imag:()=>Ko,InputSpec:()=>LB,IsFinite:()=>qo,IsInf:()=>Xo,IsNan:()=>Jo,KernelBackend:()=>ki,LRN:()=>cl,LRNGrad:()=>ul,LayerVariable:()=>EB,LayersModel:()=>RI,LeakyRelu:()=>Yo,Less:()=>Zo,LessEqual:()=>$o,LinSpace:()=>el,Log:()=>tl,Log1p:()=>nl,LogSoftmax:()=>ol,LogicalAnd:()=>rl,LogicalNot:()=>al,LogicalOr:()=>il,LogicalXor:()=>sl,LowerBound:()=>ll,MathBackendCPU:()=>sR,MathBackendWebGL:()=>dV,MatrixBandPart:()=>Al,Max:()=>dl,MaxPool:()=>pl,MaxPool3D:()=>ml,MaxPool3DGrad:()=>gl,MaxPoolGrad:()=>fl,MaxPoolWithArgmax:()=>yl,Maximum:()=>hl,Mean:()=>bl,Min:()=>wl,Minimum:()=>vl,MirrorPad:()=>xl,Mod:()=>Cl,MomentumOptimizer:()=>xb,Multinomial:()=>kl,Multiply:()=>Bl,Neg:()=>Sl,NonMaxSuppressionV3:()=>Nl,NonMaxSuppressionV4:()=>Fl,NonMaxSuppressionV5:()=>El,NotEqual:()=>Il,OP_SCOPE_SUFFIX:()=>kA,OneHot:()=>Tl,OnesLike:()=>_l,Optimizer:()=>mb,OptimizerConstructors:()=>Iw,Pack:()=>Ll,PadV2:()=>Dl,Pool:()=>Rl,Pow:()=>Ul,Prelu:()=>Ol,Prod:()=>Ml,RMSPropOptimizer:()=>Cb,RNN:()=>zN,RaggedGather:()=>Pl,RaggedRange:()=>Ql,RaggedTensorToTensor:()=>jl,Range:()=>Hl,Rank:()=>Wu,Real:()=>zl,RealDiv:()=>So,Reciprocal:()=>Wl,Reduction:()=>Oy,Relu:()=>Vl,Relu6:()=>Yl,Reshape:()=>Gl,ResizeBilinear:()=>Xl,ResizeBilinearGrad:()=>Jl,ResizeNearestNeighbor:()=>Kl,ResizeNearestNeighborGrad:()=>ql,Reverse:()=>Zl,RotateWithOffset:()=>zc,Round:()=>$l,Rsqrt:()=>ec,SGDOptimizer:()=>vb,ScatterNd:()=>tc,SearchSorted:()=>rc,Select:()=>ac,Selu:()=>ic,Sequential:()=>PI,Sigmoid:()=>uc,Sign:()=>cc,Sin:()=>oc,Sinh:()=>lc,Slice:()=>sc,Softmax:()=>mc,Softplus:()=>Ac,SpaceToBatchND:()=>pc,SparseFillEmptyRows:()=>gc,SparseReshape:()=>yc,SparseSegmentMean:()=>bc,SparseSegmentSum:()=>wc,SparseToDense:()=>vc,SplitV:()=>fc,Sqrt:()=>dc,Square:()=>Cc,SquaredDifference:()=>xc,StaticRegexReplace:()=>kc,Step:()=>jc,StridedSlice:()=>Bc,StringNGrams:()=>Sc,StringSplit:()=>Ic,StringToHashBucketFast:()=>Nc,Sub:()=>Fc,Sum:()=>hc,SymbolicTensor:()=>DB,Tan:()=>Ec,Tanh:()=>_c,Tensor:()=>ju,TensorBuffer:()=>Mu,TensorScatterUpdate:()=>nc,Tile:()=>Tc,TopK:()=>Lc,Transform:()=>Dc,Transpose:()=>Rc,Unique:()=>Uc,Unpack:()=>Oc,UnsortedSegmentSum:()=>Mc,UpperBound:()=>Pc,Variable:()=>zu,ZerosLike:()=>Qc,_FusedMatMul:()=>Wc,abs:()=>rh,acos:()=>ah,acosh:()=>ih,add:()=>$d,addN:()=>sh,all:()=>oh,any:()=>lh,argMax:()=>ch,argMin:()=>uh,asin:()=>Ah,asinh:()=>dh,atan:()=>hh,atan2:()=>ph,atanh:()=>fh,avgPool:()=>Th,avgPool3d:()=>Lh,backend:()=>JA,backend_util:()=>Tw,basicLSTMCell:()=>Ph,batchNorm:()=>Hh,batchNorm2d:()=>zh,batchNorm3d:()=>Wh,batchNorm4d:()=>Vh,batchToSpaceND:()=>Qh,bincount:()=>Gh,bitwiseAnd:()=>Kh,booleanMaskAsync:()=>Mg,broadcastArgs:()=>qh,broadcastTo:()=>Xh,broadcast_util:()=>bp,browser:()=>qb,buffer:()=>Xd,callbacks:()=>nT,cast:()=>Jd,ceil:()=>Jh,clipByValue:()=>Zh,clone:()=>Yd,complex:()=>SA,concat:()=>Dh,concat1d:()=>$h,concat2d:()=>ep,concat3d:()=>tp,concat4d:()=>np,constraints:()=>XB,conv1d:()=>ap,conv2d:()=>rp,conv2dTranspose:()=>sp,conv3d:()=>op,conv3dTranspose:()=>cp,copyRegisteredKernels:()=>au,cos:()=>up,cosh:()=>Ap,cosineWindow:()=>Gg,cumprod:()=>dp,cumsum:()=>hp,customGrad:()=>xf,data:()=>VL,denseBincount:()=>pp,deprecationWarn:()=>DA,depthToSpace:()=>fp,depthwiseConv2d:()=>mp,deregisterOp:()=>sT,device_util:()=>pA,diag:()=>gp,dilation2d:()=>yp,disableDeprecationWarnings:()=>LA,dispose:()=>QA,disposeVariables:()=>RA,div:()=>th,divNoNan:()=>Sp,dot:()=>Ip,dropout:()=>Wg,einsum:()=>Np,elu:()=>Fp,enableDebugMode:()=>TA,enableProdMode:()=>_A,enclosingPowerOfTwo:()=>Vg,engine:()=>UA,ensureShape:()=>Ep,env:()=>Cs,equal:()=>Cp,erf:()=>_p,euclideanNorm:()=>Xp,exp:()=>Jp,expandDims:()=>Yp,expm1:()=>Zp,eye:()=>ef,fft:()=>og,fill:()=>Yh,findBackend:()=>KA,findBackendFactory:()=>qA,floor:()=>tf,floorDiv:()=>eh,forceHalfFloat:()=>pV,fused:()=>qg,gather:()=>nf,gatherND:()=>zg,gather_util:()=>aw,getBackend:()=>VA,getGradient:()=>Zc,getKernel:()=>Yc,getKernelsForBackend:()=>$c,getThreadsCount:()=>h5,gpgpu_util:()=>Nz,grad:()=>gf,grads:()=>yf,greater:()=>rf,greaterEqual:()=>af,ifft:()=>lg,imag:()=>sf,image:()=>ab,inTopKAsync:()=>Kg,initializers:()=>uS,input:()=>HI,io:()=>Bb,irfft:()=>cg,isFinite:()=>of,isInf:()=>lf,isNaN:()=>cf,keep:()=>jA,kernel_impls:()=>Mv,layers:()=>IS,leakyRelu:()=>uf,less:()=>Af,lessEqual:()=>df,linalg:()=>ib,linspace:()=>hf,loadGraphModel:()=>HL,loadGraphModelSync:()=>zL,loadLayersModel:()=>MI,localResponseNormalization:()=>pf,log:()=>ff,log1p:()=>mf,logSigmoid:()=>Sf,logSoftmax:()=>Nf,logSumExp:()=>Ff,logicalAnd:()=>Ef,logicalNot:()=>_f,logicalOr:()=>Tf,logicalXor:()=>Lf,losses:()=>sb,lowerBound:()=>Uf,matMul:()=>Rh,math:()=>Gb,max:()=>Qp,maxPool:()=>Of,maxPool3d:()=>Mf,maxPoolWithArgmax:()=>Pf,maximum:()=>Qf,mean:()=>jf,memory:()=>OA,meshgrid:()=>Wf,metrics:()=>N_,min:()=>jp,minimum:()=>Vf,mirrorPad:()=>Gf,mod:()=>Kf,model:()=>QI,models:()=>V_,moments:()=>qf,movingAverage:()=>Qg,mul:()=>nh,multiRNNCell:()=>Xf,multinomial:()=>Jf,neg:()=>kf,nextFrame:()=>Ew,norm:()=>qp,notEqual:()=>Yf,oneHot:()=>Zf,ones:()=>zf,onesLike:()=>$f,op:()=>BA,outerProduct:()=>em,pad:()=>tm,pad1d:()=>nm,pad2d:()=>rm,pad3d:()=>am,pad4d:()=>im,pool:()=>om,pow:()=>Hp,prelu:()=>lm,print:()=>Zd,prod:()=>cm,profile:()=>MA,raggedGather:()=>um,raggedRange:()=>Am,raggedTensorToTensor:()=>dm,rand:()=>hm,randomGamma:()=>Lm,randomNormal:()=>Dm,randomStandardNormal:()=>Rm,randomUniform:()=>Um,randomUniformInt:()=>Om,range:()=>Mm,ready:()=>WA,real:()=>Pm,reciprocal:()=>Qm,registerBackend:()=>XA,registerCallbackConstructor:()=>zI,registerGradient:()=>tu,registerKernel:()=>eu,registerOp:()=>aT,regularizers:()=>G_,relu:()=>jm,relu6:()=>Hm,removeBackend:()=>GA,reshape:()=>_h,reverse:()=>zm,reverse1d:()=>Wm,reverse2d:()=>Vm,reverse3d:()=>Gm,reverse4d:()=>Km,rfft:()=>Ag,round:()=>qm,rsqrt:()=>Xm,scalar:()=>zp,scatterND:()=>jg,scatter_util:()=>kg,searchSorted:()=>Rf,selu:()=>Jm,separableConv2d:()=>Ym,sequential:()=>jI,serialization:()=>cb,setBackend:()=>zA,setPlatform:()=>YA,setThreadsCount:()=>d5,setWasmPath:()=>l5,setWasmPaths:()=>c5,setWebGLContext:()=>Kj,setdiff1dAsync:()=>Zm,shared:()=>oR,sigmoid:()=>Uh,sign:()=>$m,signal:()=>rb,sin:()=>eg,sinh:()=>tg,slice:()=>Oh,slice1d:()=>ng,slice2d:()=>rg,slice3d:()=>ag,slice4d:()=>ig,slice_util:()=>sw,softmax:()=>sg,softplus:()=>Bf,spaceToBatchND:()=>sm,sparse:()=>ob,sparseToDense:()=>Hg,spectral:()=>nb,split:()=>ug,sqrt:()=>Wp,square:()=>Vp,squaredDifference:()=>dg,squeeze:()=>hg,stack:()=>pg,step:()=>fg,stridedSlice:()=>mg,string:()=>lb,sub:()=>If,sum:()=>Gp,sumOutType:()=>$u,tan:()=>gg,tanh:()=>Mh,tensor:()=>NA,tensor1d:()=>yg,tensor2d:()=>bg,tensor3d:()=>wg,tensor4d:()=>vg,tensor5d:()=>xg,tensor6d:()=>Cg,tensorScatterUpdate:()=>Ng,tensor_util:()=>Ju,test_util:()=>fm,tidy:()=>PA,tile:()=>$p,time:()=>HA,topk:()=>Fg,train:()=>Nw,transpose:()=>Pg,truncatedNormal:()=>Eg,unique:()=>_g,unregisterGradient:()=>ru,unregisterKernel:()=>nu,unsortedSegmentSum:()=>Tg,unstack:()=>Lg,upcastType:()=>Zu,upperBound:()=>Dg,util:()=>su,valueAndGrad:()=>bf,valueAndGrads:()=>wf,variable:()=>Rg,variableGrads:()=>vf,version:()=>m5,version_converter:()=>WL,version_core:()=>Sw,version_cpu:()=>DO,version_layers:()=>mI,version_wasm:()=>p5,version_webgl:()=>hV,webgl:()=>fV,webgl_util:()=>jj,where:()=>kp,whereAsync:()=>Og,zeros:()=>Hf,zerosLike:()=>Bp});var Ka=Object.create,qa=Object.defineProperty,Xa=Object.getOwnPropertyDescriptor,Ja=Object.getOwnPropertyNames,Ya=Object.getPrototypeOf,Za=Object.prototype.hasOwnProperty,$a=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ei=(e,t)=>{for(var n in t)qa(e,n,{get:t[n],enumerable:!0})},ti=(e,t,n)=>(n=null!=e?Ka(Ya(e)):{},((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of Ja(t))!Za.call(e,a)&&a!==n&&qa(e,a,{get:()=>t[a],enumerable:!(r=Xa(t,a))||r.enumerable});return e})(!t&&e&&e.__esModule?n:qa(n,"default",{value:e,enumerable:!0}),e)),ni=$a((e,t)=>{t.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(Ut){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=a;var i={},s={};function o(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=s[e])?r:(n=c(e,(0|e)<0?-1:0,!0),a&&(s[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=c(e,e<0?-1:0,!1),a&&(i[e]=n),n)}function l(e,t){if(isNaN(e))return t?y:g;if(t){if(e<0)return y;if(e>=p)return C}else{if(e<=-f)return k;if(e+1>=f)return x}return e<0?l(-e,t).neg():c(e%h|0,e/h|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=o,r.fromNumber=l,r.fromBits=c;var u=Math.pow;function A(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return A(e.substring(1),t,n).neg();for(var a=l(u(n,8)),i=g,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+o),n);if(o<8){var d=l(u(n,o));i=i.mul(d).add(l(c))}else i=(i=i.mul(a)).add(l(c))}return i.unsigned=t,i}function d(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?A(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=A,r.fromValue=d;var h=4294967296,p=h*h,f=p/2,m=o(1<<24),g=o(0);r.ZERO=g;var y=o(0,!0);r.UZERO=y;var b=o(1);r.ONE=b;var w=o(1,!0);r.UONE=w;var v=o(-1);r.NEG_ONE=v;var x=c(-1,2147483647,!1);r.MAX_VALUE=x;var C=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=C;var k=c(0,-2147483648,!1);r.MIN_VALUE=k;var B=r.prototype;B.toInt=function(){return this.unsigned?this.low>>>0:this.low},B.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},B.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(k)){var t=l(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=l(u(e,6),this.unsigned),i=this,s="";;){var o=i.div(a),c=(i.sub(o.mul(a)).toInt()>>>0).toString(e);if((i=o).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},B.getHighBits=function(){return this.high},B.getHighBitsUnsigned=function(){return this.high>>>0},B.getLowBits=function(){return this.low},B.getLowBitsUnsigned=function(){return this.low>>>0},B.getNumBitsAbs=function(){if(this.isNegative())return this.eq(k)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return 0!=this.high?t+33:t+1},B.isZero=function(){return 0===this.high&&0===this.low},B.eqz=B.isZero,B.isNegative=function(){return!this.unsigned&&this.high<0},B.isPositive=function(){return this.unsigned||this.high>=0},B.isOdd=function(){return 1===(1&this.low)},B.isEven=function(){return 0===(1&this.low)},B.equals=function(e){return a(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},B.eq=B.equals,B.notEquals=function(e){return!this.eq(e)},B.neq=B.notEquals,B.ne=B.notEquals,B.lessThan=function(e){return this.comp(e)<0},B.lt=B.lessThan,B.lessThanOrEqual=function(e){return this.comp(e)<=0},B.lte=B.lessThanOrEqual,B.le=B.lessThanOrEqual,B.greaterThan=function(e){return this.comp(e)>0},B.gt=B.greaterThan,B.greaterThanOrEqual=function(e){return this.comp(e)>=0},B.gte=B.greaterThanOrEqual,B.ge=B.greaterThanOrEqual,B.compare=function(e){if(a(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},B.comp=B.compare,B.negate=function(){return!this.unsigned&&this.eq(k)?k:this.not().add(b)},B.neg=B.negate,B.add=function(e){a(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,s=e.high>>>16,o=65535&e.high,l=e.low>>>16,u=0,A=0,h=0,p=0;return h+=(p+=i+(65535&e.low))>>>16,A+=(h+=r+l)>>>16,u+=(A+=n+o)>>>16,u+=t+s,c((h&=65535)<<16|(p&=65535),(u&=65535)<<16|(A&=65535),this.unsigned)},B.subtract=function(e){return a(e)||(e=d(e)),this.add(e.neg())},B.sub=B.subtract,B.multiply=function(e){if(this.isZero())return g;if(a(e)||(e=d(e)),n)return c(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(k))return e.isOdd()?k:g;if(e.eq(k))return this.isOdd()?k:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return l(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,i=this.low>>>16,s=65535&this.low,o=e.high>>>16,u=65535&e.high,A=e.low>>>16,h=65535&e.low,p=0,f=0,y=0,b=0;return y+=(b+=s*h)>>>16,f+=(y+=i*h)>>>16,y&=65535,f+=(y+=s*A)>>>16,p+=(f+=r*h)>>>16,f&=65535,p+=(f+=i*A)>>>16,f&=65535,p+=(f+=s*u)>>>16,p+=t*h+r*A+i*u+s*o,c((y&=65535)<<16|(b&=65535),(p&=65535)<<16|(f&=65535),this.unsigned)},B.mul=B.multiply,B.divide=function(e){if(a(e)||(e=d(e)),e.isZero())throw Error("division by zero");var t,r,i;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return w;i=y}else{if(this.eq(k))return e.eq(b)||e.eq(v)?k:e.eq(k)?b:(t=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?b:v:(r=this.sub(e.mul(t)),i=t.add(r.div(e)));if(e.eq(k))return this.unsigned?y:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),o=s<=48?1:u(2,s-48),A=l(t),h=A.mul(e);h.isNegative()||h.gt(r);)h=(A=l(t-=o,this.unsigned)).mul(e);A.isZero()&&(A=b),i=i.add(A),r=r.sub(h)}return i},B.div=B.divide,B.modulo=function(e){return a(e)||(e=d(e)),n?c((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},B.mod=B.modulo,B.rem=B.modulo,B.not=function(){return c(~this.low,~this.high,this.unsigned)},B.and=function(e){return a(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},B.or=function(e){return a(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},B.xor=function(e){return a(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},B.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},B.shl=B.shiftLeft,B.shiftRight=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},B.shr=B.shiftRight,B.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},B.shru=B.shiftRightUnsigned,B.shr_u=B.shiftRightUnsigned,B.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},B.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},B.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},B.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},B.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}}),ri=$a(()=>{}),ai=$a(()=>{}),ii=$a((e,t)=>{!function(e,t,n){function r(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var n=new r(e),i=t&&t.state,s=n.next;return s.int32=function(){return 4294967296*n.next()|0},s.double=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.quick=s,i&&("object"==typeof i&&a(i,n),s.state=function(){return a(n,{})}),s}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.alea=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)}),si=$a((e,t)=>{!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function i(e,t){var n=new r(e),i=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,i&&("object"==typeof i&&a(i,n),s.state=function(){return a(n,{})}),s}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xor128=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)}),oi=$a((e,t)=>{!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,i&&("object"==typeof i&&a(i,n),s.state=function(){return a(n,{})}),s}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xorwow=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)}),li=$a((e,t)=>{!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,i&&(i.x&&a(i,n),s.state=function(){return a(n,{})}),s}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xorshift7=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)}),ci=$a((e,t)=>{!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,s,o=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),a=0,i=-32;i<l;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(s=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(s=s+1640531527|0,a=0==(n=o[127&i]^=r+s)?a+1:0);for(a>=128&&(o[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=o[a+34&127],n=o[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,o[a]=r^n;e.w=s,e.X=o,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,i&&(i.X&&a(i,n),s.state=function(){return a(n,{})}),s}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.xor4096=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)}),ui=$a((e,t)=>{!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=n.next,s.quick=s,i&&("object"==typeof i&&a(i,n),s.state=function(){return a(n,{})}),s}t&&t.exports?t.exports=i:n&&n.amd?n(function(){return i}):this.tychei=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)}),Ai=$a(()=>{}),di=$a((e,t)=>{!function(e,r,a){var i,s=256,o="random",l=a.pow(s,6),c=a.pow(2,52),u=2*c,A=255;function d(t,n,A){var d=[],y=m(f((n=1==n?{entropy:!0}:n||{}).entropy?[t,g(r)]:null==t?function(){try{var t;return i&&(t=i.randomBytes)?t=t(s):(t=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(t)),g(t)}catch(d){var n=e.navigator,a=n&&n.plugins;return[+new Date,e,a,e.screen,g(r)]}}():t,3),d),b=new h(d),w=function(){for(var e=b.g(6),t=l,n=0;e<c;)e=(e+n)*s,t*=s,n=b.g(1);for(;e>=u;)e/=2,t/=2,n>>>=1;return(e+n)/t};return w.int32=function(){return 0|b.g(4)},w.quick=function(){return b.g(4)/4294967296},w.double=w,m(g(b.S),r),(n.pass||A||function(e,t,n,r){return r&&(r.S&&p(r,b),e.state=function(){return p(b,{})}),n?(a[o]=e,t):e})(w,y,"global"in n?n.global:this==a,n.state)}function h(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<s;)o[a]=a++;for(a=0;a<s;a++)o[a]=o[i=A&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=A&a+1],n=n*s+o[A&(o[a]=o[i=A&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(s)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function f(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(f(e[n],t-1))}catch(Xt){}return r.length?r:"string"==a?e:e+"\0"}function m(e,t){for(var n,r=e+"",a=0;a<r.length;)t[A&a]=A&(n^=19*t[A&a])+r.charCodeAt(a++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(m(a.random(),r),"object"==typeof t&&t.exports){t.exports=d;try{i=Ai()}catch(Qt){}}else"function"==typeof define&&n.amdO?define(function(){return d}):a["seed"+o]=d}("undefined"!=typeof self?self:e,[],Math)}),hi=$a((e,t)=>{var n=ii(),r=si(),a=oi(),i=li(),s=ci(),o=ui(),l=di();l.alea=n,l.xor128=r,l.xorwow=a,l.xorshift7=i,l.xor4096=s,l.tychei=o,t.exports=l}),pi=$a(()=>{}),fi=$a(()=>{}),mi=$a(()=>{}),gi=$a(()=>{}),yi=$a(()=>{}),bi=$a(()=>{}),wi=$a((e,t)=>{var r=(()=>{var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||za,function(t){function r(){return _.buffer!=R&&W(_.buffer),O}function a(){return _.buffer!=R&&W(_.buffer),M}function i(){return _.buffer!=R&&W(_.buffer),P}function s(){return _.buffer!=R&&W(_.buffer),Q}var o,l,c,u="undefined"!=typeof(t=t||{})?t:{};u.ready=new Promise(function(e,t){o=e,l=t}),"undefined"!=typeof process&&process.listeners&&(c={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var A,d,h,p=Object.assign({},u),f=[],m=(e,t)=>{throw t},g="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,w=u.ENVIRONMENT_IS_PTHREAD||!1,v="";function x(e){return u.locateFile?u.locateFile(e,v):v+e}if(b){var C=fi(),k=mi();let e;v=y?k.dirname(v)+"/":"//",A=(e,t)=>(e=se(e)?new URL(e):k.normalize(e),C.readFileSync(e,t?void 0:"utf8")),h=e=>{var t=A(e,!0);return t.buffer||(t=new Uint8Array(t)),t},d=(e,t,n)=>{e=se(e)?new URL(e):k.normalize(e),C.readFile(e,function(e,r){e?n(e):t(r.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),f=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof ce))throw e}),process.on("unhandledRejection",function(e){throw e}),m=(e,t)=>{if(J())throw process.exitCode=e,t;(function(e){e instanceof ce||N("exiting due to exception: "+e)})(t),process.exit(e)},u.inspect=function(){return"[Emscripten Module object]"};try{e=gi()}catch(zt){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),zt}n.g.Worker=e.Worker}else(g||y)&&(y?v=self.location.href:"undefined"!=typeof document&&document.currentScript&&(v=document.currentScript.src),"undefined"!=typeof e&&e&&(v=e),v=0!==v.indexOf("blob:")?v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1):"",b||(A=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},y&&(h=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),d=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}),e=>document.title=e);b&&"undefined"==typeof performance&&(n.g.performance=yi().performance);var B=console.log.bind(console),S=console.warn.bind(console);b&&(B=e=>C.writeSync(1,e+"\n"),S=e=>C.writeSync(2,e+"\n"));var I=u.print||B,N=u.printErr||S;Object.assign(u,p),p=null,u.arguments&&(f=u.arguments),u.thisProgram&&u.thisProgram,u.quit&&(m=u.quit);var F;Atomics.load,Atomics.store,Atomics.compareExchange;u.wasmBinary&&(F=u.wasmBinary);var E=u.noExitRuntime||!0;"object"!=typeof WebAssembly&&re("no native wasm support detected");var _,T,L,D=!1;var R,U,O,M,P,Q,j="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function H(e,t,n){for(var r=(t>>>=0)+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.buffer&&j)return j.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,a):e.subarray(t,a));for(var i="";t<a;){var s=e[t++];if(128&s){var o=63&e[t++];if(192!=(224&s)){var l=63&e[t++];if((s=224==(240&s)?(15&s)<<12|o<<6|l:(7&s)<<18|o<<12|l<<6|63&e[t++])<65536)i+=String.fromCharCode(s);else{var c=s-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&s)<<6|o)}else i+=String.fromCharCode(s)}return i}function z(e,t){return(e>>>=0)?H(r(),e,t):""}function W(e){R=e,u.HEAP8=U=new Int8Array(e),u.HEAP16=new Int16Array(e),u.HEAP32=M=new Int32Array(e),u.HEAPU8=O=new Uint8Array(e),u.HEAPU16=new Uint16Array(e),u.HEAPU32=P=new Uint32Array(e),u.HEAPF32=new Float32Array(e),u.HEAPF64=Q=new Float64Array(e)}w&&(R=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(w)_=u.wasmMemory,R=u.buffer;else if(u.wasmMemory)_=u.wasmMemory;else if(!((_=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw N("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),b&&N("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");_&&(R=_.buffer),V=R.byteLength,W(R);var G,K=[],q=[],X=[];function J(){return E}function Y(){!w&&fe(q)}function Z(e){K.unshift(e)}function $(e){X.unshift(e)}var ee=0,te=null,ne=null;function re(e){u.onAbort&&u.onAbort(e),N(e="Aborted("+e+")"),D=!0,L=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw l(t),t}var ae;function ie(e){return e.startsWith("data:application/octet-stream;base64,")}function se(e){return e.startsWith("file://")}function oe(e){try{if(e==ae&&F)return new Uint8Array(F);if(h)return h(e);throw"both async and sync fetching of the wasm failed"}catch(zt){re(zt)}}ie(ae="tfjs-backend-wasm-threaded-simd.wasm")||(ae=x(ae));var le={};function ce(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ue(e){var t=pe.pthreads[e];(function(e,t){e||re(t)})(t),pe.returnWorkerToPool(t)}function Ae(e){var t=pe.getNewWorker();if(!t)return 6;pe.runningWorkers.push(t),pe.pthreads[e.pthread_ptr]=t,t.pthread_ptr=e.pthread_ptr;var n={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return t.runPthread=()=>{b&&t.ref(),t.postMessage(n,e.transferList),delete t.runPthread},t.loaded&&t.runPthread(),0}function de(e){if(w)return Ce(1,1,e);L=e,J()||(pe.terminateAllThreads(),u.onExit&&u.onExit(e),D=!0),m(e,new ce(e))}var he=function(e,t){if(L=e,!t&&w)throw me(e),"unwind";de(e)};var pe={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){w?pe.initWorker():pe.initMainThread()},initMainThread:function(){for(var e=8;e--;)pe.allocateUnusedWorker()},initWorker:function(){E=!1},setExitStatus:function(e){L=e},terminateAllThreads:function(){for(var e of Object.values(pe.pthreads))pe.returnWorkerToPool(e);for(var e of pe.unusedWorkers)e.terminate();pe.unusedWorkers=[]},returnWorkerToPool:function(e){var t=e.pthread_ptr;delete pe.pthreads[t],pe.unusedWorkers.push(e),pe.runningWorkers.splice(pe.runningWorkers.indexOf(e),1),e.pthread_ptr=0,b&&e.unref(),ze(t)},receiveObjectTransfer:function(e){},threadInitTLS:function(){pe.tlsInitFunctions.forEach(e=>e())},loadWasmModuleToWorker:function(t,n){t.onmessage=e=>{var r=e.data,a=r.cmd;if(t.pthread_ptr&&(pe.currentProxiedOperationCallerThread=t.pthread_ptr),r.targetThread&&r.targetThread!=Pe()){var i=pe.pthreads[r.targetThread];return i?i.postMessage(r,r.transferList):N('Internal error! Worker sent a message "'+a+'" to target pthread '+r.targetThread+", but that thread no longer exists!"),void(pe.currentProxiedOperationCallerThread=void 0)}"processProxyingQueue"===a?ve(r.queue):"spawnThread"===a?Ae(r):"cleanupThread"===a?ue(r.thread):"killThread"===a?function(e){var t=pe.pthreads[e];delete pe.pthreads[e],t.terminate(),ze(e),pe.runningWorkers.splice(pe.runningWorkers.indexOf(t),1),t.pthread_ptr=0}(r.thread):"cancelThread"===a?function(e){pe.pthreads[e].postMessage({cmd:"cancel"})}(r.thread):"loaded"===a?(t.loaded=!0,b&&t.unref(),n&&n(t),t.runPthread&&t.runPthread()):"print"===a?I("Thread "+r.threadId+": "+r.text):"printErr"===a?N("Thread "+r.threadId+": "+r.text):"alert"===a?alert("Thread "+r.threadId+": "+r.text):"setimmediate"===r.target?t.postMessage(r):"callHandler"===a?u[r.handler](...r.args):a&&N("worker sent an unknown command "+a),pe.currentProxiedOperationCallerThread=void 0},t.onerror=e=>{throw N("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},b&&(t.on("message",function(e){t.onmessage({data:e})}),t.on("error",function(e){t.onerror(e)}),t.on("detachedExit",function(){}));var r=[];for(var a of["onExit","onAbort","print","printErr"])u.hasOwnProperty(a)&&r.push(a);t.postMessage({cmd:"load",handlers:r,urlOrBlob:u.mainScriptUrlOrBlob||e,wasmMemory:_,wasmModule:T})},allocateUnusedWorker:function(){var e,t=x("tfjs-backend-wasm-threaded-simd.worker.js");e=new Worker(t),pe.unusedWorkers.push(e)},getNewWorker:function(){return 0==pe.unusedWorkers.length&&(pe.allocateUnusedWorker(),pe.loadWasmModuleToWorker(pe.unusedWorkers[0])),pe.unusedWorkers.pop()}};function fe(e){for(;e.length>0;)e.shift()(u)}function me(e){if(w)return Ce(2,0,e);try{he(e)}catch(zt){!function(e){if(e instanceof ce||"unwind"==e)return L;m(1,e)}(zt)}}u.PThread=pe,u.establishStackSpace=function(){var e=Pe(),t=a()[e+52>>>2],n=a()[e+56>>>2];Ve(t,t-n),Ke(t)};var ge=[];function ye(e,t,n,r){return w?Ce(3,1,e,t,n,r):be(e,t,n,r)}function be(e,t,n,r){if("undefined"==typeof SharedArrayBuffer)return N("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];if(w&&0===a.length)return ye(e,t,n,r);var i={startRoutine:n,pthread_ptr:e,arg:r,transferList:a};return w?(i.cmd="spawnThread",postMessage(i,a),0):Ae(i)}u.invokeEntryPoint=function(e,t){var n=function(e){var t=ge[e];return t||(e>=ge.length&&(ge.length=e+1),ge[e]=t=G.get(e)),t}(e)(t);J()?pe.setExitStatus(n):We(n)};var we;function ve(e){Atomics.store(a(),e>>2,1),Pe()&&He(e),Atomics.compareExchange(a(),e>>2,1,0)}function xe(e){xe.shown||(xe.shown={}),xe.shown[e]||(xe.shown[e]=1,b&&(e="warning: "+e),N(e))}function Ce(e,t){var n=arguments.length-2,r=arguments;return function(e){var t=Ge(),n=e();return Ke(t),n}(()=>{for(var a=n,i=qe(8*a),o=i>>3,l=0;l<n;l++){var c=r[2+l];s()[o+l>>>0]=c}return je(e,a,i,t)})}u.executeNotifiedProxyingQueue=ve,we=b?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.timeOrigin+performance.now();var ke=[];function Be(e){try{return _.grow(e-R.byteLength+65535>>>16),W(_.buffer),1}catch(zt){}}function Se(e){return w?Ce(4,1,e):52}function Ie(e,t,n,r,a){return w?Ce(5,1,e,t,n,r,a):70}var Ne=[null,[],[]];function Fe(e,t){var n=Ne[e];0===t||10===t?((1===e?I:N)(H(n,0)),n.length=0):n.push(t)}function Ee(e,t,n,a){if(w)return Ce(6,1,e,t,n,a);for(var s=0,o=0;o<n;o++){var l=i()[t>>>2],c=i()[t+4>>>2];t+=8;for(var u=0;u<c;u++)Fe(e,r()[l+u>>>0]);s+=c}return i()[a>>>2]=s,0}function _e(e){return u["_"+e]}function Te(e,t){(_.buffer!=R&&W(_.buffer),U).set(e,t>>>0)}function Le(e,t,n,a,i){var s={string:e=>{var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);(function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;for(var a=n>>>=0,i=n+r-1,s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++s)),o<=127){if(n>=i)break;t[n++>>>0]=o}else if(o<=2047){if(n+1>=i)break;t[n++>>>0]=192|o>>6,t[n++>>>0]=128|63&o}else if(o<=65535){if(n+2>=i)break;t[n++>>>0]=224|o>>12,t[n++>>>0]=128|o>>6&63,t[n++>>>0]=128|63&o}else{if(n+3>=i)break;t[n++>>>0]=240|o>>18,t[n++>>>0]=128|o>>12&63,t[n++>>>0]=128|o>>6&63,t[n++>>>0]=128|63&o}}t[n>>>0]=0})(e,r(),t,n)})(e,t=qe(n),n)}return t},array:e=>{var t=qe(e.length);return Te(e,t),t}};var o=_e(e),l=[],c=0;if(a)for(var u=0;u<a.length;u++){var A=s[n[u]];A?(0===c&&(c=Ge()),l[u]=A(a[u])):l[u]=a[u]}var d,h=o.apply(null,l);return d=h,0!==c&&Ke(c),h=function(e){return"string"===t?z(e):"boolean"===t?!!e:e}(d),h}pe.init();var De,Re,Ue,Oe=[null,de,me,ye,Se,Ie,Ee],Me={__emscripten_init_main_thread_js:function(e){Qe(e,!y,1,!g),pe.threadInitTLS()},__emscripten_thread_cleanup:function(e){w?postMessage({cmd:"cleanupThread",thread:e}):ue(e)},__pthread_create_js:be,_emscripten_default_pthread_stack_size:function(){return 65536},_emscripten_get_now_is_monotonic:function(){return true},_emscripten_notify_task_queue:function(e,t,n,r){if(e==t)setTimeout(()=>ve(r));else if(w)postMessage({targetThread:e,cmd:"processProxyingQueue",queue:r});else{var a=pe.pthreads[e];if(!a)return;a.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},_emscripten_set_offscreencanvas_size:function(e,t,n){return-1},abort:function(){re("")},emscripten_check_blocking_allowed:function(){b||y||xe("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},emscripten_date_now:function(){return Date.now()},emscripten_get_heap_max:function(){return 4294901760},emscripten_get_now:we,emscripten_memcpy_big:function(e,t,n){r().copyWithin(e>>>0,t>>>0,t+n>>>0)},emscripten_num_logical_cores:function(){return b?bi().cpus().length:navigator.hardwareConcurrency},emscripten_receive_on_main_thread_js:function(e,t,n){ke.length=t;for(var r=n>>3,a=0;a<t;a++)ke[a]=s()[r+a>>>0];return(e<0?le[-e-1]:Oe[e]).apply(null,ke)},emscripten_resize_heap:function(e){var t=r().length;if((e>>>=0)<=t)return!1;var n=4294901760;if(e>n)return!1;let a=(e,t)=>e+(t-e%t)%t;for(var i=1;i<=4;i*=2){var s=t*(1+.2/i);if(s=Math.min(s,e+100663296),Be(Math.min(n,a(Math.max(e,s),65536))))return!0}return!1},emscripten_unwind_to_js_event_loop:function(){throw"unwind"},exit:he,fd_close:Se,fd_seek:Ie,fd_write:Ee,memory:_||u.wasmMemory},Pe=(function(){var e={env:Me,wasi_snapshot_preview1:Me};function t(e,t){var n=e.exports;if(u.asm=n,function(e){pe.tlsInitFunctions.push(e)}(u.asm._emscripten_tls_init),G=u.asm.__indirect_function_table,function(e){q.unshift(e)}(u.asm.__wasm_call_ctors),T=t,!w){var r=pe.unusedWorkers.length;pe.unusedWorkers.forEach(function(e){pe.loadWasmModuleToWorker(e,function(){--r||function(){if(ee--,u.monitorRunDependencies&&u.monitorRunDependencies(ee),0==ee&&(null!==te&&(clearInterval(te),te=null),ne)){var e=ne;ne=null,e()}}()})})}}function n(e){t(e.instance,e.module)}function r(t){return function(){if(!F&&(g||y)){if("function"==typeof fetch&&!se(ae))return fetch(ae,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ae+"'";return e.arrayBuffer()}).catch(function(){return oe(ae)});if(d)return new Promise(function(e,t){d(ae,function(t){e(new Uint8Array(t))},t)})}return Promise.resolve().then(function(){return oe(ae)})}().then(function(t){return WebAssembly.instantiate(t,e)}).then(function(e){return e}).then(t,function(e){N("failed to asynchronously prepare wasm: "+e),re(e)})}if(w||(ee++,u.monitorRunDependencies&&u.monitorRunDependencies(ee)),u.instantiateWasm)try{return u.instantiateWasm(e,t)}catch(Br){N("Module.instantiateWasm callback failed with error: "+Br),l(Br)}(F||"function"!=typeof WebAssembly.instantiateStreaming||ie(ae)||se(ae)||b||"function"!=typeof fetch?r(n):fetch(ae,{credentials:"same-origin"}).then(function(t){return WebAssembly.instantiateStreaming(t,e).then(n,function(e){return N("wasm streaming compile failed: "+e),N("falling back to ArrayBuffer instantiation"),r(n)})})).catch(l)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.__wasm_call_ctors).apply(null,arguments)},u._init=function(){return(u._init=u.asm.init).apply(null,arguments)},u._init_with_threads_count=function(){return(u._init_with_threads_count=u.asm.init_with_threads_count).apply(null,arguments)},u._get_threads_count=function(){return(u._get_threads_count=u.asm.get_threads_count).apply(null,arguments)},u._register_tensor=function(){return(u._register_tensor=u.asm.register_tensor).apply(null,arguments)},u._dispose_data=function(){return(u._dispose_data=u.asm.dispose_data).apply(null,arguments)},u._dispose=function(){return(u._dispose=u.asm.dispose).apply(null,arguments)},u._Abs=function(){return(u._Abs=u.asm.Abs).apply(null,arguments)},u._Acos=function(){return(u._Acos=u.asm.Acos).apply(null,arguments)},u._Acosh=function(){return(u._Acosh=u.asm.Acosh).apply(null,arguments)},u._Add=function(){return(u._Add=u.asm.Add).apply(null,arguments)},u._AddN=function(){return(u._AddN=u.asm.AddN).apply(null,arguments)},u._All=function(){return(u._All=u.asm.All).apply(null,arguments)},u._Any=function(){return(u._Any=u.asm.Any).apply(null,arguments)},u._ArgMax=function(){return(u._ArgMax=u.asm.ArgMax).apply(null,arguments)},u._ArgMin=function(){return(u._ArgMin=u.asm.ArgMin).apply(null,arguments)},u._Asin=function(){return(u._Asin=u.asm.Asin).apply(null,arguments)},u._Asinh=function(){return(u._Asinh=u.asm.Asinh).apply(null,arguments)},u._Atan=function(){return(u._Atan=u.asm.Atan).apply(null,arguments)},u._Atan2=function(){return(u._Atan2=u.asm.Atan2).apply(null,arguments)},u._Atanh=function(){return(u._Atanh=u.asm.Atanh).apply(null,arguments)},u._AvgPool=function(){return(u._AvgPool=u.asm.AvgPool).apply(null,arguments)},u._AvgPool3D=function(){return(u._AvgPool3D=u.asm.AvgPool3D).apply(null,arguments)},u._AvgPool3DGrad=function(){return(u._AvgPool3DGrad=u.asm.AvgPool3DGrad).apply(null,arguments)},u._AvgPoolGrad=function(){return(u._AvgPoolGrad=u.asm.AvgPoolGrad).apply(null,arguments)},u._BatchMatMul=function(){return(u._BatchMatMul=u.asm.BatchMatMul).apply(null,arguments)},u._Bincount=function(){return(u._Bincount=u.asm.Bincount).apply(null,arguments)},u._BitwiseAnd=function(){return(u._BitwiseAnd=u.asm.BitwiseAnd).apply(null,arguments)},u._Ceil=function(){return(u._Ceil=u.asm.Ceil).apply(null,arguments)},u._ClipByValue=function(){return(u._ClipByValue=u.asm.ClipByValue).apply(null,arguments)},u._Conv2D=function(){return(u._Conv2D=u.asm.Conv2D).apply(null,arguments)},u._Conv2DBackpropInput=function(){return(u._Conv2DBackpropInput=u.asm.Conv2DBackpropInput).apply(null,arguments)},u._Conv3D=function(){return(u._Conv3D=u.asm.Conv3D).apply(null,arguments)},u._Conv3DBackpropFilterV2=function(){return(u._Conv3DBackpropFilterV2=u.asm.Conv3DBackpropFilterV2).apply(null,arguments)},u._Conv3DBackpropInputV2=function(){return(u._Conv3DBackpropInputV2=u.asm.Conv3DBackpropInputV2).apply(null,arguments)},u._Cos=function(){return(u._Cos=u.asm.Cos).apply(null,arguments)},u._Cosh=function(){return(u._Cosh=u.asm.Cosh).apply(null,arguments)},u._CropAndResize=function(){return(u._CropAndResize=u.asm.CropAndResize).apply(null,arguments)},u._Cumprod=function(){return(u._Cumprod=u.asm.Cumprod).apply(null,arguments)},u._Cumsum=function(){return(u._Cumsum=u.asm.Cumsum).apply(null,arguments)},u._DenseBincount=function(){return(u._DenseBincount=u.asm.DenseBincount).apply(null,arguments)},u._DepthToSpace=function(){return(u._DepthToSpace=u.asm.DepthToSpace).apply(null,arguments)},u._DepthwiseConv2dNative=function(){return(u._DepthwiseConv2dNative=u.asm.DepthwiseConv2dNative).apply(null,arguments)},u._Diag=function(){return(u._Diag=u.asm.Diag).apply(null,arguments)},u._Dilation2D=function(){return(u._Dilation2D=u.asm.Dilation2D).apply(null,arguments)},u._Dilation2DBackpropFilter=function(){return(u._Dilation2DBackpropFilter=u.asm.Dilation2DBackpropFilter).apply(null,arguments)},u._Dilation2DBackpropInput=function(){return(u._Dilation2DBackpropInput=u.asm.Dilation2DBackpropInput).apply(null,arguments)},u._Elu=function(){return(u._Elu=u.asm.Elu).apply(null,arguments)},u._EluGrad=function(){return(u._EluGrad=u.asm.EluGrad).apply(null,arguments)},u._Equal=function(){return(u._Equal=u.asm.Equal).apply(null,arguments)},u._Erf=function(){return(u._Erf=u.asm.Erf).apply(null,arguments)},u._Exp=function(){return(u._Exp=u.asm.Exp).apply(null,arguments)},u._Expm1=function(){return(u._Expm1=u.asm.Expm1).apply(null,arguments)},u._FlipLeftRight=function(){return(u._FlipLeftRight=u.asm.FlipLeftRight).apply(null,arguments)},u._Floor=function(){return(u._Floor=u.asm.Floor).apply(null,arguments)},u._FloorDiv=function(){return(u._FloorDiv=u.asm.FloorDiv).apply(null,arguments)},u._FusedBatchNorm=function(){return(u._FusedBatchNorm=u.asm.FusedBatchNorm).apply(null,arguments)},u._FusedConv2D=function(){return(u._FusedConv2D=u.asm.FusedConv2D).apply(null,arguments)},u._FusedDepthwiseConv2D=function(){return(u._FusedDepthwiseConv2D=u.asm.FusedDepthwiseConv2D).apply(null,arguments)},u._Gather=function(){return(u._Gather=u.asm.Gather).apply(null,arguments)},u._GatherNd=function(){return(u._GatherNd=u.asm.GatherNd).apply(null,arguments)},u._Greater=function(){return(u._Greater=u.asm.Greater).apply(null,arguments)},u._GreaterEqual=function(){return(u._GreaterEqual=u.asm.GreaterEqual).apply(null,arguments)},u._IsFinite=function(){return(u._IsFinite=u.asm.IsFinite).apply(null,arguments)},u._IsInf=function(){return(u._IsInf=u.asm.IsInf).apply(null,arguments)},u._IsNan=function(){return(u._IsNan=u.asm.IsNan).apply(null,arguments)},u._LRN=function(){return(u._LRN=u.asm.LRN).apply(null,arguments)},u._LRNGrad=function(){return(u._LRNGrad=u.asm.LRNGrad).apply(null,arguments)},u._LeakyRelu=function(){return(u._LeakyRelu=u.asm.LeakyRelu).apply(null,arguments)},u._Less=function(){return(u._Less=u.asm.Less).apply(null,arguments)},u._LessEqual=function(){return(u._LessEqual=u.asm.LessEqual).apply(null,arguments)},u._LinSpace=function(){return(u._LinSpace=u.asm.LinSpace).apply(null,arguments)},u._Log=function(){return(u._Log=u.asm.Log).apply(null,arguments)},u._Log1p=function(){return(u._Log1p=u.asm.Log1p).apply(null,arguments)},u._LogicalAnd=function(){return(u._LogicalAnd=u.asm.LogicalAnd).apply(null,arguments)},u._LogicalNot=function(){return(u._LogicalNot=u.asm.LogicalNot).apply(null,arguments)},u._LogicalOr=function(){return(u._LogicalOr=u.asm.LogicalOr).apply(null,arguments)},u._LogicalXor=function(){return(u._LogicalXor=u.asm.LogicalXor).apply(null,arguments)},u._Max=function(){return(u._Max=u.asm.Max).apply(null,arguments)},u._MaxPool=function(){return(u._MaxPool=u.asm.MaxPool).apply(null,arguments)},u._MaxPool3D=function(){return(u._MaxPool3D=u.asm.MaxPool3D).apply(null,arguments)},u._MaxPool3DGrad=function(){return(u._MaxPool3DGrad=u.asm.MaxPool3DGrad).apply(null,arguments)},u._MaxPoolGrad=function(){return(u._MaxPoolGrad=u.asm.MaxPoolGrad).apply(null,arguments)},u._MaxPoolWithArgmax=function(){return(u._MaxPoolWithArgmax=u.asm.MaxPoolWithArgmax).apply(null,arguments)},u._Maximum=function(){return(u._Maximum=u.asm.Maximum).apply(null,arguments)},u._Mean=function(){return(u._Mean=u.asm.Mean).apply(null,arguments)},u._Min=function(){return(u._Min=u.asm.Min).apply(null,arguments)},u._Minimum=function(){return(u._Minimum=u.asm.Minimum).apply(null,arguments)},u._MirrorPad=function(){return(u._MirrorPad=u.asm.MirrorPad).apply(null,arguments)},u._Mod=function(){return(u._Mod=u.asm.Mod).apply(null,arguments)},u._Multinomial=function(){return(u._Multinomial=u.asm.Multinomial).apply(null,arguments)},u._Multiply=function(){return(u._Multiply=u.asm.Multiply).apply(null,arguments)},u._Neg=function(){return(u._Neg=u.asm.Neg).apply(null,arguments)},u._NonMaxSuppressionV3=function(){return(u._NonMaxSuppressionV3=u.asm.NonMaxSuppressionV3).apply(null,arguments)},u._NonMaxSuppressionV4=function(){return(u._NonMaxSuppressionV4=u.asm.NonMaxSuppressionV4).apply(null,arguments)},u._NonMaxSuppressionV5=function(){return(u._NonMaxSuppressionV5=u.asm.NonMaxSuppressionV5).apply(null,arguments)},u._NotEqual=function(){return(u._NotEqual=u.asm.NotEqual).apply(null,arguments)},u._OneHot=function(){return(u._OneHot=u.asm.OneHot).apply(null,arguments)},u._PadV2=function(){return(u._PadV2=u.asm.PadV2).apply(null,arguments)},u._Pow=function(){return(u._Pow=u.asm.Pow).apply(null,arguments)},u._Prelu=function(){return(u._Prelu=u.asm.Prelu).apply(null,arguments)},u._Prod=function(){return(u._Prod=u.asm.Prod).apply(null,arguments)},u._RealDiv=function(){return(u._RealDiv=u.asm.RealDiv).apply(null,arguments)},u._Reciprocal=function(){return(u._Reciprocal=u.asm.Reciprocal).apply(null,arguments)},u._Relu=function(){return(u._Relu=u.asm.Relu).apply(null,arguments)},u._Relu6=function(){return(u._Relu6=u.asm.Relu6).apply(null,arguments)},u._ResizeBilinear=function(){return(u._ResizeBilinear=u.asm.ResizeBilinear).apply(null,arguments)},u._ResizeBilinearGrad=function(){return(u._ResizeBilinearGrad=u.asm.ResizeBilinearGrad).apply(null,arguments)},u._ResizeNearestNeighbor=function(){return(u._ResizeNearestNeighbor=u.asm.ResizeNearestNeighbor).apply(null,arguments)},u._ResizeNearestNeighborGrad=function(){return(u._ResizeNearestNeighborGrad=u.asm.ResizeNearestNeighborGrad).apply(null,arguments)},u._Reverse=function(){return(u._Reverse=u.asm.Reverse).apply(null,arguments)},u._RotateWithOffset=function(){return(u._RotateWithOffset=u.asm.RotateWithOffset).apply(null,arguments)},u._Round=function(){return(u._Round=u.asm.Round).apply(null,arguments)},u._Rsqrt=function(){return(u._Rsqrt=u.asm.Rsqrt).apply(null,arguments)},u._ScatterNd=function(){return(u._ScatterNd=u.asm.ScatterNd).apply(null,arguments)},u._SearchSorted=function(){return(u._SearchSorted=u.asm.SearchSorted).apply(null,arguments)},u._SelectV2=function(){return(u._SelectV2=u.asm.SelectV2).apply(null,arguments)},u._Selu=function(){return(u._Selu=u.asm.Selu).apply(null,arguments)},u._Sigmoid=function(){return(u._Sigmoid=u.asm.Sigmoid).apply(null,arguments)},u._Sign=function(){return(u._Sign=u.asm.Sign).apply(null,arguments)},u._Sin=function(){return(u._Sin=u.asm.Sin).apply(null,arguments)},u._Sinh=function(){return(u._Sinh=u.asm.Sinh).apply(null,arguments)},u._Softmax=function(){return(u._Softmax=u.asm.Softmax).apply(null,arguments)},u._Softplus=function(){return(u._Softplus=u.asm.Softplus).apply(null,arguments)},u._SparseFillEmptyRows=function(){return(u._SparseFillEmptyRows=u.asm.SparseFillEmptyRows).apply(null,arguments)},u._SparseReshape=function(){return(u._SparseReshape=u.asm.SparseReshape).apply(null,arguments)},u._SparseSegmentReduction=function(){return(u._SparseSegmentReduction=u.asm.SparseSegmentReduction).apply(null,arguments)},u._SparseToDense=function(){return(u._SparseToDense=u.asm.SparseToDense).apply(null,arguments)},u._Sqrt=function(){return(u._Sqrt=u.asm.Sqrt).apply(null,arguments)},u._Square=function(){return(u._Square=u.asm.Square).apply(null,arguments)},u._SquaredDifference=function(){return(u._SquaredDifference=u.asm.SquaredDifference).apply(null,arguments)},u._Step=function(){return(u._Step=u.asm.Step).apply(null,arguments)},u._StridedSlice=function(){return(u._StridedSlice=u.asm.StridedSlice).apply(null,arguments)},u._Sub=function(){return(u._Sub=u.asm.Sub).apply(null,arguments)},u._Sum=function(){return(u._Sum=u.asm.Sum).apply(null,arguments)},u._Tan=function(){return(u._Tan=u.asm.Tan).apply(null,arguments)},u._Tanh=function(){return(u._Tanh=u.asm.Tanh).apply(null,arguments)},u._TensorScatterUpdate=function(){return(u._TensorScatterUpdate=u.asm.TensorScatterUpdate).apply(null,arguments)},u._Tile=function(){return(u._Tile=u.asm.Tile).apply(null,arguments)},u._TopK=function(){return(u._TopK=u.asm.TopK).apply(null,arguments)},u._Transform=function(){return(u._Transform=u.asm.Transform).apply(null,arguments)},u._Transpose=function(){return(u._Transpose=u.asm.Transpose).apply(null,arguments)},u.__FusedMatMul=function(){return(u.__FusedMatMul=u.asm._FusedMatMul).apply(null,arguments)},u._malloc=function(){return(u._malloc=u.asm.malloc).apply(null,arguments)},u._free=function(){return(u._free=u.asm.free).apply(null,arguments)},u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm._emscripten_tls_init).apply(null,arguments)},u._pthread_self=function(){return(Pe=u._pthread_self=u.asm.pthread_self).apply(null,arguments)}),Qe=(u.___errno_location=function(){return(u.___errno_location=u.asm.__errno_location).apply(null,arguments)},u.__emscripten_thread_init=function(){return(Qe=u.__emscripten_thread_init=u.asm._emscripten_thread_init).apply(null,arguments)}),je=(u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm._emscripten_thread_crashed).apply(null,arguments)},u._emscripten_main_thread_process_queued_calls=function(){return(u._emscripten_main_thread_process_queued_calls=u.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},u._emscripten_main_browser_thread_id=function(){return(u._emscripten_main_browser_thread_id=u.asm.emscripten_main_browser_thread_id).apply(null,arguments)},u._emscripten_run_in_main_runtime_thread_js=function(){return(je=u._emscripten_run_in_main_runtime_thread_js=u.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)}),He=(u._emscripten_dispatch_to_thread_=function(){return(u._emscripten_dispatch_to_thread_=u.asm.emscripten_dispatch_to_thread_).apply(null,arguments)},u.__emscripten_proxy_execute_task_queue=function(){return(He=u.__emscripten_proxy_execute_task_queue=u.asm._emscripten_proxy_execute_task_queue).apply(null,arguments)}),ze=u.__emscripten_thread_free_data=function(){return(ze=u.__emscripten_thread_free_data=u.asm._emscripten_thread_free_data).apply(null,arguments)},We=u.__emscripten_thread_exit=function(){return(We=u.__emscripten_thread_exit=u.asm._emscripten_thread_exit).apply(null,arguments)},Ve=u._emscripten_stack_set_limits=function(){return(Ve=u._emscripten_stack_set_limits=u.asm.emscripten_stack_set_limits).apply(null,arguments)},Ge=u.stackSave=function(){return(Ge=u.stackSave=u.asm.stackSave).apply(null,arguments)},Ke=u.stackRestore=function(){return(Ke=u.stackRestore=u.asm.stackRestore).apply(null,arguments)},qe=u.stackAlloc=function(){return(qe=u.stackAlloc=u.asm.stackAlloc).apply(null,arguments)};u.dynCall_iijjiiii=function(){return(u.dynCall_iijjiiii=u.asm.dynCall_iijjiiii).apply(null,arguments)},u.dynCall_jiji=function(){return(u.dynCall_jiji=u.asm.dynCall_jiji).apply(null,arguments)};function Xe(e){if(e=e||f,!(ee>0)){if(w)return o(u),Y(),void startWorker(u);(function(){if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)Z(u.preRun.shift());fe(K)})(),ee>0||(u.setStatus?(u.setStatus("Running..."),setTimeout(function(){setTimeout(function(){u.setStatus("")},1),t()},1)):t())}function t(){De||(De=!0,u.calledRun=!0,!D&&(Y(),o(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),function(){if(!w){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;)$(u.postRun.shift());fe(X)}}()))}}if(u.keepRuntimeAlive=J,u.wasmMemory=_,u.cwrap=function(e,t,n,r){var a=(n=n||[]).every(e=>"number"===e||"boolean"===e);return"string"!==t&&a&&!r?_e(e):function(){return Le(e,t,n,arguments)}},u.ExitStatus=ce,u.PThread=pe,ne=function e(){De||Xe(),De||(ne=e)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();if(Xe(),c&&(Re={uncaughtException:process.listeners("uncaughtException").filter(function(e){return!c.uncaughtException.indexOf(e)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(e){return!c.unhandledRejection.indexOf(e)>-1})}),"undefined"!=typeof WasmBackendModule)Ue=WasmBackendModule;else{if("undefined"==typeof t)throw new Error("Could not find wasm module in post.js");Ue=t}if(Re){var Je=Ue._dispose;Ue._dispose=function(){Je(),Re.uncaughtException.forEach(function(e){process.removeListener("uncaughtException",e)}),Re.unhandledRejection.forEach(function(e){process.removeListener("unhandledRejection",e)})}}return t.ready}})();"object"==typeof e&&"object"==typeof t?t.exports=r:"function"==typeof define&&n.amdO?define([],function(){return r}):"object"==typeof e&&(e.WasmBackendModuleThreadedSimd=r)}),vi=$a((e,t)=>{t.exports.wasmWorkerContents='"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",data=>onmessage({data:data}));var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8")+"//# sourceURL="+f)},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"\n");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.startWorker=instance=>{Module=instance;postMessage({"cmd":"loaded"})};self.onmessage=e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;for(const handler of e.data.handlers){Module[handler]=function(){postMessage({cmd:"callHandler",handler:handler,args:[...arguments]})}}Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob=="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module)}else if(e.data.cmd==="run"){Module["__emscripten_thread_init"](e.data.pthread_ptr,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module["executeNotifiedProxyingQueue"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module["invokeEntryPoint"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processProxyingQueue"){if(initializedJS){Module["executeNotifiedProxyingQueue"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}};'}),xi=$a((e,t)=>{var r=(()=>{var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||za,function(t){var n,r,a,i="undefined"!=typeof(t=t||{})?t:{};i.ready=new Promise(function(e,t){n=e,r=t}),"undefined"!=typeof process&&process.listeners&&(a={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var s,o,l,c=Object.assign({},i),u=[],A="object"==typeof window,d="function"==typeof importScripts,h="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,p="";if(h){var f=fi(),m=mi();p=d?m.dirname(p)+"/":"//",s=(e,t)=>(e=H(e)?new URL(e):m.normalize(e),f.readFileSync(e,t?void 0:"utf8")),l=e=>{var t=s(e,!0);return t.buffer||(t=new Uint8Array(t)),t},o=(e,t,n)=>{e=H(e)?new URL(e):m.normalize(e),f.readFile(e,function(e,r){e?n(e):t(r.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),u=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof W))throw e}),process.on("unhandledRejection",function(e){throw e}),i.inspect=function(){return"[Emscripten Module object]"}}else(A||d)&&(d?p=self.location.href:"undefined"!=typeof document&&document.currentScript&&(p=document.currentScript.src),e&&(p=e),p=0!==p.indexOf("blob:")?p.substr(0,p.replace(/[?#].*/,"").lastIndexOf("/")+1):"",s=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},d&&(l=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),o=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)},e=>document.title=e);var g=i.print||console.log.bind(console),y=i.printErr||console.warn.bind(console);Object.assign(i,c),c=null,i.arguments&&(u=i.arguments),i.thisProgram&&i.thisProgram,i.quit&&i.quit;var b;i.wasmBinary&&(b=i.wasmBinary);var w=i.noExitRuntime||!0;"object"!=typeof WebAssembly&&P("no native wasm support detected");var v,x=!1;var C,k,B,S,I="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function N(e,t,n){for(var r=(t>>>=0)+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.buffer&&I)return I.decode(e.subarray(t,a));for(var i="";t<a;){var s=e[t++];if(128&s){var o=63&e[t++];if(192!=(224&s)){var l=63&e[t++];if((s=224==(240&s)?(15&s)<<12|o<<6|l:(7&s)<<18|o<<12|l<<6|63&e[t++])<65536)i+=String.fromCharCode(s);else{var c=s-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&s)<<6|o)}else i+=String.fromCharCode(s)}return i}function F(e,t){return(e>>>=0)?N(B,e,t):""}function E(e){C=e,i.HEAP8=k=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAP32=new Int32Array(e),i.HEAPU8=B=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=S=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=new Float64Array(e)}i.INITIAL_MEMORY;var _=[],T=[],L=[];function D(e){_.unshift(e)}function R(e){L.unshift(e)}var U=0,O=null,M=null;function P(e){i.onAbort&&i.onAbort(e),y(e="Aborted("+e+")"),x=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}var Q;function j(e){return e.startsWith("data:application/octet-stream;base64,")}function H(e){return e.startsWith("file://")}function z(e){try{if(e==Q&&b)return new Uint8Array(b);if(l)return l(e);throw"both async and sync fetching of the wasm failed"}catch(fr){P(fr)}}function W(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function V(e){for(;e.length>0;)e.shift()(i)}function G(e){try{return v.grow(e-C.byteLength+65535>>>16),E(v.buffer),1}catch(fr){}}j(Q="tfjs-backend-wasm.wasm")||(Q=function(e){return i.locateFile?i.locateFile(e,p):p+e}(Q));var K=[null,[],[]];function q(e,t){var n=K[e];0===t||10===t?((1===e?g:y)(N(n,0)),n.length=0):n.push(t)}function X(e){return i["_"+e]}function J(e,t,n,r,a){var i={string:e=>{var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);(function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;for(var a=n>>>=0,i=n+r-1,s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++s)),o<=127){if(n>=i)break;t[n++>>>0]=o}else if(o<=2047){if(n+1>=i)break;t[n++>>>0]=192|o>>6,t[n++>>>0]=128|63&o}else if(o<=65535){if(n+2>=i)break;t[n++>>>0]=224|o>>12,t[n++>>>0]=128|o>>6&63,t[n++>>>0]=128|63&o}else{if(n+3>=i)break;t[n++>>>0]=240|o>>18,t[n++>>>0]=128|o>>12&63,t[n++>>>0]=128|o>>6&63,t[n++>>>0]=128|63&o}}t[n>>>0]=0})(e,B,t,n)})(e,t=re(n),n)}return t},array:e=>{var t=re(e.length);return function(e,t){k.set(e,t>>>0)}(e,t),t}};var s=X(e),o=[],l=0;if(r)for(var c=0;c<r.length;c++){var u=i[n[c]];u?(0===l&&(l=te()),o[c]=u(r[c])):o[c]=r[c]}var A,d=s.apply(null,o);return A=d,0!==l&&ne(l),d=function(e){return"string"===t?F(e):"boolean"===t?!!e:e}(A),d}var Y,Z,$,ee={abort:function(){P("")},emscripten_get_heap_max:function(){return 4294901760},emscripten_memcpy_big:function(e,t,n){B.copyWithin(e>>>0,t>>>0,t+n>>>0)},emscripten_resize_heap:function(e){var t=B.length,n=4294901760;if((e>>>=0)>n)return!1;let r=(e,t)=>e+(t-e%t)%t;for(var a=1;a<=4;a*=2){var i=t*(1+.2/a);if(i=Math.min(i,e+100663296),G(Math.min(n,r(Math.max(e,i),65536))))return!0}return!1},fd_close:function(e){return 52},fd_seek:function(e,t,n,r,a){return 70},fd_write:function(e,t,n,r){for(var a=0,i=0;i<n;i++){var s=S[t>>>2],o=S[t+4>>>2];t+=8;for(var l=0;l<o;l++)q(e,B[s+l>>>0]);a+=o}return S[r>>>2]=a,0}},te=(function(){var e={env:ee,wasi_snapshot_preview1:ee};function t(e,t){var n=e.exports;i.asm=n,E((v=i.asm.memory).buffer),i.asm.__indirect_function_table,function(e){T.unshift(e)}(i.asm.__wasm_call_ctors),function(){if(U--,i.monitorRunDependencies&&i.monitorRunDependencies(U),0==U&&(null!==O&&(clearInterval(O),O=null),M)){var e=M;M=null,e()}}()}function n(e){t(e.instance)}function a(t){return function(){if(!b&&(A||d)){if("function"==typeof fetch&&!H(Q))return fetch(Q,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Q+"'";return e.arrayBuffer()}).catch(function(){return z(Q)});if(o)return new Promise(function(e,t){o(Q,function(t){e(new Uint8Array(t))},t)})}return Promise.resolve().then(function(){return z(Q)})}().then(function(t){return WebAssembly.instantiate(t,e)}).then(function(e){return e}).then(t,function(e){y("failed to asynchronously prepare wasm: "+e),P(e)})}if(U++,i.monitorRunDependencies&&i.monitorRunDependencies(U),i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(s){y("Module.instantiateWasm callback failed with error: "+s),r(s)}(b||"function"!=typeof WebAssembly.instantiateStreaming||j(Q)||H(Q)||h||"function"!=typeof fetch?a(n):fetch(Q,{credentials:"same-origin"}).then(function(t){return WebAssembly.instantiateStreaming(t,e).then(n,function(e){return y("wasm streaming compile failed: "+e),y("falling back to ArrayBuffer instantiation"),a(n)})})).catch(r)}(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)},i._init=function(){return(i._init=i.asm.init).apply(null,arguments)},i._init_with_threads_count=function(){return(i._init_with_threads_count=i.asm.init_with_threads_count).apply(null,arguments)},i._get_threads_count=function(){return(i._get_threads_count=i.asm.get_threads_count).apply(null,arguments)},i._register_tensor=function(){return(i._register_tensor=i.asm.register_tensor).apply(null,arguments)},i._dispose_data=function(){return(i._dispose_data=i.asm.dispose_data).apply(null,arguments)},i._dispose=function(){return(i._dispose=i.asm.dispose).apply(null,arguments)},i._Abs=function(){return(i._Abs=i.asm.Abs).apply(null,arguments)},i._Acos=function(){return(i._Acos=i.asm.Acos).apply(null,arguments)},i._Acosh=function(){return(i._Acosh=i.asm.Acosh).apply(null,arguments)},i._Add=function(){return(i._Add=i.asm.Add).apply(null,arguments)},i._AddN=function(){return(i._AddN=i.asm.AddN).apply(null,arguments)},i._All=function(){return(i._All=i.asm.All).apply(null,arguments)},i._Any=function(){return(i._Any=i.asm.Any).apply(null,arguments)},i._ArgMax=function(){return(i._ArgMax=i.asm.ArgMax).apply(null,arguments)},i._ArgMin=function(){return(i._ArgMin=i.asm.ArgMin).apply(null,arguments)},i._Asin=function(){return(i._Asin=i.asm.Asin).apply(null,arguments)},i._Asinh=function(){return(i._Asinh=i.asm.Asinh).apply(null,arguments)},i._Atan=function(){return(i._Atan=i.asm.Atan).apply(null,arguments)},i._Atan2=function(){return(i._Atan2=i.asm.Atan2).apply(null,arguments)},i._Atanh=function(){return(i._Atanh=i.asm.Atanh).apply(null,arguments)},i._AvgPool=function(){return(i._AvgPool=i.asm.AvgPool).apply(null,arguments)},i._AvgPool3D=function(){return(i._AvgPool3D=i.asm.AvgPool3D).apply(null,arguments)},i._AvgPool3DGrad=function(){return(i._AvgPool3DGrad=i.asm.AvgPool3DGrad).apply(null,arguments)},i._AvgPoolGrad=function(){return(i._AvgPoolGrad=i.asm.AvgPoolGrad).apply(null,arguments)},i._BatchMatMul=function(){return(i._BatchMatMul=i.asm.BatchMatMul).apply(null,arguments)},i._Bincount=function(){return(i._Bincount=i.asm.Bincount).apply(null,arguments)},i._BitwiseAnd=function(){return(i._BitwiseAnd=i.asm.BitwiseAnd).apply(null,arguments)},i._Ceil=function(){return(i._Ceil=i.asm.Ceil).apply(null,arguments)},i._ClipByValue=function(){return(i._ClipByValue=i.asm.ClipByValue).apply(null,arguments)},i._Conv2D=function(){return(i._Conv2D=i.asm.Conv2D).apply(null,arguments)},i._Conv2DBackpropInput=function(){return(i._Conv2DBackpropInput=i.asm.Conv2DBackpropInput).apply(null,arguments)},i._Conv3D=function(){return(i._Conv3D=i.asm.Conv3D).apply(null,arguments)},i._Conv3DBackpropFilterV2=function(){return(i._Conv3DBackpropFilterV2=i.asm.Conv3DBackpropFilterV2).apply(null,arguments)},i._Conv3DBackpropInputV2=function(){return(i._Conv3DBackpropInputV2=i.asm.Conv3DBackpropInputV2).apply(null,arguments)},i._Cos=function(){return(i._Cos=i.asm.Cos).apply(null,arguments)},i._Cosh=function(){return(i._Cosh=i.asm.Cosh).apply(null,arguments)},i._CropAndResize=function(){return(i._CropAndResize=i.asm.CropAndResize).apply(null,arguments)},i._Cumprod=function(){return(i._Cumprod=i.asm.Cumprod).apply(null,arguments)},i._Cumsum=function(){return(i._Cumsum=i.asm.Cumsum).apply(null,arguments)},i._DenseBincount=function(){return(i._DenseBincount=i.asm.DenseBincount).apply(null,arguments)},i._DepthToSpace=function(){return(i._DepthToSpace=i.asm.DepthToSpace).apply(null,arguments)},i._DepthwiseConv2dNative=function(){return(i._DepthwiseConv2dNative=i.asm.DepthwiseConv2dNative).apply(null,arguments)},i._Diag=function(){return(i._Diag=i.asm.Diag).apply(null,arguments)},i._Dilation2D=function(){return(i._Dilation2D=i.asm.Dilation2D).apply(null,arguments)},i._Dilation2DBackpropFilter=function(){return(i._Dilation2DBackpropFilter=i.asm.Dilation2DBackpropFilter).apply(null,arguments)},i._Dilation2DBackpropInput=function(){return(i._Dilation2DBackpropInput=i.asm.Dilation2DBackpropInput).apply(null,arguments)},i._Elu=function(){return(i._Elu=i.asm.Elu).apply(null,arguments)},i._EluGrad=function(){return(i._EluGrad=i.asm.EluGrad).apply(null,arguments)},i._Equal=function(){return(i._Equal=i.asm.Equal).apply(null,arguments)},i._Erf=function(){return(i._Erf=i.asm.Erf).apply(null,arguments)},i._Exp=function(){return(i._Exp=i.asm.Exp).apply(null,arguments)},i._Expm1=function(){return(i._Expm1=i.asm.Expm1).apply(null,arguments)},i._FlipLeftRight=function(){return(i._FlipLeftRight=i.asm.FlipLeftRight).apply(null,arguments)},i._Floor=function(){return(i._Floor=i.asm.Floor).apply(null,arguments)},i._FloorDiv=function(){return(i._FloorDiv=i.asm.FloorDiv).apply(null,arguments)},i._FusedBatchNorm=function(){return(i._FusedBatchNorm=i.asm.FusedBatchNorm).apply(null,arguments)},i._FusedConv2D=function(){return(i._FusedConv2D=i.asm.FusedConv2D).apply(null,arguments)},i._FusedDepthwiseConv2D=function(){return(i._FusedDepthwiseConv2D=i.asm.FusedDepthwiseConv2D).apply(null,arguments)},i._Gather=function(){return(i._Gather=i.asm.Gather).apply(null,arguments)},i._GatherNd=function(){return(i._GatherNd=i.asm.GatherNd).apply(null,arguments)},i._Greater=function(){return(i._Greater=i.asm.Greater).apply(null,arguments)},i._GreaterEqual=function(){return(i._GreaterEqual=i.asm.GreaterEqual).apply(null,arguments)},i._IsFinite=function(){return(i._IsFinite=i.asm.IsFinite).apply(null,arguments)},i._IsInf=function(){return(i._IsInf=i.asm.IsInf).apply(null,arguments)},i._IsNan=function(){return(i._IsNan=i.asm.IsNan).apply(null,arguments)},i._LRN=function(){return(i._LRN=i.asm.LRN).apply(null,arguments)},i._LRNGrad=function(){return(i._LRNGrad=i.asm.LRNGrad).apply(null,arguments)},i._LeakyRelu=function(){return(i._LeakyRelu=i.asm.LeakyRelu).apply(null,arguments)},i._Less=function(){return(i._Less=i.asm.Less).apply(null,arguments)},i._LessEqual=function(){return(i._LessEqual=i.asm.LessEqual).apply(null,arguments)},i._LinSpace=function(){return(i._LinSpace=i.asm.LinSpace).apply(null,arguments)},i._Log=function(){return(i._Log=i.asm.Log).apply(null,arguments)},i._Log1p=function(){return(i._Log1p=i.asm.Log1p).apply(null,arguments)},i._LogicalAnd=function(){return(i._LogicalAnd=i.asm.LogicalAnd).apply(null,arguments)},i._LogicalNot=function(){return(i._LogicalNot=i.asm.LogicalNot).apply(null,arguments)},i._LogicalOr=function(){return(i._LogicalOr=i.asm.LogicalOr).apply(null,arguments)},i._LogicalXor=function(){return(i._LogicalXor=i.asm.LogicalXor).apply(null,arguments)},i._Max=function(){return(i._Max=i.asm.Max).apply(null,arguments)},i._MaxPool=function(){return(i._MaxPool=i.asm.MaxPool).apply(null,arguments)},i._MaxPool3D=function(){return(i._MaxPool3D=i.asm.MaxPool3D).apply(null,arguments)},i._MaxPool3DGrad=function(){return(i._MaxPool3DGrad=i.asm.MaxPool3DGrad).apply(null,arguments)},i._MaxPoolGrad=function(){return(i._MaxPoolGrad=i.asm.MaxPoolGrad).apply(null,arguments)},i._MaxPoolWithArgmax=function(){return(i._MaxPoolWithArgmax=i.asm.MaxPoolWithArgmax).apply(null,arguments)},i._Maximum=function(){return(i._Maximum=i.asm.Maximum).apply(null,arguments)},i._Mean=function(){return(i._Mean=i.asm.Mean).apply(null,arguments)},i._Min=function(){return(i._Min=i.asm.Min).apply(null,arguments)},i._Minimum=function(){return(i._Minimum=i.asm.Minimum).apply(null,arguments)},i._MirrorPad=function(){return(i._MirrorPad=i.asm.MirrorPad).apply(null,arguments)},i._Mod=function(){return(i._Mod=i.asm.Mod).apply(null,arguments)},i._Multinomial=function(){return(i._Multinomial=i.asm.Multinomial).apply(null,arguments)},i._Multiply=function(){return(i._Multiply=i.asm.Multiply).apply(null,arguments)},i._Neg=function(){return(i._Neg=i.asm.Neg).apply(null,arguments)},i._NonMaxSuppressionV3=function(){return(i._NonMaxSuppressionV3=i.asm.NonMaxSuppressionV3).apply(null,arguments)},i._NonMaxSuppressionV4=function(){return(i._NonMaxSuppressionV4=i.asm.NonMaxSuppressionV4).apply(null,arguments)},i._NonMaxSuppressionV5=function(){return(i._NonMaxSuppressionV5=i.asm.NonMaxSuppressionV5).apply(null,arguments)},i._NotEqual=function(){return(i._NotEqual=i.asm.NotEqual).apply(null,arguments)},i._OneHot=function(){return(i._OneHot=i.asm.OneHot).apply(null,arguments)},i._PadV2=function(){return(i._PadV2=i.asm.PadV2).apply(null,arguments)},i._Pow=function(){return(i._Pow=i.asm.Pow).apply(null,arguments)},i._Prelu=function(){return(i._Prelu=i.asm.Prelu).apply(null,arguments)},i._Prod=function(){return(i._Prod=i.asm.Prod).apply(null,arguments)},i._RealDiv=function(){return(i._RealDiv=i.asm.RealDiv).apply(null,arguments)},i._Reciprocal=function(){return(i._Reciprocal=i.asm.Reciprocal).apply(null,arguments)},i._Relu=function(){return(i._Relu=i.asm.Relu).apply(null,arguments)},i._Relu6=function(){return(i._Relu6=i.asm.Relu6).apply(null,arguments)},i._ResizeBilinear=function(){return(i._ResizeBilinear=i.asm.ResizeBilinear).apply(null,arguments)},i._ResizeBilinearGrad=function(){return(i._ResizeBilinearGrad=i.asm.ResizeBilinearGrad).apply(null,arguments)},i._ResizeNearestNeighbor=function(){return(i._ResizeNearestNeighbor=i.asm.ResizeNearestNeighbor).apply(null,arguments)},i._ResizeNearestNeighborGrad=function(){return(i._ResizeNearestNeighborGrad=i.asm.ResizeNearestNeighborGrad).apply(null,arguments)},i._Reverse=function(){return(i._Reverse=i.asm.Reverse).apply(null,arguments)},i._RotateWithOffset=function(){return(i._RotateWithOffset=i.asm.RotateWithOffset).apply(null,arguments)},i._Round=function(){return(i._Round=i.asm.Round).apply(null,arguments)},i._Rsqrt=function(){return(i._Rsqrt=i.asm.Rsqrt).apply(null,arguments)},i._ScatterNd=function(){return(i._ScatterNd=i.asm.ScatterNd).apply(null,arguments)},i._SearchSorted=function(){return(i._SearchSorted=i.asm.SearchSorted).apply(null,arguments)},i._SelectV2=function(){return(i._SelectV2=i.asm.SelectV2).apply(null,arguments)},i._Selu=function(){return(i._Selu=i.asm.Selu).apply(null,arguments)},i._Sigmoid=function(){return(i._Sigmoid=i.asm.Sigmoid).apply(null,arguments)},i._Sign=function(){return(i._Sign=i.asm.Sign).apply(null,arguments)},i._Sin=function(){return(i._Sin=i.asm.Sin).apply(null,arguments)},i._Sinh=function(){return(i._Sinh=i.asm.Sinh).apply(null,arguments)},i._Softmax=function(){return(i._Softmax=i.asm.Softmax).apply(null,arguments)},i._Softplus=function(){return(i._Softplus=i.asm.Softplus).apply(null,arguments)},i._SparseFillEmptyRows=function(){return(i._SparseFillEmptyRows=i.asm.SparseFillEmptyRows).apply(null,arguments)},i._SparseReshape=function(){return(i._SparseReshape=i.asm.SparseReshape).apply(null,arguments)},i._SparseSegmentReduction=function(){return(i._SparseSegmentReduction=i.asm.SparseSegmentReduction).apply(null,arguments)},i._SparseToDense=function(){return(i._SparseToDense=i.asm.SparseToDense).apply(null,arguments)},i._Sqrt=function(){return(i._Sqrt=i.asm.Sqrt).apply(null,arguments)},i._Square=function(){return(i._Square=i.asm.Square).apply(null,arguments)},i._SquaredDifference=function(){return(i._SquaredDifference=i.asm.SquaredDifference).apply(null,arguments)},i._Step=function(){return(i._Step=i.asm.Step).apply(null,arguments)},i._StridedSlice=function(){return(i._StridedSlice=i.asm.StridedSlice).apply(null,arguments)},i._Sub=function(){return(i._Sub=i.asm.Sub).apply(null,arguments)},i._Sum=function(){return(i._Sum=i.asm.Sum).apply(null,arguments)},i._Tan=function(){return(i._Tan=i.asm.Tan).apply(null,arguments)},i._Tanh=function(){return(i._Tanh=i.asm.Tanh).apply(null,arguments)},i._TensorScatterUpdate=function(){return(i._TensorScatterUpdate=i.asm.TensorScatterUpdate).apply(null,arguments)},i._Tile=function(){return(i._Tile=i.asm.Tile).apply(null,arguments)},i._TopK=function(){return(i._TopK=i.asm.TopK).apply(null,arguments)},i._Transform=function(){return(i._Transform=i.asm.Transform).apply(null,arguments)},i._Transpose=function(){return(i._Transpose=i.asm.Transpose).apply(null,arguments)},i.__FusedMatMul=function(){return(i.__FusedMatMul=i.asm._FusedMatMul).apply(null,arguments)},i._malloc=function(){return(i._malloc=i.asm.malloc).apply(null,arguments)},i._free=function(){return(i._free=i.asm.free).apply(null,arguments)},i.___errno_location=function(){return(i.___errno_location=i.asm.__errno_location).apply(null,arguments)},i.stackSave=function(){return(te=i.stackSave=i.asm.stackSave).apply(null,arguments)}),ne=i.stackRestore=function(){return(ne=i.stackRestore=i.asm.stackRestore).apply(null,arguments)},re=i.stackAlloc=function(){return(re=i.stackAlloc=i.asm.stackAlloc).apply(null,arguments)};i.dynCall_iijjiiii=function(){return(i.dynCall_iijjiiii=i.asm.dynCall_iijjiiii).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)};function ae(e){function t(){Y||(Y=!0,i.calledRun=!0,!x&&(V(T),n(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)R(i.postRun.shift());V(L)}()))}e=e||u,U>0||(function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)D(i.preRun.shift());V(_)}(),U>0)||(i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),t()},1)):t())}if(i.cwrap=function(e,t,n,r){var a=(n=n||[]).every(e=>"number"===e||"boolean"===e);return"string"!==t&&a&&!r?X(e):function(){return J(e,t,n,arguments)}},M=function e(){Y||ae(),Y||(M=e)},i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();if(ae(),a&&(Z={uncaughtException:process.listeners("uncaughtException").filter(function(e){return!a.uncaughtException.indexOf(e)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(e){return!a.unhandledRejection.indexOf(e)>-1})}),"undefined"!=typeof t)$=t;else{if("undefined"==typeof WasmBackendModuleThreadedSimd)throw new Error("Could not find wasm module in post.js");$=WasmBackendModuleThreadedSimd}if(Z){var ie=$._dispose;$._dispose=function(){ie(),Z.uncaughtException.forEach(function(e){process.removeListener("uncaughtException",e)}),Z.unhandledRejection.forEach(function(e){process.removeListener("unhandledRejection",e)})}}return t.ready}})();"object"==typeof e&&"object"==typeof t?t.exports=r:"function"==typeof define&&n.amdO?define([],function(){return r}):"object"==typeof e&&(e.WasmBackendModule=r)}),Ci=class{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}},ki=class{refCount(e){return Bi("refCount")}incRef(e){return Bi("incRef")}timerAvailable(){return!0}time(e){return Bi("time")}read(e){return Bi("read")}readSync(e){return Bi("readSync")}readToGPU(e,t){return Bi("readToGPU")}numDataIds(){return Bi("numDataIds")}disposeData(e,t){return Bi("disposeData")}write(e,t,n){return Bi("write")}move(e,t,n,r,a){return Bi("move")}createTensorFromGPUData(e,t,n){return Bi("createTensorFromGPUData")}memory(){return Bi("memory")}floatPrecision(){return Bi("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return Bi("dispose")}};function Bi(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen"))}function Si(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,Ei(e,t,n)}function Ii(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together First array length was ".concat(e.length,"Second array length was ").concat(t.length));let n=e.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,Ei(e,n,r),Ei(t,n,r)}function Ni(e,t,n){return Math.max(e,Math.min(t,n))}function Fi(e){return e%2===0?e:e+1}function Ei(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function _i(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function Ti(e,t){let n=Math.random();return t*n+(1-n)*e}function Li(e,t){let n=0;for(let r=0;r<e.length;r++){let a=Number(e[r])-Number(t[r]);n+=a*a}return n}function Di(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function Ri(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Di(Qi(e,t),()=>n+" Shapes ".concat(e," and ").concat(t," must match"))}function Ui(e){Di(null!=e,()=>"The input to the tensor constructor must be a non-null value.")}function Oi(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function Mi(e){return 0===e.length}function Pi(e,t){if(e===t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(null!==e[n]&&null!==t[n]&&e[n]!==t[n])return!1;return!0}function Qi(e,t){if(e===t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ji(e){return e%1===0}function Hi(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{let t=Math.exp(2*e);return(t-1)/(t+1)}}function zi(e){let t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Wi(e){let t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return Si(t),t}function Vi(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Gi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return new Promise((a,i)=>{let s=0,o=()=>{if(e())return void a();s++;let l=t(s);null!=n&&s>=n?i():null!=r?r(o,l):setTimeout(o,l)};o()})}function Ki(e,t){let n=1,r=-1;for(let i=0;i<e.length;++i)if(e[i]>=0)n*=e[i];else if(-1===e[i]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim ".concat(r," and dim ").concat(i));r=i}else if(e[i]<0)throw Error("Shapes can not be < 0. Found ".concat(e[i]," at dim ").concat(i));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when there are 0 elements"));if(t%n!==0)throw Error("The implicit shape can't be a fractional number. Got ".concat(t," / ").concat(n));let a=e.slice();return a[r]=t/n,a}function qi(e,t){let n=t.length;return Di((e=null==e?t.map((e,t)=>t):[].concat(e)).every(e=>e>=-n&&e<n),()=>"All values in axis param must be in range [-".concat(n,", ").concat(n,") but got axis ").concat(e)),Di(e.every(e=>ji(e)),()=>"All values in axis param must be integers but got axis ".concat(e)),e.map(e=>e<0?n+e:e)}function Xi(e,t){let n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:qi(t,e).sort(),s=0;for(let o=0;o<e.length;++o){if(null!=i){if(i[s]===o&&1!==e[o])throw new Error("Can't squeeze axis ".concat(o," since its dim '").concat(e[o],"' is not 1"));(null==i[s]||i[s]>o)&&1===e[o]&&(n.push(e[o]),r.push(o)),i[s]<=o&&s++}1!==e[o]&&(n.push(e[o]),r.push(o))}return{newShape:n,keptDims:r}}function Ji(e,t){return Yi(e,t)}function Yi(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function Zi(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function $i(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function es(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function ts(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function ns(e){if(null==e)return 0;let t=0;return e.forEach(e=>t+=e.length),t}function rs(e){return"string"==typeof e||e instanceof String}function as(e){return"boolean"==typeof e}function is(e){return"number"==typeof e}function ss(e){return Array.isArray(e)?ss(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":is(e)?"float32":rs(e)?"string":as(e)?"bool":"float32"}function os(e){return!!(e&&e.constructor&&e.call&&e.apply)}function ls(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function cs(e){let t=e.length;if(t<2)return[];let n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function us(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length){let i=t[0]*(r?2:1);for(let t=0;t<i;t++)a[t]=n[e+t]}else{let i=t[0],s=t.slice(1),o=s.reduce((e,t)=>e*t)*(r?2:1);for(let t=0;t<i;t++)a[t]=us(e+t*o,s,n,r)}return a}function As(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];let r=e.reduce((e,t)=>e*t)*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return us(0,e,t,n)}function ds(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}function hs(e,t){let n=ps(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function ps(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function fs(e,t){let n=e.reduce((e,t)=>e*t,1);if(null==t||"float32"===t)return As(e,new Float32Array(n));if("int32"===t)return As(e,new Int32Array(n));if("bool"===t)return As(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function ms(e){e.forEach(t=>{Di(Number.isInteger(t)&&t>=0,()=>"Tensor must have a shape comprised of positive integers but got shape [".concat(e,"]."))})}function gs(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function ys(e,t,n){if(0===t)return[];if(1===t)return[e];let r=new Array(t);for(let a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function bs(e){return e&&e.then&&"function"==typeof e.then}var ws="tfjsflags",vs=class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=xs,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(Cs().getBool("IS_TEST")||Cs().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. Overwriting the platform with ").concat(e,"."))),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){let t=this.urlFlags[e];Cs().getBool("IS_TEST")||Cs().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(t,".")),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];let t=this.evaluateFlag(e);if(bs(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. Please use getAsync() instead."));return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"==typeof this.global||"undefined"==typeof this.global.location||"undefined"==typeof this.global.location.search)return;let e=this.getQueryParams(this.global.location.search);ws in e&&e[ws].split(",").forEach(e=>{let[t,n]=e.split(":");this.urlFlags[t]=function(e,t){let n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:"".concat(+n)===n?+n:t}(0,n)})}};function xs(e){let t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,r[0],r[1]),r.join("=")}),t}function Cs(){return Bs}var ks,Bs=null;function Ss(){if(null==ks){let e;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}ks=e}return ks}function Is(e,t){let n=function(){let e=Ss();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{let r=t();return n.set(e,r),n.get(e)}}var Ns="Abs",Fs="Acos",Es="Acosh",_s="Add",Ts="AddN",Ls="All",Ds="Any",Rs="ArgMax",Us="ArgMin",Os="Asin",Ms="Asinh",Ps="Atan",Qs="Atanh",js="Atan2",Hs="AvgPool",zs="AvgPoolGrad",Ws="AvgPool3D",Vs="AvgPool3DGrad",Gs="BatchMatMul",Ks="BatchToSpaceND",qs="Bincount",Xs="BitwiseAnd",Js="BroadcastTo",Ys="BroadcastArgs",Zs="Cast",$s="Ceil",eo="ClipByValue",to="Complex",no="ComplexAbs",ro="Concat",ao="Conv2D",io="Conv2DBackpropFilter",so="Conv2DBackpropInput",oo="Conv3D",lo="Conv3DBackpropFilterV2",co="Conv3DBackpropInputV2",uo="Cos",Ao="Cosh",ho="Cumprod",po="Cumsum",fo="CropAndResize",mo="DenseBincount",go="DepthToSpace",yo="DepthwiseConv2dNative",bo="DepthwiseConv2dNativeBackpropFilter",wo="DepthwiseConv2dNativeBackpropInput",vo="Diag",xo="Dilation2D",Co="Dilation2DBackpropInput",ko="Dilation2DBackpropFilter",Bo="Draw",So="RealDiv",Io="Einsum",No="Elu",Fo="EluGrad",Eo="Erf",_o="Equal",To="Exp",Lo="ExpandDims",Do="Expm1",Ro="FFT",Uo="Fill",Oo="FlipLeftRight",Mo="Floor",Po="FloorDiv",Qo="FusedBatchNorm",jo="GatherV2",Ho="GatherNd",zo="Greater",Wo="GreaterEqual",Vo="Identity",Go="IFFT",Ko="Imag",qo="IsFinite",Xo="IsInf",Jo="IsNan",Yo="LeakyRelu",Zo="Less",$o="LessEqual",el="LinSpace",tl="Log",nl="Log1p",rl="LogicalAnd",al="LogicalNot",il="LogicalOr",sl="LogicalXor",ol="LogSoftmax",ll="LowerBound",cl="LRN",ul="LRNGrad",Al="MatrixBandPart",dl="Max",hl="Maximum",pl="MaxPool",fl="MaxPoolGrad",ml="MaxPool3D",gl="MaxPool3DGrad",yl="MaxPoolWithArgmax",bl="Mean",wl="Min",vl="Minimum",xl="MirrorPad",Cl="Mod",kl="Multinomial",Bl="Multiply",Sl="Neg",Il="NotEqual",Nl="NonMaxSuppressionV3",Fl="NonMaxSuppressionV4",El="NonMaxSuppressionV5",_l="OnesLike",Tl="OneHot",Ll="Pack",Dl="PadV2",Rl="Pool",Ul="Pow",Ol="Prelu",Ml="Prod",Pl="RaggedGather",Ql="RaggedRange",jl="RaggedTensorToTensor",Hl="Range",zl="Real",Wl="Reciprocal",Vl="Relu",Gl="Reshape",Kl="ResizeNearestNeighbor",ql="ResizeNearestNeighborGrad",Xl="ResizeBilinear",Jl="ResizeBilinearGrad",Yl="Relu6",Zl="Reverse",$l="Round",ec="Rsqrt",tc="ScatterNd",nc="TensorScatterUpdate",rc="SearchSorted",ac="Select",ic="Selu",sc="Slice",oc="Sin",lc="Sinh",cc="Sign",uc="Sigmoid",Ac="Softplus",dc="Sqrt",hc="Sum",pc="SpaceToBatchND",fc="SplitV",mc="Softmax",gc="SparseFillEmptyRows",yc="SparseReshape",bc="SparseSegmentMean",wc="SparseSegmentSum",vc="SparseToDense",xc="SquaredDifference",Cc="Square",kc="StaticRegexReplace",Bc="StridedSlice",Sc="StringNGrams",Ic="StringSplit",Nc="StringToHashBucketFast",Fc="Sub",Ec="Tan",_c="Tanh",Tc="Tile",Lc="TopK",Dc="Transform",Rc="Transpose",Uc="Unique",Oc="Unpack",Mc="UnsortedSegmentSum",Pc="UpperBound",Qc="ZerosLike",jc="Step",Hc="FromPixels",zc="RotateWithOffset",Wc="_FusedMatMul",Vc="FusedConv2D",Gc="FusedDepthwiseConv2D";function Kc(){Cs().getBool("IS_TEST")||Cs().getBool("PROD")||console.warn(...arguments)}function qc(){Cs().getBool("IS_TEST")||Cs().getBool("PROD")||console.log(...arguments)}var Xc=Is("kernelRegistry",()=>new Map),Jc=Is("gradRegistry",()=>new Map);function Yc(e,t){let n=iu(e,t);return Xc.get(n)}function Zc(e){return Jc.get(e)}function $c(e){let t=Xc.entries(),n=[];for(;;){let{done:r,value:a}=t.next();if(r)break;let[i,s]=a,[o]=i.split("_");o===e&&n.push(s)}return n}function eu(e){let{kernelName:t,backendName:n}=e,r=iu(t,n);Xc.has(r)&&Kc("The kernel '".concat(t,"' for backend '").concat(n,"' is already registered")),Xc.set(r,e)}function tu(e){let{kernelName:t}=e;Jc.has(t)&&Cs().getBool("DEBUG")&&Kc("Overriding the gradient for '".concat(t,"'")),Jc.set(t,e)}function nu(e,t){let n=iu(e,t);if(!Xc.has(n))throw new Error("The kernel '".concat(e,"' for backend '").concat(t,"' is not registered"));Xc.delete(n)}function ru(e){if(!Jc.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));Jc.delete(e)}function au(e,t){$c(e).forEach(e=>{eu(Object.assign({},e,{backendName:t}))})}function iu(e,t){return"".concat(t,"_").concat(e)}var su={};function ou(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}ei(su,{arraysEqual:()=>Qi,arraysEqualWithNull:()=>Pi,assert:()=>Di,assertNonNegativeIntegerDimensions:()=>ms,assertNonNull:()=>Ui,assertShapesMatch:()=>Ri,bytesFromStringArray:()=>ns,bytesPerElement:()=>ts,checkConversionForErrors:()=>Zi,clamp:()=>Ni,computeStrides:()=>cs,convertBackendValuesAndArrayBuffer:()=>ds,createScalarValue:()=>xu,createShuffledIndices:()=>Wi,decodeString:()=>Iu,distSquared:()=>Li,encodeString:()=>Su,fetch:()=>Bu,fingerPrint64:()=>vu,flatten:()=>Fu,getArrayFromDType:()=>Yi,getTypedArrayFromDType:()=>Ji,hasEncodingLoss:()=>es,hexToLong:()=>uu,indexToLoc:()=>ys,inferDtype:()=>ss,inferFromImplicitShape:()=>Ki,isBoolean:()=>as,isFunction:()=>os,isInt:()=>ji,isNumber:()=>is,isPromise:()=>bs,isScalarShape:()=>Mi,isString:()=>rs,isTypedArray:()=>Nu,isValidDtype:()=>$i,locToIndex:()=>gs,makeOnesTypedArray:()=>hs,makeZerosNestedTypedArray:()=>fs,makeZerosTypedArray:()=>ps,nearestDivisor:()=>ls,nearestLargerEven:()=>Fi,now:()=>ku,parseAxisParam:()=>qi,randUniform:()=>Ti,repeatedTry:()=>Gi,rightPad:()=>Vi,shuffle:()=>Si,shuffleCombo:()=>Ii,sizeFromShape:()=>Oi,sizeToSquarishShape:()=>zi,squeezeShape:()=>Xi,sum:()=>_i,swap:()=>Ei,tanh:()=>Hi,toNestedArray:()=>As,toTypedArray:()=>Cu});var lu=ti(ni()),cu=lu.default||lu;function uu(e){return cu.fromString(e,!0,16)}var Au=uu("c3a5c85c97cb3127"),du=uu("b492b66fbe98f273"),hu=uu("9ae16a3b2f90404f");function pu(e){return e.xor(e.shru(47))}function fu(e,t,n){let r=e.slice(t,t+n);return cu.fromBytes(Array.from(r),!0,!0)}function mu(e,t){return fu(e,t,8)}function gu(e,t){return fu(e,t,4)}function yu(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function bu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uu("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));let a=t.xor(r).mul(n);return a=a.xor(a.shru(47)),a=a.mul(n),a}function wu(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=yu(i.add(a).add(r),21);let s=a;return a=(a=a.add(t)).add(n),i=i.add(yu(a,44)),[a.add(r),i.add(s)]}(mu(e,t),mu(e,t+8),mu(e,t+16),mu(e,t+24),n,r)}function vu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=cu.fromNumber(81,!0);if(t<=32)return t<=16?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){let n=hu.add(2*t),r=mu(e,0).add(hu),a=mu(e,t-8);return bu(yu(a,37).mul(n).add(r),yu(r,25).add(a).mul(n),n)}if(t>=4){let n=hu.add(2*t);return bu(gu(e,0).shl(3).add(t),gu(e,t-4),n)}if(t>0){let n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return pu(hu.mul(n).xor(Au.mul(r))).mul(hu)}return hu}(e,t):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=hu.add(2*t),r=mu(e,0).mul(du),a=mu(e,8),i=mu(e,t-8).mul(n),s=mu(e,t-16).mul(hu);return bu(yu(r.add(a),43).add(yu(i,30)).add(s),r.add(yu(a.add(hu),18)).add(i),n)}(e,t);if(t<=64)return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=hu.add(2*t),r=mu(e,0).mul(hu),a=mu(e,8),i=mu(e,t-8).mul(n),s=mu(e,t-16).mul(hu),o=yu(r.add(a),43).add(yu(i,30)).add(s),l=bu(o,r.add(yu(a.add(hu),18)).add(i),n),c=mu(e,16).mul(n),u=mu(e,24),A=o.add(mu(e,t-32)).mul(n),d=l.add(mu(e,t-24)).mul(n);return bu(yu(c.add(u),43).add(yu(A,30)).add(d),c.add(yu(u.add(r),18)).add(A),n)}(e,t);let r=n,a=n.mul(du).add(113),i=pu(a.mul(hu).add(113)).mul(hu),s=[cu.UZERO,cu.UZERO],o=[cu.UZERO,cu.UZERO];r=r.mul(hu).add(mu(e,0));let l=0,c=64*(t-1>>6),u=c+(t-1&63)-63;do{r=yu(r.add(a).add(s[0]).add(mu(e,l+8)),37).mul(du),a=yu(a.add(s[1]).add(mu(e,l+48)),42).mul(du),r=r.xor(o[1]),a=a.add(s[0]).add(mu(e,l+40)),i=yu(i.add(o[0]),33).mul(du),s=wu(e,l,s[1].mul(du),r.add(o[0])),o=wu(e,l+32,i.add(o[1]),a.add(mu(e,l+16))),[i,r]=[r,i],l+=64}while(l!==c);let A=du.add(i.and(255).shl(1));return l=u,o[0]=o[0].add(t-1&63),s[0]=s[0].add(o[0]),o[0]=o[0].add(s[0]),r=yu(r.add(a).add(s[0]).add(mu(e,l+8)),37).mul(A),a=yu(a.add(s[1]).add(mu(e,l+48)),42).mul(A),r=r.xor(o[1].mul(9)),a=a.add(s[0].mul(9).add(mu(e,l+40))),i=yu(i.add(o[0]),33).mul(A),s=wu(e,l,s[1].mul(A),r.add(o[0])),o=wu(e,l+32,i.add(o[1]),a.add(mu(e,l+16))),[i,r]=[r,i],bu(bu(s[0],o[0],A).add(pu(a).mul(Au)).add(i),bu(s[1],o[1],A).add(r),A)}function xu(e,t){return"string"===t?Su(e):Cu([e],t)}function Cu(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Fu(e)),Cs().getBool("DEBUG")&&Zi(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){let t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error("Unknown data type ".concat(t))}function ku(){return Cs().platform.now()}function Bu(e,t){return Cs().platform.fetch(e,t)}function Su(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Cs().platform.encode(e,t)}function Iu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Cs().platform.decode(e,t)}function Nu(e){return null!=Cs().platform.isTypedArray?Cs().platform.isTypedArray(e):ou(e)}function Fu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),"boolean"==typeof e||"number"==typeof e||"string"==typeof e||bs(e)||null==e||Nu(e)&&n)t.push(e);else if(Array.isArray(e)||Nu(e))for(let r=0;r<e.length;++r)Fu(e[r],t,n);else{let r=-1;for(let t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(r=Math.max(r,Number(t)));for(let a=0;a<=r;a++)Fu(e[a],t,n)}return t}var Eu=class{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new Tu)}profileKernel(e,t,n){let r,a,i=()=>{r=n()},s=ku();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();for(let e of r)e.dataSync();a=Promise.resolve({kernelMs:ku()-s})}if(Cs().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let o=0;o<r.length;o++){let t=r[o];t.data().then(n=>{_u(n,t.dtype,e)})}return{kernelName:e,outputs:r,inputs:t,timeMs:a.then(e=>e.kernelMs),extraInfo:a.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){let{kernelName:t,outputs:n,timeMs:r,inputs:a,extraInfo:i}=e;n.forEach(e=>{Promise.all([e.data(),r,i]).then(n=>{this.logger.logKernelProfile(t,e,n[0],n[1],a,n[2])})})}};function _u(e,t,n){if("float32"!==t)return!1;for(let r=0;r<e.length;r++){let t=e[r];if(isNaN(t)||!isFinite(t))return console.warn("Found ".concat(t," in the result of '").concat(n,"'")),!0}return!1}var Tu=class{logKernelProfile(e,t,n,r,a,i){let s="number"==typeof r?Vi("".concat(r,"ms"),9):r.error,o=Vi(e,25),l=t.rank,c=t.size,u=Vi(t.shape.toString(),14),A="";for(let d in a){let e=a[d];if(null!=e){let n=e.shape||t.shape,r=n.length;A+="".concat(d,": ").concat(r,"D ").concat(r>0?n:""," ")}}console.log("%c".concat(o,"\t%c").concat(s,"\t%c").concat(l,"D ").concat(u,"\t%c").concat(c,"\t%c").concat(A,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function Lu(e,t,n,r){let a=cs(t),i=function(e,t,n,r){let a=Oi(t),i=r[r.length-1],s=new Array(i).fill(0),o=t.length,l="complex64"===n?Ou(e):e;if(o>1)for(let c=0;c<a/i;c++){let e=c*i;for(let t=0;t<i;t++)s[t]=Math.max(s[t],Du(l[e+t],0,n).length)}return s}(e,t,n,a),s=t.length,o=Uu(e,t,n,a,i),l=["Tensor"];return r&&(l.push("  dtype: ".concat(n)),l.push("  rank: ".concat(s)),l.push("  shape: [".concat(t,"]")),l.push("  values:")),l.push(o.map(e=>"    "+e).join("\n")),l.join("\n")}function Du(e,t,n){let r;return r=Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ").concat(parseFloat(e[1].toFixed(7)),"j"):rs(e)?"'".concat(e,"'"):"bool"===n?Ru(e):parseFloat(e.toFixed(7)).toString(),Vi(r,t)}function Ru(e){return 0===e?"false":"true"}function Uu(e,t,n,r,a){let i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s="complex64"===n?2:1,o=t[0],l=t.length;if(0===l){if("complex64"===n){return[Du(Ou(e)[0],0,n)]}return"bool"===n?[Ru(e[0])]:[e[0].toString()]}if(1===l){if(o>20){let t=3*s,r=Array.from(e.slice(0,t)),i=Array.from(e.slice((o-3)*s,o*s));return"complex64"===n&&(r=Ou(r),i=Ou(i)),["["+r.map((e,t)=>Du(e,a[t],n)).join(", ")+", ..., "+i.map((e,t)=>Du(e,a[o-3+t],n)).join(", ")+"]"]}return["["+("complex64"===n?Ou(e):Array.from(e)).map((e,t)=>Du(e,a[t],n)).join(", ")+"]"]}let c=t.slice(1),u=r.slice(1),A=r[0]*s,d=[];if(o>20){for(let t=0;t<3;t++){let r=t*A,i=r+A;d.push(...Uu(e.slice(r,i),c,n,u,a,!1))}d.push("...");for(let t=o-3;t<o;t++){let r=t*A,i=r+A;d.push(...Uu(e.slice(r,i),c,n,u,a,t===o-1))}}else for(let f=0;f<o;f++){let t=f*A,r=t+A;d.push(...Uu(e.slice(t,r),c,n,u,a,f===o-1))}let h=2===l?",":"";d[0]="["+(o>0?d[0]+h:"");for(let f=1;f<d.length-1;f++)d[f]=" "+d[f]+h;let p=",\n";for(let f=2;f<l;f++)p+="\n";return d[d.length-1]=" "+d[d.length-1]+"]"+(i?"":p),d}function Ou(e){let t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Mu=class{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=Oi(e),null!=n){let e=n.length;Di(e===this.size,()=>"Length of values '".concat(e,"' does not match the size inferred by the shape '").concat(this.size,"'."))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||Yi(t,this.size),this.strides=cs(e)}set(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),Di(n.length===this.rank,()=>"The number of provided coordinates (".concat(n.length,") must match the rank (").concat(this.rank,")"));let a=this.locToIndex(n);this.values[a]=e}get(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);let r=0;for(let i of t){if(i<0||i>=this.shape[r]){let e="Requested out of range element at ".concat(t,".   Buffer shape=").concat(this.shape);throw new Error(e)}r++}let a=t[t.length-1];for(let i=0;i<t.length-1;++i)a+=this.strides[i]*t[i];return this.values[a]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];let t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return Pu().makeTensor(this.values,this.shape,this.dtype)}},Pu=null,Qu=null;var ju=class{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Oi(e),this.strides=cs(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let e=await this.data();return Qu.buffer(this.shape,this.dtype,e)}bufferSync(){return Qu.buffer(this.shape,this.dtype,this.dataSync())}async array(){let e=await this.data();return As(this.shape,e,"complex64"===this.dtype)}arraySync(){return As(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();let e=Pu().read(this.dataId);if("string"===this.dtype){let t=await e;try{return t.map(e=>Iu(e))}catch(pt){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),Pu().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();let e=Pu().readSync(this.dataId);if("string"===this.dtype)try{return e.map(e=>Iu(e))}catch(x){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();let e=await Pu().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Pu().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Qu.print(this,e)}clone(){return this.throwIfDisposed(),Qu.clone(this)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Lu(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Qu.cast(this,e)}variable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),Pu().makeVariable(this,e,t,n)}};function Hu(){return Is("Tensor",()=>ju)}Object.defineProperty(ju,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),Hu();var zu=class extends ju{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and previous value (").concat(this.dtype,") must match"));if(!Qi(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and previous value (").concat(this.shape,") must match"));Pu().disposeTensor(this),this.dataId=e.dataId,Pu().incRef(this,null)}dispose(){Pu().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(zu,Symbol.hasInstance,{value:e=>e instanceof ju&&null!=e.assign&&e.assign instanceof Function});var Wu,Vu,Gu,Ku,qu,Xu,Ju={};ei(Ju,{assertTypesMatch:()=>rA,getTensorsInContainer:()=>iA,isTensorInList:()=>aA,makeTypesMatch:()=>nA}),(Vu=Wu||(Wu={})).R0="R0",Vu.R1="R1",Vu.R2="R2",Vu.R3="R3",Vu.R4="R4",Vu.R5="R5",Vu.R6="R6",function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Gu||(Gu={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Ku||(Ku={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(qu||(qu={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Xu||(Xu={}));var Yu={float32:qu,int32:Gu,bool:Ku,complex64:Xu};function Zu(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return Yu[e][t]}function $u(e){return Zu(e,"int32")}function eA(e){return null!=e&&"object"==typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function tA(e){return"undefined"!=typeof GPUBuffer&&null!=e&&"object"==typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function nA(e,t){if(e.dtype===t.dtype)return[e,t];let n=Zu(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function rA(e,t){Di(e.dtype===t.dtype,()=>"The dtypes of the first(".concat(e.dtype,") and second(").concat(t.dtype,") input must match"))}function aA(e,t){return t.some(t=>t.id===e.id)}function iA(e){let t=[];return sA(e,t,new Set),t}function sA(e,t,n){if(null==e)return;if(e instanceof ju)return void t.push(e);if(!function(e){return Array.isArray(e)||"object"==typeof e}(e))return;let r=e;for(let a in r){let e=r[a];n.has(e)||(n.add(e),sA(e,t,n))}}function oA(e){return null!=e.kernelName}var lA=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}},cA=class e{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new lA}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));if(null==this.backendInstance){let{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error("The highest priority backend '".concat(e,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{let{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(Kc("".concat(e," backend was already registered. Reusing existing backend factory.")),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error("Backend name '".concat(e,"' not found in registry"));if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;let{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Eu(this.backendInstance),!0}setupRegisteredKernels(){$c(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){$c(e).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(e){let t=this.registryFactory[e];if(null==t)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{let n=t.factory();if(!n||n instanceof ki||"function"!=typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{let t=++this.pendingBackendInitId,r=n.then(n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0)).catch(n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,Kc("Initialization of backend ".concat(e," failed")),Kc(n.stack||n.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(mt){return Kc("Initialization of backend ".concat(e," failed")),Kc(mt.stack||mt.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t],{success:r,asyncInit:a}=this.initializeBackend(n);if(a||r)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){let n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(e,t,n){e();try{let e=n();return t(),e}catch(a3){throw t(),a3}}nextTensorId(){return e.nextTensorId++}nextVariableId(){return e.nextVariableId++}clone(e){let t=AA.runKernel(Vo,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],e=>({x:()=>{let t={x:e},n={dtype:"float32"};return AA.runKernel(Zs,t,n)}}),[],{}),t}runKernel(e,t,n){if(null==this.backendName&&this.backend,null==Yc(e,this.backendName))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){let r=this.backend.numDataIds(),a=0;n.forEach(e=>{a+="complex64"===e.dtype?3:1});let i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=r-t-a-i;if(s>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak (").concat(s," data ids) after running '").concat(e,"'"))}runKernelFunc(e){let t,n,r=[],a=this.isTapeOn(),i=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;let o,l=oA(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(oA(e)){let{kernelName:t,inputs:i,attrs:s}=e;null==this.backendName&&this.backend;let l=Yc(t,this.backendName);Di(null!=l,()=>"Cannot find registered kernel '".concat(t,"' for backend '").concat(this.backendName,"'")),n=()=>{let e=this.backend.numDataIds();o=l.kernelFunc({inputs:i,attrs:s,backend:this.backend});let n=Array.isArray(o)?o:[o];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,n);let c=n.map(e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e));if(a){let e=this.getTensorsForGradient(t,i,c);r=this.saveTensorsForBackwardMode(e)}return c}}else{let{forwardFunc:t}=e,i=e=>{a&&(r=e.map(e=>this.keep(this.clone(e))))};n=()=>{let e=this.backend.numDataIds();o=this.tidy(()=>t(this.backend,i));let n=Array.isArray(o)?o:[o];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}let c,{inputs:u,attrs:A}=e,d=oA(e)?null:e.backwardsFunc;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(c=this.profiler.profileKernel(l,u,()=>n()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(c),t=c.outputs):t=n()}),a&&this.addTapeNode(l,u,t,d,r,A),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(e=>null!=u[e]?u[e].shape:null),outputShapes:t.map(e=>e.shape),kernelTimeMs:c.timeMs,extraInfo:c.extraInfo}),Array.isArray(o)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(e=>this.keep(this.clone(e)))}getTensorsForGradient(e,t,n){let r=Zc(e);if(null!=r){let e,a=r.inputsToSave||[],i=r.outputsToSave||[];r.saveAllInputs?(Di(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),e=Object.keys(t).map(e=>t[e])):e=a.map(e=>t[e]);let s=n.filter((e,t)=>i[t]);return e.concat(s)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let a=e;"string"===n&&rs(e[0])&&(a=e.map(e=>Su(e)));let i=r.write(a,t,n),s=new ju(t,n,i,this.nextTensorId());if(this.trackTensor(s,r),"string"===n){let e=this.state.tensorInfo.get(i),t=ns(a);this.state.numBytes+=t-e.bytes,e.bytes=t}return s}makeTensorFromDataId(e,t,n,r){let a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}makeTensorFromTensorInfo(e,t){let{dataId:n,shape:r,dtype:a}=e,i=new ju(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}makeVariable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));let a=new zu(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*ts(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof zu||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){let t=e.size*ts(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(let e in this.state.registeredVariables){let t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;let t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(let r of this.state.activeProfile.kernels)r.kernelTimeMs=await r.kernelTimeMs,r.extraInfo=await r.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,a,i){let s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},o=Zc(e);null!=o&&(r=o.gradFunc),null!=r&&(s.gradient=e=>(e=e.map((e,t)=>{if(null==e){let e=n[t],r=ps(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e}),r(e.length>1?e:e[0],a,i))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){let t=iA(e),n=new Set(t.map(e=>e.id));for(let a=0;a<this.state.activeScope.track.length;a++){let e=this.state.activeScope.track[a];!e.kept&&!n.has(e.id)&&e.dispose()}let r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{!e.kept&&e.scopeId===r.id&&this.track(e)})}gradients(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Di(t.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));let a=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));Di(a instanceof ju,()=>"The result y returned by f() must be a tensor.");let i=function(e,t,n){let r={},a={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){let n=e[l],i=n.inputs;for(let e in i){let s=i[e],o=!1;for(let e=0;e<t.length;e++)if(r[s.id]){n.outputs.forEach(e=>r[e.id]=!0),o=!0,a[n.id]=!0;break}if(o)break}}let i={};i[n.id]=!0;let s={};for(let l=e.length-1;l>=0;l--){let t=e[l],n=t.inputs;for(let e=0;e<t.outputs.length;e++)if(i[t.outputs[e].id]){for(let e in n)i[n[e].id]=!0,s[t.id]=!0;break}}let o=[];for(let l=0;l<e.length;l++){let t=e[l];if(a[t.id]&&s[t.id]){let e={};for(let a in t.inputs){let n=t.inputs[a];r[n.id]&&(e[a]=n)}let n=Object.assign({},t);n.inputs=e,n.outputs=t.outputs,o.push(n)}}return o}(this.state.activeTape,t,a);if(!r&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let e={};e[a.id]=null==n?function(e){let t=hs(Oi(e),"float32");return AA.makeTensor(t,e,"float32")}(a.shape):n,function(e,t,n,r){for(let a=t.length-1;a>=0;a--){let i=t[a],s=[];if(i.outputs.forEach(t=>{let n=e[t.id];null!=n?s.push(n):s.push(null)}),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found for ".concat(i.kernelName,"."));let o=i.gradient(s);for(let t in i.inputs){if(!(t in o))throw new Error("Cannot backprop through input ".concat(t,". Available gradients found: ").concat(Object.keys(o),"."));let a=n(()=>o[t]());if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ").concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));let s=i.inputs[t];if(!Qi(a.shape,s.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input '").concat(t,"' has shape '").concat(a.shape,"', which does not match the shape of the input '").concat(s.shape,"'"));if(null==e[s.id])e[s.id]=a;else{let t=e[s.id];e[s.id]=r(t,a),t.dispose()}}}}(e,i,e=>this.tidy(e),dA);let r=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(let t of e.saved)t.dispose()}),this.state.activeTape=null),{value:a,grads:r}})}customGrad(e){var t=this;return Di(os(e),()=>"The f passed in customGrad(f) must be a function."),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];Di(r.every(e=>e instanceof ju),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let i,s={};r.forEach((e,t)=>{s[t]=e});return t.runKernelFunc({forwardFunc:(t,n)=>(i=e(...r,n),Di(i.value instanceof ju,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),Di(os(i.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),i.value),backwardsFunc:(e,t)=>{let n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];Di(a.length===r.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),Di(a.every(e=>e instanceof ju),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let s={};return a.forEach((e,t)=>{s[t]=()=>e}),s},inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){let t=ku(),n=await this.backend.time(e);return n.wallMs=ku()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new lA;for(let e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}};function uA(){let e=Ss();if(null==e._tfengine){let t=new vs(e);e._tfengine=new cA(t)}return function(e){Bs=e}(e._tfengine.ENV),function(e){Pu=e}(()=>e._tfengine),e._tfengine}cA.nextTensorId=0,cA.nextVariableId=0;var AA=uA();function dA(e,t){let n={a:e,b:t};return AA.runKernel(_s,n)}var hA,pA={};function fA(e){hA=e}function mA(e){if(void 0!==hA)return hA;if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;let t=e.userAgent||e.vendor||("undefined"!=typeof window?window.opera:"");if(!t){let t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function gA(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}ei(pA,{isBrowser:()=>gA,isMobile:()=>mA,mockIsMobile:()=>fA});var yA=Cs();function bA(e,t){let n=e;if(Nu(e))return"string"===t?[]:[e.length];if(eA(e)){let t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(tA(e))return[e.buffer.size/(null==t?4:ts(t))];if(!Array.isArray(e))return[];let r=[];for(;Array.isArray(n)||Nu(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Cs().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&wA(e,r,[]),r}function wA(e,t,n){if(n=n||[],!Array.isArray(e)&&!Nu(e))return void Di(0===t.length,()=>"Element arr[".concat(n.join("]["),"] is a primitive, but should be an array/TypedArray of ").concat(t[0]," elements"));Di(t.length>0,()=>"Element arr[".concat(n.join("]["),"] should be a primitive, but is an array of ").concat(e.length," elements")),Di(e.length===t[0],()=>"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," elements, but has ").concat(e.length," elements"));let r=t.slice(1);for(let a=0;a<e.length;++a)wA(e[a],r,n.concat(a))}function vA(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must be ").concat(e," tensor, but got ").concat(t," tensor"))}}function xA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof Hu())return vA(r,e.dtype,t,n),e;let a=ss(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),vA(r,a,t,n),null==e||!Nu(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){let r=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a Tensor or TensorLike, but got '").concat(r,"'"))}let i=bA(e,a);!Nu(e)&&!Array.isArray(e)&&(e=[e]);let s="string"!==a?Cu(e,a):Fu(e,[],!0);return AA.makeTensor(s,i,a)}function CA(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a `Tensor[]` or `TensorLike[]`"));return e.map((e,a)=>xA(e,"".concat(t,"[").concat(a,"]"),n,r))}yA.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),yA.registerFlag("IS_BROWSER",()=>gA()),yA.registerFlag("IS_NODE",()=>"undefined"!=typeof process&&"undefined"!=typeof process.versions&&"undefined"!=typeof process.versions.node),yA.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),yA.registerFlag("IS_SAFARI",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),yA.registerFlag("PROD",()=>!1),yA.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>yA.getBool("DEBUG")),yA.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),yA.registerFlag("IS_TEST",()=>!1),yA.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>yA.getBool("DEBUG")),yA.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),yA.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),yA.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);var kA="__op";function BA(e){let t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with ".concat(t.length," keys."));let n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=kA;let a=function(){AA.startScope(n);try{let e=r(...arguments);return bs(e)&&console.error("Cannot return a Promise inside of tidy."),AA.endScope(e),e}catch(Te){throw AA.endScope(null),Te}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var SA=BA({complex_:function(e,t){let n=xA(e,"real","complex"),r=xA(t,"imag","complex");Ri(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", must match in call to tf.complex()."));let a={real:n,imag:r};return AA.runKernel(to,a)}});function IA(e,t,n,r){if(null==r)r=ss(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(tA(e)||eA(e)){if("float32"!==r&&"int32"!==r)throw new Error("Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ".concat(r,"."));return AA.backend.createTensorFromGPUData(e,t||n,r)}if(!Nu(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){ms(t);let e=Oi(t),r=Oi(n);Di(e===r,()=>"Based on the provided shape, [".concat(t,"], the tensor should have ").concat(e," values but has ").concat(r));for(let a=0;a<n.length;++a){let e=n[a],r=a!==n.length-1||e!==Oi(t.slice(a));Di(n[a]===t[a]||!r,()=>"Error creating a new Tensor. Inferred shape (".concat(n,") does not match the provided shape (").concat(t,"). "))}}return!Nu(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e="string"!==r?Cu(e,r):Fu(e,[],!0),AA.makeTensor(e,t,r)}function NA(e,t,n){return IA(e,t,bA(e,n),n)}var FA={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},EA=class e{static join(t){return new e(t).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e||(e instanceof Array||(e=[e]),e=e.map(e=>Nu(e)?e.buffer:e),0===e.length))return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){let r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let a=t+r.byteLength;this.shards.push({buffer:r,start:t,end:a}),t=a}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),t=Math.min(this.byteLength,t),t<=e)return new ArrayBuffer(0);let n=this.findShardForByte(e);if(-1===n)throw new Error("Could not find start shard for byte ".concat(e));let r=new ArrayBuffer(t-e),a=new Uint8Array(r),i=0;for(let s=n;s<this.shards.length;s++){let n=this.shards[s],r=e+i-n.start,o=i,l=Math.min(t,n.end)-n.start,c=new Uint8Array(n.buffer,r,l-r);if(a.set(c,o),i+=c.length,t<n.end)break}return r}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;let n=function(e,t){let n=0,r=e.length;for(;n<=r;){let a=Math.floor((r-n)/2)+n,i=t(e[a]);if(0===i)return a;i<0?r=a:n=a+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}};function _A(){Cs().set("PROD",!0)}function TA(){Cs().set("DEBUG",!0)}function LA(){Cs().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function DA(e){Cs().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function RA(){AA.disposeVariables()}function UA(){return AA}function OA(){return AA.memory()}function MA(e){return AA.profile(e)}function PA(e,t){return AA.tidy(e,t)}function QA(e){iA(e).forEach(e=>e.dispose())}function jA(e){return AA.keep(e)}function HA(e){return AA.time(e)}function zA(e){return AA.setBackend(e)}function WA(){return AA.ready()}function VA(){return AA.backendName}function GA(e){AA.removeBackend(e)}function KA(e){return AA.findBackend(e)}function qA(e){return AA.findBackendFactory(e)}function XA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return AA.registerBackend(e,t,n)}function JA(){return AA.backend}function YA(e,t){Cs().setPlatform(e,t)}!function(e){0}(DA);async function ZA(e,t){let n=[],r=[],a=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let i=0;i<a.length;++i){let s=a[i],o=Array.isArray(e)?e[i].tensor:e[s];if("float32"!==o.dtype&&"int32"!==o.dtype&&"bool"!==o.dtype&&"string"!==o.dtype&&"complex64"!==o.dtype)throw new Error("Unsupported dtype in weight '".concat(s,"': ").concat(o.dtype));let l={name:s,shape:o.shape,dtype:o.dtype};if("string"===o.dtype){let e=new Promise(async e=>{let t=await o.bytes(),n=t.reduce((e,t)=>e+t.length,0)+4*t.length,r=new Uint8Array(n),a=0;for(let i=0;i<t.length;i++){let e=t[i],n=new Uint8Array(new Uint32Array([e.length]).buffer);r.set(n,a),a+=4,r.set(e,a),a+=e.length}e(r)});r.push(e)}else r.push(o.data());null!=t&&(l.group=t),n.push(l)}return{data:id(await Promise.all(r)),specs:n}}function $A(e,t){let n=new EA(e),r={},a=0;for(let i of t){let e=ed(i,(e,t)=>n.slice(a+e,a+t));r[i.name]=nd(i,n.slice(a,a+e)),a+=e}return r}function ed(e,t){let n,r=Oi(e.shape);if("quantization"in e){let t=e.quantization;n=FA[t.dtype]}else{if("string"===e.dtype){let e=0;for(let n=0;n<r;n++)e+=4+new Uint32Array(t(e,e+4))[0];return e}n=FA[e.dtype]}return r*n}async function td(e,t){let n,r=Oi(e.shape);if("quantization"in e){let t=e.quantization;n=FA[t.dtype]}else{if("string"===e.dtype){let e=0;for(let n=0;n<r;n++)e+=4+new Uint32Array(await t(e,e+4))[0];return e}n=FA[e.dtype]}return r*n}function nd(e,t){let n,r=e.name,a=e.dtype,i=e.shape,s=Oi(i),o=0;if("quantization"in e){let i=e.quantization;if("uint8"===i.dtype||"uint16"===i.dtype){if(!("min"in i)||!("scale"in i))throw new Error("Weight ".concat(e.name," with quantization ").concat(i.dtype," doesn't have corresponding metadata min and scale."))}else{if("float16"!==i.dtype)throw new Error("Weight ".concat(e.name," has unknown quantization dtype ").concat(i.dtype,". Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'."));if("float32"!==a)throw new Error("Weight ".concat(e.name," is quantized with ").concat(i.dtype," which only supports weights of type float32 not ").concat(a,"."))}let l=FA[i.dtype],c="uint8"===i.dtype?new Uint8Array(t):new Uint16Array(t);if("float32"===a)if("uint8"===i.dtype||"uint16"===i.dtype){n=new Float32Array(c.length);for(let e=0;e<c.length;e++){let t=c[e];n[e]=t*i.scale+i.min}}else{if("float16"!==i.dtype)throw new Error("Unsupported quantization type ".concat(i.dtype," for weight type float32."));n=function(){let e=function(){let e=e=>{let t=e<<13,n=0;for(;!(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}(),t=function(){let e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){let e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{let a=new ArrayBuffer(4*r.length),i=new Uint32Array(a);for(let s=0;s<r.length;s++){let a=r[s],o=e[n[a>>10]+(1023&a)]+t[a>>10];i[s]=o}return new Float32Array(a)}}()(c)}else{if("int32"!==a)throw new Error("Unsupported dtype in weight '".concat(r,"': ").concat(a));if("uint8"!==i.dtype&&"uint16"!==i.dtype)throw new Error("Unsupported quantization type ".concat(i.dtype," for weight type int32."));n=new Int32Array(c.length);for(let e=0;e<c.length;e++){let t=c[e];n[e]=Math.round(t*i.scale+i.min)}}o+=s*l}else if("string"===a){let r=Oi(e.shape);n=[];for(let e=0;e<r;e++){let e=new Uint32Array(t.slice(o,o+4))[0];o+=4;let r=new Uint8Array(t.slice(o,o+e));n.push(r),o+=e}}else{let e=FA[a];if("float32"===a)n=new Float32Array(t);else if("int32"===a)n=new Int32Array(t);else{if("bool"!==a){if("complex64"===a){n=new Float32Array(t);let e=new Float32Array(n.length/2),r=new Float32Array(n.length/2);for(let t=0;t<e.length;t++)e[t]=n[2*t],r[t]=n[2*t+1];let a=NA(e,i,"float32"),s=NA(r,i,"float32"),o=SA(a,s);return a.dispose(),s.dispose(),o}throw new Error("Unsupported dtype in weight '".concat(r,"': ").concat(a))}n=new Uint8Array(t)}o+=s*e}return NA(n,i,a)}async function rd(e,t,n){let r=new Uint8Array(t);for(;r.byteLength<n;){let{done:t,value:a}=await e.read();if(t&&null==a){let e=n-r.byteLength;throw new Error("Reader is done but ".concat(e," bytes are still expected"))}let i=new Uint8Array(r.length+a.byteLength);i.set(r,0),i.set(new Uint8Array(a),r.length),r=i}return r.buffer}async function ad(e,t){let n={},r=e.getReader(),a=new ArrayBuffer(0);for(let i of t){let e=await td(i,async(e,t)=>(a=await rd(r,a,t),a.slice(e,t)));a=await rd(r,a,e);let t=a.slice(0,e);a=a.slice(e);let s=nd(i,t);if(n[i.name]=s,"webgpu"===VA()){let e=JA();"uploadToGPU"in e&&Oi(s.shape)>=Cs().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&e.uploadToGPU(s.dataId)}}return n}function id(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));let t=0,n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))});let r=new Uint8Array(t),a=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),a),a+=e.byteLength}),r.buffer}var sd="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function od(e){return sd?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function ld(e){return EA.join(e)}function cd(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);let t=e.split("/");return t[t.length-1]}function ud(e,t){let n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function Ad(e,t,n){let r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}async function dd(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),Ad(e,n,r)}function hd(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:od(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:od(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new EA(e.weightData).byteLength}}function pd(e){let t=[];for(let n of e)t.push(...n.weights);return t}var fd=class e{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==e.instance&&(e.instance=new e),e.instance}static registerSaveRouter(t){e.getInstance().saveRouters.push(t)}static registerLoadRouter(t){e.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return e.getHandlers(t,"save")}static getLoadHandlers(t,n){return e.getHandlers(t,"load",n)}static getHandlers(t,n,r){let a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(e=>{let n=e(t,r);null!==n&&a.push(n)}),a}},md=e=>fd.registerSaveRouter(e),gd=e=>fd.registerLoadRouter(e),yd=e=>fd.getSaveHandlers(e),bd=(e,t)=>fd.getLoadHandlers(e,t),wd="tensorflowjs",vd="models_store",xd="model_info_store";function Cd(){if(!Cs().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function kd(e){let t=e.result;t.createObjectStore(vd,{keyPath:"modelPath"}),t.createObjectStore(xd,{keyPath:"modelPath"})}var Bd=class{constructor(e){if(this.indexedDB=Cd(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((e,n)=>{let r=this.indexedDB.open(wd,1);r.onupgradeneeded=()=>kd(r),r.onsuccess=()=>{let a=r.result;if(null==t){let t=a.transaction(vd,"readonly"),r=t.objectStore(vd).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return a.close(),n(new Error("Cannot find model with path '".concat(this.modelPath,"' in IndexedDB.")));e(r.result.modelArtifacts)},r.onerror=e=>(a.close(),n(r.error)),t.oncomplete=()=>a.close()}else{t.weightData=EA.join(t.weightData);let r,i,s=hd(t),o=a.transaction(xd,"readwrite"),l=o.objectStore(xd);try{r=l.put({modelPath:this.modelPath,modelArtifactsInfo:s})}catch(kt){return n(kt)}r.onsuccess=()=>{i=a.transaction(vd,"readwrite");let r,c=i.objectStore(vd);try{r=c.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:s})}catch(vt){return n(vt)}r.onsuccess=()=>e({modelArtifactsInfo:s}),r.onerror=e=>{l=o.objectStore(xd);let t=l.delete(this.modelPath);t.onsuccess=()=>(a.close(),n(r.error)),t.onerror=e=>(a.close(),n(r.error))}},r.onerror=e=>(a.close(),n(r.error)),o.oncomplete=()=>{null==i?a.close():i.oncomplete=()=>a.close()}}},r.onerror=e=>n(r.error)})}};Bd.URL_SCHEME="indexeddb://";var Sd=e=>Cs().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Bd.URL_SCHEME)?function(e){return new Bd(e)}(e.slice(Bd.URL_SCHEME.length)):null;fd.registerSaveRouter(Sd),fd.registerLoadRouter(Sd);var Id="/",Nd="tensorflowjs_models",Fd="info",Ed="model_topology",_d="weight_specs",Td="weight_data",Ld="model_metadata";function Dd(e){return{info:[Nd,e,Fd].join(Id),topology:[Nd,e,Ed].join(Id),weightSpecs:[Nd,e,_d].join(Id),weightData:[Nd,e,Td].join(Id),modelMetadata:[Nd,e,Ld].join(Id)}}function Rd(e){for(let t of Object.values(e))window.localStorage.removeItem(t)}function Ud(e){let t=e.split(Id);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(Id)}var Od=class{constructor(e){if(!Cs().getBool("IS_BROWSER")||"undefined"==typeof window||"undefined"==typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Dd(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=hd(e),a=EA.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(sd)return Buffer.from(e).toString("base64");let t=new Uint8Array(e),n="";for(let r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(a));let i={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:r}}catch(yt){throw Rd(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=").concat(r.modelTopologyBytes,", weightSpecsBytes=").concat(r.weightSpecsBytes,", weightDataBytes=").concat(r.weightDataBytes,"."))}}}async load(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' is missing."));t.modelTopology=n;let r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' are missing."));t.weightSpecs=r;let a=this.LS.getItem(this.keys.modelMetadata);if(null!=a){let e=JSON.parse(a);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}let i=this.LS.getItem(this.keys.weightData);if(null==i)throw new Error("In local storage, the binary weight values of model '".concat(this.modelPath,"' are missing."));return t.weightData=function(e){if(sd){let t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}let t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}(i),t}};Od.URL_SCHEME="localstorage://";var Md=e=>Cs().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Od.URL_SCHEME)?function(e){return new Od(e)}(e.slice(Od.URL_SCHEME.length)):null;fd.registerSaveRouter(Md),fd.registerLoadRouter(Md);var Pd="://",Qd=class e{constructor(){this.managers={}}static getInstance(){return null==e.instance&&(e.instance=new e),e.instance}static registerManager(t,n){Di(null!=t,()=>"scheme must not be undefined or null."),t.endsWith(Pd)&&(t=t.slice(0,t.indexOf(Pd))),Di(t.length>0,()=>"scheme must not be an empty string.");let r=e.getInstance();Di(null==r.managers[t],()=>"A model store manager is already registered for scheme '".concat(t,"'.")),r.managers[t]=n}static getManager(t){let n=e.getInstance().managers[t];if(null==n)throw new Error("Cannot find model manager for scheme '".concat(t,"'"));return n}static getSchemes(){return Object.keys(e.getInstance().managers)}};function jd(e){if(-1===e.indexOf(Pd))throw new Error("The url string provided does not contain a scheme. Supported schemes are: ".concat(Qd.getSchemes().join(",")));return{scheme:e.split(Pd)[0],path:e.split(Pd)[1]}}async function Hd(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Di(e!==t,()=>"Old path and new path are the same: '".concat(e,"'"));let r=fd.getLoadHandlers(e);Di(r.length>0,()=>"Copying failed because no load handler is found for source URL ".concat(e,".")),Di(r.length<2,()=>"Copying failed because more than one (".concat(r.length,") load handlers for source URL ").concat(e,"."));let a=r[0],i=fd.getSaveHandlers(t);Di(i.length>0,()=>"Copying failed because no save handler is found for destination URL ".concat(t,".")),Di(i.length<2,()=>"Copying failed because more than one (".concat(r.length,") save handlers for destination URL ").concat(t,"."));let s=i[0],o=jd(e).scheme,l=jd(e).path,c=o===jd(e).scheme,u=await a.load();n&&c&&await Qd.getManager(o).removeModel(l);let A=await s.save(u);return n&&!c&&await Qd.getManager(o).removeModel(l),A.modelArtifactsInfo}async function zd(){let e=Qd.getSchemes(),t={};for(let n of e){let e=await Qd.getManager(n).listModels();for(let r in e){t[n+Pd+r]=e[r]}}return t}async function Wd(e){let t=jd(e);return Qd.getManager(t.scheme).removeModel(t.path)}async function Vd(e,t){return Hd(e,t,!1)}async function Gd(e,t){return Hd(e,t,!0)}if(Cs().get("IS_BROWSER")){Cs().setPlatform("browser",new class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!=typeof window&&Cs().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",e=>{e.source===window&&e.data.name===this.messageName&&(e.stopPropagation(),(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0))},!0))):setTimeout(e,t)}isTypedArray(e){return ou(e)}});try{Qd.registerManager(Od.URL_SCHEME,new class{constructor(){Di(Cs().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),Di("undefined"==typeof window||"undefined"!=typeof window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){let e={},t=Nd+Id,n=Id+Fd;for(let r=0;r<this.LS.length;++r){let a=this.LS.key(r);a.startsWith(t)&&a.endsWith(n)&&(e[Ud(a)]=JSON.parse(this.LS.getItem(a)))}return e}async removeModel(e){let t=Dd(e=function(e){return e.startsWith(Od.URL_SCHEME)?e.slice(Od.URL_SCHEME.length):e}(e));if(null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '".concat(e,"'"));let n=JSON.parse(this.LS.getItem(t.info));return Rd(t),n}})}catch(Vu){}try{Qd.registerManager(Bd.URL_SCHEME,new class{constructor(){this.indexedDB=Cd()}async listModels(){return new Promise((e,t)=>{let n=this.indexedDB.open(wd,1);n.onupgradeneeded=()=>kd(n),n.onsuccess=()=>{let r=n.result,a=r.transaction(xd,"readonly"),i=a.objectStore(xd).getAll();i.onsuccess=()=>{let t={};for(let e of i.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},i.onerror=e=>(r.close(),t(i.error)),a.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)})}async removeModel(e){return e=function(e){return e.startsWith(Bd.URL_SCHEME)?e.slice(Bd.URL_SCHEME.length):e}(e),new Promise((t,n)=>{let r=this.indexedDB.open(wd,1);r.onupgradeneeded=()=>kd(r),r.onsuccess=()=>{let a,i=r.result,s=i.transaction(xd,"readwrite"),o=s.objectStore(xd),l=o.get(e);l.onsuccess=()=>{if(null==l.result)return i.close(),n(new Error("Cannot find model with path '".concat(e,"' in IndexedDB.")));{let r=o.delete(e),s=()=>{a=i.transaction(vd,"readwrite");let r=a.objectStore(vd).delete(e);r.onsuccess=()=>t(l.result.modelArtifactsInfo),r.onerror=e=>n(l.error)};r.onsuccess=s,r.onerror=e=>(s(),i.close(),n(l.error))}},l.onerror=e=>(i.close(),n(l.error)),s.oncomplete=()=>{null==a?i.close():a.oncomplete=()=>i.close()}},r.onerror=e=>n(r.error)})}})}catch(Vu){}}var Kd,qd=()=>ri();function Xd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",ms(e),new Mu(e,t,n)}Cs().get("IS_NODE")&&!Cs().get("IS_BROWSER")&&Cs().setPlatform("node",new class{constructor(){this.util=ai(),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=Cs().global.fetch?Cs().global.fetch(e,t):(null==Kd&&(Kd=qd()),Kd(e,t))}now(){let e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}});var Jd=BA({cast_:function(e,t){let n=xA(e,"x","cast");if(!$i(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");let r={x:n},a={dtype:t};return AA.runKernel(Zs,r,a)}});var Yd=BA({clone_:function(e){let t={x:xA(e,"x","clone","string_or_numeric")};return AA.runKernel(Vo,t)}});function Zd(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}uA(),function(e){Qu=e}({buffer:Xd,cast:Jd,clone:Yd,print:Zd});var $d=BA({add_:function(e,t){let n=xA(e,"a","add"),r=xA(t,"b","add");[n,r]=nA(n,r);let a={a:n,b:r};return AA.runKernel(_s,a)}});var eh=BA({floorDiv_:function(e,t){let n=xA(e,"a","floorDiv"),r=xA(t,"b","floorDiv");[n,r]=nA(n,r);let a={a:n,b:r};return AA.runKernel(Po,a)}});var th=BA({div_:function(e,t){let n=xA(e,"a","div"),r=xA(t,"b","div");if([n,r]=nA(n,r),"int32"===n.dtype&&"int32"===r.dtype)return eh(n,r);let a={a:n,b:r};return AA.runKernel(So,a,{})}});var nh=BA({mul_:function(e,t){let n=xA(e,"a","mul"),r=xA(t,"b","mul");[n,r]=nA(n,r);let a={a:n,b:r};return AA.runKernel(Bl,a)}});var rh=BA({abs_:function(e){let t=xA(e,"x","abs");if("complex64"===t.dtype){let e={x:t};return AA.runKernel(no,e)}{let e={x:t};return AA.runKernel(Ns,e)}}});var ah=BA({acos_:function(e){let t={x:xA(e,"x","acos")};return AA.runKernel(Fs,t)}});var ih=BA({acosh_:function(e){let t={x:xA(e,"x","acosh")};return AA.runKernel(Es,t)}});var sh=BA({addN_:function(e){Di(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),Di(e.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got ".concat(e.length));let t=e.map((e,t)=>xA(e,"tensors".concat(t),"addN")),n=t[0];t.forEach(e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(e=>{if(!Qi(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let r=t;return AA.runKernel(Ts,r)}});var oh=BA({all_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:xA(e,"x","all","bool")},a={axis:t,keepDims:n};return AA.runKernel(Ls,r,a)}});var lh=BA({any_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:xA(e,"x","any","bool")},a={axis:t,keepDims:n};return AA.runKernel(Ds,r,a)}});var ch=BA({argMax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:xA(e,"x","argMax")},r={axis:t};return AA.runKernel(Rs,n,r)}});var uh=BA({argMin_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:xA(e,"x","argMin")},r={axis:t};return AA.runKernel(Us,n,r)}});var Ah=BA({asin_:function(e){let t={x:xA(e,"x","asin")};return AA.runKernel(Os,t)}});var dh=BA({asinh_:function(e){let t={x:xA(e,"x","asinh")};return AA.runKernel(Ms,t)}});var hh=BA({atan_:function(e){let t={x:xA(e,"x","atan")};return AA.runKernel(Ps,t)}});var ph=BA({atan2_:function(e,t){let n=xA(e,"a","atan2"),r=xA(t,"b","atan2");[n,r]=nA(n,r);let a={a:n,b:r};return AA.runKernel(js,a)}});var fh=BA({atanh_:function(e){let t={x:xA(e,"x","atanh")};return AA.runKernel(Qs,t)}});function mh(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0;return bh(e,[...t,e[3]],n,i,r,null,null,Fh(a))}function gh(e,t,n,r,a,i){let s,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",[l,c]=xh(t);if("channelsLast"===o)s=[l,c,e[3],e[3]];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));s=[l,c,e[1],e[1]]}return bh(e,s,n,r,a,i,!1,o)}function yh(e,t,n,r,a,i){let s,o,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",[c,u,A]=Ch(t);if("NDHWC"===l)o="channelsLast",s=[c,u,A,e[4],e[4]];else{if("NCDHW"!==l)throw new Error("Unknown dataFormat ".concat(l));o="channelsFirst",s=[c,u,A,e[1],e[1]]}return wh(e,s,n,r,a,!1,o,i)}function bh(e,t,n,r,a,i){let s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",[l,c,u,A]=[-1,-1,-1,-1];if("channelsLast"===o)[l,c,u,A]=e;else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));[l,A,c,u]=e}let d,[h,p,,f]=t,[m,g]=xh(n),[y,b]=xh(r),w=kh(h,y),v=kh(p,b),{padInfo:x,outHeight:C,outWidth:k}=function(e,t,n,r,a,i,s,o,l){let c,u,A;if("number"==typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};let a=function(e,t,n,r,a){null==r&&(r=vh(e,t,n));let i=e[0],s=e[1],o=Bh((i-t+2*r)/n+1,a),l=Bh((s-t+2*r)/n+1,a);return[o,l]}([t,n],i,r,e,o);u=a[0],A=a[1]}else if("same"===e){u=Math.ceil(t/r),A=Math.ceil(n/a);let e=Math.max(0,(u-1)*r+i-t),o=Math.max(0,(A-1)*a+s-n),l=Math.floor(e/2),d=e-l,h=Math.floor(o/2);c={top:l,bottom:d,left:h,right:o-h,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-i+1)/r),A=Math.ceil((n-s+1)/a);else{if("object"!=typeof e)throw Error("Unknown padding parameter: ".concat(e));{let d="channelsLast"===l?e[1][0]:e[2][0],h="channelsLast"===l?e[1][1]:e[2][1],p="channelsLast"===l?e[2][0]:e[3][0],f="channelsLast"===l?e[2][1]:e[3][1];c={top:d,bottom:h,left:p,right:f,type:0===d&&0===h&&0===p&&0===f?"VALID":"EXPLICIT"},u=Bh((t-i+d+h)/r+1,o),A=Bh((n-s+p+f)/a+1,o)}}return{padInfo:c,outHeight:u,outWidth:A}}(a,c,u,m,g,w,v,i,o),B=s?f*A:f;return"channelsFirst"===o?d=[l,B,C,k]:"channelsLast"===o&&(d=[l,C,k,B]),{batchSize:l,dataFormat:o,inHeight:c,inWidth:u,inChannels:A,outHeight:C,outWidth:k,outChannels:B,padInfo:x,strideHeight:m,strideWidth:g,filterHeight:h,filterWidth:p,effectiveFilterHeight:w,effectiveFilterWidth:v,dilationHeight:y,dilationWidth:b,inShape:e,outShape:d,filterShape:t}}function wh(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",o=arguments.length>7?arguments[7]:void 0,[l,c,u,A,d]=[-1,-1,-1,-1,-1];if("channelsLast"===s)[l,c,u,A,d]=e;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));[l,d,c,u,A]=e}let h,[p,f,m,,g]=t,[y,b,w]=Ch(n),[v,x,C]=Ch(r),k=kh(p,v),B=kh(f,x),S=kh(m,C),{padInfo:I,outDepth:N,outHeight:F,outWidth:E}=function(e,t,n,r,a,i,s,o,l,c,u){let A,d,h,p;if("valid"===e&&(e=0),"number"==typeof e){A={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};let f=function(e,t,n,r,a,i){null==a&&(a=vh(e,t[0],r[0]));let s=[0,0,0,n];for(let o=0;o<3;o++)e[o]+2*a>=t[o]&&(s[o]=Bh((e[o]-t[o]+2*a)/r[o]+1,i));return s}([t,n,r,1],[o,l,c],1,[a,i,s],e,u);d=f[0],h=f[1],p=f[2]}else{if("same"!==e)throw Error("Unknown padding parameter: ".concat(e));{d=Math.ceil(t/a),h=Math.ceil(n/i),p=Math.ceil(r/s);let e=(d-1)*a+o-t,u=(h-1)*i+l-n,f=(p-1)*s+c-r,m=Math.floor(e/2),g=e-m,y=Math.floor(u/2),b=u-y,w=Math.floor(f/2);A={top:y,bottom:b,left:w,right:f-w,front:m,back:g,type:"SAME"}}}return{padInfo:A,outDepth:d,outHeight:h,outWidth:p}}(a,c,u,A,y,b,w,k,B,S,o),_=i?g*d:g;return"channelsFirst"===s?h=[l,_,N,F,E]:"channelsLast"===s&&(h=[l,N,F,E,_]),{batchSize:l,dataFormat:s,inDepth:c,inHeight:u,inWidth:A,inChannels:d,outDepth:N,outHeight:F,outWidth:E,outChannels:_,padInfo:I,strideDepth:y,strideHeight:b,strideWidth:w,filterDepth:p,filterHeight:f,filterWidth:m,effectiveFilterDepth:k,effectiveFilterHeight:B,effectiveFilterWidth:S,dilationDepth:v,dilationHeight:x,dilationWidth:C,inShape:e,outShape:h,filterShape:t}}function vh(e,t,n){let r=kh(t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1);return Math.floor((e[0]*(n-1)-n+r)/2)}function xh(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function Ch(e){return"number"==typeof e?[e,e,e]:e}function kh(e,t){return t<=1?e:e+(e-1)*(t-1)}function Bh(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function Sh(e){let[t,n,r]=xh(e);return 1===t&&1===n&&1===r}function Ih(e,t){return Sh(e)||Sh(t)}function Nh(e){return xh(e).every(e=>e>0)}function Fh(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function Eh(e,t,n){if(null!=n){if("string"==typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using dimRoundingMode ").concat(n," but got pad ").concat(t,"."));if("number"==typeof t)Di(ji(t),()=>"Error in ".concat(e,": pad must be an integer when using dimRoundingMode ").concat(n," but got pad ").concat(t,"."));else{if("object"!=typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach(t=>{t.forEach(t=>{Di(ji(t),()=>"Error in ".concat(e,": pad must be an integer when using dimRoundingMode ").concat(n," but got pad ").concat(t,"."))})})}}}var _h=BA({reshape_:function(e,t){let n={x:xA(e,"x","reshape","string_or_numeric")},r={shape:t};return AA.runKernel(Gl,n,r)}});var Th=BA({avgPool_:function(e,t,n,r,a){let i=xA(e,"x","avgPool","float32");Di(Ih(n,1),()=>"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(1,"'"));let s=i,o=!1;3===i.rank&&(o=!0,s=_h(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Di(4===s.rank,()=>"Error in avgPool: x must be rank 4 but got rank ".concat(s.rank,".")),Eh("avgPool",r,a);let l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},u=AA.runKernel(Hs,l,c);return u=Jd(u,i.dtype),o?_h(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});var Lh=BA({avgPool3d_:function(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",s=xA(e,"x","avgPool3d","float32"),o=s,l=!1;4===s.rank&&(l=!0,o=_h(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Di(5===o.rank,()=>"Error in avgPool3d: x must be rank 5 but got rank ".concat(o.rank,".")),Di("NDHWC"===i,()=>"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ".concat(i)),Di("number"==typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>"Error in avgPool3d: Stride must be > 0, but got '".concat(n,"'")),Eh("avgPool3d",r,a);let c={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},A=AA.runKernel(Ws,c,u);return A=Jd(A,o.dtype),l?_h(A,[A.shape[1],A.shape[2],A.shape[3],A.shape[4]]):A}});var Dh=BA({concat_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Di(e.length>=1,()=>"Pass at least one tensor to concat");let n=CA(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach(e=>{if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))}),1===n.length)return Yd(n[0]);let r=n,a={axis:t};return AA.runKernel(ro,r,a)}});var Rh=BA({matMul_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=xA(e,"a","matMul"),i=xA(t,"b","matMul");[a,i]=nA(a,i);let s={a:a,b:i},o={transposeA:n,transposeB:r};return AA.runKernel(Gs,s,o)}});var Uh=BA({sigmoid_:function(e){let t={x:xA(e,"x","sigmoid","float32")};return AA.runKernel(uc,t)}});var Oh=BA({slice_:function(e,t,n){let r=xA(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");let a={x:r},i={begin:t,size:n};return AA.runKernel(sc,a,i)}});var Mh=BA({tanh_:function(e){let t={x:xA(e,"x","tanh","float32")};return AA.runKernel(_c,t)}});var Ph=BA({basicLSTMCell_:function(e,t,n,r,a,i){let s=xA(e,"forgetBias","basicLSTMCell"),o=xA(t,"lstmKernel","basicLSTMCell"),l=xA(n,"lstmBias","basicLSTMCell"),c=xA(r,"data","basicLSTMCell"),u=xA(a,"c","basicLSTMCell"),A=xA(i,"h","basicLSTMCell"),d=Dh([c,A],1),h=Rh(d,o),p=$d(h,l),f=p.shape[0],m=p.shape[1]/4,g=[f,m],y=Oh(p,[0,0],g),b=Oh(p,[0,m],g),w=Oh(p,[0,2*m],g),v=Oh(p,[0,3*m],g),x=$d(nh(Uh(y),Mh(b)),nh(u,Uh($d(s,w))));return[x,nh(Mh(x),Uh(v))]}});var Qh=BA({batchToSpaceND_:function(e,t,n){let r=xA(e,"x","batchToSpaceND"),a=t.reduce((e,t)=>e*t);Di(r.rank>=1+t.length,()=>"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)),Di(n.length===t.length,()=>"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)),Di(r.shape[0]%a===0,()=>"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of the elements of blockShape ").concat(t.join(" * ")," === ").concat(a));let i={x:r},s={blockShape:t,crops:n};return AA.runKernel(Ks,i,s)}});function jh(e){let t;return t=0===e.rank||1===e.rank?_h(e,[1,1,1,e.size]):2===e.rank?_h(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?_h(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}var Hh=BA({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);let s,o,l=xA(e,"x","batchNorm"),c=xA(t,"mean","batchNorm"),u=xA(n,"variance","batchNorm");null!=a&&(s=xA(a,"scale","batchNorm")),null!=r&&(o=xA(r,"offset","batchNorm")),Di(c.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Di(null==o||c.rank===o.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Di(null==s||c.rank===s.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let A={x:jh(l),scale:s,offset:o,mean:c,variance:u},d={varianceEpsilon:i},h=AA.runKernel(Qo,A,d);return _h(h,l.shape)}});var zh=BA({batchNorm2d_:function(e,t,n,r,a,i){let s,o,l=xA(e,"x","batchNorm"),c=xA(t,"mean","batchNorm"),u=xA(n,"variance","batchNorm");return null!=a&&(s=xA(a,"scale","batchNorm")),null!=r&&(o=xA(r,"offset","batchNorm")),Di(2===l.rank,()=>"Error in batchNorm2D: x must be rank 2 but got rank ".concat(l.rank,".")),Di(2===c.rank||1===c.rank,()=>"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ".concat(c.rank,".")),Di(2===u.rank||1===u.rank,()=>"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ".concat(u.rank,".")),null!=s&&Di(2===s.rank||1===s.rank,()=>"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ".concat(s.rank,".")),null!=o&&Di(2===o.rank||1===o.rank,()=>"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ".concat(o.rank,".")),Hh(l,c,u,o,s,i)}});var Wh=BA({batchNorm3d_:function(e,t,n,r,a,i){let s,o,l=xA(e,"x","batchNorm"),c=xA(t,"mean","batchNorm"),u=xA(n,"variance","batchNorm");return null!=a&&(s=xA(a,"scale","batchNorm")),null!=r&&(o=xA(r,"offset","batchNorm")),Di(3===l.rank,()=>"Error in batchNorm3D: x must be rank 3 but got rank ".concat(l.rank,".")),Di(3===c.rank||1===c.rank,()=>"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ".concat(c.rank,".")),Di(3===u.rank||1===u.rank,()=>"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ".concat(u.rank,".")),null!=s&&Di(3===s.rank||1===s.rank,()=>"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ".concat(s.rank,".")),null!=o&&Di(3===o.rank||1===o.rank,()=>"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ".concat(o.rank,".")),Hh(l,c,u,o,s,i)}});var Vh=BA({batchNorm4d_:function(e,t,n,r,a,i){let s,o,l=xA(e,"x","batchNorm"),c=xA(t,"mean","batchNorm"),u=xA(n,"variance","batchNorm");return null!=a&&(s=xA(a,"scale","batchNorm")),null!=r&&(o=xA(r,"offset","batchNorm")),Di(4===l.rank,()=>"Error in batchNorm4D: x must be rank 4 but got rank ".concat(l.rank,".")),Di(4===c.rank||1===c.rank,()=>"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ".concat(c.rank,".")),Di(4===u.rank||1===u.rank,()=>"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ".concat(u.rank,".")),null!=s&&Di(4===s.rank||1===s.rank,()=>"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ".concat(s.rank,".")),null!=o&&Di(4===o.rank||1===o.rank,()=>"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ".concat(o.rank,".")),Hh(l,c,u,o,s,i)}});var Gh=BA({bincount_:function(e,t,n){let r=xA(e,"x","bincount"),a=xA(t,"weights","bincount");Di("int32"===r.dtype,()=>"Error in bincount: input dtype must be int32, but got ".concat(r.dtype)),Di(n>=0,()=>"size must be non-negative, but got ".concat(n,".")),Di(a.size===r.size||0===a.size,()=>"Error in bincount: weights must have the same size as input or0-length, but got input shape: ".concat(r.shape,", weights shape: ").concat(a.shape,"."));let i={x:r,weights:a},s={size:n};return AA.runKernel(qs,i,s)}});var Kh=BA({bitwiseAnd_:function(e,t){let n=xA(e,"x","bitwiseAnd"),r=xA(t,"y","bitwiseAnd");if(!Qi(n.shape,r.shape))throw new Error("BitwiseAnd: Tensors must have the same shape. x: ".concat(n.shape,", y: ").concat(r.shape));if("int32"!==n.dtype||"int32"!==r.dtype)throw new Error("BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ".concat(n.dtype," and type of y: ").concat(r.dtype));let a={a:n,b:r};return AA.runKernel(Xs,a)}});var qh=BA({broadcastArgs_:function(e,t){let n=xA(e,"s0","broadcastArgs","int32"),r=xA(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). Has rank ".concat(r.rank));let a={s0:n,s1:r};return AA.runKernel(Ys,a)}});var Xh=BA({broadcastTo_:function(e,t){let n=xA(e,"broadcastTo","x"),r=n.shape;if(ms(t),t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){let e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=_h(n,e)}let a=n.shape,i=Array.from(t);for(let l=t.length-1;l>=0;l--)if(a[l]===t[l])i[l]=1;else if(1!==n.shape[l])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));if(0===i.map((e,t)=>e>1?t:-1).filter(e=>e>=0).length)return Yd(n);let s={x:n},o={reps:i};return AA.runKernel(Tc,s,o)}});var Jh=BA({ceil_:function(e){let t={x:xA(e,"x","ceil","float32")};return AA.runKernel($s,t)}});function Yh(e,t,n){ms(e);let r={shape:e,value:t,dtype:n=n||ss(t)};return AA.runKernel(Uo,{},r)}var Zh=BA({clipByValue_:function(e,t,n){let r=xA(e,"x","clipByValue");if(Di(t<=n,()=>"Error in clip: min (".concat(t,") must be less than or equal to max (").concat(n,").")),t===n)return Yh(r.shape,t,r.dtype);let a={x:r},i={clipValueMin:t,clipValueMax:n};return AA.runKernel(eo,a,i)}});var $h=BA({concat1d_:function(e){return Dh(e,0)}});var ep=BA({concat2d_:function(e,t){return Dh(e,t)}});var tp=BA({concat3d_:function(e,t){return Dh(e,t)}});var np=BA({concat4d_:function(e,t){return Dh(e,t)}});var rp=BA({conv2d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6?arguments[6]:void 0,o=xA(e,"x","conv2d","float32"),l=xA(t,"filter","conv2d","float32"),c=o,u=!1;3===o.rank&&(u=!0,c=_h(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Di(4===c.rank,()=>"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")),Di(4===l.rank,()=>"Error in conv2d: filter must be rank 4, but got rank ".concat(l.rank,".")),Eh("conv2d",r,s);let A="NHWC"===a?c.shape[3]:c.shape[1];Di(A===l.shape[2],()=>"Error in conv2d: depth of input (".concat(A,") must match input depth for filter ").concat(l.shape[2],".")),Di(Ih(n,i),()=>"Error in conv2D: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(i,"'")),Di(Nh(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),Di(Nh(n),()=>"Error in conv2D: Strides should be larger than 0.");let d={x:c,filter:l},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s},p=AA.runKernel(ao,d,h);return u?_h(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var ap=BA({conv1d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6?arguments[6]:void 0,o=xA(e,"x","conv1d"),l=xA(t,"filter","conv1d"),c=o,u=!1;2===o.rank&&(u=!0,c=_h(o,[1,o.shape[0],o.shape[1]])),Di(3===c.rank,()=>"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")),Di(3===l.rank,()=>"Error in conv1d: filter must be rank 3, but got rank ".concat(l.rank,".")),Eh("conv1d",r,s),Di(c.shape[2]===l.shape[1],()=>"Error in conv1d: depth of input (".concat(c.shape[2],") must match input depth for filter ").concat(l.shape[1],".")),Di(Ih(n,i),()=>"Error in conv1D: Either stride or dilation must be 1. Got stride ".concat(n," and dilation '").concat(i,"'")),Di(Nh(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),Di(Nh(n),()=>"Error in conv1D: Stride should be larger than 0."),Di("NWC"===a,()=>"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported."));let A=_h(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=_h(c,[c.shape[0],1,c.shape[1],c.shape[2]]),h=rp(d,A,[1,n],r,"NHWC",[1,i],s);return _h(h,u?[h.shape[2],h.shape[3]]:[h.shape[0],h.shape[2],h.shape[3]])}});var ip=BA({conv2DBackpropInput_:function(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",s=arguments.length>6?arguments[6]:void 0;Di(e.length===t.rank,()=>"Length of inShape (".concat(e.length,") and rank of dy (").concat(t.rank,") must match"));let o=e,l=t,c=!1;3===t.rank&&(c=!0,l=_h(t,[1,t.shape[0],t.shape[1],t.shape[2]]),o=[1,e[0],e[1],e[2]]),Di(4===o.length,()=>"Error in conv2dDerInput: inShape must be length 4, but got length ".concat(o.length,".")),Di(4===l.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got rank ".concat(l.rank)),Di(4===n.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got rank ".concat(n.rank));let u="NHWC"===i?o[3]:o[1],A="NHWC"===i?l.shape[3]:l.shape[1];Di(u===n.shape[2],()=>"Error in conv2dDerInput: depth of input (".concat(u,") must match input depth for filter ").concat(n.shape[2],".")),Di(A===n.shape[3],()=>"Error in conv2dDerInput: depth of output (".concat(A,") must match output depth for filter ").concat(n.shape[3],".")),Eh("conv2dDerInput",a,s);let d={dy:l,filter:n},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:s,inputShape:o},p=AA.runKernel(so,d,h);return c?_h(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var sp=BA({conv2dTranspose_:function(e,t,n,r,a,i){let s=xA(e,"x","conv2dTranspose"),o=xA(t,"filter","conv2dTranspose");return ip(n,s,o,r,a,"NHWC",i)}});var op=BA({conv3d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],s=xA(e,"x","conv3d"),o=xA(t,"filter","conv3d"),l=s,c=!1;4===s.rank&&(c=!0,l=_h(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Di(5===l.rank,()=>"Error in conv3d: input must be rank 5, but got rank ".concat(l.rank,".")),Di(5===o.rank,()=>"Error in conv3d: filter must be rank 5, but got rank ".concat(o.rank,".")),Di(l.shape[4]===o.shape[3],()=>"Error in conv3d: depth of input (".concat(l.shape[4],") must match input depth for filter ").concat(o.shape[3],".")),Di(Ih(n,i),()=>"Error in conv3D: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(i,"'")),Di("NDHWC"===a,()=>"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")),Di(Nh(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),Di(Nh(n),()=>"Error in conv3D: Strides should be larger than 0.");let u={x:l,filter:o},A={strides:n,pad:r,dataFormat:a,dilations:i},d=AA.runKernel(oo,u,A);return c?_h(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var lp=BA({conv3DBackpropInput_:function(e,t,n,r,a){Di(e.length===t.rank,()=>"Length of inShape (".concat(e.length,") and rank of dy (").concat(t.rank,") must match"));let i=e,s=t,o=!1;4===t.rank&&(o=!0,s=_h(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);let l=i[4],c=s.shape[4];Di(5===i.length,()=>"Error in conv3dDerInput: inShape must be length 5, but got length ".concat(i.length,".")),Di(5===s.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got rank ".concat(s.rank)),Di(5===n.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got rank ".concat(n.rank)),Di(l===n.shape[3],()=>"Error in conv3dDerInput: depth of input (".concat(l,") must match input depth for filter ").concat(n.shape[3],".")),Di(c===n.shape[4],()=>"Error in conv3dDerInput: depth of output (".concat(c,") must match output depth for filter ").concat(n.shape[4],"."));let u={dy:s,filter:n},A={pad:a,strides:r,inputShape:i},d=AA.runKernel(co,u,A);return o?_h(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var cp=BA({conv3dTranspose_:function(e,t,n,r,a){let i=xA(e,"x","conv3dTranspose"),s=xA(t,"filter","conv3dTranspose");return lp(n,i,s,r,a)}});var up=BA({cos_:function(e){let t={x:xA(e,"x","cos","float32")};return AA.runKernel(uo,t)}});var Ap=BA({cosh_:function(e){let t={x:xA(e,"x","cosh","float32")};return AA.runKernel(Ao,t)}});var dp=BA({cumprod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:xA(e,"x","cumprod")},i={axis:t,exclusive:n,reverse:r};return AA.runKernel(ho,a,i)}});var hp=BA({cumsum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:xA(e,"x","cumsum")},i={axis:t,exclusive:n,reverse:r};return AA.runKernel(po,a,i)}});var pp=BA({denseBincount_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=xA(e,"x","denseBincount"),i=xA(t,"weights","denseBincount");Di("int32"===a.dtype,()=>"Error in denseBincount: input dtype must be int32, but got ".concat(a.dtype)),Di(a.rank<=2,()=>"Error in denseBincount: input must be at most rank 2, but got rank ".concat(a.rank,".")),Di(n>=0,()=>"size must be non-negative, but got ".concat(n,".")),Di(i.size===a.size||0===i.size,()=>"Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ".concat(a.shape,", weights shape: ").concat(i.shape,"."));let s={x:a,weights:i},o={size:n,binaryOutput:r};return AA.runKernel(mo,s,o)}});var fp=BA({depthToSpace_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=xA(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],s="NHWC"===n?r.shape[3]:r.shape[1];Di(t>1,()=>"blockSize should be > 1 for depthToSpace, but was: ".concat(t)),Di(a*t>=0,()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)),Di(i*t>=0,()=>"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)),Di(s%(t*t)===0,()=>"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(s," for depthToSpace with input shape ").concat(r.shape));let o={x:r},l={blockSize:t,dataFormat:n};return AA.runKernel(go,o,l)}});var mp=BA({depthwiseConv2d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6?arguments[6]:void 0,o=xA(e,"x","depthwiseConv2d","float32"),l=xA(t,"filter","depthwiseConv2d","float32"),c=o,u=!1;3===o.rank&&(u=!0,c=_h(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Di(4===c.rank,()=>"Error in depthwiseConv2d: input must be rank 4, but got rank ".concat(c.rank,".")),Di(4===l.rank,()=>"Error in depthwiseConv2d: filter must be rank 4, but got rank ".concat(l.rank,"."));let A="NHWC"===a?c.shape[3]:c.shape[1];Di(A===l.shape[2],()=>"Error in depthwiseConv2d: number of input channels (".concat(A,") must match the inChannels dimension in filter ").concat(l.shape[2],".")),Eh("depthwiseConv2d",r,s);let d={x:c,filter:l},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:s},p=AA.runKernel(yo,d,h);return u?_h(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var gp=BA({diag_:function(e){let t={x:xA(e,"x","diag")};return AA.runKernel(vo,t)}});var yp=BA({dilation2d_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",s=xA(e,"x","dilation2d"),o=xA(t,"filter","dilation2d");Di(3===s.rank||4===s.rank,()=>"Error in dilation2d: input must be rank 3 or 4, but got rank ".concat(s.rank,".")),Di(3===o.rank,()=>"Error in dilation2d: filter must be rank 3, but got rank ".concat(o.rank,".")),Di("NHWC"===i,()=>"Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ".concat(i));let l=s,c=!1;3===s.rank&&(l=_h(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),Di(l.shape[3]===o.shape[2],()=>"Error in dilation2d:  input and filter must have the same depth: ".concat(l.shape[3]," vs ").concat(o.shape[2]));let u={x:l,filter:o},A={strides:n,pad:r,dilations:a},d=AA.runKernel(xo,u,A);return c?_h(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),bp={};function wp(e,t){let n=e.length,r=[];for(let a=0;a<n;a++){let i=n-1-a,s=e[i]||1;(t[t.length-1-a]||1)>1&&1===s&&r.unshift(i)}return r}function vp(e,t){let n=[];for(let r=0;r<t.length;r++){let a=e[e.length-r-1],i=t.length-r-1,s=t[i];(null==a||1===a&&s>1)&&n.unshift(i)}return n}function xp(e,t){let n=Math.max(e.length,t.length),r=new Array(n);for(let a=0;a<n;a++){let i=e[e.length-a-1];null==i&&(i=1);let s=t[t.length-a-1];if(null==s&&(s=1),1===i)r[n-a-1]=s;else if(1===s)r[n-a-1]=i;else{if(i!==s){let n="Operands could not be broadcast together with shapes ".concat(e," and ").concat(t,".");throw Error(n)}r[n-a-1]=i}}return r}ei(bp,{assertAndGetBroadcastShape:()=>xp,getBroadcastDims:()=>wp,getReductionAxes:()=>vp});var Cp=BA({equal_:function(e,t){let n=xA(e,"a","equal","string_or_numeric"),r=xA(t,"b","equal","string_or_numeric");[n,r]=nA(n,r),xp(n.shape,r.shape);let a={a:n,b:r};return AA.runKernel(_o,a)}});var kp=BA({where_:function(e,t,n){let r=xA(t,"a","where"),a=xA(n,"b","where"),i=xA(e,"condition","where","bool"),s=xp(xp(i.shape,r.shape),a.shape),o={condition:Xh(i,s),t:Xh(r,s),e:Xh(a,s)};return AA.runKernel(ac,o)}});var Bp=BA({zerosLike_:function(e){let t={x:xA(e,"x","zerosLike")};return AA.runKernel(Qc,t)}});var Sp=BA({divNoNan_:function(e,t){let n=xA(e,"a","div"),r=xA(t,"b","div");[n,r]=nA(n,r);let a=th(n,r),i=Bp(a),s=Cp(r,i);return kp(s,i,a)}});var Ip=BA({dot_:function(e,t){let n=xA(e,"t1","dot"),r=xA(t,"t2","dot");Di((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),()=>"Error in dot: inputs must all be rank 1 or 2, but got ranks ".concat(n.rank," and ").concat(r.rank,"."));let a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(Di(a===i,()=>"Error in dot: inner dimensions of inputs must match, but got ".concat(a," and ").concat(i,".")),1===n.rank&&1===r.rank){let e=_h(n,[1,-1]),t=_h(r,[-1,1]),a=Rh(e,t);return _h(a,[])}if(1===n.rank&&2===r.rank){let e=_h(n,[1,-1]),t=_h(r,[r.shape[0],r.shape[1]]),a=Rh(e,t);return _h(a,[a.size])}if(2===n.rank&&1===r.rank){let e=_h(r,[-1,1]),t=Rh(n,e);return _h(t,[t.size])}{let e=_h(r,[r.shape[0],r.shape[1]]);return Rh(n,e)}}});var Np=BA({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let a=n.map((e,t)=>xA(e,"tensors".concat(t),"einsum")),i={equation:e};return AA.runKernel(Io,a,i)}});var Fp=BA({elu_:function(e){let t={x:xA(e,"x","elu","float32")};return AA.runKernel(No,t)}});var Ep=BA({ensureShape_:function(e,t){let n=xA(e,"x","ensureShape","string_or_numeric");if(!Pi(n.shape,t))throw new Error("EnsureShape: Shape of tensor ".concat(n.shape," is not compatible with expected shape ").concat(t));return e}});var _p=BA({erf_:function(e){let t=xA(e,"x","erf");Di("int32"===t.dtype||"float32"===t.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=Jd(t,"float32"));let n={x:t};return AA.runKernel(Eo,n)}});function Tp(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Lp(e,t,n){let r=e.length+t.length,a=[],i=0,s=0;for(let o=0;o<r;o++)-1===n.indexOf(o)?a.push(e[i++]):a.push(t[s++]);return a}function Dp(e,t){let n=[],r=e.length;for(let i=0;i<r;i++)-1===t.indexOf(i)&&n.push(e[i]);let a=t.map(t=>e[t]);return[n,a]}function Rp(e,t){return Lp(e,t.map(e=>1),t)}function Up(e,t,n){Di(Tp(t,n),()=>"".concat(e," supports only inner-most axes for now. Got axes ").concat(t," and rank-").concat(n," input."))}function Op(e,t){if(Tp(e,t))return null;let n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(e=>n.push(e)),n}function Mp(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function Pp(e,t){let n=[];for(let r=t-e;r<t;++r)n.push(r);return n}var Qp=BA({max_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:xA(e,"x","max")},a={reductionIndices:t,keepDims:n};return AA.runKernel(dl,r,a)}});var jp=BA({min_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:xA(e,"x","min")},a={axis:t,keepDims:n};return AA.runKernel(wl,r,a)}});var Hp=BA({pow_:function(e,t){let n=xA(e,"base","pow"),r=xA(t,"exp","pow");[n,r]=nA(n,r);let a={a:n,b:r};return AA.runKernel(Ul,a)}});function zp(e,t){if((Nu(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Nu(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return IA(e,[],[],t)}var Wp=BA({sqrt_:function(e){let t={x:xA(e,"x","sqrt","float32")};return AA.runKernel(dc,t)}});var Vp=BA({square_:function(e){let t=xA(e,"x","square");return AA.runKernel("Square",{x:t},{})}});var Gp=BA({sum_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=xA(e,"x","sum");"bool"===r.dtype&&(r=Jd(r,"int32"));let a={x:r},i={axis:t,keepDims:n};return AA.runKernel(hc,a,i)}});function Kp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return rh(e);if(1!==e.rank&&null===n)return Kp(_h(e,[-1]),t,n);if(1===e.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Gp(rh(e),n);if(t===1/0)return Qp(rh(e),n);if(t===-1/0)return jp(rh(e),n);if("euclidean"===t||2===t)return Wp(Gp(Hp(rh(e),zp(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return Qp(Gp(rh(e),n[0]),n[1]-1);if(t===1/0)return Qp(Gp(rh(e),n[1]),n[0]);if(t===-1/0)return jp(Gp(rh(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Wp(Gp(Vp(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var qp=BA({norm_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Kp(e=xA(e,"x","norm"),t,n),i=a.shape;if(r){let t=qi(n,e.shape);i=Rp(a.shape,t)}return _h(a,i)}});var Xp=BA({euclideanNorm_:function(e){return qp(e,"euclidean",arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}});var Jp=BA({exp_:function(e){let t={x:xA(e,"x","exp")};return AA.runKernel(To,t)}});var Yp=BA({expandDims_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=xA(e,"x","expandDims","string_or_numeric");Di(t<=n.rank,()=>"Axis must be <= rank of the tensor");let r={input:n},a={dim:t};return AA.runKernel(Lo,r,a)}});var Zp=BA({expm1_:function(e){let t={x:xA(e,"x","expm1")};return AA.runKernel(Do,t)}});var $p=BA({tile_:function(e,t){let n=xA(e,"x","tile","string_or_numeric");Di(n.rank===t.length,()=>"Error in transpose: rank of input ".concat(n.rank," must match length of reps ").concat(t,"."));let r={x:n},a={reps:t};return AA.runKernel(Tc,r,a)}});var ef=BA({eye_:function(e,t,n){null==t&&(t=e);let r=Xd([e,t],arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32"),a=e<=t?e:t;for(let s=0;s<a;++s)r.set(1,s,s);let i=_h(r.toTensor(),[e,t]);if(null==n)return i;if(1===n.length)return $p(Yp(i,0),[n[0],1,1]);if(2===n.length)return $p(Yp(Yp(i,0),0),[n[0],n[1],1,1]);if(3===n.length)return $p(Yp(Yp(Yp(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received ".concat(n.length,"D."))}});var tf=BA({floor_:function(e){let t={x:xA(e,"x","floor","float32")};return AA.runKernel(Mo,t)}});var nf=BA({gather_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a={x:xA(e,"x","gather"),indices:xA(t,"indices","gather","int32")},i={axis:n,batchDims:r};return AA.runKernel(jo,a,i)}});var rf=BA({greater_:function(e,t){let n=xA(e,"a","greater","string_or_numeric"),r=xA(t,"b","greater","string_or_numeric");[n,r]=nA(n,r),xp(n.shape,r.shape);let a={a:n,b:r};return AA.runKernel(zo,a)}});var af=BA({greaterEqual_:function(e,t){let n=xA(e,"a","greaterEqual","string_or_numeric"),r=xA(t,"b","greaterEqual","string_or_numeric");[n,r]=nA(n,r),xp(n.shape,r.shape);let a={a:n,b:r};return AA.runKernel(Wo,a)}});var sf=BA({imag_:function(e){let t={input:xA(e,"input","imag")};return AA.runKernel(Ko,t)}});var of=BA({isFinite_:function(e){let t={x:xA(e,"x","isFinite")};return AA.runKernel(qo,t)}});var lf=BA({isInf_:function(e){let t={x:xA(e,"x","isInf")};return AA.runKernel(Xo,t)}});var cf=BA({isNaN_:function(e){let t={x:xA(e,"x","isNaN")};return AA.runKernel(Jo,t)}});var uf=BA({leakyRelu_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n={x:xA(e,"x","leakyRelu")},r={alpha:t};return AA.runKernel(Yo,n,r)}});var Af=BA({less_:function(e,t){let n=xA(e,"a","less","string_or_numeric"),r=xA(t,"b","less","string_or_numeric");[n,r]=nA(n,r),xp(n.shape,r.shape);let a={a:n,b:r};return AA.runKernel(Zo,a)}});var df=BA({lessEqual_:function(e,t){let n=xA(e,"a","lessEqual","string_or_numeric"),r=xA(t,"b","lessEqual","string_or_numeric");[n,r]=nA(n,r),xp(n.shape,r.shape);let a={a:n,b:r};return AA.runKernel($o,a)}});function hf(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");let r={start:e,stop:t,num:n};return AA.runKernel(el,{},r)}var pf=BA({localResponseNormalization_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=xA(e,"x","localResponseNormalization");Di(4===i.rank||3===i.rank,()=>"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")),Di(ji(t),()=>"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ".concat(t,"."));let s=i,o=!1;3===i.rank&&(o=!0,s=_h(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let l={x:s},c={depthRadius:t,bias:n,alpha:r,beta:a},u=AA.runKernel(cl,l,c);return o?_h(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});var ff=BA({log_:function(e){let t={x:xA(e,"x","log","float32")};return AA.runKernel(tl,t)}});var mf=BA({log1p_:function(e){let t={x:xA(e,"x","log1p")};return AA.runKernel(nl,t)}});function gf(e){return Di(os(e),()=>"The f passed in grad(f) must be a function"),(t,n)=>{let r=xA(t,"x","tf.grad","string_or_numeric"),a=null!=n?xA(n,"dy","tf.grad"):null;return AA.tidy(()=>{let{value:t,grads:n}=AA.gradients(()=>e(r),[r],a);return null!=a&&Ri(t.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Cf(n),n[0]})}}function yf(e){return Di(os(e),()=>"The f passed in grads(f) must be a function"),(t,n)=>{Di(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let r=CA(t,"args","tf.grads","string_or_numeric"),a=null!=n?xA(n,"dy","tf.grads"):null;return AA.tidy(()=>{let{value:t,grads:n}=AA.gradients(()=>e(...r),r,a);return null!=a&&Ri(t.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Cf(n),n})}}function bf(e){return Di(os(e),()=>"The f passed in valueAndGrad(f) must be a function"),(t,n)=>{Di(t instanceof ju,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),Di(null==n||n instanceof ju,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:r,value:a}=AA.gradients(()=>e(t),[t],n);return Cf(r),{grad:r[0],value:a}}}function wf(e){return Di(os(e),()=>"The f passed in valueAndGrads(f) must be a function"),(t,n)=>{Di(Array.isArray(t)&&t.every(e=>e instanceof ju),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),Di(null==n||n instanceof ju,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let r=AA.gradients(()=>e(...t),t,n);return null!=n&&Ri(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Cf(r.grads),r}}function vf(e,t){Di(os(e),()=>"The f passed in variableGrads(f) must be a function"),Di(null==t||Array.isArray(t)&&t.every(e=>e instanceof zu),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=null!=t;if(!n){t=[];for(let e in AA.registeredVariables)t.push(AA.registeredVariables[e])}let r=n?t.filter(e=>!e.trainable):null,a=t.length;t=t.filter(e=>e.trainable),Di(t.length>0,()=>"variableGrads() expects at least one of the input variables to be trainable, but none of the ".concat(a," variables is trainable."));let{value:i,grads:s}=AA.gradients(e,t,null,!0);Di(s.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),Di(0===i.rank,()=>"The f passed in variableGrads(f) must return a scalar, but it returned a rank-".concat(i.rank," tensor"));let o={};return t.forEach((e,t)=>{null!=s[t]&&(o[e.name]=s[t])}),null!=r&&r.forEach(e=>o[e.name]=null),{value:i,grads:o}}function xf(e){return AA.customGrad(e)}function Cf(e){if(e.filter(e=>null==e).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}var kf=BA({neg_:function(e){let t={x:xA(e,"x","neg")};return AA.runKernel(Sl,t)}});var Bf=BA({softplus_:function(e){let t={x:xA(e,"x","softplus")};return AA.runKernel(Ac,t)}});var Sf=BA({logSigmoid_:function(e){let t=xA(e,"x","logSigmoid");return xf(e=>({value:kf(Bf(kf(e))),gradFunc:t=>nh(t,Uh(kf(e)))}))(t)}});var If=BA({sub_:function(e,t){let n=xA(e,"a","sub"),r=xA(t,"b","sub");[n,r]=nA(n,r);let a={a:n,b:r};return AA.runKernel(Fc,a)}});var Nf=BA({logSoftmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=xA(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(n.rank," and axis was ").concat(t));return xf((e,n)=>{let r=Qp(e,t,!0),a=If(e,r),i=If(Jd(a,"float32"),ff(Gp(Jp(a),t,!0)));return n([i]),{value:i,gradFunc:(e,n)=>{let[r]=n,a=Jp(r);return If(e,nh(Gp(e,t,!0),a))}}})(n)}});var Ff=BA({logSumExp_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=xA(e,"x","logSumExp"),a=qi(t,r.shape),i=Qp(r,a,!0),s=If(r,i),o=Jp(s),l=Gp(o,a),c=ff(l),u=$d(_h(i,c.shape),c);if(n){let e=Rp(u.shape,a);return _h(u,e)}return u}});var Ef=BA({logicalAnd_:function(e,t){let n=xA(e,"a","logicalAnd","bool"),r=xA(t,"b","logicalAnd","bool");xp(n.shape,r.shape);let a={a:n,b:r};return AA.runKernel(rl,a)}});var _f=BA({logicalNot_:function(e){let t={x:xA(e,"x","logicalNot","bool")};return AA.runKernel(al,t)}});var Tf=BA({logicalOr_:function(e,t){let n=xA(e,"a","logicalOr","bool"),r=xA(t,"b","logicalOr","bool");xp(n.shape,r.shape);let a={a:n,b:r};return AA.runKernel(il,a)}});var Lf=BA({logicalXor_:function(e,t){let n=xA(e,"a","logicalXor","bool"),r=xA(t,"b","logicalXor","bool");return xp(n.shape,r.shape),Ef(Tf(e,t),_f(Ef(e,t)))}}),Df=2147483648;var Rf=BA({searchSorted_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",r=xA(e,"sortedSequence","searchSorted"),a=xA(t,"values","searchSorted"),i=r.shape[r.shape.length-1],s=a.shape[a.shape.length-1],o=_h(r,[-1,i]),l=_h(a,[-1,s]);if(o.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(o.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(Oi(l.shape)>=Df)throw new Error("values tensor size must less than ".concat(Df));if(o.shape[1]>=Df)throw new Error("trailing dim_size must less than ".concat(Df," for int32 output type, was ").concat(o.shape[1]));let c={sortedSequence:o,values:l},u={side:n};return AA.runKernel(rc,c,u)}});function Uf(e,t){return Rf(e,t,"left")}var Of=BA({maxPool_:function(e,t,n,r,a){let i=xA(e,"x","maxPool"),s=i,o=!1;3===i.rank&&(o=!0,s=_h(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Di(4===s.rank,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(s.rank,".")),Di(Ih(n,1),()=>"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(1,"'")),Eh("maxPool",r,a);let l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},u=AA.runKernel(pl,l,c);return o?_h(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});var Mf=BA({maxPool3d_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",s=xA(e,"x","maxPool3d"),o=s,l=!1;4===s.rank&&(l=!0,o=_h(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Di(5===o.rank,()=>"Error in maxPool3d: x must be rank 5 but got rank ".concat(o.rank,".")),Di("NDHWC"===i,()=>"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ".concat(i)),Eh("maxPool3d",r,a);let c={x:o},u={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},A=AA.runKernel(ml,c,u);return l?_h(A,[A.shape[1],A.shape[2],A.shape[3],A.shape[4]]):A}});var Pf=BA({maxPoolWithArgmax_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i={x:xA(e,"x","maxPoolWithArgmax")},s={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},o=AA.runKernel(yl,i,s);return{result:o[0],indexes:o[1]}}});var Qf=BA({maximum_:function(e,t){let n=xA(e,"a","maximum"),r=xA(t,"b","maximum");[n,r]=nA(n,r),"bool"===n.dtype&&(n=Jd(n,"int32"),r=Jd(r,"int32")),xp(n.shape,r.shape);let a={a:n,b:r};return AA.runKernel(hl,a)}});var jf=BA({mean_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:xA(e,"x","mean")},a={axis:t,keepDims:n};return AA.runKernel(bl,r,a)}});function Hf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(ms(e),"complex64"===t){let t=Hf(e,"float32"),n=Hf(e,"float32");return SA(t,n)}let n=ps(Oi(e),t);return AA.makeTensor(n,e,t)}function zf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if(ms(e),"complex64"===t){let t=zf(e,"float32"),n=Hf(e,"float32");return SA(t,n)}let n=hs(Oi(e),t);return AA.makeTensor(n,e,t)}function Wf(e,t){let{indexing:n="xy"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("xy"!==n&&"ij"!==n)throw new TypeError("".concat(n," is not a valid third argument to meshgrid"));if(void 0===e)return[];let r=xA(e,"x","meshgrid",e instanceof ju?e.dtype:"float32");if(void 0===t)return[r];let a=xA(t,"y","meshgrid",t instanceof ju?t.dtype:"float32"),i=Oi(r.shape),s=Oi(a.shape);return"xy"===n?(r=_h(r,[1,-1]),a=_h(a,[-1,1]),[Rh(zf([s,1],r.dtype),r),Rh(a,zf([1,i],a.dtype))]):(r=_h(r,[-1,1]),a=_h(a,[1,-1]),[Rh(r,zf([1,s],r.dtype)),Rh(zf([i,1],a.dtype),a)])}var Vf=BA({minimum_:function(e,t){let n=xA(e,"a","minimum"),r=xA(t,"b","minimum");[n,r]=nA(n,r),"bool"===n.dtype&&(n=Jd(n,"int32"),r=Jd(r,"int32")),xp(n.shape,r.shape);let a={a:n,b:r};return AA.runKernel(vl,a)}});var Gf=BA({mirrorPad_:function(e,t,n){Di("reflect"===n||"symmetric"===n,()=>"Invalid mode. Mode must be either reflect or symmetric. Got ".concat(n,"."));let r=xA(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Di(t.length===r.rank,()=>"Padding doesn't match input. Must be ".concat(r.rank,". Got ").concat(t.length,"."));let a="reflect"===n?1:0;for(let o=0;o<r.rank;o++)Di(2===t[o].length,()=>"Invalid number of paddings. Must be length of 2 each."),Di(t[o][0]>=0&&t[o][0]<=r.shape[o]-a&&t[o][1]>=0&&t[o][1]<=r.shape[o]-a,()=>"Padding in dimension ".concat(o," cannot be greater than or equal to ").concat(r.shape[o]-a," or less than 0 for input of shape ").concat(r.shape));let i={paddings:t,mode:n},s={x:r};return AA.runKernel(xl,s,i)}});var Kf=BA({mod_:function(e,t){let n=xA(e,"a","mod"),r=xA(t,"b","mod");[n,r]=nA(n,r);let a={a:n,b:r};return AA.runKernel(Cl,a)}});var qf=BA({moments_:function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=qi(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,(e=xA(e,"x","moments")).shape),r=jf(e,n,t),a=r.shape;t||(a=Rp(r.shape,n));let i=Vp(If(Jd(e,"float32"),_h(r,a)));return{mean:r,variance:jf(i,n,t)}}});var Xf=BA({multiRNNCell_:function(e,t,n,r){let a=xA(t,"data","multiRNNCell"),i=CA(n,"c","multiRNNCell"),s=CA(r,"h","multiRNNCell"),o=a,l=[];for(let A=0;A<e.length;A++){let t=e[A](o,i[A],s[A]);l.push(t[0]),l.push(t[1]),o=t[1]}let c=[],u=[];for(let A=0;A<l.length;A+=2)c.push(l[A]),u.push(l[A+1]);return[c,u]}});var Jf=BA({multinomial_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=xA(e,"logits","multinomial"),i=a.size,s=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got ".concat(i,"."));if(s>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(s));n=n||Math.random();let o={logits:1===s?_h(a,[1,-1]):a},l={numSamples:t,seed:n,normalized:r},c=AA.runKernel(kl,o,l);return 1===s?_h(c,[c.size]):c}});var Yf=BA({notEqual_:function(e,t){let n=xA(e,"a","notEqual","string_or_numeric"),r=xA(t,"b","notEqual","string_or_numeric");[n,r]=nA(n,r),xp(n.shape,r.shape);let a={a:n,b:r};return AA.runKernel(Il,a)}});var Zf=BA({oneHot_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"int32";if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));let i={indices:xA(e,"indices","oneHot","int32")},s={dtype:a,depth:t,onValue:n,offValue:r};return AA.runKernel(Tl,i,s)}});var $f=BA({onesLike_:function(e){let t={x:xA(e,"x","onesLike")};return AA.runKernel(_l,t)}});var em=BA({outerProduct_:function(e,t){let n=xA(e,"v1","outerProduct"),r=xA(t,"v2","outerProduct");Di(1===n.rank&&1===r.rank,()=>"Error in outerProduct: inputs must be rank 1, but got ranks ".concat(n.rank," and ").concat(r.rank,"."));let a=_h(n,[-1,1]),i=_h(r,[1,-1]);return Rh(a,i)}});var tm=BA({pad_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=xA(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let a={paddings:t,constantValue:n},i={x:r};return AA.runKernel(Dl,i,a)}});var nm=BA({pad1d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Di(2===t.length,()=>"Invalid number of paddings. Must be length of 2."),tm(e,[t],n)}});var rm=BA({pad2d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Di(2===t.length&&2===t[0].length&&2===t[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),tm(e,t,n)}});var am=BA({pad3d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Di(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),tm(e,t,n)}});var im=BA({pad4d_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Di(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),tm(e,t,n)}});var sm=BA({spaceToBatchND_:function(e,t,n){let r=xA(e,"x","spaceToBatchND");Di(r.rank>=1+t.length,()=>"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)),Di(n.length===t.length,()=>"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)),Di(r.shape.reduce((e,r,a)=>a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e,!0),()=>"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString()));let a={x:r},i={blockShape:t,paddings:n};return AA.runKernel(pc,a,i)}});var om=BA({pool_:function(e,t,n,r,a,i,s){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");let o=xA(e,"x","maxPool"),l=o,c=!1;3===o.rank&&(c=!0,l=_h(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Di(Ih(i,a),()=>"Error in pool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(a,"'"));let u,A=gh(l.shape,t,i,a,r),d=[A.dilationHeight,A.dilationWidth];u="same"===r?function(e,t){let n=e.map((e,n)=>e+(e-1)*(t[n]-1)).map(e=>e-1),r=n.map(e=>Math.floor(e/2)),a=n.map((e,t)=>e-r[t]);return n.map((e,t)=>[r[t],a[t]])}([A.filterHeight,A.filterWidth],d):[[0,0],[0,0]];let h=1===d[0]&&1===d[1],[p,f]=function(e,t,n){let r=n.map(e=>e[0]),a=n.map(e=>e[1]),i=e.concat(r,a),s=t.map((e,t)=>(e-i[t]%e)%e),o=a.map((e,t)=>e+s[t]),l=t.map((e,t)=>[r[t],o[t]]),c=t.map((e,t)=>[0,s[t]]);return[l,c]}([A.inHeight,A.inWidth],d,u),m=h?r:"valid",g=h?l:sm(l,d,p),y=("avg"===n?()=>Th(g,t,i,m,s):()=>Of(g,t,i,m,s))(),b=h?y:Qh(y,d,f);return c?_h(b,[b.shape[1],b.shape[2],b.shape[3]]):b}});var lm=BA({prelu_:function(e,t){let n={x:xA(e,"x","prelu"),alpha:xA(t,"alpha","prelu")};return AA.runKernel(Ol,n)}});var cm=BA({prod_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=xA(e,"x","prod");"bool"===r.dtype&&(r=Jd(r,"int32"));let a={x:r},i={axis:t,keepDims:n};return AA.runKernel(Ml,a,i)}});var um=BA({raggedGather_:function(e,t,n,r){let a=e.map((e,t)=>xA(e,"tensors".concat(t),"raggedGather","int32")),i={paramsNestedSplits:a,paramsDenseValues:xA(t,"paramsDenseValues","raggedGather"),indices:xA(n,"indices","raggedGather","int32")},s={outputRaggedRank:r},o=AA.runKernel(Pl,i,s);return{outputNestedSplits:o.slice(0,o.length-1),outputDenseValues:o[o.length-1]}}});var Am=BA({raggedRange_:function(e,t,n){let r=xA(e,"starts","raggedRange"),a={starts:r,limits:xA(t,"limits","raggedRange",r.dtype),deltas:xA(n,"deltas","raggedRange",r.dtype)},i=AA.runKernel(Ql,a);return{rtNestedSplits:i[0],rtDenseValues:i[1]}}});var dm=BA({raggedTensorToTensor_:function(e,t,n,r,a){let i=xA(e,"shape","raggedTensorToTensor","int32"),s=xA(t,"values","raggedTensorToTensor"),o=xA(n,"defaultValue","raggedTensorToTensor",s.dtype),l=r.map((e,t)=>xA(e,"tensors".concat(t),"raggedTensorToTensor","int32")),c={shape:i,values:s,defaultValue:o,rowPartitionTensors:l},u={rowPartitionTypes:a};return AA.runKernel(jl,c,u)}});var hm=BA({rand_:function(e,t,n){ms(e);let r=Oi(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(let i=0;i<r;i++)a[i]=t();return AA.makeTensor(a,e,n)}}),pm=ti(hi()),fm={};ei(fm,{TEST_EPSILON_FLOAT16:()=>gm,createVideoElement:()=>Nm,encodeStrings:()=>Im,expectArrayBuffersEqual:()=>Sm,expectArraysClose:()=>ym,expectArraysEqual:()=>xm,expectNumbersClose:()=>Cm,expectPromiseToFail:()=>vm,expectValuesInRange:()=>Bm,play:()=>Fm,testEpsilon:()=>bm});var mm=.001,gm=.1;function ym(e,t,n){return null==n&&(n=bm()),wm(e,t,(e,t)=>km(e,t,n))}function bm(){return 32===AA.backend.floatPrecision()?mm:gm}function wm(e,t,n){let r=!0;if((Nu(e)||Nu(t))&&(r=!1),Nu(e)&&Nu(t)&&(r=!0),r){let n=e.constructor.name,r=t.constructor.name;if(n!==r)throw new Error("Arrays are of different type. Actual: ".concat(n,". Expected: ").concat(r))}if(Array.isArray(e)&&Array.isArray(t)){let n=bA(e),r=bA(t);if(!Qi(n,r))throw new Error("Arrays have different shapes. Actual: [".concat(n,"]. Expected: [").concat(r,"]"))}let a=Nu(e)?e:Fu(e),i=Nu(t)?t:Fu(t);if(a.length!==i.length)throw new Error("Arrays have different lengths actual: ".concat(a.length," vs expected: ").concat(i.length,".\nActual:   ").concat(a,".\nExpected: ").concat(i,"."));for(let s=0;s<i.length;++s){let e=a[s],t=i[s];if(!n(e,t))throw new Error("Arrays differ: actual[".concat(s,"] = ").concat(e,", expected[").concat(s,"] = ").concat(t,".\nActual:   ").concat(a,".\nExpected: ").concat(i,"."))}"undefined"!=typeof expect&&expect().nothing()}function vm(e,t){e().then(()=>t.fail(),()=>t()),"undefined"!=typeof expect&&expect().nothing()}function xm(e,t){let n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return rs(e)||rs(e[0])||rs(t)||rs(t[0])?wm(e,n,(e,t)=>e==t):wm(e,t,(e,t)=>km(e,t,0))}function Cm(e,t,n){if(null==n&&(n=bm()),!km(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t));"undefined"!=typeof expect&&expect().nothing()}function km(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function Bm(e,t,n){for(let r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function Sm(e,t){let n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error("Expected ArrayBuffer to be of length ".concat(r.length,", but it was ").concat(n.length));for(let a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error("Expected ArrayBuffer value at ".concat(a," to be ").concat(r[a]," but got ").concat(n[a]," instead"))}function Im(e){for(let t=0;t<e.length;t++){let n=e[t];Array.isArray(n)?Im(n):e[t]=Su(n)}return e}function Nm(e){let t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(e),new Promise(e=>{t.addEventListener("loadeddata",n=>e(t)),t.load()})}async function Fm(e){await e.play(),"requestVideoFrameCallback"in e&&await new Promise(t=>{e.requestVideoFrameCallback(t)})}var Em=class{constructor(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);let i=a||Math.random();this.random=pm.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){let e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,a,i;do{r=2*this.random()-1,a=2*this.random()-1,i=r*r+a*a}while(i>=1||0===i);let s=Math.sqrt(-2*Math.log(i)/i);e=this.mean+this.stdDev*r*s,t=this.mean+this.stdDev*a*s,(!this.truncated||this.isValidTruncated(e))&&(n=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}},_m=class{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;let a=r||Math.random();this.randu=pm.alea(a.toString()),this.randn=new Em(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,a,i;for(;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-i+Math.log(i)),a=this.randu(),a<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}},Tm=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(e," - ").concat(t," <= 1 and dtype is not float"));this.random=pm.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}};var Lm=BA({randomGamma_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(ms(e),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));let i=new _m(t,n,r,a),s=Xd(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}});var Dm=BA({randomNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(ms(e),null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));let i=new Em(t,n,r,!1,a),s=Xd(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}});var Rm=BA({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error("Unsupported data type ".concat(t));return Dm(e,0,1,t,n)}});var Um=BA({randomUniform_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;ms(e);let i=Xd(e,r),s=new Tm(t,n,null,a);for(let o=0;o<i.values.length;o++)i.values[o]=s.nextValue();return i.toTensor()}});var Om=BA({randomUniformInt_:function(e,t,n,r){return Um(e,t,n,"int32",r)}});function Mm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");let a={start:e,stop:t,step:n,dtype:r};return AA.runKernel(Hl,{},a)}var Pm=BA({real_:function(e){let t={input:xA(e,"input","real")};return AA.runKernel(zl,t)}});var Qm=BA({reciprocal_:function(e){let t={x:xA(e,"x","reciprocal")};return AA.runKernel(Wl,t)}});var jm=BA({relu_:function(e){let t={x:xA(e,"x","relu")};return AA.runKernel(Vl,t)}});var Hm=BA({relu6_:function(e){let t={x:xA(e,"x","relu6")};return AA.runKernel(Yl,t)}});var zm=BA({reverse_:function(e,t){let n={x:xA(e,"x","reverse")},r={dims:t};return AA.runKernel(Zl,n,r)}});var Wm=BA({reverse1d_:function(e){let t=xA(e,"x","reverse");return Di(1===t.rank,()=>"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")),zm(t,0)}});var Vm=BA({reverse2d_:function(e,t){let n=xA(e,"x","reverse");return Di(2===n.rank,()=>"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")),zm(n,t)}});var Gm=BA({reverse3d_:function(e,t){let n=xA(e,"x","reverse");return Di(3===n.rank,()=>"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")),zm(n,t)}});var Km=BA({reverse4d_:function(e,t){let n=xA(e,"x","reverse");return Di(4===n.rank,()=>"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")),zm(n,t)}});var qm=BA({round_:function(e){let t={x:xA(e,"x","round")};return AA.runKernel($l,t)}});var Xm=BA({rsqrt_:function(e){let t={x:xA(e,"x","rsqrt","float32")};return AA.runKernel(ec,t)}});var Jm=BA({selu_:function(e){let t={x:xA(e,"x","selu")};return AA.runKernel(ic,t)}});var Ym=BA({separableConv2d_:function(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",o=xA(e,"x","separableConv2d"),l=xA(t,"depthwiseFilter","separableConv2d"),c=xA(n,"pointwiseFilter","separableConv2d"),u=o,A=!1;if(3===o.rank&&(A=!0,u=_h(o,[1,o.shape[0],o.shape[1],o.shape[2]])),"NCHW"===s)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Di(4===u.rank,()=>"Error in separableConv2d: input must be rank 4, but got rank ".concat(u.rank,".")),Di(4===l.rank,()=>"Error in separableConv2d: depthwise filter must be rank 4, but got rank ".concat(l.rank,".")),Di(4===c.rank,()=>"Error in separableConv2d: pointwise filter must be rank 4, but got rank ".concat(l.rank,".")),Di(1===c.shape[0],()=>"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ".concat(c.shape[0],".")),Di(1===c.shape[1],()=>"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ".concat(c.shape[1],"."));let d=l.shape[2],h=l.shape[3];Di(c.shape[2]===d*h,()=>"Error in separableConv2d: the third dimension of pointwise filter must be ".concat(d*h,", but got ").concat(c.shape[2],"."));let p=mp(u,l,r,a,s,i),f=rp(p,c,1,"valid",s);return A?_h(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var Zm=async function(e,t){let n=xA(e,"x","setdiff1d"),r=xA(t,"y","setdiff1d");Di(n.dtype===r.dtype,()=>"x and y should have the same dtype, but got x (".concat(n.dtype,") and y (").concat(r.dtype,").")),Di(1===n.rank,()=>"x should be 1D tensor, but got x (".concat(n.shape,").")),Di(1===r.rank,()=>"y should be 1D tensor, but got y (".concat(r.shape,")."));let a=await n.data(),i=await r.data(),s=new Set(i),o=0;for(let u=0;u<a.length;u++)s.has(a[u])||o++;let l=new Mu([o],n.dtype),c=new Mu([o],"int32");for(let u=0,A=0;u<a.length;u++)s.has(a[u])||(l.values[A]=a[u],c.values[A]=u,A++);return[l.toTensor(),c.toTensor()]};var $m=BA({sign_:function(e){let t={x:xA(e,"x","sign")};return AA.runKernel(cc,t)}});var eg=BA({sin_:function(e){let t={x:xA(e,"x","sin","float32")};return AA.runKernel(oc,t)}});var tg=BA({sinh_:function(e){let t={x:xA(e,"x","sinh")};return AA.runKernel(lc,t)}});var ng=BA({slice1d_:function(e,t,n){let r=xA(e,"x","slice1d");return Di(1===r.rank,()=>"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")),Oh(r,[t],[n])}});var rg=BA({slice2d_:function(e,t,n){let r=xA(e,"x","slice2d");return Di(2===r.rank,()=>"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")),Oh(r,t,n)}});var ag=BA({slice3d_:function(e,t,n){let r=xA(e,"x","slice3d");return Di(3===r.rank,()=>"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")),Oh(r,t,n)}});var ig=BA({slice4d_:function(e,t,n){let r=xA(e,"x","slice4d");return Di(4===r.rank,()=>"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")),Oh(r,t,n)}});var sg=BA({softmax_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=xA(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(n.rank," and dim was ").concat(t));let r={logits:n},a={dim:t};return AA.runKernel(mc,r,a)}});var og=BA({fft_:function(e){Di("complex64"===e.dtype,()=>"The dtype for tf.spectral.fft() must be complex64 but got ".concat(e.dtype,"."));let t={input:e};return AA.runKernel(Ro,t)}});var lg=BA({ifft_:function(e){Di("complex64"===e.dtype,()=>"The dtype for tf.spectral.ifft() must be complex64 but got ".concat(e.dtype,"."));let t={input:e};return AA.runKernel(Go,t)}});var cg=BA({irfft_:function(e){let t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){let a=_h(e,[r,n]);t=lg(a)}else{let a=[r,2*(n-1)],i=_h(Pm(e),[r,n]),s=_h(sf(e),[r,n]),o=zm(Oh(i,[0,1],[r,n-2]),1),l=nh(zm(Oh(s,[0,1],[r,n-2]),1),zp(-1)),c=Dh([i,o],1),u=Dh([s,l],1),A=_h(SA(c,u),[a[0],a[1]]);t=lg(A)}if(t=Pm(t),3===e.rank&&0!==e.shape[0]){let n=t,r=e.shape[0];t=_h(t,[r,t.shape[0]/r,t.shape[1]]),n.dispose()}return t}});var ug=BA({split_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={x:xA(e,"x","split")},a={numOrSizeSplits:t,axis:n};return AA.runKernel(fc,r,a)}});var Ag=BA({rfft_:function(e,t){Di("float32"===e.dtype,()=>"The dtype for rfft() must be real value but got ".concat(e.dtype));let n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){let a=e.shape.map(e=>0),i=e.shape.map(e=>e);i[e.shape.length-1]=t,n=Oh(e,a,i),r=t}else if(null!=t&&t>r){let a=e.shape.map(e=>e);a[e.shape.length-1]=t-r,n=Dh([e,Hf(a)],e.shape.length-1),r=t}else n=e;let i=Bp(n),s=_h(SA(n,i),[a,r]),o=og(s),l=Math.floor(r/2)+1,c=Pm(o),u=sf(o),A=ug(c,[l,r-l],c.shape.length-1),d=ug(u,[l,r-l],u.shape.length-1),h=n.shape.slice();return h[n.shape.length-1]=l,_h(SA(A[0],d[0]),h)}});var dg=BA({squaredDifference_:function(e,t){let n=xA(e,"a","squaredDifference"),r=xA(t,"b","squaredDifference");[n,r]=nA(n,r),xp(n.shape,r.shape);let a={a:n,b:r};return AA.runKernel(xc,a,{})}});var hg=BA({squeeze_:function(e,t){let n=xA(e,"x","squeeze","string_or_numeric");return _h(n,Xi(n.shape,t).newShape)}});var pg=BA({stack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=CA(e,"tensors","stack","string_or_numeric");Di(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&Di(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");let r=n,a={axis:t};return AA.runKernel(Ll,r,a)}});var fg=BA({step_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:xA(e,"x","step")},r={alpha:t};return AA.runKernel(jc,n,r)}});var mg=BA({stridedSlice_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c={x:xA(e,"x","stridedSlice","string_or_numeric")},u={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:l};return AA.runKernel(Bc,c,u)}});var gg=BA({tan_:function(e){let t={x:xA(e,"x","tan","float32")};return AA.runKernel(Ec,t)}});function yg(e,t){Ui(e);let n=bA(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return IA(e,null,n,t)}function bg(e,t,n){if(Ui(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");let r=bA(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return IA(e,t,r,n)}function wg(e,t,n){if(Ui(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");let r=bA(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return IA(e,t,r,n)}function vg(e,t,n){if(Ui(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");let r=bA(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return IA(e,t,r,n)}function xg(e,t,n){if(Ui(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");let r=bA(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return IA(e,t,r,n)}function Cg(e,t,n){if(Ui(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");let r=bA(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return IA(e,t=t||r,r,n)}var kg={};function Bg(e,t,n){let r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ".concat(n.shape,", indices.shape: ").concat(t.shape,", shape: ").concat(e,", sliceDim: ").concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(let s=0;s<a;++s)if(n.shape[s]!==t.shape[s])throw new Error(i+" updates.shape[".concat(s,"] (").concat(n.shape[s],") != indices.shape[").concat(s,"] (").concat(t.shape[s],")."));for(let s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function Sg(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}Bg(n,t,e)}function Ig(e,t,n){let r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,s=1;for(let l=a;l<i;++l)s*=n[l];let o=a<1?1:a;return{sliceRank:a,numUpdates:Oi(t.shape)/o,sliceSize:s,strides:[...cs(n.slice(0,a)),1],outputSize:Oi(n)}}ei(kg,{calculateShapes:()=>Ig,validateInput:()=>Sg,validateUpdateShape:()=>Bg});var Ng=BA({tensorScatterUpdate_:function(e,t,n){let r=xA(e,"tensor","tensorScatterupdate"),a=xA(t,"indices","tensorScatterupdate","int32"),i=xA(n,"updates","tensorScatterupdate");if(Sg(i,a,r.shape),r.dtype!==i.dtype)throw new Error("tensor and updates must have the same dtype, instead they are ".concat(r.dtype," and ").concat(i.dtype,"."));let s={tensor:r,indices:a,updates:i};return AA.runKernel(nc,s,{})}});var Fg=BA({topk_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=xA(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");let a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") but got ").concat(t));let i={x:r},s={k:t,sorted:n},[o,l]=AA.runKernel(Lc,i,s);return{values:o,indices:l}}});var Eg=BA({truncatedNormal_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(ms(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");let i=new Em(t,n,r,!0,a),s=Xd(e,r);for(let o=0;o<s.values.length;o++)s.values[o]=i.nextValue();return s.toTensor()}});var _g=BA({unique_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=xA(e,"x","unique","string_or_numeric");Di(n.rank>0,()=>"The input tensor must be at least 1D");let r={x:n},a={axis:t},[i,s]=AA.runKernel(Uc,r,a);return{values:i,indices:s}}});var Tg=BA({unsortedSegmentSum_:function(e,t,n){let r=xA(e,"x","unsortedSegmentSum"),a=xA(t,"segmentIds","unsortedSegmentSum","int32");Di(ji(n),()=>"numSegments must be of dtype int");let i={x:r,segmentIds:a},s={numSegments:n};return AA.runKernel(Mc,i,s)}});var Lg=BA({unstack_:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=xA(e,"x","unstack","string_or_numeric");Di(t>=-n.shape.length&&t<n.shape.length,()=>"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")"));let r={value:n},a={axis:t};return AA.runKernel(Oc,r,a)}});function Dg(e,t){return Rf(e,t,"right")}function Rg(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return AA.makeVariable(e,t,n,r)}function Ug(e,t){let n=[];for(let i=0;i<t.length;i++)t[i]&&n.push(i);let r=Xd(e,"int32"),a=Xd([n.length,e.length],"int32");for(let i=0;i<n.length;i++){let t=r.indexToLoc(n[i]),s=i*e.length;a.values.set(t,s)}return a.toTensor()}var Og=async function(e){let t=xA(e,"condition","whereAsync","bool"),n=await t.data(),r=Ug(t.shape,n);return e!==t&&t.dispose(),r};var Mg=async function(e,t,n){let r=xA(e,"tensor","boolMask"),a=xA(t,"mask","boolMask","bool"),i=null==n?0:n,s=a.rank,o=r.shape;Di(s>0,()=>"mask cannot be scalar"),Ri(o.slice(i,i+s),a.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let f=i;f<i+s;f++)l*=o[f];let c=o.slice(0,i).concat([l],o.slice(i+s)),u=_h(r,c),A=_h(a,[-1]),d=await Og(A),h=hg(d,[1]),p=nf(u,h,i);return e!==r&&r.dispose(),t!==a&&a.dispose(),h.dispose(),u.dispose(),A.dispose(),d.dispose(),p};var Pg=BA({transpose_:function(e,t,n){let r=xA(e,"x","transpose");if(null==t&&(t=r.shape.map((e,t)=>t).reverse()),Di(r.rank===t.length,()=>"Error in transpose: rank of input ".concat(r.rank," must match length of perm ").concat(t,".")),t.forEach(e=>{Di(e>=0&&e<r.rank,()=>"All entries in 'perm' must be between 0 and ".concat(r.rank-1," but got ").concat(t))}),r.rank<=1)return r.clone();let a={x:r},i={perm:t};return"complex64"===r.dtype?PA(()=>{let e=Pm(r),t=sf(r);return e=AA.runKernel(Rc,{x:e},i),t=AA.runKernel(Rc,{x:t},i),n&&(t=kf(t)),SA(e,t)}):AA.runKernel(Rc,a,i)}});var Qg=BA({movingAverage_:function(e,t,n,r){let a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=xA(e,"v","movingAverage"),s=xA(t,"x","movingAverage"),o=xA(n,"decay","movingAverage");rA(i,s),Di(Qi(i.shape,s.shape),()=>"Shape mismatch in v and x");let l=zp(1),c=If(l,o),u=nh(If(s,i),c);if(a){Di(null!=r,()=>"When using zeroDebias: true, step is required.");let e=xA(r,"step","movingAverage");u=th(u,If(l,Hp(o,e)))}return $d(i,u)}});var jg=BA({scatterND_:function(e,t,n){ms(n);let r=xA(e,"indices","scatterND","int32"),a=xA(t,"updates","scatterND");Sg(a,r,n);let i={indices:r,updates:a},s={shape:n};return AA.runKernel(tc,i,s)}});var Hg=BA({sparseToDense_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;ms(n);let a=xA(e,"sparseIndices","sparseToDense","int32"),i=xA(t,"sparseValues","sparseToDense","string_or_numeric"),s=xA(r,"defaultValue","sparseToDense",i.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape ".concat(e.shape,"."));let a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:, ".concat(n.length,", should be: ").concat(i,"."));let s=t.size;if(0!==t.rank&&(1!==t.rank||s!==a))throw new Error("sparseValues has incorrect shape ".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,n,s);let o={sparseIndices:a,sparseValues:i,defaultValue:s},l={outputShape:n};return AA.runKernel(vc,o,l)}});var zg=BA({gatherND_:function(e,t){let n=xA(t,"indices","gatherND","int32"),r={params:xA(e,"x","gatherND","string_or_numeric"),indices:n};return AA.runKernel(Ho,r)}});var Wg=BA({dropout_:function(e,t,n,r){let a=xA(e,"x","dropout");if(Di("float32"===a.dtype,()=>"x has to be a floating point tensor since it's going to be scaled, but got a ".concat(a.dtype," tensor instead.")),Di(t>=0&&t<1,()=>"rate must be a float in the range [0, 1), but got ".concat(t,".")),0===t)return e instanceof ju?a.clone():a;let i=function(e,t){if(null==t)return e.shape.slice();if(Qi(e.shape,t))return t;if(e.shape.length===t.length){let n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),s=1-t,o=th(tf($d(Um(i,0,1,"float32",r),s)),s);return nh(a,o)}});function Vg(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Gg(e,t,n){let r=1-e%2,a=new Float32Array(e);for(let i=0;i<e;++i){let s=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(s)}return yg(a,"float32")}var Kg=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=xA(e,"predictions","inTopK"),a=xA(t,"targets","inTopK");Di(r.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, but got ".concat(r.rank)),Di(r.rank-1===a.rank,()=>"predictions rank should be 1 larger than targets rank, but got predictions rank ".concat(r.rank," and targets rank ").concat(a.rank)),Ri(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let i=r.shape[r.shape.length-1];Di(n>0&&n<=i,()=>"'k' passed to inTopK() must be > 0 && <= the predictions last dimension (".concat(i,"), but got ").concat(n));let s=await r.data(),o=await a.data(),[l,c]=[s.length/i,i],u=Ji("bool",l);for(let A=0;A<l;A++){let e=A*c,t=s.subarray(e,e+c),r=[];for(let n=0;n<t.length;n++)r.push({value:t[n],index:n});r.sort((e,t)=>t.value-e.value),u[A]=0;for(let a=0;a<n;a++)if(r[a].index===o[A]){u[A]=1;break}}return e!==r&&r.dispose(),t!==a&&a.dispose(),NA(u,a.shape,"bool")},qg={};ei(qg,{conv2d:()=>ey,depthwiseConv2d:()=>ry,matMul:()=>ay});var Xg=BA({conv2DBackpropFilter_:function(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",s=arguments.length>6?arguments[6]:void 0,o=e;3===e.rank&&(o=_h(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=_h(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Di(4===o.rank,()=>"Error in conv2dDerFilter: input must be rank 4, but got shape ".concat(o.shape,".")),Di(4===l.rank,()=>"Error in conv2dDerFilter: dy must be rank 4, but got shape ".concat(l.shape,".")),Di(4===n.length,()=>"Error in conv2dDerFilter: filterShape must be length 4, but got ".concat(n,"."));let c="NHWC"===i?o.shape[3]:o.shape[1],u="NHWC"===i?l.shape[3]:l.shape[1];Di(c===n[2],()=>"Error in conv2dDerFilter: depth of input ".concat(c,") must match input depth in filter (").concat(n[2],".")),Di(u===n[3],()=>"Error in conv2dDerFilter: depth of dy (".concat(u,") must match output depth for filter (").concat(n[3],").")),Eh("conv2dDerFilter",a,s);let A={x:o,dy:l},d={strides:r,pad:a,dataFormat:i,dimRoundingMode:s,filterShape:n};return AA.runKernel(io,A,d)}});function Jg(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return nh(e,fg(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function Yg(e,t){let n=t,r=vp(e.shape,t.shape);return r.length>0&&(n=Gp(n,r)),_h(n,e.shape)}function Zg(e,t,n,r){if("linear"===t)return e;if("relu"===t)return jm(e);if("elu"===t)return Fp(e);if("relu6"===t)return Hm(e);if("prelu"===t)return lm(e,n);if("leakyrelu"===t)return uf(e,r);if("sigmoid"===t)return Uh(e);throw new Error("Unknown fused activation ".concat(t,"."))}var $g=(e,t)=>!(e>0)||"linear"===t;var ey=BA({fusedConv2d_:function(e){let{x:t,filter:n,strides:r,pad:a,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:l,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:A}=e;if(c=c||"linear",!1===$g(AA.state.gradientDepth,c)){Di("NHWC"===i,()=>"Error in fused conv2d: got dataFormat of ".concat(i," but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear."));let e=rp(t,n,r,a,i,s,o);return null!=l&&(e=$d(e,l)),Zg(e,c,u,A)}let d=xA(t,"x","conv2d","float32"),h=xA(n,"filter","conv2d","float32"),p=d,f=!1;3===d.rank&&(f=!0,p=_h(d,[1,d.shape[0],d.shape[1],d.shape[2]])),Di(4===p.rank,()=>"Error in fused conv2d: input must be rank 4, but got rank ".concat(p.rank,".")),Di(4===h.rank,()=>"Error in fused conv2d: filter must be rank 4, but got rank ".concat(h.rank,".")),Eh("fused conv2d",a,o);let m="NHWC"===i?p.shape[3]:p.shape[1];Di(h.shape[2]===m,()=>"Error in conv2d: depth of input (".concat(m,") must match input depth for filter ").concat(h.shape[2],".")),Di(Ih(r,s),()=>"Error in conv2D: Either strides or dilations must be 1. Got strides ".concat(r," and dilations '").concat(s,"'"));let g,y,b=bh(p.shape,h.shape,r,s,a,o);if(null!=l&&(g=xA(l,"bias","fused conv2d"),[g]=nA(g,d),"NHWC"===i?xp(b.outShape,g.shape):(Di(g.shape.length<=1,()=>"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-".concat(g.shape.length,".")),Di(0===g.shape.length||g.shape[0]===b.outChannels||1===g.shape[0],()=>"Error in fused conv2d: bias shape (".concat(g.shape,") is not compatible with the number of output channels (").concat(b.outChannels,")")))),null!=u){let e=u.shape;if(Di(e.length<=1||3===e.length,()=>"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-".concat(e.length,".")),1===e.length)Di(1===e[0]||e[0]===b.outChannels,()=>"Error in fused conv2d: PReLU activation weights (".concat(e,") is not compatible with the number of output channels (").concat(b.outChannels,")."));else if(3===e.length)try{xp(e,b.outShape)}catch(Ht){let n="Error in fused conv2d: PReLU activation weights (".concat(e,") is not compatible with the output shape of the conv2d (").concat(b.outShape,").");throw Error(n)}y=xA(u,"prelu weights","fused conv2d")}let w=(e,t)=>{Di("NHWC"===i,()=>"Error in gradient of fused conv2D: got dataFormat of ".concat(i," but only NHWC is currently supported."));let[n,o,l,u]=t,A=Jg(e,l,c);Di(Sh(s),()=>"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(s,"'"));let d=[ip(o.shape,A,n,r,a),Xg(o,A,n.shape,r,a)];if(null!=u){let e=Yg(u,A);d.push(e)}return d},v={x:p,filter:h,bias:g,preluActivationWeights:y},x={strides:r,pad:a,dataFormat:i,dilations:s,dimRoundingMode:o,activation:c,leakyreluAlpha:A};return null==l?xf((e,t,n)=>{let r=AA.runKernel(Vc,v,x);return n([t,e,r]),f&&(r=_h(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:w}})(p,h):xf((e,t,n,r)=>{let a=AA.runKernel(Vc,v,x);return r([t,e,a,n]),f&&(a=_h(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:w}})(p,h,g)}});var ty=BA({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6?arguments[6]:void 0,o=e;3===e.rank&&(o=_h(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=_h(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c={x:o,dy:l},u={strides:r,pad:a,dimRoundingMode:s,dilations:i,filterShape:n};return AA.runKernel(bo,c,u)}});var ny=BA({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],s=arguments.length>6?arguments[6]:void 0,o=t,l=!1;3===t.rank&&(l=!0,o=_h(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let c={dy:o,filter:n},u={strides:r,pad:a,dimRoundingMode:s,dilations:i,inputShape:e},A=AA.runKernel(wo,c,u);return l?_h(A,[A.shape[1],A.shape[2],A.shape[3]]):A}});var ry=BA({fusedDepthwiseConv2d_:function(e){let{x:t,filter:n,strides:r,pad:a,dataFormat:i="NHWC",dilations:s=[1,1],dimRoundingMode:o,bias:l,activation:c="linear",preluActivationWeights:u,leakyreluAlpha:A}=e;if(!1===$g(AA.state.gradientDepth,c)){let e=mp(t,n,r,a,i,s,o);return null!=l&&(e=$d(e,l)),Zg(e,c,u,A)}let d=xA(t,"x","depthwiseConv2d","float32"),h=xA(n,"filter","depthwiseConv2d","float32"),p=d,f=!1;3===d.rank&&(f=!0,p=_h(d,[1,d.shape[0],d.shape[1],d.shape[2]])),Di(4===p.rank,()=>"Error in fused depthwiseConv2d: input must be rank 4, but got rank ".concat(p.rank,".")),Di(4===h.rank,()=>"Error in fused depthwiseConv2d: filter must be rank 4, but got rank ".concat(h.rank,".")),Di(p.shape[3]===h.shape[2],()=>"Error in fused depthwiseConv2d: number of input channels (".concat(p.shape[3],") must match the inChannels dimension in filter ").concat(h.shape[2],".")),null==s&&(s=[1,1]),Di(Ih(r,s),()=>"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(r," and dilations '").concat(s,"'")),Eh("fused depthwiseConv2d",a,o);let m,g,y=bh(p.shape,h.shape,r,s,a,o,!0);null!=l&&(m=xA(l,"bias","fused conv2d"),[m]=nA(m,d),xp(y.outShape,m.shape)),null!=u&&(g=xA(u,"prelu weights","fused depthwiseConv2d"));let b=(e,t)=>{Di(Sh(s),()=>"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '".concat(s,"'"));let[n,i,l,u]=t,A=Jg(e,l,c),d=ny(i.shape,A,n,r,a,s,o),h=ty(i,A,n.shape,r,a,s,o);if(null!=u){return[d,h,Yg(m,A)]}return[d,h]},w={x:p,filter:h,bias:m,preluActivationWeights:g},v={strides:r,pad:a,dataFormat:i,dilations:s,dimRoundingMode:o,activation:c,leakyreluAlpha:A};return null==l?xf((e,t,n)=>{let r=AA.runKernel(Gc,w,v);return n([t,e,r]),f&&(r=_h(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}})(p,h):xf((e,t,n,r)=>{let a=AA.runKernel(Gc,w,v);return r([t,e,a,n]),f&&(a=_h(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:b}})(p,h,m)}});var ay=BA({fusedMatMul_:function(e){let{a:t,b:n,transposeA:r=!1,transposeB:a=!1,bias:i,activation:s="linear",preluActivationWeights:o,leakyreluAlpha:l=.2}=e;if(!1===$g(AA.state.gradientDepth,s)){let e=Rh(t,n,r,a);return null!=i&&(e=$d(e,i)),Zg(e,s,o,l)}let c=xA(t,"a","fused matMul"),u=xA(n,"b","fused matMul");[c,u]=nA(c,u);let A=r?c.shape[c.rank-2]:c.shape[c.rank-1],d=a?u.shape[u.rank-1]:u.shape[u.rank-2],h=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=a?u.shape[u.rank-2]:u.shape[u.rank-1],f=c.shape.slice(0,-2),m=u.shape.slice(0,-2),g=Oi(f),y=Oi(m);Di(A===d,()=>"Error in fused matMul: inner shapes (".concat(A,") and (").concat(d,") of Tensors with shapes ").concat(c.shape," and ").concat(u.shape," and transposeA=").concat(r," and transposeB=").concat(a," must match."));let b,w,v=xp(c.shape.slice(0,-2),u.shape.slice(0,-2)).concat([h,p]),x=_h(c,r?[g,A,h]:[g,h,A]),C=_h(u,a?[y,p,d]:[y,d,p]);null!=i&&(b=xA(i,"bias","fused matMul"),[b]=nA(b,c),xp(v,b.shape)),null!=o&&(w=xA(o,"prelu weights","fused matMul"));let k=(e,t)=>{let n,o,[l,c,u,A]=t,d=Jg(_h(e,u.shape),u,s);if(r||a?!r&&a?(n=Rh(d,c,!1,!1),o=Rh(d,l,!0,!1)):r&&!a?(n=Rh(c,d,!1,!0),o=Rh(l,d,!1,!1)):(n=Rh(c,d,!0,!0),o=Rh(d,l,!0,!0)):(n=Rh(d,c,!1,!0),o=Rh(l,d,!0,!1)),null!=i){return[n,o,Yg(A,d)]}return[n,o]},B={a:x,b:C,bias:b,preluActivationWeights:w},S={transposeA:r,transposeB:a,activation:s,leakyreluAlpha:l};return null==i?xf((e,t,n)=>{let r=AA.runKernel(Wc,B,S);return n([e,t,r]),{value:_h(r,v),gradFunc:k}})(x,C):xf((e,t,n,r)=>{let a=AA.runKernel(Wc,B,S);return r([e,t,a,n]),{value:_h(a,v),gradFunc:k}})(x,C,b)}});var iy=BA({hammingWindow_:function(e){return Gg(e,.54,.46)}});var sy=BA({hannWindow_:function(e){return Gg(e,.5,.5)}});var oy=BA({frame_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,s=[];for(;i+t<=e.size;)s.push(Oh(e,i,t)),i+=n;if(r)for(;i<e.size;){let r=i+t-e.size,o=Dh([Oh(e,i,t-r),Yh([r],a)]);s.push(o),i+=n}return 0===s.length?bg([],[0,t]):_h(Dh(s),[s.length,t])}});var ly=BA({stft_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:sy;null==r&&(r=Vg(t));let i=oy(e,t,n),s=nh(i,a(t));return Ag(s,r)}});var cy=BA({cropAndResize_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=xA(e,"image","cropAndResize"),o=xA(t,"boxes","cropAndResize","float32"),l=xA(n,"boxInd","cropAndResize","int32"),c=o.shape[0];Di(4===s.rank,()=>"Error in cropAndResize: image must be rank 4,but got rank ".concat(s.rank,".")),Di(2===o.rank&&4===o.shape[1],()=>"Error in cropAndResize: boxes must be have size [".concat(c,",4] but had shape ").concat(o.shape,".")),Di(1===l.rank&&l.shape[0]===c,()=>"Error in cropAndResize: boxInd must be have size [".concat(c,"] but had shape ").concat(o.shape,".")),Di(2===r.length,()=>"Error in cropAndResize: cropSize must be of length 2, but got length ".concat(r.length,".")),Di(r[0]>=1&&r[1]>=1,()=>"cropSize must be atleast [1,1], but was ".concat(r)),Di("bilinear"===a||"nearest"===a,()=>"method must be bilinear or nearest, but was ".concat(a));let u={image:s,boxes:o,boxInd:l},A={method:a,extrapolationValue:i,cropSize:r};return AA.runKernel(fo,u,A)}});var uy=BA({flipLeftRight_:function(e){let t=xA(e,"image","flipLeftRight","float32");Di(4===t.rank,()=>"Error in flipLeftRight: image must be rank 4,but got rank ".concat(t.rank,"."));let n={image:t};return AA.runKernel(Oo,n,{})}});var Ay=BA({grayscaleToRGB_:function(e){let t=xA(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];Di(t.rank>=2,()=>"Error in grayscaleToRGB: images must be at least rank 2, but got rank ".concat(t.rank,".")),Di(1===r,()=>"Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ".concat(r,"."));let a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,$p(t,a)}});var dy=BA({rgbToGrayscale_:function(e){let t=xA(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];Di(t.rank>=2,()=>"Error in RGBToGrayscale: images must be at least rank 2, but got rank ".concat(t.rank,".")),Di(3===r,()=>"Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ".concat(r,"."));let a,i=t.dtype,s=Jd(t,"float32"),o=yg([.2989,.587,.114]);switch(t.rank){case 2:a=Np("ij,j->i",s,o);break;case 3:a=Np("ijk,k->ij",s,o);break;case 4:a=Np("ijkl,l->ijk",s,o);break;case 5:a=Np("ijklm,m->ijkl",s,o);break;case 6:a=Np("ijklmn,n->ijklm",s,o);break;default:throw new Error("Not a valid tensor rank.")}return a=Yp(a,-1),Jd(a,i)}});var hy=BA({rotateWithOffset_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=xA(e,"image","rotateWithOffset","float32");Di(4===a.rank,()=>"Error in rotateWithOffset: image must be rank 4,but got rank ".concat(a.rank,"."));let i={image:a},s={radians:t,fillValue:n,center:r};return AA.runKernel(zc,i,s)}});function py(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);let s=e.shape[0];return n=Math.min(n,s),Di(0<=r&&r<=1,()=>"iouThreshold must be in [0, 1], but was '".concat(r,"'")),Di(2===e.rank,()=>"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")),Di(4===e.shape[1],()=>"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])),Di(1===t.rank,()=>"scores must be a 1D tensor"),Di(t.shape[0]===s,()=>"scores has incompatible shape with boxes. Expected ".concat(s,", but was ").concat(t.shape[0])),Di(0<=i&&i<=1,()=>"softNmsSigma must be in [0, 1], but was '".concat(i,"'")),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var fy=BA({nonMaxSuppression_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=xA(e,"boxes","nonMaxSuppression","float32"),s=xA(t,"scores","nonMaxSuppression","float32"),o=py(i,s,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;let l={maxOutputSize:n,iouThreshold:r,scoreThreshold:a};return AA.runKernel(Nl,{boxes:i,scores:s},l)}});function my(e,t,n){let r=function(e,t,n){return function(e,t,n){let r=0,a=e.length,i=0,s=!1;for(;r<a;){i=r+(a-r>>>1);let o=n(t,e[i]);o>0?r=i+1:(a=i,s=!o)}return s?r:-r-1}(e,t,n||gy)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function gy(e,t){return e>t?1:e<t?-1:0}function yy(e,t,n,r,a){return vy(e,t,n,r,a,0)}function by(e,t,n,r,a,i){return vy(e,t,n,r,a,0,!1,i,!0)}function wy(e,t,n,r,a,i){return vy(e,t,n,r,a,i,!0)}function vy(e,t,n,r,a,i){let s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=[];for(let m=0;m<t.length;m++)t[m]>a&&c.push({score:t[m],boxIndex:m,suppressBeginIndex:0});c.sort(ky);let u=i>0?-.5/i:0,A=[],d=[];for(;A.length<n&&c.length>0;){let t=c.pop(),{score:n,boxIndex:i,suppressBeginIndex:s}=t;if(n<a)break;let o=!1;for(let l=A.length-1;l>=s;--l){let n=xy(e,i,A[l]);if(n>=r){o=!0;break}if(t.score=t.score*Cy(r,u,n),t.score<=a)break}t.suppressBeginIndex=A.length,o||(t.score===n?(A.push(i),d.push(t.score)):t.score>a&&my(c,t,ky))}let h=A.length,p=n-h;o&&p>0&&(A.push(...new Array(p).fill(0)),d.push(...new Array(p).fill(0)));let f={selectedIndices:A};return s&&(f.selectedScores=d),l&&(f.validOutputs=h),f}function xy(e,t,n){let r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),u=Math.min(a[1],a[3]),A=Math.max(a[0],a[2]),d=Math.max(a[1],a[3]),h=(o-i)*(l-s),p=(A-c)*(d-u);if(h<=0||p<=0)return 0;let f=Math.max(i,c),m=Math.max(s,u),g=Math.min(o,A),y=Math.min(l,d),b=Math.max(g-f,0)*Math.max(y-m,0);return b/(h+p-b)}function Cy(e,t,n){let r=Math.exp(t*n*n);return n<=e?r:0}function ky(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}var By=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=xA(e,"boxes","nonMaxSuppressionAsync"),s=xA(t,"scores","nonMaxSuppressionAsync"),o=py(i,s,n,r,a);n=o.maxOutputSize,r=o.iouThreshold,a=o.scoreThreshold;let l=await Promise.all([i.data(),s.data()]),c=l[0],u=l[1],{selectedIndices:A}=yy(c,u,n,r,a);return i!==e&&i.dispose(),s!==t&&s.dispose(),yg(A,"int32")};var Sy=BA({nonMaxSuppressionWithScore_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=xA(e,"boxes","nonMaxSuppression"),o=xA(t,"scores","nonMaxSuppression"),l=py(s,o,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;let c={boxes:s,scores:o},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i},A=AA.runKernel(El,c,u);return{selectedIndices:A[0],selectedScores:A[1]}}});var Iy=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=xA(e,"boxes","nonMaxSuppressionAsync"),o=xA(t,"scores","nonMaxSuppressionAsync"),l=py(s,o,n,r,a,i);n=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,i=l.softNmsSigma;let c=await Promise.all([s.data(),o.data()]),u=c[0],A=c[1],{selectedIndices:d,selectedScores:h}=wy(u,A,n,r,a,i);return s!==e&&s.dispose(),o!==t&&o.dispose(),{selectedIndices:yg(d,"int32"),selectedScores:yg(h)}};var Ny=BA({nonMaxSuppressionPadded_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=xA(e,"boxes","nonMaxSuppression"),o=xA(t,"scores","nonMaxSuppression"),l=py(s,o,n,r,a,null),c={boxes:s,scores:o},u={maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:i},A=AA.runKernel(Fl,c,u);return{selectedIndices:A[0],validOutputs:A[1]}}});var Fy=async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=xA(e,"boxes","nonMaxSuppressionAsync"),o=xA(t,"scores","nonMaxSuppressionAsync"),l=py(s,o,n,r,a,null),c=l.maxOutputSize,u=l.iouThreshold,A=l.scoreThreshold,[d,h]=await Promise.all([s.data(),o.data()]),{selectedIndices:p,validOutputs:f}=by(d,h,c,u,A,i);return s!==e&&s.dispose(),o!==t&&o.dispose(),{selectedIndices:yg(p,"int32"),validOutputs:zp(f,"int32")}};var Ey=BA({resizeBilinear_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=xA(e,"images","resizeBilinear");Di(3===a.rank||4===a.rank,()=>"Error in resizeBilinear: x must be rank 3 or 4, but got rank ".concat(a.rank,".")),Di(2===t.length,()=>"Error in resizeBilinear: new shape must 2D, but got shape ".concat(t,".")),Di(!1===r||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=a,s=!1;3===a.rank&&(s=!0,i=_h(a,[1,a.shape[0],a.shape[1],a.shape[2]]));let[]=t,o={images:i},l={alignCorners:n,halfPixelCenters:r,size:t},c=AA.runKernel(Xl,o,l);return s?_h(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var _y=BA({resizeNearestNeighbor_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=xA(e,"images","resizeNearestNeighbor");Di(3===a.rank||4===a.rank,()=>"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ".concat(a.rank,".")),Di(2===t.length,()=>"Error in resizeNearestNeighbor: new shape must 2D, but got shape ".concat(t,".")),Di("float32"===a.dtype||"int32"===a.dtype,()=>"`images` must have `int32` or `float32` as dtype"),Di(!1===r||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=a,s=!1;3===a.rank&&(s=!0,i=_h(a,[1,a.shape[0],a.shape[1],a.shape[2]]));let[]=t,o={images:i},l={alignCorners:n,halfPixelCenters:r,size:t},c=AA.runKernel(Kl,o,l);return s?_h(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var Ty=BA({threshold_:function(e){let t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,l=xA(e,"image","threshold"),c=l.shape[0]*l.shape[1],u=nh(yg([o]),255);if(Di(3===l.rank,()=>"Error in threshold: image must be rank 3,but got rank ".concat(l.rank,".")),Di(3===l.shape[2]||1===l.shape[2],()=>"Error in threshold: image color channel must be equal to 3 or 1but got ".concat(l.shape[2],".")),Di("int32"===l.dtype||"float32"===l.dtype,()=>"Error in dtype: image dtype must be int32 or float32,but got dtype ".concat(l.dtype,".")),Di("otsu"===i||"binary"===i,()=>"Method must be binary or otsu, but was ".concat(i)),3===l.shape[2]){[t,n,r]=ug(l,[1,1,1],-1);let e=nh(t,.2989),i=nh(n,.587),s=nh(r,.114);a=$d($d(e,i),s)}else a=e;if("otsu"===i){u=function(e,t){let n,r,a,i,s,o,l=yg([-1]),c=yg([0]),u=yg([0]);for(let A=0;A<e.size-1;A++){n=Oh(e,0,A+1),r=Oh(e,A+1),s=th(Gp(n),t),o=th(Gp(r),t);let d=Gp(nh(n,Mm(0,n.size)));a=th(d,Gp(n));let h=Yh(r.shape,n.size),p=$d(Mm(0,r.size),h),f=nh(r,p);i=th(Gp(f),Gp(r));let m=If(a,i),g=If(a,i),y=nh(s,o);u=nh(nh(y,m),g);let b=rf(u,c);c=kp(b,u,c),l=kp(b,yg([A]),l)}return l}(Gh(Jd(qm(a),"int32"),NA([]),256),c)}let A=s?df(a,u):rf(a,u);return Jd(nh(A,255),"int32")}});var Ly=BA({transform_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,s=xA(e,"image","transform","float32"),o=xA(t,"transforms","transform","float32");Di(4===s.rank,()=>"Error in transform: image must be rank 4,but got rank ".concat(s.rank,".")),Di(2===o.rank&&(o.shape[0]===s.shape[0]||1===o.shape[0])&&8===o.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),Di(null==i||2===i.length,()=>"Error in transform: outputShape must be [height, width] or null, but got ".concat(i,"."));let l={image:s,transforms:o},c={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return AA.runKernel(Dc,l,c)}});var Dy=BA({bandPart_:function(e,t,n){let r=xA(e,"a","bandPart");Di(r.rank>=2,()=>"bandPart(): Rank must be at least 2, got ".concat(r.rank,"."));let a,i,s=r.shape,[o,l]=r.shape.slice(-2);"number"==typeof t?(Di(t%1===0,()=>"bandPart(): numLower must be an integer, got ".concat(t,".")),Di(t<=o,()=>"bandPart(): numLower (".concat(t,") must not be greater than the number of rows (").concat(o,").")),a=xA(t<0?o:t,"numLower","bandPart")):(Di("int32"===t.dtype,()=>"bandPart(): numLower's dtype must be an int32."),a=kp(Af(t,0),o,Vf(t,o))),"number"==typeof n?(Di(n%1===0,()=>"bandPart(): numUpper must be an integer, got ".concat(n,".")),Di(n<=l,()=>"bandPart(): numUpper (".concat(n,") must not be greater than the number of columns (").concat(l,").")),i=xA(n<0?l:n,"numUpper","bandPart")):(Di("int32"===n.dtype,()=>"bandPart(): numUpper's dtype must be an int32."),i=kp(Af(n,0),l,Vf(n,l)));let c=_h(Mm(0,o,1,"int32"),[-1,1]),u=Mm(0,l,1,"int32"),A=If(c,u),d=Ef(df(A,a),af(A,kf(i))),h=Hf([o,l],r.dtype);return _h(pg(Lg(_h(r,[-1,o,l])).map(e=>kp(d,e,h))),s)}});var Ry=BA({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,Di(null!=e&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let n=e[0].shape[0];for(let t=1;t<e.length;++t)Di(e[t].shape[0]===n,()=>"Gram-Schmidt: Non-unique lengths found in the input vectors: (".concat(e[t].shape[0]," vs. ").concat(n,")"))}else t=!0,e=ug(e,e.shape[0],0).map(e=>hg(e,[0]));Di(e.length<=e[0].shape[0],()=>"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds number of dimensions (").concat(e[0].shape[0],")."));let n=[],r=e;for(let a=0;a<e.length;++a)n.push(AA.tidy(()=>{let e=r[a];if(a>0)for(let t=0;t<a;++t){let r=nh(Gp(nh(n[t],e)),n[t]);e=If(e,r)}return th(e,qp(e,"euclidean"))}));return t?pg(n,0):n}});function Uy(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return AA.tidy(()=>{Di(2===e.shape.length,()=>"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor."));let n=e.shape[0],r=e.shape[1],a=ef(n),i=Yd(e),s=bg([[1]],[1,1]),o=Yd(s),l=n>=r?r:n;for(let e=0;e<l;++e){let t=i,l=o,c=a;[o,i,a]=AA.tidy(()=>{let t=Oh(i,[e,e],[n-e,1]),l=qp(t),c=Oh(i,[e,e],[1,1]),u=kp(rf(c,0),bg([[-1]]),bg([[1]])),A=If(c,nh(u,l)),d=th(t,A);o=1===d.shape[0]?Yd(s):Dh([s,Oh(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);let h=kf(th(Rh(u,A),l)),p=Oh(i,[e,0],[n-e,r]),f=nh(h,o),m=Pg(o);if(0===e)i=If(p,Rh(f,Rh(m,p)));else{let t=If(p,Rh(f,Rh(m,p)));i=Dh([Oh(i,[0,0],[e,r]),t],0)}let g=Pg(f),y=Oh(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=If(y,Rh(Rh(y,o),g));else{let t=If(y,Rh(Rh(y,o),g));a=Dh([Oh(a,[0,0],[n,e]),t],1)}return[o,i,a]}),QA([t,l,c])}return!t&&n>r&&(a=Oh(a,[0,0],[n,r]),i=Oh(i,[0,0],[r,r])),[a,i]})}var Oy,My=BA({qr_:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Di(e.rank>=2,()=>"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)),2===e.rank)return Uy(e,t);{let n=e.shape.slice(0,e.shape.length-2).reduce((e,t)=>e*t),r=Lg(_h(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];return r.forEach(e=>{let[n,r]=Uy(e,t);a.push(n),i.push(r)}),[_h(pg(a,0),e.shape),_h(pg(i,0),e.shape)]}}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Oy||(Oy={}));var Py=BA({computeWeightedLoss_:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Oy.SUM_BY_NONZERO_WEIGHTS,r=xA(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=xA(t,"weights","computeWeightedLoss"));let i=null==a?r:nh(r,a);if(n===Oy.NONE)return i;if(n===Oy.SUM)return Gp(i);if(n===Oy.MEAN){if(null==a)return jf(i);{let e=r.size/a.size,t=th(Gp(i),Gp(a));return e>1?th(t,zp(e)):t}}if(n===Oy.SUM_BY_NONZERO_WEIGHTS){if(null==a)return th(Gp(i),zp(r.size));{let e=nh(a,zf(r.shape)),t=Jd(Gp(Yf(e,zp(0))),"float32");return th(Gp(i),t)}}throw Error("Unknown reduction: ".concat(n))}});var Qy=BA({absoluteDifference_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Oy.SUM_BY_NONZERO_WEIGHTS,a=xA(e,"labels","absoluteDifference"),i=xA(t,"predictions","absoluteDifference"),s=null;null!=n&&(s=xA(n,"weights","absoluteDifference")),Ri(a.shape,i.shape,"Error in absoluteDifference: ");let o=rh(If(a,i));return Py(o,s,r)}});var jy=BA({cosineDistance_:function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Oy.SUM_BY_NONZERO_WEIGHTS,i=xA(e,"labels","cosineDistance"),s=xA(t,"predictions","cosineDistance"),o=null;null!=r&&(o=xA(r,"weights","cosineDistance")),Ri(i.shape,s.shape,"Error in cosineDistance: ");let l=zp(1),c=If(l,Gp(nh(i,s),n,!0));return Py(c,o,a)}});var Hy=BA({hingeLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Oy.SUM_BY_NONZERO_WEIGHTS,a=xA(e,"labels","hingeLoss"),i=xA(t,"predictions","hingeLoss"),s=null;null!=n&&(s=xA(n,"weights","hingeLoss")),Ri(a.shape,i.shape,"Error in hingeLoss: ");let o=zp(1);a=If(nh(zp(2),a),o);let l=jm(If(o,nh(a,i)));return Py(l,s,r)}});var zy=BA({huberLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Oy.SUM_BY_NONZERO_WEIGHTS,i=xA(e,"labels","huberLoss"),s=xA(t,"predictions","huberLoss"),o=null;null!=n&&(o=xA(n,"weights","huberLoss")),Ri(i.shape,s.shape,"Error in huberLoss: ");let l=zp(r),c=rh(If(s,i)),u=Vf(c,l),A=If(c,u),d=$d(nh(zp(.5),Vp(u)),nh(l,A));return Py(d,o,a)}});var Wy=BA({logLoss_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Oy.SUM_BY_NONZERO_WEIGHTS,i=xA(e,"labels","logLoss"),s=xA(t,"predictions","logLoss"),o=null;null!=n&&(o=xA(n,"weights","logLoss")),Ri(i.shape,s.shape,"Error in logLoss: ");let l=zp(1),c=zp(r),u=kf(nh(i,ff($d(s,c)))),A=nh(If(l,i),ff($d(If(l,s),c))),d=If(u,A);return Py(d,o,a)}});var Vy=BA({meanSquaredError_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Oy.SUM_BY_NONZERO_WEIGHTS,a=xA(e,"labels","meanSquaredError"),i=xA(t,"predictions","meanSquaredError"),s=null;null!=n&&(s=xA(n,"weights","meanSquaredError")),Ri(a.shape,i.shape,"Error in meanSquaredError: ");let o=dg(a,i);return Py(o,s,r)}});var Gy=BA({sigmoidCrossEntropy_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Oy.SUM_BY_NONZERO_WEIGHTS,i=xA(e,"multiClassLabels","sigmoidCrossEntropy"),s=xA(t,"logits","sigmoidCrossEntropy"),o=null;if(null!=n&&(o=xA(n,"weights","sigmoidCrossEntropy")),Ri(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){let e=zp(r),t=zp(1),n=zp(.5);i=$d(nh(i,If(t,e)),nh(n,e))}let l=function(e,t){let n=xA(e,"labels","sigmoidCrossEntropyWithLogits"),r=xA(t,"logits","sigmoidCrossEntropyWithLogits");Ri(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let a=jm(r),i=nh(r,n),s=mf(Jp(kf(rh(r))));return $d(If(a,i),s)}(i,s);return Py(l,o,a)}});var Ky=BA({softmaxCrossEntropy_:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Oy.SUM_BY_NONZERO_WEIGHTS,i=xA(e,"onehotLabels","softmaxCrossEntropy"),s=xA(t,"logits","softmaxCrossEntropy"),o=null;if(null!=n&&(o=xA(n,"weights","softmaxCrossEntropy")),Ri(i.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){let e=zp(r),t=zp(1),n=zp(i.shape[1]);i=$d(nh(i,If(t,e)),th(e,n))}let l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ".concat(t.rank," and dim was ").concat(n));return xf((e,t,r)=>{let a=Ff(t,[n],!0),i=If(Jd(t,"float32"),a);r([e,i]);let s=kf(nh(i,e));return{value:Gp(s,[n]),gradFunc:(e,t)=>{let[r,a]=t,i=Rp(e.shape,[n]);return[nh(_h(e,i),If(Jd(r,"float32"),Jp(a))),nh(_h(e,i),If(Jp(a),Jd(r,"float32")))]}}})(e,t)}(i,s);return Py(l,o,a)}});var qy=BA({sparseFillEmptyRows_:function(e,t,n,r){let a=xA(e,"indices","sparseFillEmptyRows","int32"),i=xA(t,"values","sparseFillEmptyRows"),s=xA(n,"denseShape","sparseFillEmptyRows","int32"),o=xA(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==s.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(s.shape));if(0!==o.rank)throw new Error("Default value should be a scalar but received shape ".concat(o.shape));let l={indices:a,values:i,denseShape:s,defaultValue:o},c=AA.runKernel(gc,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});var Xy=BA({sparseReshape_:function(e,t,n){let r=xA(e,"inputIndices","sparseReshape","int32"),a=xA(t,"inputShape","sparseReshape","int32"),i=xA(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));let s={inputIndices:r,inputShape:a,newShape:i},o=AA.runKernel(yc,s);return{outputIndices:o[0],outputShape:o[1]}}});var Jy=BA({sparseSegmentMean_:function(e,t,n){let r=xA(e,"data","sparseSegmentMean"),a=xA(t,"indices","sparseSegmentMean","int32"),i=xA(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));let s={data:r,indices:a,segmentIds:i};return AA.runKernel(bc,s)}});var Yy=BA({sparseSegmentSum_:function(e,t,n){let r=xA(e,"data","sparseSegmentSum"),a=xA(t,"indices","sparseSegmentSum","int32"),i=xA(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));let s={data:r,indices:a,segmentIds:i};return AA.runKernel(wc,s)}});var Zy=BA({stringNGrams_:function(e,t,n,r,a,i,s,o){let l=xA(e,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error("Data must be a vector, saw: ".concat(l.shape));let c=xA(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");let u={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:s,preserveShortSequences:o},A={data:l,dataSplits:c},d=AA.runKernel(Sc,A,u);return{nGrams:d[0],nGramsSplits:d[1]}}});var $y=BA({stringSplit_:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=xA(e,"input","stringSplit","string"),a=xA(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));let i={skipEmpty:n},s={input:r,delimiter:a},o=AA.runKernel(Ic,s,i);return{indices:o[0],values:o[1],shape:o[2]}}});var eb=BA({stringToHashBucketFast_:function(e,t){let n=xA(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");let a={input:n};return AA.runKernel(Nc,a,r)}});var tb=BA({staticRegexReplace_:function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=xA(e,"input","staticRegexReplace","string"),i={pattern:t,rewrite:n,replaceGlobal:r};return AA.runKernel(kc,{x:a},i)}}),nb={fft:og,ifft:lg,rfft:Ag,irfft:cg},rb={hammingWindow:iy,hannWindow:sy,frame:oy,stft:ly},ab={flipLeftRight:uy,grayscaleToRGB:Ay,resizeNearestNeighbor:_y,resizeBilinear:Ey,rgbToGrayscale:dy,rotateWithOffset:hy,cropAndResize:cy,nonMaxSuppression:fy,nonMaxSuppressionAsync:By,nonMaxSuppressionWithScore:Sy,nonMaxSuppressionWithScoreAsync:Iy,nonMaxSuppressionPadded:Ny,nonMaxSuppressionPaddedAsync:Fy,threshold:Ty,transform:Ly},ib={bandPart:Dy,gramSchmidt:Ry,qr:My},sb={absoluteDifference:Qy,computeWeightedLoss:Py,cosineDistance:jy,hingeLoss:Hy,huberLoss:zy,logLoss:Wy,meanSquaredError:Vy,sigmoidCrossEntropy:Gy,softmaxCrossEntropy:Ky},ob={sparseFillEmptyRows:qy,sparseReshape:Xy,sparseSegmentMean:Jy,sparseSegmentSum:Yy},lb={stringNGrams:Zy,stringSplit:$y,stringToHashBucketFast:eb,staticRegexReplace:tb},cb={};ei(cb,{Serializable:()=>db,SerializationMap:()=>hb,getRegisteredName:()=>fb,registerClass:()=>pb});var ub=new Map,Ab=new Map,db=class{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}},hb=class e{constructor(){this.classNameMap={}}static getMap(){return null==e.instance&&(e.instance=new e),e.instance}static register(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}};function pb(e,t,n){Di(null!=e.className,()=>"Class being registered does not have the static className property defined."),Di("string"==typeof e.className,()=>"className is required to be a string, but got type "+typeof e.className),Di(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),"undefined"==typeof t&&(t="Custom"),"undefined"==typeof n&&(n=e.className);let r=t+">"+n;return hb.register(e),ub.set(r,e),Ab.set(e,r),e}function fb(e){return Ab.has(e)?Ab.get(e):e.className}var mb=class extends db{minimize(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,{value:r,grads:a}=this.computeGradients(e,n);if(null!=n){let e=n.map(e=>({name:e.name,tensor:a[e.name]}));this.applyGradients(e)}else this.applyGradients(a);return QA(a),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return vf(e,t)}dispose(){null!=this.iterations_&&QA(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:zp(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class ".concat(this.getClassName()))}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}};Object.defineProperty(mb,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});var gb=class extends mb{static get className(){return"Adadelta"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=AA.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=AA.registeredVariables[t],a=!1;null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:"".concat(t,"/accum_grad"),variable:PA(()=>Bp(r).variable(a))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:"".concat(t,"/accum_var"),variable:PA(()=>Bp(r).variable(a))});let i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;let s=this.accumulatedGrads[n].variable,o=this.accumulatedUpdates[n].variable;PA(()=>{let e=$d(nh(s,this.rho),nh(Vp(i),1-this.rho)),t=nh(th(Wp($d(o,this.epsilon)),Wp($d(s,this.epsilon))),i),n=$d(nh(o,this.rho),nh(Vp(t),1-this.rho));s.assign(e),o.assign(n);let a=$d(nh(t,-this.learningRate),r);r.assign(a)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(QA(this.accumulatedGrads.map(e=>e.variable)),QA(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){let e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){let t=(e=await this.extractIterations(e)).length/2,n=!1;this.accumulatedGrads=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedUpdates=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}},yb=class extends mb{static get className(){return"Adagrad"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=AA.registeredVariables[t];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:"".concat(t,"/accumulator"),variable:PA(()=>Yh(r.shape,this.initialAccumulatorValue).variable(!1))});let a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;let i=this.accumulatedGrads[n].variable;PA(()=>{let e=$d(i,Vp(a));i.assign(e);let t=$d(nh(th(a,Wp($d(e,AA.backend.epsilon()))),-this.learningRate),r);r.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&QA(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map(e=>({originalName:e.name,variable:e.tensor.variable(false)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}},bb=class extends mb{static get className(){return"Adam"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],PA(()=>{this.accBeta1=zp(t).variable(),this.accBeta2=zp(n).variable()}),null==r&&(this.epsilon=AA.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);PA(()=>{let n=If(1,this.accBeta1),r=If(1,this.accBeta2);t.forEach((t,a)=>{let i=AA.registeredVariables[t],s=!1;null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:"".concat(t,"/m"),variable:PA(()=>Bp(i).variable(s))}),null==this.accumulatedSecondMoment[a]&&(this.accumulatedSecondMoment[a]={originalName:"".concat(t,"/v"),variable:PA(()=>Bp(i).variable(s))});let o=Array.isArray(e)?e[a].tensor:e[t];if(null==o)return;let l=this.accumulatedFirstMoment[a].variable,c=this.accumulatedSecondMoment[a].variable,u=$d(nh(l,this.beta1),nh(o,1-this.beta1)),A=$d(nh(c,this.beta2),nh(Vp(o),1-this.beta2)),d=th(u,n),h=th(A,r);l.assign(u),c.assign(A);let p=$d(nh(th(d,$d(Wp(h),this.epsilon)),-this.learningRate),i);i.assign(p)}),this.accBeta1.assign(nh(this.accBeta1,this.beta1)),this.accBeta2.assign(nh(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&QA(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&QA(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),PA(()=>{this.accBeta1.assign(Hp(this.beta1,this.iterations_+1)),this.accBeta2.assign(Hp(this.beta2,this.iterations_+1))});let t=e.length/2,n=!1;this.accumulatedFirstMoment=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedSecondMoment=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}},wb=class extends mb{static get className(){return"Adamax"}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=a,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],PA(()=>{this.iteration=zp(0).variable(),this.accBeta1=zp(t).variable()}),null==r&&(this.epsilon=AA.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);PA(()=>{let n=If(1,this.accBeta1),r=th(-this.learningRate,$d(nh(this.iteration,this.decay),1));t.forEach((t,a)=>{let i=AA.registeredVariables[t],s=!1;null==this.accumulatedFirstMoment[a]&&(this.accumulatedFirstMoment[a]={originalName:"".concat(t,"/m"),variable:Bp(i).variable(s)}),null==this.accumulatedWeightedInfNorm[a]&&(this.accumulatedWeightedInfNorm[a]={originalName:"".concat(t,"/v"),variable:Bp(i).variable(s)});let o=Array.isArray(e)?e[a].tensor:e[t];if(null==o)return;let l=this.accumulatedFirstMoment[a].variable,c=this.accumulatedWeightedInfNorm[a].variable,u=$d(nh(l,this.beta1),nh(o,1-this.beta1)),A=nh(c,this.beta2),d=rh(o),h=Qf(A,d);l.assign(u),c.assign(h);let p=$d(nh(th(r,n),th(u,$d(h,this.epsilon))),i);i.assign(p)}),this.iteration.assign($d(this.iteration,1)),this.accBeta1.assign(nh(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&QA(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&QA(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}},vb=class extends mb{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;let a=AA.registeredVariables[t];PA(()=>{let e=$d(nh(this.c,r),a);a.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=jA(zp(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}},xb=class extends vb{static get className(){return"Momentum"}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=zp(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=AA.registeredVariables[t];null==this.accumulations[n]&&(this.accumulations[n]={originalName:"".concat(t,"/momentum"),variable:PA(()=>Bp(r).variable(!1))});let a=this.accumulations[n].variable,i=Array.isArray(e)?e[n].tensor:e[t];null!=i&&PA(()=>{let e,t=$d(nh(this.m,a),i);e=this.useNesterov?$d(nh(this.c,$d(i,nh(t,this.m))),r):$d(nh(this.c,t),r),a.assign(t),r.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&QA(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(false)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}},Cb=class extends mb{static get className(){return"RMSProp"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=a,null==r&&(this.epsilon=AA.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=AA.registeredVariables[t],a=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:"".concat(t,"/rms"),variable:PA(()=>Bp(r).variable(a))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:"".concat(t,"/momentum"),variable:PA(()=>Bp(r).variable(a))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:"".concat(t,"/mg"),variable:PA(()=>Bp(r).variable(a))});let i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;let s=this.accumulatedMeanSquares[n].variable,o=this.accumulatedMoments[n].variable;PA(()=>{let e=$d(nh(s,this.decay),nh(Vp(i),1-this.decay));if(this.centered){let t=this.accumulatedMeanGrads[n].variable,a=$d(nh(t,this.decay),nh(i,1-this.decay)),l=th(nh(i,this.learningRate),Wp(If(e,$d(Vp(a),this.epsilon)))),c=$d(nh(o,this.momentum),l);s.assign(e),t.assign(a),o.assign(c);let u=If(r,c);r.assign(u)}else{let e=$d(nh(s,this.decay),nh(Vp(i),1-this.decay)),t=$d(nh(o,this.momentum),th(nh(i,this.learningRate),Wp($d(e,this.epsilon))));s.assign(e),o.assign(t);let n=If(r,t);r.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&QA(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&QA(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&QA(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.accumulatedMoments=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(e=>({originalName:e.name,variable:e.tensor.variable(n)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}},kb=[gb,yb,bb,wb,xb,Cb,vb];var Bb={};ei(Bb,{CompositeArrayBuffer:()=>EA,browserFiles:()=>Fb,browserHTTPRequest:()=>Mb,concatenateArrayBuffers:()=>ld,copyModel:()=>Vd,decodeWeights:()=>$A,decodeWeightsStream:()=>ad,encodeWeights:()=>ZA,fromMemory:()=>Hb,fromMemorySync:()=>zb,getLoadHandlers:()=>bd,getModelArtifactsForJSON:()=>dd,getModelArtifactsForJSONSync:()=>Ad,getModelArtifactsInfoForJSON:()=>hd,getSaveHandlers:()=>yd,getWeightSpecs:()=>pd,http:()=>Ob,isHTTPScheme:()=>Rb,listModels:()=>zd,loadWeights:()=>Tb,moveModel:()=>Gd,registerLoadRouter:()=>gd,registerSaveRouter:()=>md,removeModel:()=>Wd,weightsLoaderFactory:()=>Lb,withSaveHandler:()=>Wb,withSaveHandlerSync:()=>Vb});function Sb(e){return new Promise(e=>setTimeout(e)).then(e)}var Ib=class e{constructor(t){if(!Cs().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),(null==t||0===t.length)&&(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");let t=EA.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let t=ud(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),a=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=r,await Sb(()=>a.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){let e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await Sb(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:hd(e)}}}};Ib.URL_SCHEME="downloads://";var Nb=class{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received ".concat(e));this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{let n=new FileReader;n.onload=n=>{let r=JSON.parse(n.target.result),a=r.modelTopology;if(null==a)return void t(new Error("modelTopology field is missing from file ".concat(this.jsonFile.name)));if(null==r.weightsManifest)return void t(new Error("weightManifest field is missing from file ".concat(this.jsonFile.name)));if(0===this.weightsFiles.length)return void e({modelTopology:a});let i=dd(r,e=>this.loadWeights(e));e(i)},n.onerror=e=>t("Failed to read model topology and weights manifest JSON from file '".concat(this.jsonFile.name,"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")),n.readAsText(this.jsonFile)})}loadWeights(e){let t=[],n=[];for(let i of e)t.push(...i.weights),n.push(...i.paths);let r=this.checkManifestAndWeightFiles(e),a=n.map(e=>this.loadWeightsFile(e,r[e]));return Promise.all(a).then(e=>[t,e])}loadWeightsFile(e,t){return new Promise((n,r)=>{let a=new FileReader;a.onload=e=>{let t=e.target.result;n(t)},a.onerror=t=>r("Failed to weights data from file of path '".concat(e,"'.")),a.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){let t=[],n=this.weightsFiles.map(e=>cd(e.name)),r={};for(let a of e)a.paths.forEach(e=>{let a=cd(e);if(-1!==t.indexOf(a))throw new Error("Duplicate file basename found in weights manifest: '".concat(a,"'"));if(t.push(a),-1===n.indexOf(a))throw new Error("Weight file with basename '".concat(a,"' is not provided."));r[e]=this.weightsFiles[n.indexOf(a)]});if(t.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest (".concat(t.length,") and the number of weight files provided (").concat(this.weightsFiles.length,")."));return r}};function Fb(e){return new Nb(e)}function Eb(e,t,n,r){(function(e){Di(null!=e&&Array.isArray(e)&&e.length>0,()=>"promises must be a none empty array")})(e),function(e,t){Di(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but got startFraction ".concat(e)),Di(t>=0&&t<=1,()=>"Progress fraction must be in range [0, 1], but got endFraction ".concat(t)),Di(t>=e,()=>"startFraction must be no more than endFraction, but got startFraction ".concat(e," and endFraction ").concat(t))}(n=null==n?0:n,r=null==r?1:r);let a=0;return Promise.all(e.map(i=>(i.then(i=>{let s=n+ ++a/e.length*(r-n);return t(s),i}),i)))}async function _b(e,t){null==t&&(t={});let n=null==t.fetchFunc?Cs().platform.fetch:t.fetchFunc,r=e.map(e=>n(e,t.requestInit,{isBinary:!0})),a=(null==t.onProgress?await Promise.all(r):await Eb(r,t.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==t.onProgress?await Promise.all(a):await Eb(a,t.onProgress,.5,1)}async function Tb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return Lb(e=>_b(e,{requestInit:r}))(e,t,n)}function Lb(e){return async function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,a=t.map(()=>!1),i={},s=null!=r?r.map(()=>!1):[],o=[];if(t.forEach((e,t)=>{let n=0;e.weights.forEach(e=>{let l="quantization"in e?e.quantization.dtype:e.dtype,c=FA[l]*Oi(e.shape),u=()=>{a[t]=!0,null==i[t]&&(i[t]=[]),i[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=r?r.forEach((t,n)=>{t===e.name&&(u(),s[n]=!0)}):u(),o.push(e.name),n+=c})}),!s.every(e=>e)){let e=r.filter((e,t)=>!s[t]);throw new Error("Could not find weights in manifest with names: ".concat(e.join(", "),". \nManifest JSON has weights with names: ").concat(o.join(", "),"."))}let l=a.reduce((e,t,n)=>(t&&e.push(n),e),[]),c=[];l.forEach(e=>{t[e].paths.forEach(e=>{let t=n+(n.endsWith("/")?"":"/")+e;c.push(t)})});let u=await e(c),A={},d=0;return l.forEach(e=>{let n=t[e].paths.length,r=new EA(u.slice(d,d+n));i[e].forEach(e=>{let t=$A(r.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(let n in t)A[n]=t[n]}),d+=n}),A}}fd.registerSaveRouter(e=>Cs().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ib.URL_SCHEME)?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new Ib(e)}(e.slice(Ib.URL_SCHEME.length)):null);var Db=class{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(Di("function"==typeof t.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=Cs().platform.fetch,Di(null!=e&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&Di(2===e.length,()=>"URL paths for http must have a length of 2, (actual length is ".concat(e.length,").")),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{},this.loadOptions=t}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;let n=ud(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){let n=EA.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}let r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:hd(e),responses:[r]};throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status ".concat(r.status,"."))}async loadModelJSON(){let e,t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error("Request to ".concat(this.path," failed with status code ").concat(t.status,". Please verify this URL points to the model JSON of the model to load."));try{e=await t.json()}catch(a3){let t="Failed to parse model JSON of response from ".concat(this.path,".");throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}let n=e.modelTopology,r=e.weightsManifest;if(null==n&&null==r)throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model topology or manifest for weights."));return e}async load(){if(this.loadOptions.streamWeights)return this.loadStream();return dd(await this.loadModelJSON(),e=>this.loadWeights(e))}async loadStream(){let e=await this.loadModelJSON(),t=await this.getWeightUrls(e.weightsManifest),n=pd(e.weightsManifest);return Object.assign(Object.assign({},e),{weightSpecs:n,getWeightStream:()=>function(e,t){var n;let r,a=null==t.fetchFunc?Cs().platform.fetch:t.fetchFunc,i=0;return null===(n=t.onProgress)||void 0===n||n.call(t,0),new ReadableStream({pull:async n=>{for(var s;i<e.length;){r||(r=(await a(e[i],t.requestInit,{isBinary:!0})).body.getReader());let{done:o,value:l}=await r.read();if(!o)return void n.enqueue(l);i++,r=void 0,null===(s=t.onProgress)||void 0===s||s.call(t,i/e.length)}n.close()}})}(t,this.loadOptions)})}async getWeightUrls(e){let t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){let t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),a=n>t?e.substring(n):"";return[r+"/",a]}(t),a=this.weightPathPrefix||n,i=[],s=[];for(let o of e)for(let e of o.paths)null!=this.weightUrlConverter?s.push(this.weightUrlConverter(e)):i.push(a+e+r);return this.weightUrlConverter&&i.push(...await Promise.all(s)),i}async loadWeights(e){let t=await this.getWeightUrls(e);return[pd(e),await _b(t,this.loadOptions)]}};function Rb(e){return null!=e.match(Db.URL_SCHEME_REGEX)}Db.URL_SCHEME_REGEX=/^https?:\/\//;var Ub=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every(e=>Rb(e)):Rb(e),n)return Ob(e,t)}return null};function Ob(e,t){return new Db(e,t)}function Mb(e,t){return Ob(e,t)}fd.registerSaveRouter(Ub),fd.registerLoadRouter(Ub);var Pb=class{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}},Qb=class{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}},jb=class{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}};function Hb(e,t,n,r){return new jb(zb(...arguments))}function zb(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new Pb(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Pb({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Pb({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function Wb(e){return new Qb(e)}function Vb(e){return new Qb(e)}var Gb={};ei(Gb,{confusionMatrix:()=>Kb});var Kb=BA({confusionMatrix_:function(e,t,n){let r=xA(e,"labels","confusionMatrix"),a=xA(t,"predictions","confusionMatrix");Di(null==n||n>0&&Number.isInteger(n),()=>"If provided, numClasses must be a positive integer, but got ".concat(n)),Di(1===r.rank,()=>"Expected the rank of labels to be 1, but got ".concat(r.rank)),Di(1===a.rank,()=>"Expected the rank of predictions to be 1, but got ".concat(a.rank)),Di(r.shape[0]===a.shape[0],()=>"Mismatch in the number of examples: ".concat(r.shape[0]," vs. ").concat(a.shape[0],". Labels and predictions should have the same number of elements.")),Di(n>0&&Number.isInteger(n),()=>"numClasses is required to be a positive integer, but got ".concat(n));let i=Zf(Jd(r,"int32"),n),s=Zf(Jd(a,"int32"),n),o=Pg(i),l=Rh(o,s);return Jd(l,"int32")}}),qb={};ei(qb,{draw:()=>nw,fromPixels:()=>rw,fromPixelsAsync:()=>$b,toPixels:()=>tw});var Xb,Jb=!1;function Yb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,a=!1,i=!1,s=!1,o=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)s=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ".concat(e.constructor.name));o=!0}if(null!=Yc(Hc,AA.backendName)){let n={pixels:e},r={numChannels:t};return AA.runKernel(Hc,n,r)}let l,c,[u,A]=a?[e.videoWidth,e.videoHeight]:[e.width,e.height];if(s)l=e.getContext("2d").getImageData(0,0,u,A).data;else if(r||n)l=e.data;else if(i||a||o){if(null==Xb)if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas||"undefined"==typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");Xb=new OffscreenCanvas(1,1).getContext("2d")}else Xb=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Xb.canvas.width=u,Xb.canvas.height=A,Xb.drawImage(e,0,0,u,A),l=Xb.getImageData(0,0,u,A).data}if(4===t)c=new Int32Array(l);else{let e=u*A;c=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)c[n*t+e]=l[4*n+e]}return wg(c,[A,u,t],"int32")}function Zb(e){return"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}async function $b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=null;if(Cs().getBool("WRAP_TO_IMAGEBITMAP")&&Zb(e)){let t;try{t=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch(a3){t=null}n=null!=t&&t.width===e.width&&t.height===e.height?t:e}else n=e;return Yb(n,t)}function ew(e){if(2!==e.rank&&3!==e.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(e.rank,"."));let t=2===e.rank?1:e.shape[2];if(t>4||2===t)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got ".concat(t));if("float32"!==e.dtype&&"int32"!==e.dtype)throw new Error("Unsupported type for toPixels: ".concat(e.dtype,". Please use float32 or int32 tensors."))}async function tw(e,t){let n=xA(e,"img","toPixels");if(!(e instanceof ju)){let e=n;n=Jd(e,"int32"),e.dispose()}ew(n);let[r,a]=n.shape.slice(0,2),i=2===n.rank?1:n.shape[2],s=await n.data(),o="float32"===n.dtype?255:1,l=new Uint8ClampedArray(a*r*4);for(let c=0;c<r*a;++c){let e=[0,0,0,255];for(let r=0;r<i;r++){let t=s[c*i+r];if("float32"===n.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ".concat(t,"."))}else if("int32"===n.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ".concat(t,"."));1===i?(e[0]=t*o,e[1]=t*o,e[2]=t*o):e[r]=t*o}let t=4*c;l[t+0]=Math.round(e[0]),l[t+1]=Math.round(e[1]),l[t+2]=Math.round(e[2]),l[t+3]=Math.round(e[3])}if(null!=t){Jb||null!=Yc(Bo,AA.backendName)&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),Jb=!0),t.width=a,t.height=r;let e=t.getContext("2d"),n=new ImageData(l,a,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),l}function nw(e,t,n){let r=xA(e,"img","draw");if(!(e instanceof ju)){let e=r;r=Jd(e,"int32"),e.dispose()}ew(r),function(e){let t=(null==e?void 0:e.alpha)||1;if(t>1||t<0)throw new Error("Alpha value ".concat(t," is suppoed to be in range [0 - 1]."))}(null==n?void 0:n.imageOptions);let a={image:r},i={canvas:t,options:n};AA.runKernel(Bo,a,i)}var rw=BA({fromPixels_:Yb}),aw={};function iw(e,t){let n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: ".concat(t.shape[r-1]," vs. ").concat(n));if(0===Oi(e.shape))throw new Error("Requested more than 0 entries, but input is empty. Input shape: ".concat(e.shape,"."));let a=t.shape,i=a[a.length-1],s=1;for(let A=0;A<a.length-1;++A)s*=a[A];let o=e.shape,l=a.slice();l.pop();let c=1;for(let A=i;A<n;++A)c*=o[A],l.push(o[A]);let u=[...cs(e.shape).map(e=>e/c),1].slice(0,i);return[l,s,c,u]}ei(aw,{prepareAndValidate:()=>iw});var sw={};ei(sw,{assertParamsValid:()=>cw,computeFlatOffset:()=>xw,computeOutShape:()=>Aw,getNormalizedAxes:()=>fw,isSliceContinous:()=>vw,maskToAxes:()=>uw,parseSliceParams:()=>Cw,sliceInfo:()=>kw,startForAxis:()=>bw,startIndicesWithElidedDims:()=>mw,stopForAxis:()=>ww,stopIndicesWithElidedDims:()=>gw,stridesForAxis:()=>yw,stridesWithElidedDims:()=>dw});var ow=-2,lw=-1;function cw(e,t,n){let r=e.shape.length;Di(r===t.length,()=>"Error in slice".concat(r,"D: Length of begin ").concat(t," must match the rank of the array (").concat(r,").")),Di(r===n.length,()=>"Error in slice".concat(r,"D: Length of size ").concat(n," must match the rank of the array (").concat(r,")."));for(let a=0;a<r;++a)Di(t[a]+n[a]<=e.shape[a],()=>"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] (").concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")"))}function uw(e){let t=[],n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Aw(e,t,n){let r=[];for(let a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function dw(e,t,n,r){let a=[...e];for(let i=a.length;i<r.length;i++)a.push(1);for(let i=0;i<n;i++)0===i?a[t]=1:(a.splice(t,0,1),a.pop());return a}function hw(e,t,n){return n<=e?n:n-(t-1)}function pw(e,t){let n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function fw(e,t,n,r,a,i,s,o,l){let c=e.length,u=new Array(c),A=new Array(c),d=new Array(c);if(t.length&&n>0){let l=t[0],c=n+1;u=mw(s,l,c,r,e),A=gw(o,l,c,a,e),d=dw(i,l,c,e)}else for(let h=0;h<c;h++)u[h]=bw(s,r,i,e,h,l),A[h]=ww(o,a,i,e,h,l),d[h]=yw(i,h,l);return{begin:u,end:A,strides:d}}function mw(e,t,n,r,a){let i=[...a],s=pw(n,t);for(let o=0;o<i.length;o++)if(s.indexOf(o)>-1)i[o]=0;else{let a=hw(t,n,o),s=r[a];e&1<<a&&(s=0),i[o]=s}return i}function gw(e,t,n,r,a){let i=[...a],s=pw(n,t);for(let o=0;o<i.length;o++)if(s.indexOf(o)>-1)i[o]=Number.MAX_SAFE_INTEGER;else{let a=hw(t,n,o),s=r[a];e&1<<a&&(s=Number.MAX_SAFE_INTEGER),i[o]=s}for(let o=0;o<i.length;o++){let e=a[o];i[o]<0&&(i[o]+=e),i[o]=Ni(0,i[o],a[o])}return i}function yw(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function bw(e,t,n,r,a,i){let s=t[a],o=n[a]||1;(e&1<<a||i&1<<a||null==s)&&(s=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);let l=r[a];return s<0&&(s+=l),s=Ni(0,s,l-1),s}function ww(e,t,n,r,a,i){let s=t[a],o=n[a]||1;(e&1<<a||i&1<<a||null==s)&&(s=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);let l=r[a];return s<0&&(s+=l),s=o>0?Ni(0,s,l):Ni(-1,s,l-1),s}function vw(e,t,n){let r=n.length;for(let a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(let a=r+1;a<n.length;a++)if(t[a]>0||n[a]!==e[a])return!1;return!0}function xw(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Cw(e,t,n){let r,a,i=e.shape.length;return r="number"==typeof t?[t,...new Array(i-1).fill(0)]:t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice(),r.forEach(e=>{Di(-1!==e,()=>"slice() does not support negative begin indexing.")}),a=null==n?new Array(i).fill(-1):"number"==typeof n?[n,...new Array(i-1).fill(-1)]:n.length<i?n.concat(new Array(i-n.length).fill(-1)):n,a=a.map((t,n)=>t>=0?t:(Di(-1===t,()=>"Negative size values should be exactly -1 but got ".concat(t," for the slice() size at index ").concat(n,".")),e.shape[n]-r[n])),[r,a]}function kw(e,t,n,r,a,i,s,o,l){let c;if(null==r?(c=new Array(t.length),c.fill(1)):c=r,null!=s&&s&s-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1,A={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:i,ellipsisMask:s,newAxisMask:o,shrinkAxisMask:l};for(let y=0;y<A.dims;y++)u&&1<<y&o&&A.numAddAxisAfterEllipsis++,1<<y&s&&(u=!0);u||(A.ellipsisMask|=1<<A.dims,A.dims++);let d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){let a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(ow),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input has only ").concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(lw),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(A,d);let h=!0,p=!0,f=!0,m=[],g=[];for(let y=0;y<e.length;++y){if(0===d.strides[y])throw Error("strides[".concat(y,"] must be non-zero"));let t=!!(d.shrinkAxisMask&1<<y),n=e[y];if(-1===n){m.push(t?1:-1);continue}let r=[d.beginMask&1<<y,d.endMask&1<<y],a=[d.strides[y]>0?0:-1,d.strides[y]>0?n:n-1];if(t&&d.strides[y]<=0)throw Error("only stride 1 allowed on non-range indexing.");f=f&&1===d.strides[y];let i=!!(d.beginMask&1<<y&&d.endMask&1<<y);if(d.beginValid&&d.endValid){if(t){let e=d.begin[y]<0?n+d.begin[y]:d.begin[y];if(d.begin[y]=e,d.end[y]=d.begin[y]+1,e<0||e>=n)throw Error("slice index ".concat(d.begin[y]," of dimension ").concat(y," out of bounds."))}else d.begin[y]=Bw(d.begin[y],0,d.strides[y],n,r,a),d.end[y]=Bw(d.end[y],1,d.strides[y],n,r,a);let e=1===d.strides[y]&&0===d.begin[y]&&d.end[y]===n;h=h&&e,p=p&&(0===y&&1===d.strides[y]||e)}else h=h&&1===d.strides[y]&&i,p=p&&(0===y&&1===d.strides[y]||i);let s,o=!1;if(d.beginValid&&d.endValid?(s=d.end[y]-d.begin[y],o=!0):t?(s=1,o=!0):i&&n>=0&&(s=d.strides[y]<0?-n:n,o=!0),o){let e;e=0===s||s<0!=d.strides[y]<0?0:Math.trunc(s/d.strides[y])+(s%d.strides[y]!==0?1:0),m.push(e)}else m.push(-1)}for(let y=0;y<d.finalShapeGatherIndices.length;++y){let e=d.finalShapeGatherIndices[y];e>=0?g.push(m[e]):e===ow&&g.push(1)}return{finalShapeSparse:g.filter((e,t)=>d.finalShapeGatherIndices[t]!==ow),finalShape:g,isIdentity:h,sliceDim0:p,isSimpleSlice:f,begin:d.begin,end:d.end,strides:d.strides}}function Bw(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];{let t=e<0?r+e:e;return t<i[0]?i[0]:t>i[1]?i[1]:t}}var Sw="4.22.0",Iw=class{static sgd(e){return new vb(e)}static momentum(e,t){return new xb(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}static rmsprop(e){return new Cb(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]&&arguments[4])}static adam(){return new bb(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)}static adadelta(){return new gb(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}static adamax(){return new wb(arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)}static adagrad(e){return new yb(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1)}},Nw=Iw,Fw="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:e=>e();function Ew(){return new Promise(e=>Fw(()=>e()))}var _w,Tw={};function Lw(e,t){let n=e[0].length;e.forEach((e,t)=>{Di(e.length===n,()=>"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same as the rank of the rest (").concat(n,")"))}),Di(t>=0&&t<n,()=>"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,"."));let r=e[0];e.forEach((e,a)=>{for(let i=0;i<n;i++)Di(i===t||e[i]===r[i],()=>"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") does not match the shape of the rest (").concat(r,") along the non-concatenated axis ").concat(a,"."))})}function Dw(e,t){let n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}function Rw(e,t,n){let r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.rank = ").concat(e+n.length,", but shape.rank = ").concat(r.length));for(let a=1;a<n.length;++a){let i=n[a],s=r[r.length-n.length+a],o=r[s];if(i>=0)if(o>=0){if(o!==i)throw new Error("rt input.shape and shape=".concat(t," are incompatible: rt input.shape[").concat(a+e,"] = ").concat(i," but shape[").concat(a+e,"] = ").concat(o))}else r[s]=i}return r}function Uw(e){let t={FIRST_DIM_SIZE:_w.FIRST_DIM_SIZE,VALUE_ROWIDS:_w.VALUE_ROWIDS,ROW_LENGTHS:_w.ROW_LENGTHS,ROW_SPLITS:_w.ROW_SPLITS,ROW_LIMITS:_w.ROW_LIMITS,ROW_STARTS:_w.ROW_STARTS},n=[];for(let r of e){if(!(r in t))break;n.push(t[r])}return n}function Ow(e){return 0===e.length?0:e[0]===_w.FIRST_DIM_SIZE?e.length-1:e.length}function Mw(e,t){if(null==e||null==t)return;let n=e.length,r=t.length;if(n>=r)throw new Error("defaultValue.shape=".concat(e," and ragged tensor flatValues.shape=").concat(t,", are incompatible: defaultValue.rank = ").concat(n," must be less than ragged tensor input flatValues.rank = ").concat(r,")"));for(let a=0;a<Math.min(n,r-1);++a){let n=e[a],r=t[a+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw new Error("defaultValue.shape=".concat(e,", and ragged tensor input flatValues.shape=").concat(t," are incompatible: defaultValue.shape[").concat(a-e.length,"] = ").concat(n," but ragged tensor input.flatValues.shape[").concat(a-e.length,"] = ").concat(r))}}ei(Tw,{ERF_A1:()=>Jw,ERF_A2:()=>Yw,ERF_A3:()=>Zw,ERF_A4:()=>$w,ERF_A5:()=>ev,ERF_P:()=>Xw,PARALLELIZE_THRESHOLD:()=>Pw,RowPartitionType:()=>_w,SELU_SCALE:()=>qw,SELU_SCALEALPHA:()=>Kw,applyActivation:()=>Zg,assertAndGetBroadcastShape:()=>xp,assertAxesAreInnerMostDims:()=>Up,assertParamsConsistent:()=>Lw,assignToTypedArray:()=>sv,axesAreInnerMostDims:()=>Tp,calculateShapes:()=>Ig,checkEinsumDimSizes:()=>fv,checkPadOnDimRoundingMode:()=>Eh,combineLocations:()=>Lp,combineRaggedTensorToTensorShapes:()=>Rw,complexWithEvenIndex:()=>rv,complexWithOddIndex:()=>av,computeConv2DInfo:()=>bh,computeConv3DInfo:()=>wh,computeDefaultPad:()=>vh,computeDilation2DInfo:()=>mh,computeOptimalWindowSize:()=>Qw,computeOutAndReduceShapes:()=>Dp,computeOutShape:()=>Dw,computePool2DInfo:()=>gh,computePool3DInfo:()=>yh,convertConv2DDataFormat:()=>Fh,decodeEinsumEquation:()=>hv,eitherStridesOrDilationsAreOne:()=>Ih,expandShapeToKeepDim:()=>Rp,exponent:()=>lv,exponents:()=>ov,fromStringArrayToUint8:()=>Ov,fromUint8ToStringArray:()=>Uv,getAxesPermutation:()=>Op,getBroadcastDims:()=>wp,getComplexWithIndex:()=>iv,getEinsumComputePath:()=>mv,getEinsumPermutation:()=>pv,getFusedBiasGradient:()=>Yg,getFusedDyActivation:()=>Jg,getImageCenter:()=>jw,getInnerMostAxes:()=>Pp,getPermuted:()=>zw,getRaggedRank:()=>Ow,getReductionAxes:()=>vp,getReshaped:()=>Hw,getReshapedPermuted:()=>Ww,getRowPartitionTypesHelper:()=>Uw,getSliceBeginCoords:()=>Vw,getSliceSize:()=>Gw,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>wv,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>vv,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>xv,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>Bv,getSparseReshapeInputOutputMismatchErrorMessage:()=>Iv,getSparseReshapeInputOutputMultipleErrorMessage:()=>Sv,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>Cv,getSparseReshapeNegativeOutputDimErrorMessage:()=>kv,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>_v,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>Nv,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>Fv,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>Ev,getUndoAxesPermutation:()=>Mp,isIdentityPermutation:()=>gv,log:()=>qc,mergeRealAndImagArrays:()=>tv,prepareAndValidate:()=>iw,prepareSplitSize:()=>bv,segment_util:()=>Tv,shouldFuse:()=>$g,slice_util:()=>sw,splitRealAndImagArrays:()=>nv,stridesOrDilationsArePositive:()=>Nh,tupleValuesAreOne:()=>Sh,upcastType:()=>Zu,validateDefaultValueShape:()=>Mw,validateInput:()=>Sg,validateUpdateShape:()=>Bg,warn:()=>Kc}),function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(_w||(_w={}));var Pw=30;function Qw(e){return e<=Pw?e:ls(e,Math.floor(Math.sqrt(e)))}function jw(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function Hw(e,t,n){let r=[];if(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])r=r.concat(t.slice(0)),r.push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);let n=t.length;for(let a=0;a<n;++a)r=r.concat([e[a+1]/t[a],t[a]]);r=r.concat(e.slice(n+1))}return r}function zw(e,t){let n=[];if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]){n.push(t);for(let r=t+1;r<e;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{let r=[],a=[];for(let n=1;n<e;++n)n>=2*t+1||n%2===1?a.push(n):r.push(n);n.push(...r),n.push(0),n.push(...a)}return n}function Ww(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(let i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function Vw(e,t){let n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function Gw(e,t,n){let r=e.slice(0,1);for(let a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var Kw=1.7580993408473768,qw=1.0507009873554805,Xw=.3275911,Jw=.254829592,Yw=-.284496736,Zw=1.421413741,$w=-1.453152027,ev=1.061405429;function tv(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:".concat(e.length,", imag: ").concat(t.length,"."));let n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function nv(e){let t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function rv(e){let t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function av(e){let t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function iv(e,t){return{real:e[2*t],imag:e[2*t+1]}}function sv(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function ov(e,t){let n=new Float32Array(e/2),r=new Float32Array(e/2);for(let a=0;a<Math.ceil(e/2);a++){let i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function lv(e,t,n){let r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var cv="->",uv=/->/g,Av=",",dv="...";function hv(e,t){let n=((e=e.replace(/\s/g,"")).length-e.replace(uv,"").length)/cv.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(cv,'").'));let[r,a]=e.split(cv);Di(-1===r.indexOf(dv),()=>'The ellipsis notation ("'.concat(dv,'") is not supported yet.'));let i=r.split(Av),s=i.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let o=[];for(let A=0;A<a.length;++A){let e=a[A];if(!i.some(t=>-1!==t.indexOf(e)))throw new Error("Output subscripts contain the label ".concat(e," not present in the input subscripts."));-1===o.indexOf(e)&&o.push(e)}for(let A=0;A<r.length;++A){let e=r[A];-1===o.indexOf(e)&&e!==Av&&o.push(e)}let l=new Array(i.length);for(let A=0;A<s;++A){if(new Set(i[A].split("")).size!==i[A].length)throw new Error("Found duplicate axes in input component ".concat(i[A],". Support for duplicate axes in input is not implemented yet."));l[A]=[];for(let e=0;e<i[A].length;++e)l[A].push(o.indexOf(i[A][e]))}let c=o.length,u=[];for(let A=a.length;A<c;++A)u.push(A);return{allDims:o,summedDims:u,idDims:l}}function pv(e,t){let n=new Array(e);n.fill(-1);for(let a=0;a<t.length;++a)n[t[a]]=a;let r=[];for(let a=0;a<e;++a)-1===n[a]&&r.push(a);return n=n.filter(e=>-1!==e),{permutationIndices:n,expandDims:r}}function fv(e,t,n){let r=new Array(e);for(let a=0;a<n.length;++a){let e=n[a].shape;for(let n=0;n<t[a].length;++n)void 0===r[t[a][n]]?r[t[a][n]]=e[n]:Di(r[t[a][n]]===e[n],()=>"Expected dimension ".concat(r[t[a][n]]," at axis ").concat(n," of input shaped ").concat(JSON.stringify(e),", but got dimension ").concat(e[n]))}}function mv(e,t){let n=e,r=[],a=0;0===e.length&&n.push(-1),a=e.length+1;for(let s=0;s<a;++s)r.push([]);let i=[];for(let s=0;s<n.length;++s){let e=yv(t,n[s]);for(let t of e)-1===i.indexOf(t)&&(r[s].push(t),i.push(t))}return{path:n,steps:r}}function gv(e){return e.every((e,t)=>e===t)}function yv(e,t){let n=[];for(let r=0;r<e.length;++r)(0===e[r].length||-1!==e[r].indexOf(t)||-1===t)&&n.push(r);return n}function bv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"==typeof t)Di(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{let a=t.reduce((e,t)=>(-1===t&&(e+=1),e),0);Di(a<=1,()=>"There should be only one negative value in split array.");let i=t.indexOf(-1);if(-1!==i){let r=t.reduce((e,t)=>t>0?e+t:e);t[i]=e.shape[n]-r}Di(e.shape[n]===t.reduce((e,t)=>e+t),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}function wv(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function vv(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function xv(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function Cv(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function kv(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function Bv(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Sv(e,t){let n=Oi(e),r=Oi(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function Iv(e,t){let n=Oi(e),r=Oi(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function Nv(){return"segment ids must be >= 0"}function Fv(){return"segment ids are not increasing"}function Ev(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function _v(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}var Tv={};function Lv(e,t){let n,r=!1;for(e<=Pw?(n=e,r=!0):n=ls(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=ls(e,n+1);return n}function Dv(e,t,n){let r=[],a=e.length;for(let i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function Rv(e,t,n,r){let a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(let A=0;A<r;++A)if(e.shape[A]!==t.shape[A])throw new Error("x.shape[".concat(A,"]: ").concat(e.shape[A]," should be equal to indices.shape[").concat(A,"]: ").concat(t.shape[A],"."));let s=e.shape[n],o=[],l=1,c=1,u=1;for(let A=0;A<r;++A)o.push(e.shape[A]),l*=e.shape[A];for(let A=r;A<n;A++)o.push(e.shape[A]),c*=e.shape[A];for(let A=r;A<a;A++)o.push(t.shape[A]);for(let A=n+1;A<i;A++)o.push(e.shape[A]),u*=e.shape[A];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:s,outputShape:o}}function Uv(e){try{return e.map(e=>Iu(e))}catch(x){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(x))}}function Ov(e){return e.map(e=>Su(e))}ei(Tv,{collectGatherOpShapeInfo:()=>Rv,computeOutShape:()=>Dv,segOpComputeOptimalWindowSize:()=>Lv});var Mv={};ei(Mv,{nonMaxSuppressionV3Impl:()=>yy,nonMaxSuppressionV4Impl:()=>by,nonMaxSuppressionV5Impl:()=>wy,whereImpl:()=>Ug}),function(){for(let e of kb)pb(e)}();var Pv={kernelName:Ns,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>nh(e,fg(Jd(n,"float32"),-1))}}},Qv={kernelName:Fs,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=Vp(Jd(n,"float32")),r=Wp(If(zp(1),t));return kf(th(e,r))}}}},jv={kernelName:Es,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=Wp(If(Vp(Jd(n,"float32")),1));return th(e,t)}}}},Hv={kernelName:_s,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=xp(n.shape,r.shape);return{a:()=>{let t=e,r=vp(n.shape,a);return r.length>0&&(t=Gp(t,r)),_h(t,n.shape)},b:()=>{let t=e,n=vp(r.shape,a);return n.length>0&&(t=Gp(t,n)),_h(t,r.shape)}}}},zv={kernelName:Ts,saveAllInputs:!0,gradFunc:(e,t)=>{let n={};return t.forEach((t,r)=>{n[r]=()=>e.clone()}),n}},Wv={kernelName:Rs,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Bp(n)}}},Vv={kernelName:Us,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Bp(n)}}},Gv={kernelName:Os,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>th(e,Wp(If(zp(1),Vp(Jd(n,"float32")))))}}},Kv={kernelName:Ms,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=Wp($d(zp(1),Vp(Jd(n,"float32"))));return th(e,t)}}}},qv={kernelName:js,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=xp(n.shape,r.shape);return{a:()=>{let t=$d(Vp(n),Vp(r)),i=nh(e,th(r,t)),s=vp(n.shape,a);return s.length>0&&(i=Gp(i,s)),_h(i,n.shape)},b:()=>{let t=$d(Vp(n),Vp(r)),i=kf(nh(e,th(n,t))),s=vp(r.shape,a);return s.length>0&&(i=Gp(i,s)),_h(i,r.shape)}}}},Xv={kernelName:Ps,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>th(e,$d(Vp(Jd(n,"float32")),1))}}},Jv={kernelName:Qs,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>th(e,If(zp(1),Vp(Jd(n,"float32"))))}}};var Yv=BA({avgPool3dGrad_:function(e,t,n,r,a,i){let s=xA(e,"dy","avgPool3dGrad"),o=xA(t,"input","avgPool3dGrad"),l=s,c=o,u=!1;4===o.rank&&(u=!0,l=_h(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),c=_h(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Di(5===l.rank,()=>"Error in avgPool3dGrad: dy must be rank 5 but got rank ".concat(l.rank,".")),Di(5===c.rank,()=>"Error in avgPool3dGrad: input must be rank 5 but got rank ".concat(c.rank,".")),Eh("avgPool3dGrad",a,i);let A={dy:l,input:c},d={filterSize:n,strides:r,pad:a,dimRoundingMode:i},h=AA.runKernel(Vs,A,d);return u?_h(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),Zv={kernelName:Ws,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:a,strides:i,pad:s,dimRoundingMode:o}=n;return{x:()=>Yv(e,r,a,i,s,o)}}};var $v=BA({avgPoolGrad_:function(e,t,n,r,a){let i=xA(e,"dy","avgPoolGrad"),s=xA(t,"input","avgPoolGrad");Di(s.rank===i.rank,()=>"Rank of input (".concat(s.rank,") does not match rank of dy (").concat(i.rank,")"));let o=s,l=i,c=!1;3===s.rank&&(c=!0,o=_h(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=_h(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Di(4===l.rank,()=>"Error in avgPoolGrad: dy must be rank 4 but got rank ".concat(l.rank,".")),Di(4===o.rank,()=>"Error in avgPoolGrad: input must be rank 4 but got rank ".concat(o.rank,"."));let u={dy:l,input:o},A={filterSize:n,strides:r,pad:a},d=AA.runKernel(zs,u,A);return c?_h(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),ex={kernelName:Hs,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:a,strides:i,pad:s}=n;return{x:()=>$v(e,r,a,i,s)}}},tx={kernelName:Gs,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{let[r,a]=t,{transposeA:i,transposeB:s}=n;return i||s?!i&&s?{a:()=>Rh(e,a,!1,!1),b:()=>Rh(e,r,!0,!1)}:i&&!s?{a:()=>Rh(a,e,!1,!0),b:()=>Rh(r,e,!1,!1)}:{a:()=>Rh(a,e,!0,!0),b:()=>Rh(e,r,!0,!0)}:{a:()=>Rh(e,a,!1,!0),b:()=>Rh(r,e,!0,!1)}}},nx={kernelName:Ks,gradFunc:(e,t,n)=>{let{blockShape:r,crops:a}=n;return{x:()=>sm(e,r,a)}}},rx={kernelName:Js,gradFunc:(e,t,n)=>{let r=n,a=r.inputShape,i=r.shape,s=Array.from(i);for(let l=a.length-1;l>=0;l--)if(a[l]===i[l])s[l]=1;else if(1!==a[l])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));let o=[];for(let l=0;l<s.length;l++)s[l]>1&&o.push(l);return{x:()=>Gp(e,o,!0)}}},ax={kernelName:Zs,gradFunc:e=>({x:()=>e.clone()})},ix={kernelName:$s,gradFunc:e=>({x:()=>Bp(e)})},sx={kernelName:eo,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{clipValueMin:a,clipValueMax:i}=n;return{x:()=>kp(Ef(af(r,a),df(r,i)),e,Bp(e))}}},ox={kernelName:no,inputsToSave:["x"],gradFunc:Pv.gradFunc},lx={kernelName:ro,saveAllInputs:!0,gradFunc:(e,t,n)=>{let r=t.map(e=>e.shape),{axis:a}=n,i=qi(a,t[0].shape)[0],s=r.map(e=>e[i]);return ug(e,s,i).map(e=>()=>e)}},cx={kernelName:ao,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,{dilations:i,strides:s,pad:o,dataFormat:l}=n;return Di(Sh(i),()=>"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(i,"'")),{x:()=>ip(r.shape,e,a,s,o,l),filter:()=>Xg(r,e,a.shape,s,o,l)}}},ux={kernelName:so,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,{strides:i,pad:s,dataFormat:o,dimRoundingMode:l}=n;return{dy:()=>rp(e,a,i,s,o,1,l),filter:()=>Xg(e,r,a.shape,i,s,o,l)}}};var Ax=BA({conv3DBackpropFilter_:function(e,t,n,r,a){let i=e;4===e.rank&&(i=_h(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let s=t;4===s.rank&&(s=_h(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),Di(5===i.rank,()=>"Error in conv3dDerFilter: input must be rank 5, but got shape ".concat(i.shape,".")),Di(5===s.rank,()=>"Error in conv3dDerFilter: dy must be rank 5, but got shape ".concat(s.shape,".")),Di(5===n.length,()=>"Error in conv3dDerFilter: filterShape must be length 5, but got ".concat(n,".")),Di(i.shape[4]===n[3],()=>"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must match input depth in filter (").concat(n[3],".")),Di(s.shape[4]===n[4],()=>"Error in conv3dDerFilter: depth of dy (".concat(s.shape[4],") must match output depth for filter (").concat(n[4],")."));let o={x:i,dy:s},l={strides:r,pad:a,filterShape:n};return AA.runKernel(lo,o,l)}}),dx={kernelName:oo,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:a,pad:i}=n;Di(Sh(r),()=>"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(r,"'"));let[s,o]=t;return{x:()=>lp(s.shape,e,o,a,i),filter:()=>Ax(s,e,o.shape,a,i)}}},hx={kernelName:uo,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>nh(kf(eg(Jd(n,"float32"))),e)}}},px={kernelName:Ao,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>nh(tg(Jd(n,"float32")),e)}}},fx={kernelName:po,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a,exclusive:i,reverse:s}=n;return{x:()=>{let t=Op([a],r.rank),n=hp(e,a,i,!s);return null!=t&&(n=Pg(n,t)),n}}}},mx={kernelName:yo,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:a,pad:i,dimRoundingMode:s}=n,o=null==r?[1,1]:r;Di(Sh(o),()=>"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '".concat(o,"'"));let[l,c]=t;return Di(4===l.rank,()=>"Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ".concat(l.rank,".")),Di(4===c.rank,()=>"Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ".concat(c.rank,".")),Di(l.shape[3]===c.shape[2],()=>"Error in gradient of depthwiseConv2d: number of input channels (".concat(l.shape[3],") must match the inChannels dimension in filter ").concat(c.shape[2],".")),Di(Ih(a,o),()=>"Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ".concat(a," and dilations '").concat(o,"'.")),Eh("depthwiseConv2d",i,s),{x:()=>ny(l.shape,e,c,a,i,o,s),filter:()=>ty(l,e,c.shape,a,i,o,s)}}},gx={kernelName:xo,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,a]=t,i={x:r,filter:a,dy:e},s={x:r,filter:a,dy:e};return{x:()=>AA.runKernel(Co,i,n),filter:()=>AA.runKernel(ko,s,n)}}},yx={kernelName:No,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t,r={dy:e,y:n};return{x:()=>AA.runKernel(Fo,r)}}},bx={kernelName:Eo,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=nh(Jp(kf(Vp(n))),2/Math.sqrt(Math.PI));return{x:()=>nh(e,r)}}},wx={kernelName:To,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>nh(e,n)}}},vx={kernelName:Lo,inputsToSave:["input"],gradFunc:(e,t)=>{let[n]=t;return{input:()=>_h(e,n.shape)}}},xx={kernelName:Do,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>nh(e,Jp(n))}}},Cx={kernelName:Mo,gradFunc:e=>({x:()=>Bp(e)})},kx={kernelName:Po,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=xp(n.shape,r.shape);return{a:()=>{let t=th(e,Jd(r,"float32")),i=vp(n.shape,a);return i.length>0?_h(Gp(t,i),n.shape):t},b:()=>{let t=nh(e,Jd(n,"float32")),i=vp(r.shape,a);i.length>0&&(t=_h(Gp(t,i),r.shape));let s=Vp(r);return kf(th(t,Jd(s,"float32")))}}}},Bx={kernelName:Qo,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{let{varianceEpsilon:r}=n,[a,i,s,o]=t,l=null==o?zp(1):o,c=vp(i.shape,a.shape),u=[];if(1===i.rank){for(let e=0;e<a.shape.length-1;++e)u.push(a.shape[e]);u.push(1)}let A=If(a,i),d=nh(e,l),h=Xm($d(s,zp(r))),p=nh(nh(nh(h,h),h),zp(-.5));return{x:()=>1===i.rank?_h(nh(nh(e,$p(_h(h,[1,1,1,i.shape[0]]),u)),l),a.shape):_h(nh(nh(e,h),l),a.shape),mean:()=>{let e=nh(nh(h,zp(-1)),d);return 1===i.rank&&(e=Gp(e,c)),_h(e,i.shape)},variance:()=>{let e=nh(nh(p,A),d);return 1===i.rank&&(e=Gp(e,c)),_h(e,i.shape)},scale:()=>{let t=nh(A,h),n=nh(e,t);return 1===i.rank&&(n=Gp(n,c)),_h(n,i.shape)},offset:()=>{let t=e;return 1===i.rank&&(t=Gp(t,c)),_h(t,i.shape)}}}},Sx={kernelName:jo,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{let[r,a]=t,{axis:i,batchDims:s}=n,o=qi(i,r.shape)[0],l=(e,t,n)=>()=>{let r=e.shape,a=t.size,s=r.slice(0,o),l=s.length,c=r.slice(i,r.length).slice(1),u=c.length,A=Ix(0,l),d=Ix(l+1,l+1+u),h=Nx([s,[a],c]),p=_h(n,h),f=_h(t,[a]),m=Nx([[l],A,d]),g=Pg(p,m),y=Tg(g,f,e.shape[o]),b=Mp(m);return y=Pg(y,b),y};if(1===s){let t=r.shape[0],n=r.split(t,0);return{x:()=>pg(n.map((t,n)=>l(t,a.slice(n,1),e.slice(n,1))())).reshape(r.shape),indices:()=>a}}return{x:l(r,a,e),indices:()=>a}}};function Ix(e,t){let n=[];for(let r=e;r<t;++r)n.push(r);return n}function Nx(e){let t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Fx={kernelName:Wo,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>Bp(n),b:()=>Bp(r)}}},Ex={kernelName:Vo,gradFunc:e=>({x:()=>Jd(e,"float32")})},_x={kernelName:qo,gradFunc:e=>({x:()=>Bp(e)})},Tx={kernelName:Xo,gradFunc:e=>({x:()=>Bp(e)})},Lx={kernelName:Jo,gradFunc:e=>({x:()=>Bp(e)})},Dx={kernelName:Yo,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{alpha:a}=n,i=rf(r,0);return{x:()=>kp(i,e,nh(e,a))}}},Rx={kernelName:nl,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>th(e,$d(n,1))}}},Ux={kernelName:tl,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>th(e,Jd(n,"float32"))}}},Ox={kernelName:ol,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n;return{logits:()=>{let t=Jp(r);return If(e,nh(Gp(e,a,!0),t))}}}};var Mx=BA({localResponseNormalizationBackprop_:function(e,t,n){let r={x:e,y:t,dy:n},a={depthRadius:arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,bias:arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,alpha:arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,beta:arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5};return AA.runKernel(ul,r,a)}}),Px={kernelName:cl,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{depthRadius:i,bias:s,alpha:o,beta:l}=n;return{x:()=>Mx(r,a,e,i,s,o,l)}}};function Qx(e,t,n,r){return t.rank<n.rank&&(t=_h(t,Rp(t.shape,r))),e.rank<n.rank&&(e=_h(e,Rp(e.shape,r))),{x:()=>nh(e,Jd(Cp(n,t),e.dtype))}}var jx={kernelName:dl,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let r=n,{reductionIndices:a}=r,i=t[0],s=Qx(e,t[1],i,qi(a,i.shape));return{x:()=>s.x()}}},Hx={kernelName:hl,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>nh(e,Jd(af(n,r),"float32")),b:()=>nh(e,Jd(Af(n,r),"float32"))}}};var zx=BA({maxPool3dGrad_:function(e,t,n,r,a,i,s){let o=xA(e,"dy","maxPool3dGrad"),l=xA(t,"input","maxPool3dGrad"),c=xA(n,"output","maxPool3dGrad"),u=o,A=l,d=c,h=!1;4===l.rank&&(h=!0,u=_h(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),A=_h(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=_h(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),Di(5===u.rank,()=>"Error in maxPool3dGrad: dy must be rank 5 but got rank ".concat(u.rank,".")),Di(5===A.rank,()=>"Error in maxPool3dGrad: input must be rank 5 but got rank ".concat(A.rank,".")),Di(5===d.rank,()=>"Error in maxPool3dGrad: output must be rank 5 but got rank ".concat(d.rank,".")),Eh("maxPool3dGrad",i,s);let p={dy:u,input:A,output:d},f={filterSize:r,strides:a,pad:i,dimRoundingMode:s},m=AA.runKernel(gl,p,f);return h?_h(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}}),Wx={kernelName:ml,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=n;return{x:()=>zx(e,r,a,i,s,o,l)}}};var Vx=BA({maxPoolGrad_:function(e,t,n,r,a,i,s){let o=xA(e,"dy","maxPoolGrad"),l=xA(t,"input","maxPoolGrad"),c=xA(n,"output","maxPoolGrad");Di(l.rank===o.rank,()=>"Rank of input (".concat(l.rank,") does not match rank of dy (").concat(o.rank,")")),Di(4===o.rank,()=>"Error in maxPoolGrad: dy must be rank 4 but got rank ".concat(o.rank,".")),Di(4===l.rank,()=>"Error in maxPoolGrad: input must be rank 4 but got rank ".concat(l.rank,".")),Eh("maxPoolGrad",i,s);let u={dy:o,input:l,output:c},A={filterSize:r,strides:a,pad:i,dimRoundingMode:s};return AA.runKernel(fl,u,A)}}),Gx={kernelName:pl,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,a]=t,{filterSize:i,strides:s,pad:o}=n;return{x:()=>Vx(e,r,a,i,s,o)}}},Kx={kernelName:bl,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n,i=qi(a,r.shape),s=Oi(Dp(r.shape,i)[1]);return{x:()=>{let t=r.shape.slice();i.forEach(e=>{t[e]=1});let n=_h(e,t);return th(nh(n,zf(r.shape,"float32")),s)}}}},qx={kernelName:wl,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let r=n,{axis:a}=r,[i,s]=t,o=Qx(e,s,i,qi(a,i.shape));return{x:()=>o.x()}}},Xx={kernelName:vl,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>nh(e,Jd(df(n,r),"float32")),b:()=>nh(e,Jd(rf(n,r),"float32"))}}},Jx={kernelName:xl,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:a}=n,i=a.map(e=>e[0]);return{x:()=>Oh(e,i,r.shape)}}},Yx={kernelName:Cl,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=xp(n.shape,r.shape);return{a:()=>{let t=vp(n.shape,a);return t.length>0?_h(Gp(e,t),n.shape):e},b:()=>{let t=nh(e,kf(tf(th(n,r)))),i=vp(r.shape,a);return i.length>0?_h(Gp(t,i),r.shape):t}}}},Zx={kernelName:Bl,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=xp(n.shape,r.shape);return{a:()=>{let t=nh(e,Jd(r,"float32")),i=vp(n.shape,a);return i.length>0?_h(Gp(t,i),n.shape):t},b:()=>{let t=nh(e,Jd(n,"float32")),i=vp(r.shape,a);return i.length>0?_h(Gp(t,i),r.shape):t}}}},$x={kernelName:Sl,gradFunc:e=>({x:()=>kf(e)})},eC={kernelName:Tl,inputsToSave:["indices"],gradFunc:(e,t)=>{let n=t[0];return{indices:()=>Hf(n.shape,"float32")}}},tC={kernelName:_l,gradFunc:e=>({x:()=>Bp(e)})},nC={kernelName:Ll,saveAllInputs:!0,gradFunc:(e,t,n)=>{let{axis:r}=n;return Lg(e,r).map(e=>()=>e)}},rC={kernelName:Dl,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:a}=n,i=a.map(e=>e[0]);return{x:()=>Oh(e,i,r.shape)}}},aC={kernelName:Ul,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{let[n,r,a]=t,i=n,s=r,o=xp(i.shape,s.shape);return{a:()=>{let t=Jd(s,"float32"),n=nh(e,nh(t,Hp(i,If(t,zp(1))))),r=vp(i.shape,o);return r.length>0&&(n=Gp(n,r)),_h(n,i.shape)},b:()=>{let t=rf(i,0),n=kp(t,ff(i),Bp(i)),r=nh(e,nh(a,n)),l=vp(s.shape,o);return l.length>0&&(r=Gp(r,l)),_h(r,s.shape)}}}},iC={kernelName:Ol,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{let[n,r]=t,a=rf(n,0);return{x:()=>kp(a,e,nh(e,r)),alpha:()=>{let t=kp(a,Bp(e),nh(e,n)),i=vp(r.shape,e.shape);return i.length>0&&(t=Gp(t,i)),_h(t,r.shape)}}}};function sC(e,t,n){let r=e.shape.length,a=r-n.length,i=Tw.getAxesPermutation(n,r),s=e;null!=i&&(s=Pg(e,i));let o=s.shape.slice(),l=o.splice(r-n.length,n.length).reduce((e,t)=>e*t,1);o.push(l);let c=function(e,t,n){let r=e.shape.slice();r[n]=1;let a=_h(t,r),i=dp(e,n,!0,!1),s=dp(e,n,!0,!0),o=nh(i,s);return nh(a,o)}(s.reshape(o),t,a);if(c=c.reshape(s.shape),null!=i){let e=Tw.getUndoAxesPermutation(i);c=Pg(c,e)}return c}var oC={kernelName:Ml,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:a}=n,i=[];return i=null==a?r.shape.map((e,t)=>t):"number"==typeof a?[a]:a,{x:()=>sC(r,e,i)}}},lC={kernelName:So,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=xp(n.shape,r.shape);return{a:()=>{let t=th(e,Jd(r,"float32")),i=vp(n.shape,a);return i.length>0?_h(Gp(t,i),n.shape):t},b:()=>{let t=nh(e,Jd(n,"float32")),i=vp(r.shape,a);i.length>0&&(t=_h(Gp(t,i),r.shape));let s=Vp(r);return kf(th(t,Jd(s,"float32")))}}}},cC={kernelName:Wl,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>th(e,kf(Vp(n)))}}},uC={kernelName:Yl,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=nh(df(n,6),fg(n));return{x:()=>nh(e,Jd(r,"float32"))}}},AC={kernelName:Vl,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>nh(e,Jd(fg(n),"float32"))}}},dC={kernelName:Gl,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>_h(e,n.shape)}}},hC={kernelName:Xl,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,a={dy:e,images:r};return{images:()=>AA.runKernel(Jl,a,n)}}},pC={kernelName:Kl,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,a={dy:e,images:r};return{images:()=>AA.runKernel(ql,a,n)}}},fC={kernelName:Zl,gradFunc:(e,t,n)=>{let{dims:r}=n,a=qi(r,e.shape);return{x:()=>zm(e,a)}}},mC={kernelName:$l,gradFunc:e=>({x:()=>Bp(e)})},gC={kernelName:ec,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>kf(th(e,nh(Hp(n,1.5),2)))}}},yC={kernelName:ac,inputsToSave:["condition"],gradFunc:(e,t)=>{let[n]=t;return{condition:()=>Jd(Bp(n),"float32"),t:()=>nh(e,Jd(n,e.dtype)),e:()=>nh(e,Jd(_f(n),e.dtype))}}},bC={kernelName:ic,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=rf(n,zp(0)),r=zp(Kw),a=zp(qw),i=nh(e,a),s=nh(nh(e,r),Jp(Jd(n,"float32")));return kp(t,i,s)}}}},wC={kernelName:uc,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>nh(e,nh(n,If(zp(1),n)))}}},vC={kernelName:cc,gradFunc:e=>({x:()=>Bp(e)})},xC={kernelName:oc,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>nh(up(Jd(n,"float32")),e)}}},CC={kernelName:lc,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>nh(Ap(Jd(n,"float32")),e)}}},kC={kernelName:sc,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{begin:a,size:i}=n,s=r.shape,[o,l]=Cw(r,a,i),c=[];for(let u=0;u<e.rank;u++)c.push([o[u],s[u]-o[u]-l[u]]);return{x:()=>tm(e,c)}}},BC={kernelName:mc,outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{dim:a}=n,i=nh(e,r);return{logits:()=>If(i,nh(Gp(i,[a],true),r))}}},SC={kernelName:Ac,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>nh(e,Uh(n))}}},IC={kernelName:pc,gradFunc:(e,t,n)=>{let{blockShape:r,paddings:a}=n;return{x:()=>Qh(e,r,a)}}},NC={kernelName:fc,gradFunc:(e,t,n)=>{let{axis:r}=n;return{x:()=>Dh(e,r)}}},FC={kernelName:dc,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>th(e,nh(Wp(Jd(n,"float32")),2))}}},EC={kernelName:Cc,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>nh(e,nh(Jd(n,"float32"),2))}}},_C={kernelName:xc,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=zp(2);return{a:()=>nh(e,nh(a,If(n,r))),b:()=>nh(e,nh(a,If(r,n)))}}},TC={kernelName:jc,gradFunc:e=>({x:()=>Bp(e)})},LC={kernelName:Fc,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,a=xp(n.shape,r.shape);return{a:()=>{let t=e,r=vp(n.shape,a);return r.length>0&&(t=Gp(t,r)),_h(t,n.shape)},b:()=>{let t=e,n=vp(r.shape,a);return n.length>0&&(t=Gp(t,n)),_h(kf(t),r.shape)}}}},DC={kernelName:hc,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,a=r.shape.slice(),{axis:i}=n;qi(i,r.shape).forEach(e=>{a[e]=1});let s=_h(e,a),o=nh(s,zf(r.shape,"float32"));return{x:()=>o}}},RC={kernelName:Ec,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>th(e,Vp(up(n)))}}},UC={kernelName:_c,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>nh(If(zp(1),Vp(n)),e)}}},OC={kernelName:Tc,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{reps:a}=n;return{x:()=>{let t=Bp(r);if(1===r.rank)for(let n=0;n<a[0];++n)t=$d(t,Oh(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<a[0];++n)for(let i=0;i<a[1];++i)t=$d(t,Oh(e,[n*r.shape[0],i*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<a[0];++n)for(let i=0;i<a[1];++i)for(let s=0;s<a[2];++s)t=$d(t,Oh(e,[n*r.shape[0],i*r.shape[1],s*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-".concat(r.rank," tensors yet."));for(let n=0;n<a[0];++n)for(let i=0;i<a[1];++i)for(let s=0;s<a[2];++s)for(let o=0;o<a[3];++o)t=$d(t,Oh(e,[n*r.shape[0],i*r.shape[1],s*r.shape[2],o*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},MC={kernelName:Rc,gradFunc:(e,t,n)=>{let r=n,{perm:a}=r,i=Mp(a);return{x:()=>Pg(e,i)}}},PC={kernelName:Oc,gradFunc:(e,t,n)=>{let r=n,{axis:a}=r;return{value:()=>pg(e,a)}}},QC={kernelName:Mc,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>function(e,t){let n=Qf(t,Bp(t)),r=nf(e,n),a=af(t,zp(0,"int32")),i=r.rank-a.rank;for(let o=0;o<i;++o)a=Yp(a,o+1);a=Ef(a,zf(r.shape,"bool"));let s=Bp(r);return kp(a,r,s)}(e,n)}}};var jC={kernelName:Qc,gradFunc:e=>({x:()=>Bp(e)})},HC=[Pv,Qv,jv,Hv,zv,Wv,Vv,Gv,Kv,qv,Xv,Jv,Zv,ex,tx,nx,rx,ax,ix,sx,ox,lx,ux,cx,dx,hx,px,fx,mx,gx,lC,yx,bx,wx,vx,xx,kx,Cx,Bx,Sx,Fx,Ex,_x,Tx,Lx,Dx,Rx,Ux,Ox,Px,jx,jx,Hx,Wx,Gx,Kx,qx,Xx,Jx,Yx,Zx,$x,eC,tC,nC,rC,rC,aC,iC,oC,cC,uC,AC,dC,hC,pC,fC,mC,gC,yC,bC,wC,vC,xC,CC,kC,BC,SC,IC,IC,NC,NC,FC,_C,EC,TC,LC,DC,RC,UC,OC,MC,PC,QC,jC];for(let n of HC)tu(n);Hu().prototype.abs=function(){return this.throwIfDisposed(),rh(this)},Hu().prototype.acos=function(){return this.throwIfDisposed(),ah(this)},Hu().prototype.acosh=function(){return this.throwIfDisposed(),ih(this)},Hu().prototype.add=function(e){return this.throwIfDisposed(),$d(this,e)},Hu().prototype.all=function(e,t){return this.throwIfDisposed(),oh(this,e,t)},Hu().prototype.any=function(e,t){return this.throwIfDisposed(),lh(this,e,t)},Hu().prototype.argMax=function(e){return this.throwIfDisposed(),ch(this,e)},Hu().prototype.argMin=function(e){return this.throwIfDisposed(),uh(this,e)},Hu().prototype.asScalar=function(){return this.throwIfDisposed(),Di(1===this.size,()=>"The array must have only 1 element."),_h(this,[])},Hu().prototype.asType=function(e){return this.throwIfDisposed(),Jd(this,e)},Hu().prototype.as1D=function(){return this.throwIfDisposed(),_h(this,[this.size])},Hu().prototype.as2D=function(e,t){return this.throwIfDisposed(),_h(this,[e,t])},Hu().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),_h(this,[e,t,n])},Hu().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),_h(this,[e,t,n,r])},Hu().prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),_h(this,[e,t,n,r,a])},Hu().prototype.asin=function(){return this.throwIfDisposed(),Ah(this)},Hu().prototype.asinh=function(){return this.throwIfDisposed(),dh(this)},Hu().prototype.atan=function(){return this.throwIfDisposed(),hh(this)},Hu().prototype.atan2=function(e){return this.throwIfDisposed(),ph(this,e)},Hu().prototype.atanh=function(){return this.throwIfDisposed(),fh(this)},Hu().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Th(this,e,t,n,r)},Hu().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Qh(this,e,t)},Hu().prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),Hh(this,e,t,n,r,a)},Hu().prototype.broadcastTo=function(e){return this.throwIfDisposed(),Xh(this,e)},Hu().prototype.cast=function(e){return this.throwIfDisposed(),Jd(this,e)},Hu().prototype.ceil=function(){return this.throwIfDisposed(),Jh(this)},Hu().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Zh(this,e,t)},Hu().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof ju&&(e=[e]),Dh([this,...e],t)},Hu().prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),ap(this,e,t,n,r,a,i)},Hu().prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),sp(this,e,t,n,r,a)},Hu().prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),rp(this,e,t,n,r,a,i)},Hu().prototype.cos=function(){return this.throwIfDisposed(),up(this)},Hu().prototype.cosh=function(){return this.throwIfDisposed(),Ap(this)},Hu().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),dp(this,e,t,n)},Hu().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),hp(this,e,t,n)},Hu().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),fp(this,e,t)},Hu().prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),mp(this,e,t,n,r,a,i)},Hu().prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),yp(this,e,t,n,r,a)},Hu().prototype.divNoNan=function(e){return this.throwIfDisposed(),Sp(this,e)},Hu().prototype.div=function(e){return this.throwIfDisposed(),th(this,e)},Hu().prototype.dot=function(e){return this.throwIfDisposed(),Ip(this,e)},Hu().prototype.elu=function(){return this.throwIfDisposed(),Fp(this)},Hu().prototype.equal=function(e){return this.throwIfDisposed(),Cp(this,e)},Hu().prototype.erf=function(){return this.throwIfDisposed(),_p(this)},Hu().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),Xp(this,e,t)},Hu().prototype.exp=function(){return this.throwIfDisposed(),Jp(this)},Hu().prototype.expandDims=function(e){return this.throwIfDisposed(),Yp(this,e)},Hu().prototype.expm1=function(){return this.throwIfDisposed(),Zp(this)},Hu().prototype.fft=function(){return this.throwIfDisposed(),og(this)},Hu().prototype.flatten=function(){return this.throwIfDisposed(),_h(this,[this.size])},Hu().prototype.floor=function(){return this.throwIfDisposed(),tf(this)},Hu().prototype.floorDiv=function(e){return this.throwIfDisposed(),eh(this,e)},Hu().prototype.gather=function(e,t,n){return this.throwIfDisposed(),nf(this,e,t,n)},Hu().prototype.greaterEqual=function(e){return this.throwIfDisposed(),af(this,e)},Hu().prototype.greater=function(e){return this.throwIfDisposed(),rf(this,e)},Hu().prototype.ifft=function(){return this.throwIfDisposed(),lg(this)},Hu().prototype.irfft=function(){return this.throwIfDisposed(),cg(this)},Hu().prototype.isFinite=function(){return this.throwIfDisposed(),of(this)},Hu().prototype.isInf=function(){return this.throwIfDisposed(),lf(this)},Hu().prototype.isNaN=function(){return this.throwIfDisposed(),cf(this)},Hu().prototype.leakyRelu=function(e){return this.throwIfDisposed(),uf(this,e)},Hu().prototype.lessEqual=function(e){return this.throwIfDisposed(),df(this,e)},Hu().prototype.less=function(e){return this.throwIfDisposed(),Af(this,e)},Hu().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),pf(this,e,t,n,r)},Hu().prototype.logSigmoid=function(){return this.throwIfDisposed(),Sf(this)},Hu().prototype.logSoftmax=function(e){return this.throwIfDisposed(),Nf(this,e)},Hu().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),Ff(this,e,t)},Hu().prototype.log=function(){return this.throwIfDisposed(),ff(this)},Hu().prototype.log1p=function(){return this.throwIfDisposed(),mf(this)},Hu().prototype.logicalAnd=function(e){return this.throwIfDisposed(),Ef(this,e)},Hu().prototype.logicalNot=function(){return this.throwIfDisposed(),_f(this)},Hu().prototype.logicalOr=function(e){return this.throwIfDisposed(),Tf(this,e)},Hu().prototype.logicalXor=function(e){return this.throwIfDisposed(),Lf(this,e)},Hu().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Rh(this,e,t,n)},Hu().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Of(this,e,t,n,r)},Hu().prototype.max=function(e,t){return this.throwIfDisposed(),Qp(this,e,t)},Hu().prototype.maximum=function(e){return this.throwIfDisposed(),Qf(this,e)},Hu().prototype.mean=function(e,t){return this.throwIfDisposed(),jf(this,e,t)},Hu().prototype.min=function(e,t){return this.throwIfDisposed(),jp(this,e,t)},Hu().prototype.minimum=function(e){return this.throwIfDisposed(),Vf(this,e)},Hu().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),Gf(this,e,t)},Hu().prototype.mod=function(e){return this.throwIfDisposed(),Kf(this,e)},Hu().prototype.mul=function(e){return this.throwIfDisposed(),nh(this,e)},Hu().prototype.neg=function(){return this.throwIfDisposed(),kf(this)},Hu().prototype.norm=function(e,t,n){return this.throwIfDisposed(),qp(this,e,t,n)},Hu().prototype.notEqual=function(e){return this.throwIfDisposed(),Yf(this,e)},Hu().prototype.oneHot=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.throwIfDisposed(),Zf(this,e,t,n)},Hu().prototype.onesLike=function(){return this.throwIfDisposed(),$f(this)},Hu().prototype.pad=function(e,t){return this.throwIfDisposed(),tm(this,e,t)},Hu().prototype.pool=function(e,t,n,r,a,i){return this.throwIfDisposed(),om(this,e,t,n,r,a,i)},Hu().prototype.pow=function(e){return this.throwIfDisposed(),Hp(this,e)},Hu().prototype.prelu=function(e){return this.throwIfDisposed(),lm(this,e)},Hu().prototype.prod=function(e,t){return this.throwIfDisposed(),cm(this,e,t)},Hu().prototype.reciprocal=function(){return this.throwIfDisposed(),Qm(this)},Hu().prototype.relu=function(){return this.throwIfDisposed(),jm(this)},Hu().prototype.relu6=function(){return this.throwIfDisposed(),Hm(this)},Hu().prototype.reshapeAs=function(e){return this.throwIfDisposed(),_h(this,e.shape)},Hu().prototype.reshape=function(e){return this.throwIfDisposed(),_h(this,e)},Hu().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),Ey(this,e,t,n)},Hu().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),_y(this,e,t,n)},Hu().prototype.reverse=function(e){return this.throwIfDisposed(),zm(this,e)},Hu().prototype.rfft=function(){return this.throwIfDisposed(),Ag(this)},Hu().prototype.round=function(){return this.throwIfDisposed(),qm(this)},Hu().prototype.rsqrt=function(){return this.throwIfDisposed(),Xm(this)},Hu().prototype.selu=function(){return this.throwIfDisposed(),Jm(this)},Hu().prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),Ym(this,e,t,n,r,a,i)},Hu().prototype.sigmoid=function(){return this.throwIfDisposed(),Uh(this)},Hu().prototype.sign=function(){return this.throwIfDisposed(),$m(this)},Hu().prototype.sin=function(){return this.throwIfDisposed(),eg(this)},Hu().prototype.sinh=function(){return this.throwIfDisposed(),tg(this)},Hu().prototype.slice=function(e,t){return this.throwIfDisposed(),Oh(this,e,t)},Hu().prototype.softmax=function(e){return this.throwIfDisposed(),sg(this,e)},Hu().prototype.softplus=function(){return this.throwIfDisposed(),Bf(this)},Hu().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),sm(this,e,t)},Hu().prototype.split=function(e,t){return this.throwIfDisposed(),ug(this,e,t)},Hu().prototype.sqrt=function(){return this.throwIfDisposed(),Wp(this)},Hu().prototype.square=function(){return this.throwIfDisposed(),Vp(this)},Hu().prototype.squaredDifference=function(e){return this.throwIfDisposed(),dg(this,e)},Hu().prototype.squeeze=function(e){return this.throwIfDisposed(),hg(this,e)},Hu().prototype.stack=function(e,t){this.throwIfDisposed();let n=e instanceof ju?[this,e]:[this,...e];return pg(n,t)},Hu().prototype.step=function(e){return this.throwIfDisposed(),fg(this,e)},Hu().prototype.stridedSlice=function(e,t,n,r,a,i,s,o){return this.throwIfDisposed(),mg(this,e,t,n,r,a,i,s,o)},Hu().prototype.sub=function(e){return this.throwIfDisposed(),If(this,e)},Hu().prototype.sum=function(e,t){return this.throwIfDisposed(),Gp(this,e,t)},Hu().prototype.tan=function(){return this.throwIfDisposed(),gg(this)},Hu().prototype.tanh=function(){return this.throwIfDisposed(),Mh(this)},Hu().prototype.tile=function(e){return this.throwIfDisposed(),$p(this,e)},Hu().prototype.toBool=function(){return this.throwIfDisposed(),Jd(this,"bool")},Hu().prototype.toFloat=function(){return this.throwIfDisposed(),Jd(this,"float32")},Hu().prototype.toInt=function(){return this.throwIfDisposed(),Jd(this,"int32")},Hu().prototype.topk=function(e,t){return this.throwIfDisposed(),Fg(this,e,t)},Hu().prototype.transpose=function(e){return this.throwIfDisposed(),Pg(this,e)},Hu().prototype.unique=function(e){return this.throwIfDisposed(),_g(this,e)},Hu().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Tg(this,e,t)},Hu().prototype.unstack=function(e){return this.throwIfDisposed(),Lg(this,e)},Hu().prototype.where=function(e,t){return this.throwIfDisposed(),kp(e,this,t)},Hu().prototype.zerosLike=function(){return this.throwIfDisposed(),Bp(this)};var zC=class e extends Error{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},WC=class e extends Error{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},VC=class e extends Error{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},GC=class e extends Error{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},KC=class e extends Error{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}},qC=class{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){let e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){let e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}};function XC(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{let n=new Array(t);return n.fill(e),n}}function JC(e,t){if(!e)throw new KC(t)}function YC(e,t){let n=0;for(let r of e)r===t&&n++;return n}function ZC(e){return 1===e.length?e[0]:e}function $C(e){return Array.isArray(e)?e:[e]}function ek(e){let t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function tk(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}var nk={};function rk(e){if(null==e)return null;let t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function ak(e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))e.forEach(e=>ak(e));else{let t=Object.keys(e);for(let n of t){let t=e[n];null!=t&&"object"==typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!=typeof t.value?ak(t):e[n]=t.value)}}}function ik(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"==typeof e){let a,i=e;if(i in n)a=n[i];else if(i in nk)a=nk[i];else if(a=t[i],null==a)throw new VC("Unknown ".concat(r,": ").concat(e,". This may be due to one of the following reasons:\n1. The ").concat(r," is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ").concat(r," is defined in JavaScript, but is not registered properly with tf.serialization.registerClass()."));return a}{let i=e;if(null==i.className||null==i.config)throw new VC("".concat(r,": Improper config format: ").concat(JSON.stringify(i),".\n'className' and 'config' must set."));let s,o,l=i.className;if(l in n?[s,o]=n[l]:l in nk?[s,o]=nk.className:l in t&&([s,o]=t[l]),null==s)throw new VC("Unknown ".concat(r,": ").concat(l,". This may be due to one of the following reasons:\n1. The ").concat(r," is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ").concat(r," is defined in JavaScript, but is not registered properly with tf.serialization.registerClass()."));if(null!=o){let e={};for(let n of Object.keys(nk))e[n]=nk[n];for(let a of Object.keys(n))e[a]=n[a];i.config.customObjects=e;let t=Object.assign({},nk);for(let a of Object.keys(n))nk[a]=n[a];ak(i.config);let r=o(s,i.config,n,a);return nk=Object.assign({},t),r}{let e=Object.assign({},nk);for(let r of Object.keys(n))nk[r]=n[r];let t=new s(i.config);return nk=Object.assign({},e),t}}}function sk(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function ok(e){if(null==e)return e;let t=[];for(let n of e)-1===t.indexOf(n)&&t.push(n);return t}function lk(e){if(null==e)throw new VC("Invalid value in obj: ".concat(JSON.stringify(e)));for(let t in e)if(e.hasOwnProperty(t))return!1;return!0}function ck(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new VC("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function uk(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return JC(n>=0),JC(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(e=>typeof e===t)}function Ak(e,t){Array.isArray(e)?(su.assert(e.length>0,()=>"".concat(t," is unexpectedly an empty array.")),e.forEach((e,n)=>Ak(e,"element ".concat(n+1," of ").concat(t)))):su.assert(Number.isInteger(e)&&e>0,()=>"Expected ".concat(t," to be a positive integer, but got ").concat(dk(e),"."))}function dk(e){return null===e?"null":Array.isArray(e)?"["+e.map(e=>dk(e)).join(",")+"]":"string"==typeof e?'"'.concat(e,'"'):"".concat(e)}function hk(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}var pk=0;function fk(){return pk++}var mk={};function gk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in mk||(mk[e]=0),mk[e]+=1,e+mk[e].toString()}var yk=["channelsFirst","channelsLast"],bk=["nearest","bilinear"],wk=["valid","same","causal"],vk=["max","avg"],xk=["sum","mul","concat","ave"],Ck=new Map;function kk(e){ck(yk,"DataFormat",e)}function Bk(e){ck(wk,"PaddingMode",e)}function Sk(e){ck(vk,"PoolMode",e)}var Ik=[];function Nk(e,t){Ik.push(e);try{let e=t();return Ik.pop(),e}catch(pt){throw Ik.pop(),pt}}function Fk(e){if(!Lk(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===Ik.length?"":Ik.join("/")+"/")+e}function Ek(e){if(!Lk(e))throw new Error("Not a valid tensor name: '"+e+"'");Ck.has(e)||Ck.set(e,0);let t=Ck.get(e);if(Ck.set(e,Ck.get(e)+1),t>0){let n="".concat(e,"_").concat(t);return Ck.set(n,1),n}return e}var _k,Tk=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function Lk(e){return!!e.match(Tk)}function Dk(e){return e===parseInt(e.toString(),10)}function Rk(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let a=t;a<n;++a)r*=e[a];return r}function Uk(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){let r=e[n];r<t&&(t=r)}return t}function Ok(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){let r=e[n];r>t&&(t=r)}return t}function Mk(e,t){if(t<e)throw new VC("end (".concat(t,") < begin (").concat(e,") is forbidden."));let n=[];for(let r=e;r<t;++r)n.push(r);return n}function Pk(){return null==_k&&(_k=JA().epsilon()),_k}function Qk(e,t){return Jd(e,t)}function jk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),_h(e,n)}function Hk(e,t,n){return PA(()=>{switch(e.rank){case 1:return ng(e,t,n);case 2:return rg(e,[t,0],[n,e.shape[1]]);case 3:return ag(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return ig(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Oh(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Oh(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new VC("sliceAlongFirstAxis() received an unsupported tensor rank: ".concat(e.rank))}})}function zk(e,t,n){return PA(()=>{switch(e.rank){case 1:return ng(e,t,n);case 2:return rg(e,[0,t],[e.shape[0],n]);case 3:return ag(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return ig(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new VC("sliceAlongLastAxis() received an unsupported tensor rank: ".concat(e.rank))}})}function Wk(e,t,n,r){return PA(()=>{switch(e.rank){case 1:return ng(e,t,n);case 2:switch(r){case 1:return Hk(e,t,n);case 2:return zk(e,t,n);default:throw new VC("The axis is not within the rank of the tensor ".concat(r))}case 3:switch(r){case 1:return Hk(e,t,n);case 2:return ag(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return zk(e,t,n);default:throw new VC("The axis is not within the rank of the tensor ".concat(r))}case 4:switch(r){case 1:return Hk(e,t,n);case 2:return ig(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return ig(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return zk(e,t,n);default:throw new VC("The axis is not within the rank of the tensor ".concat(r))}default:throw new VC("sliceAlongLastAxis() received an unsupported tensor rank: ".concat(e.rank))}})}function Vk(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(t=e[0].rank,n=0!==t?t:0),n===e[0].rank&&(n=-1),Dh(e,n)}function Gk(e,t){switch(e.rank){case 1:return $h([e,t]);case 2:return ep([e,t],0);case 3:return tp([e,t],0);case 4:return np([e,t],0);default:throw new VC("concatAlongFirstAxis() received an unsupported tensor rank: ".concat(e.rank))}}function Kk(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new VC("The length of input n (".concat(t.length,") does not match the number of dimensions in input x (").concat(e.rank,")"));return $p(e,t)}function qk(e){return Dm(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0)}function Xk(e,t,n,r){if(e.rank<2||t.rank<2)throw new GC("dot requires both inputs to be rank >= 2 but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3){if(e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new GC("If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ".concat(e.shape," and  y shape = ").concat(t.shape))}if(2===e.rank&&2===t.rank)return qg.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Zk(e.rank,r,"channelsLast"):null,activation:n});{let a=e.shape.slice(),i=a.pop();e=_h(e,[-1,i]);let s=t.shape.slice(),o=s.pop(),l=s.pop(),c=[...s,o],u=Array.from({length:t.rank},(e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n);t=_h(Pg(t,u),[l,-1]);let A=[...a,...c];return _h(qg.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?Zk(e.rank,r,"channelsLast"):null,activation:n}),A)}}function Jk(e,t,n){return PA(()=>(t=Array.isArray(t)?yg(t,"int32"):Jd(t,"int32"),nf(e,t,n)))}function Yk(e){return nh(e,e)}function Zk(e,t,n){let r=t.shape;if(1!==t.rank&&t.rank!==e)throw new VC("Unexpected bias dimensions: ".concat(t.rank,"; expected it to be 1 or ").concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?_h(t,[1,r[0],1,1,1]):_h(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?_h(t,[1,1,1,1,r[0]]):_h(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?_h(t,[1,r[0],1,1]):_h(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?_h(t,[1,1,1,r[0]]):_h(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?_h(t,[1,r[0],1]):_h(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?_h(t,[1,1,r[0]]):_h(t,[1].concat(r))}else if(e<3)return t;throw new VC("Unsupported input rank by biasAdd: ".concat(t.rank))}function $k(e,t,n){return PA(()=>(null==n&&(n="channelsLast"),kk(n),$d(e,Zk(e.rank,t,n))))}function eB(e,t,n,r){return PA(()=>Wg(e,t,n,r))}function tB(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e():t()}var nB=["fanIn","fanOut","fanAvg"],rB=["normal","uniform","truncatedNormal"];var aB=class extends cb.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},iB=class extends aB{apply(e,t){return Hf(e,t)}};iB.className="Zeros",cb.registerClass(iB);var sB=class extends aB{apply(e,t){return zf(e,t)}};sB.className="Ones",cb.registerClass(sB);var oB=class extends aB{constructor(e){if(super(),"object"!=typeof e)throw new VC("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new VC("config must have value set but got ".concat(e));this.value=e.value}apply(e,t){return PA(()=>nh(zp(this.value),zf(e,t)))}getConfig(){return{value:this.value}}};oB.className="Constant",cb.registerClass(oB);var lB=class extends aB{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return Um(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}};lB.className="RandomUniform",cb.registerClass(lB);var cB=class extends aB{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new GC("randomNormal does not support dType ".concat(t,"."));return qk(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};cB.className="RandomNormal",cb.registerClass(cB);var uB=class extends aB{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new GC("truncatedNormal does not support dType ".concat(t,"."));return Eg(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};uB.className="TruncatedNormal",cb.registerClass(uB);var AB=class extends aB{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return PA(()=>{if(2!==e.length||e[0]!==e[1])throw new VC("Identity matrix initializer can only be used for 2D square matrices.");return nh(this.gain,ef(e[0]))})}getConfig(){return{gain:this.gain}}};AB.className="Identity",cb.registerClass(AB);var dB=class extends aB{constructor(e){if(super(),e.scale<0)throw new VC("scale must be a positive float. Got: ".concat(e.scale));this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,function(e){ck(nB,"FanMode",e)}(this.mode),this.distribution=null==e.distribution?"normal":e.distribution,function(e){ck(rB,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){let n=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(kk(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){let r=Rk(e,2);t=e[1]*r,n=e[0]*r}else if("channelsLast"===r){let r=Rk(e,0,e.length-2);t=e[e.length-2]*r,n=e[e.length-1]*r}}else{let r=Rk(e);t=Math.sqrt(r),n=Math.sqrt(r)}return[t,n]}(e),r=n[0],a=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){let n=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new GC("".concat(this.getClassName()," does not support dType ").concat(t,"."));return Eg(e,0,n,t,this.seed)}{let n=Math.sqrt(3*i);return Um(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}};dB.className="VarianceScaling",cb.registerClass(dB);var hB=class extends dB{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return dB.className}};hB.className="GlorotUniform",cb.registerClass(hB);var pB=class extends dB{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return dB.className}};pB.className="GlorotNormal",cb.registerClass(pB);var fB=class extends dB{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return dB.className}};fB.className="HeNormal",cb.registerClass(fB);var mB=class extends dB{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return dB.className}};mB.className="HeUniform",cb.registerClass(mB);var gB=class extends dB{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return dB.className}};gB.className="LeCunNormal",cb.registerClass(gB);var yB=class extends dB{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return dB.className}};yB.className="LeCunUniform",cb.registerClass(yB);var bB=class extends aB{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return PA(()=>{if(e.length<2)throw new GC("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError("Unsupported data type ".concat(t,"."));let n=su.sizeFromShape(e.slice(0,-1)),r=e[e.length-1],a=n*r;a>this.ELEMENTS_WARN_SLOW&&console.warn("Orthogonal initializer is being called on a matrix with more than ".concat(this.ELEMENTS_WARN_SLOW," (").concat(a,") elements: Slowness may result."));let i=qk([Math.max(r,n),Math.min(r,n)],0,1,t,this.seed),s=ib.qr(i,!1),o=s[0],l=s[1].flatten().stridedSlice([0],[Math.min(r,n)*Math.min(r,n)],[Math.min(r,n)+1]);return o=nh(o,l.sign()),n<r&&(o=o.transpose()),nh(zp(this.gain),o.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}};bB.className="Orthogonal",cb.registerClass(bB);var wB={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function vB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ik(e,cb.SerializationMap.getMap().classNameMap,t,"initializer")}function xB(e){return rk(e)}function CB(e){if("string"==typeof e){let t=e in wB?wB[e]:e;if("GlorotNormal"===t)return new pB;if("GlorotUniform"===t)return new hB;if("HeNormal"===t)return new fB;if("HeUniform"===t)return new mB;if("LeCunNormal"===t)return new gB;if("LeCunUniform"===t)return new yB;{let e={};return e.className=t,e.config={},vB(e)}}return e instanceof aB?e:vB(e)}function kB(e){return Array.isArray(e)&&Array.isArray(e[0])}function BB(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function SB(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new VC("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function IB(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new VC("Expected exactly 1 Shape; got ".concat(e.length))}return e}function NB(e){let t=0;for(let n of e)0===n.shape.length?t+=1:t+=n.shape.reduce((e,t)=>e*t);return t}var FB="Variable",EB=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:FB,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=fk(),n=null==n?FB:n,this.originalName=Fk(n),this.name=Ek(this.originalName),this.trainable_=r,this.constraint=a,this.val=Rg(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}};function _B(e){return e.map(e=>e.read())}function TB(e){e.forEach(e=>{e[0].write(e[1])})}var LB=class{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}},DB=class{constructor(e,t,n,r,a,i,s){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=a,this.outputTensorIndex=s,this.id=fk(),null!=i&&(this.originalName=Fk(i),this.name=Ek(this.originalName)),this.rank=t.length}},RB=0,UB=class{constructor(e,t){this.callArgs=t,this.id=RB++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(let n of e.inboundLayers)null!=n&&n.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){let e=[];for(let t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},OB=0,MB=class extends cb.Serializable{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=OB++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){let e=this.getClassName();t=ek(e)+"_"+gk(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new WC("The layer has never been called and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new VC("Asked to get ".concat(t," at node ").concat(e,", but the layer has only ").concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}getInputAt(e){return ZC(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return ZC(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new zC("Layer ".concat(this.name,' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.'));if(0===this.inboundNodes.length)throw new zC("Layer ".concat(this.name," is not connected, no input to return."));return ZC(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new zC("Layer ".concat(this.name," has no inbound nodes."));if(this.inboundNodes.length>1)throw new zC("Layer ".concat(this.name,' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.'));return ZC(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){let t=$C(e);if(null==this.inputSpec||0===this.inputSpec.length)return;let n=$C(this.inputSpec);if(t.length!==n.length)throw new VC("Layer ".concat(this.name," expects ").concat(n.length," inputs, but it received ").concat(t.length," input tensors. Input received: ").concat(e));for(let r=0;r<t.length;r++){let e=t[r],a=n[r];if(null==a)continue;let i=e.rank;if(null!=a.ndim&&i!==a.ndim)throw new VC("Input ".concat(r," is incompatible with layer ").concat(this.name,": expected ndim=").concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new VC("Input ".concat(r," is incompatible with layer ").concat(this.name,": expected max_ndim=").concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new VC("Input ".concat(r," is incompatible with layer ").concat(this.name,": expected min_ndim=").concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&e.dtype!==a.dtype)throw new VC("Input ".concat(r," is incompatible with layer ").concat(this.name," : expected dtype=").concat(a.dtype,", found dtype=").concat(e.dtype,"."));if(a.axes){let t=e.shape;for(let e in a.axes){let n=Number(e),i=a.axes[e],s=n>=0?t[n]:t[t.length+n];if(null!=i&&-1===[i,null].indexOf(s))throw new VC("Input ".concat(r," is incompatible with layer ").concat(this.name,": expected axis ").concat(n," of input shape to have value ").concat(i," but got shape ").concat(t,"."))}}if(null!=a.shape)for(let t=0;t<a.shape.length;++t){let n=a.shape[t],i=e.shape[t];if(null!=n&&null!=i&&n!==i)throw new VC("Input ".concat(r," is incompatible with layer ").concat(this.name,": expected shape=").concat(a.shape,", found shape=").concat(e.shape,"."))}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();let n=$C(e),r=function(e){let t=!0;for(let n of $C(e))if(!(n instanceof DB)){t=!1;break}return t}(e),a=function(e){let t=!0;for(let n of $C(e))if(n instanceof DB){t=!1;break}return t}(e);if(r===a)throw new VC("Arguments to apply() must be all SymbolicTensors or all Tensors");return Nk(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);let t=[];for(let n of $C(e))t.push(n.shape);this.build(ZC(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&a&&(this._refCount=1)}if(this.assertInputCompatibility(e),a){let r=this.call(e,t);this.supportsMasking&&this.setMaskMetadata(e,r);let a=$C(r),i=[];for(let e of a)-1!==n.indexOf(e)&&(e=e.clone()),i.push(e);if(r=ZC(i),null!=this.activityRegularizer)throw new GC("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{let n,r=function(e){e=$C(e);let t=[];for(let n of e)t.push(n.shape);return ZC(t)}(e),a=this.computeOutputShape(r),i="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?r[0]:r),n=null!=a&&a.length>0&&Array.isArray(a[0])?a.map((n,r)=>new DB(i,n,this,$C(e),t,this.name,r)):new DB(i,a,this,$C(e),t,this.name),this.addInboundNode(e,n,null,null,r,a,t),this._refCount++,null!=this.activityRegularizer)throw new GC("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return n}})}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: ".concat(JSON.stringify(e),") does not match that of the batchInputShape (").concat(JSON.stringify(this.batchInputShape),") of the layer ").concat(this.name));else{let t=!1;this.batchInputShape.forEach((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)}),t&&console.warn("The shape of the input tensor (".concat(JSON.stringify(e),") does not match the expectation of layer ").concat(this.name,": ").concat(JSON.stringify(this.batchInputShape)))}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new zC("The layer ".concat(this.name," has never been called and thus has no defined output shape."));let e=[];for(let t of this.inboundNodes){let n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){let e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new zC("The layer ".concat(this.name,' has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.'))}countParams(){if(!this.built)throw new WC("You tried to call countParams() on ".concat(this.name,", but the layer is not built yet. Build it first by calling build(batchInputShape)."));return NB(this.weights)}build(e){this.built=!0}getWeights(){return _B(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.trainableWeights:this.weights)}setWeights(e){PA(()=>{let t=this.weights;if(t.length!==e.length)throw new VC('You called setWeights(weights) on layer "'.concat(this.name,'" with a weight list of length ').concat(e.length,", but the layer was expecting ").concat(t.length," weights. Provided weights: ").concat(e,"..."));if(0===t.length)return;let n=[],r=_B(t);for(let a=0;a<r.length;++a){let i=r[a],s=t[a],o=e[a];if(!su.arraysEqual(i.shape,o.shape))throw new VC("Layer weight shape ".concat(i.shape," not compatible with provided weight shape ").concat(o.shape));n.push([s,o])}TB(n)})}addWeight(e,t,n,r,a,i,s,o){if(-1!==this._addedWeightNames.indexOf(e))throw new VC("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=o?o():CB("zeros"));let l=r.apply(t,n),c=new EB(l,n,e,i,s);return l.dispose(),null!=a&&this.addLoss(()=>a.apply(c.read())),null==i&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=$C(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, but was passed an inputMask."));t.forEach(e=>{if(null!=e)throw new TypeError("Layer ".concat(this.name," does not support masking, but was passed an inputMask."))})}return null}return t}setMaskMetadata(e,t,n){if(!this.supportsMasking)return;let r=this.computeMask(e,n),a=$C(t),i=$C(r);if(a.length!==i.length)throw new Error("".concat(this.name," outputs ").concat(a.length," tensors but ").concat(a.length," masks for those tensors"));for(let s=0;s<a.length;s++)a[s].kerasMask=i[s]}addInboundNode(e,t,n,r,a,i){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=$C(e);t=$C(t),n=$C(n),r=$C(r),a=BB(a),i=BB(i);let l=[],c=[],u=[];for(let A of o)l.push(A.sourceLayer),c.push(A.nodeIndex),u.push(A.tensorIndex);new UB({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:u,inputTensors:o,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},s);for(let A=0;A<t.length;A++)t[A].sourceLayer=this,t[A].nodeIndex=this.inboundNodes.length-1,t[A].tensorIndex=A}getConfig(){let e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}dispose(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been built yet."));if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used yet."));this.assertNotDisposed();let e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};function PB(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{let e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{let t=[];for(let n=0;n<e.inboundLayers.length;n++){let r=PB(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(let e of r)-1===t.indexOf(e)&&t.push(e)}return t}}}var QB=class extends MB{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:gk("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new VC("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new VC("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new VC("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];let r=new DB(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new UB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new VC("Cannot pass any input to an InputLayer's apply() method. InputLayer name: ".concat(this.name))}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}};function jB(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new VC("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new QB({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}QB.className="InputLayer",cb.registerClass(QB);var HB=class e{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(let e in t.id2Value)this.id2Value[e]=t.id2Value[e],e in t.id2Mask&&(this.id2Mask[e]=t.id2Mask[e]);else{if(null==t)return;for(let e of t)this.add(e.key,e.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new VC("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,n){if(null==e.dtype||e.dtype===n.dtype)return n;try{return Jd(n,e.dtype)}catch(t){throw new VC("The dtype of the feed (".concat(n.dtype,") can not be cast to the dtype of the key '").concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof DB){if(null==this.id2Value[e.id])throw new VC("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}{let t=this.name2Id[e];if(null==t)throw new VC("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}}getMask(e){if(e instanceof DB){if(null==this.id2Value[e.id])throw new VC("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}{let t=this.name2Id[e];if(null==t)throw new VC("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&QA(this.id2Mask)}},zB=new qC,WB=new qC;function VB(e,t,n,r){let a=null!=n&&n.training,i=Array.isArray(e),s=i?e:[e],o=s.map(e=>e.name),l=[],c=t.names();for(let p of o)-1!==c.indexOf(p)?l.push(t.getValue(p)):l.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);let u,A=o.join(",")+"|"+t.names().sort().join(","),d=zB.get(A);if(null==d){let e=function(e,t){su.assert(null!=e&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(1===e.length){let a=KB(e[0],t);n=a.sorted,r=a.recipientMap}else{let a=new Set;for(let i of e){let{sorted:e,recipientMap:s}=KB(i,t);for(let t of e)a.has(t.name)||(n.push(t),a.add(t.name));for(let t in s)null==r[t]&&(r[t]=new Set),s[t].forEach(e=>r[t].add(e))}}return{sorted:n,recipientCounts:GB(r)}}(s,t);d=e.sorted,u=e.recipientCounts,zB.put(A,d),WB.put(A,u)}u={},a||Object.assign(u,WB.get(A));let h=new HB(t);for(let p=0;p<d.length;++p){if(null!=r){let e=OA().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}let e=d[p],i=e.sourceLayer;if(i instanceof QB)continue;let s=[],c=[],A=[],f=!1;for(let n of e.inputs){let e=h.getValue(n),r=h.getMask(n);s.push(e),c.push(r),null!=r&&(f=!0),a||(u[n.name]--,0===u[n.name]&&!t.hasKey(n)&&-1===o.indexOf(n.name)&&!e.isDisposed&&!0!==n.sourceLayer.stateful&&A.push(e))}f&&((n=n||{}).mask=c[0]);let m=$C(i.apply(s,n)),g=null;i.supportsMasking&&(g=i.computeMask(s,c));let y=qB(e),b=Array.isArray(y)?y:[y];for(let t=0;t<b.length;++t){h.hasKey(b[t])||h.add(b[t],m[t],Array.isArray(g)?g[0]:g);let e=o.indexOf(b[t].name);-1!==e&&(l[e]=m[t])}a||QA(A)}return h.disposeMasks(),i?l:l[0]}function GB(e){let t={};for(let n in e)t[n]=e[n].size;return t}function KB(e,t){let n=new Set,r=[],a={};for(let o of t.names())n.add(o);let i=[],s=[];for(i.push(e);i.length>0;){let e=i[i.length-1];if(n.has(e.name)){i.pop();continue}let t=s[s.length-1]===i.length-1;if(0===e.inputs.length||t)i.pop(),r.push(e),n.add(e.name),t&&s.pop();else{s.push(i.length-1);for(let t of e.inputs)null==a[t.name]&&(a[t.name]=new Set),a[t.name].add(e.name),!n.has(t.name)&&i.push(t)}}return{sorted:r,recipientMap:a}}function qB(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(let r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}Cs().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,function(e){null!=zB&&zB.setMaxEntries(e),null!=WB&&WB.setMaxEntries(e)});var XB={};function JB(e,t){return PA(()=>Wp(Gp(nh(e,e),t,!0)))}ei(XB,{maxNorm:()=>sS,minMaxNorm:()=>cS,nonNeg:()=>lS,unitNorm:()=>oS});var YB=class extends cb.Serializable{getConfig(){return{}}},ZB=class extends YB{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return PA(()=>{let t=JB(e,this.axis),n=Zh(t,0,this.maxValue);return nh(e,th(n,$d(Pk(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}};ZB.className="MaxNorm",cb.registerClass(ZB);var $B=class extends YB{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return PA(()=>th(e,$d(Pk(),JB(e,this.axis))))}getConfig(){return{axis:this.axis}}};$B.className="UnitNorm",cb.registerClass($B);var eS=class extends YB{apply(e){return jm(e)}};eS.className="NonNeg",cb.registerClass(eS);var tS=class extends YB{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return PA(()=>{let t=JB(e,this.axis),n=$d(nh(this.rate,Zh(t,this.minValue,this.maxValue)),nh(1-this.rate,t));return nh(e,th(n,$d(Pk(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}};tS.className="MinMaxNorm",cb.registerClass(tS);var nS={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function rS(e){return rk(e)}function aS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ik(e,cb.SerializationMap.getMap().classNameMap,t,"constraint")}function iS(e){if(null==e)return null;if("string"==typeof e){return aS({className:e in nS?nS[e]:e,config:{}})}return e instanceof YB?e:aS(e)}function sS(e){return new ZB(e)}function oS(e){return new $B(e)}function lS(){return new eS}function cS(e){return new tS(e)}var uS={};function AS(){return new iB}function dS(){return new sB}function hS(e){return new oB(e)}function pS(e){return new lB(e)}function fS(e){return new cB(e)}function mS(e){return new uB(e)}function gS(e){return new AB(e)}function yS(e){return new dB(e)}function bS(e){return new hB(e)}function wS(e){return new pB(e)}function vS(e){return new fB(e)}function xS(e){return new mB(e)}function CS(e){return new gB(e)}function kS(e){return new yB(e)}function BS(e){return new bB(e)}ei(uS,{constant:()=>hS,glorotNormal:()=>wS,glorotUniform:()=>bS,heNormal:()=>vS,heUniform:()=>xS,identity:()=>gS,leCunNormal:()=>CS,leCunUniform:()=>kS,ones:()=>dS,orthogonal:()=>BS,randomNormal:()=>fS,randomUniform:()=>pS,truncatedNormal:()=>mS,varianceScaling:()=>yS,zeros:()=>AS});var SS,IS={};async function NS(e){if(null==e)return;let t=[],n=[],r=[];for(let a in e){let i=e[a];if("number"!=typeof i){let e=i;t.push(e.data()),n.push(a),r.push(e)}}if(t.length>0){let a=await Promise.all(t);for(let t=0;t<a.length;++t)e[n[t]]=a[t][0];QA(r)}}function FS(e){if(null!=e)for(let t in e){let n=e[t];"number"!=typeof n&&n.dispose()}}ei(IS,{Layer:()=>MB,RNN:()=>zN,RNNCell:()=>WN,activation:()=>xE,add:()=>_E,alphaDropout:()=>v_,average:()=>TE,averagePooling1d:()=>jE,averagePooling2d:()=>WE,averagePooling3d:()=>KE,avgPool1d:()=>HE,avgPool2d:()=>VE,avgPool3d:()=>qE,avgPooling1d:()=>zE,avgPooling2d:()=>GE,avgPooling3d:()=>XE,batchNormalization:()=>ME,bidirectional:()=>h_,categoryEncoding:()=>S_,centerCrop:()=>k_,concatenate:()=>LE,conv1d:()=>hE,conv2d:()=>pE,conv2dTranspose:()=>fE,conv3d:()=>mE,conv3dTranspose:()=>gE,convLstm2d:()=>c_,convLstm2dCell:()=>u_,cropping2D:()=>bE,dense:()=>CE,depthwiseConv2d:()=>vE,dot:()=>OE,dropout:()=>kE,elu:()=>oE,embedding:()=>EE,flatten:()=>SE,gaussianDropout:()=>w_,gaussianNoise:()=>b_,globalAveragePooling1d:()=>JE,globalAveragePooling2d:()=>YE,globalMaxPool1d:()=>f_,globalMaxPool2d:()=>m_,globalMaxPooling1d:()=>ZE,globalMaxPooling2d:()=>$E,gru:()=>r_,gruCell:()=>a_,input:()=>HI,inputLayer:()=>sE,layerNormalization:()=>PE,leakyReLU:()=>cE,lstm:()=>i_,lstmCell:()=>s_,masking:()=>x_,maxPool1d:()=>g_,maxPool2d:()=>y_,maxPooling1d:()=>e_,maxPooling2d:()=>t_,maxPooling3d:()=>n_,maximum:()=>DE,minimum:()=>RE,multiply:()=>UE,permute:()=>FE,prelu:()=>uE,randomWidth:()=>I_,reLU:()=>lE,repeatVector:()=>IE,rescaling:()=>C_,reshape:()=>NE,resizing:()=>B_,rnn:()=>A_,separableConv2d:()=>yE,simpleRNN:()=>o_,simpleRNNCell:()=>l_,softmax:()=>AE,spatialDropout1d:()=>BE,stackedRNNCells:()=>d_,thresholdedReLU:()=>dE,timeDistributed:()=>p_,upSampling2d:()=>wE,zeroPadding2d:()=>QE}),function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(SS||(SS={}));var ES=class{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}},_S=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(let t of this.callbacks)t.setParams(e)}setModel(e){for(let t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(let n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(let n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(let n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(let n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(let t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(let t of this.callbacks)await t.onTrainEnd(e)}},TS=class extends ES{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});let n=null==t.size?0:t.size;this.seen+=n;for(let r in t){let e=t[r];if("number"==typeof e)this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+e*n;else{let t;r in this.totals?t=this.totals[r]:this.totals[r]=0;let a=PA(()=>$d(this.totals[r],nh(e,n)));this.totals[r]=a,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(let n of this.params.metrics)null!=this.totals[n]&&("number"==typeof this.totals[n]?t[n]=this.totals[n]/this.seen:PA(()=>{let e=nh(th(1,this.seen),this.totals[n]);t[n]=e,this.totals[n].dispose(),jA(t[n])}))}},LS=class extends ES{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(let n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n])}async syncData(){let e=[],t=[],n=[];for(let a in this.history){let r=this.history[a];for(let i=0;i<r.length;++i)if("number"!=typeof r[i]){let s=r[i];e.push(s.data()),t.push(a),n.push(i)}}let r=await Promise.all(e);for(let a=0;a<r.length;++a)this.history[t[a]][n[a]].dispose(),this.history[t[a]][n[a]]=r[a][0]}},DS=class extends ES{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||Ew,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");su.isNumber(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let r,a=null!=n?n():su.now();return function(){let i=null!=n?n():su.now();return i-a<t||(a=i,r=e(...arguments)),r}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){let r=[];null!=this.yield&&(await NS(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await NS(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){let n=[];null!=this.epochEnd&&(await NS(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await NS(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){let n=[];null!=this.batchEnd&&(await NS(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):su.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await NS(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await NS(e),await this.trainEnd(e))}};function RS(e,t){return null==e&&(e={}),e instanceof ES?[e]:Array.isArray(e)&&e[0]instanceof ES?e:$C(e).map(e=>new DS(e,t))}var US=class e{constructor(){}static registerCallbackConstructor(t,n){su.assert(t>=0&&Number.isInteger(t),()=>"Verbosity level is expected to be an integer >= 0, but got ".concat(t)),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}static checkForDuplicate(t){for(let n in e.constructors)e.constructors[+n].forEach(e=>{if(e===t)throw new VC("Duplicate callback constructor.")})}static clear(){e.constructors={}}static createCallbacks(t){let n=[];for(let r in e.constructors){let a=+r;t>=a&&n.push(...e.constructors[a])}return n.map(e=>new e)}};function OS(e,t,n,r,a,i,s,o,l){let c=new LS,u=[new TS,...US.createCallbacks(t)];null!=e&&u.push(...e),u.push(c);let A=new _S(u);return A.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:s,verbose:t,doValidation:o,metrics:l}),{callbackList:A,history:c}}function MS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ik(e,cb.SerializationMap.getMap().classNameMap,t,"layer",n)}function PS(e,t){return PA(()=>{"float32"!==e.dtype&&(e=Jd(e,"float32"));let n=Gp(Yk(e),t,!0),r=Yh(n.shape,Pk()),a=Wp(Qf(n,r));return th(e,a)})}function QS(e,t){return PA(()=>jf(Yk(If(t,e)),-1))}function jS(e,t){return PA(()=>jf(rh(If(t,e)),-1))}function HS(e,t){return PA(()=>{let n=If(e,t),r=Zh(rh(e),Pk(),Number.MAX_VALUE),a=rh(th(n,r));return nh(100,jf(a,-1))})}function zS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return PA(()=>{if(n)t=sg(t);else{let e=Gp(t,t.shape.length-1,!0);t=th(t,e)}return t=Zh(t,Pk(),1-Pk()),kf(Gp(nh(Jd(e,"float32"),ff(t)),t.shape.length-1))})}function WS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return PA(()=>{let r=Jd(tf(function(e){let t=[Rk(e.shape)];return _h(e,t)}(e)),"int32"),a=(t=Zh(t,Pk(),1-Pk())).shape;return zS(_h(Zf(r,a[a.length-1]),a),t,n)})}function VS(e,t){return PA(()=>{let n;return n=Zh(t,Pk(),1-Pk()),n=ff(th(n,If(1,n))),jf(function(e,t){if(!su.arraysEqual(e.shape,t.shape))throw new VC("logits and labels must have the same shape, but got shapes ".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return PA(()=>{let n=jm(t),r=kf(rh(t));return $d(If(n,nh(t,e)),mf(Jp(r)))})}(e,n),-1)})}function GS(e,t){return PA(()=>{let n=PS(e,-1),r=PS(t,-1),a=nh(n,r);return kf(Gp(a,-1))})}US.constructors={};var KS={meanSquaredError:QS,meanAbsoluteError:jS,meanAbsolutePercentageError:HS,meanSquaredLogarithmicError:function(e,t){return PA(()=>{let n=Zh(t,Pk(),Number.MAX_VALUE),r=ff($d(1,n)),a=Zh(e,Pk(),Number.MAX_VALUE),i=ff($d(1,a));return jf(Yk(If(r,i)),-1)})},squaredHinge:function(e,t){return PA(()=>{let n=Qf(0,If(1,nh(e,t)));return jf(Yk(n),-1)})},hinge:function(e,t){return PA(()=>{let n=Qf(0,If(1,nh(e,t)));return jf(n,-1)})},categoricalHinge:function(e,t){return PA(()=>{let n=Gp(nh(e,t),-1),r=Qp(nh(If(1,e),t),-1);return Qf(0,$d(1,If(r,n)))})},logcosh:function(e,t){return PA(()=>{let n=Math.log(2),r=If(t,e),a=If($d(r,Bf(nh(-2,r))),n);return jf(a,-1)})},categoricalCrossentropy:zS,sparseCategoricalCrossentropy:WS,binaryCrossentropy:VS,kullbackLeiblerDivergence:function(e,t){return PA(()=>{let n=Zh(e,Pk(),1),r=Zh(t,Pk(),1);return Gp(nh(e,ff(th(n,r))),-1)})},poisson:function(e,t){return PA(()=>{let n=ff($d(Pk(),t));return jf(If(t,nh(e,n)),-1)})},cosineProximity:GS};function qS(e){if("string"==typeof e){if(e in KS)return KS[e];let t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,'. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy')),new VC(t)}return e}function XS(e,t){return PA(()=>{let n=nh(.5,$f(t)),r=Qk(rf(t,n),e.dtype);return jf(Cp(e,r),-1)})}function JS(e,t){return PA(()=>Qk(Cp(ch(e,-1),ch(t,-1)),"float32"))}function YS(e,t){return PA(()=>Jd(Gp(Ef(Cp(e,1),Cp(t,1))),"float32"))}function ZS(e,t){return PA(()=>{let n=YS(e,t),r=function(e,t){return PA(()=>Jd(Gp(Ef(Cp(e,0),Cp(t,1))),"float32"))}(e,t),a=$d(n,r);return Jd(kp(rf(a,0),th(n,a),0),"float32")})}function $S(e,t){return PA(()=>{let n=YS(e,t),r=function(e,t){return PA(()=>Jd(Gp(Ef(Cp(e,1),Cp(t,0))),"float32"))}(e,t),a=$d(n,r);return Jd(kp(rf(a,0),th(n,a),0),"float32")})}function eI(e,t){return VS(e,t)}function tI(e,t){return e.rank===t.rank&&(e=hg(e,[e.rank-1])),(t=ch(t,-1)).dtype!==e.dtype&&(t=Jd(t,e.dtype)),Jd(Cp(e,t),"float32")}var nI=zS,rI=WS,aI={binaryAccuracy:XS,categoricalAccuracy:JS,precision:ZS,categoricalCrossentropy:nI,sparseCategoricalCrossentropy:rI,mse:QS,MSE:QS,mae:jS,MAE:jS,mape:HS,MAPE:HS,cosine:GS};function iI(e){if("string"==typeof e&&e in aI)return aI[e];if("string"!=typeof e&&null!=e)return e;throw new VC("Unknown metric ".concat(e))}function sI(e){if(JC(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"==typeof e)return e;{let t;for(let n of Object.keys(KS))if(KS[n]===e){t=n;break}if(void 0!==t)return t;for(let n of Object.keys(aI))if(aI[n]===e){t=n;break}return void 0!==t?t:e.name}}function oI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!lI(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){let n=JSON.stringify(e);n.length>1048576&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in size (length=').concat(n.length," when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576."))}}function lI(e){if(null===e)return!0;if("object"==typeof e){if(Object.getPrototypeOf(e)===Object.prototype){let t=Object.keys(e);for(let n of t)if("string"!=typeof n||!lI(e[n]))return!1;return!0}if(Array.isArray(e)){for(let t of e)if(!lI(t))return!1;return!0}return!1}{let t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function cI(e,t,n){let r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=function(e){let t=!0,n=[],r=[];for(let a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(let a of n){if(a.length>1||1===a.length&&a[0].inboundLayers.length>1){t=!1;break}r.push(...a)}if(t)for(let a of e.layers){let e=!1;for(let n of a.inboundNodes)if(-1!==r.indexOf(n)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),s=["Layer (type)","Input Shape","Output shape","Param #"];if(i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(e=>Math.floor(t*e))),!i){s.push("Receives inputs"),r=[];for(let t in e.nodesByDepth)r.push(...e.nodesByDepth[t])}a("_".repeat(t)),uI(s,n,a),a("=".repeat(t));let o=e.layers;for(let u=0;u<o.length;++u)i?AI(o[u],n,a):dI(o[u],n,r,a),a((u===o.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();let l=function(e){let t;return t=null!=e.collectedTrainableWeights?NB(e.collectedTrainableWeights):NB(e.trainableWeights),t}(e),c=NB(e.nonTrainableWeights);a("Total params: ".concat(l+c)),a("Trainable params: ".concat(l)),a("Non-trainable params: ".concat(c)),a("_".repeat(t))}function uI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="";for(let a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r+=e[a],r=r.slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function AI(e,t,n){let r,a;try{a=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(xt){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(xt){r="multiple"}let i=e.name,s=e.getClassName();uI(["".concat(i," (").concat(s,")"),a,r,e.countParams().toString()],t,n)}function dI(e,t,n,r){let a,i;try{i=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(kt){i="multiple"}try{a=JSON.stringify(e.outputShape)}catch(kt){a="multiple"}let s=[];for(let u of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(let e=0;e<u.inboundLayers.length;++e){let t=u.inboundLayers[e].name,n=u.nodeIndices[e],r=u.tensorIndices[e];s.push("".concat(t,"[").concat(n,"][").concat(r,"]"))}let o=e.name,l=e.getClassName(),c=0===s.length?"":s[0];uI(["".concat(o," (").concat(l,")"),i,a,e.countParams().toString(),c],t,r);for(let u=1;u<s.length;++u)uI(["","","","",s[u]],t,r)}function hI(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function pI(e,t){if(null===e)return null;if("string"==typeof e)return tk(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){let n=[],r=e.length;for(let a=0;a<r;++a){let r=e[a];hI(t,a,r)?n.push(r):n.push(pI(r,t))}return n}{let t={};for(let n of Object.keys(e)){let r=e[n];if("name"===n&&"string"==typeof r)t[n]=r;else{let e=tk(n);t[e]=pI(r,e)}}return t}}function fI(e,t){if(null==e)return null;if("string"==typeof e)return ek(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){let n=[],r=e.length;for(let a=0;a<r;++a){let r=e[a];hI(t,a,r)?n.push(r):n.push(fI(r,t))}return n}{let t={};for(let n of Object.keys(e)){let r=e[n],a=ek(n);t[a]="name"!==n&&"className"!==n||"string"!=typeof r?fI(r,n):r}return t}}var mI="4.22.0",gI=class e extends MB{constructor(t){if(super({}),this.containerNodes=new Set,this.name=t.name,null==this.name){let e=this.getClassName().toLowerCase();this.name=gk(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],ok(this.inputs).length!==this.inputs.length)throw new VC("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ".concat(this.inputs.map(e=>e.name)));ok(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ".concat(this.outputs.map(e=>e.name))),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let e of this.outputs){let t=e.sourceLayer,n=e.nodeIndex,r=e.tensorIndex;this.outputLayers.push(t),this.outputLayersNodeIndices.push(n),this.outputLayersTensorIndices.push(r)}for(let e of this.inputs){let t=e.sourceLayer,n=e.nodeIndex,r=e.tensorIndex;JC(0===n,"input layer has >1 nodes"),JC(0===r,"input layer has >1 tensors"),this.inputLayers.push(t),this.inputLayersNodeIndices.push(n),this.inputLayersTensorIndices.push(r)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let e=0;e<this.inputLayers.length;e++){let n=this.inputLayers[e];if(!(n instanceof QB))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. Received inputs: ".concat(t.inputs,". Input ").concat(e," (0-based) originates from layer type ").concat(n.getClassName(),"."));this.inputNames.push(n.name),this.feedInputShapes.push(n.batchInputShape),this.feedInputNames.push(n.name)}for(let e of this.outputLayers)this.outputNames.push(e.name);this.internalInputShapes=this.inputs.map(e=>e.shape),this.internalOutputShapes=this.outputs.map(e=>e.shape);let n={},r={},a={},i={},s={},o=[],l=(t,n,r,a,i,c)=>{(null==a||null==i||null==c)&&(a=t.sourceLayer,i=t.nodeIndex,c=t.tensorIndex);let u=a.inboundNodes[i];if(-1!==r.indexOf(u))throw new WC("The tensor ".concat(t.name,' at layer "').concat(a.name,'" is part of a cycle.'));if(-1!==n.indexOf(u))return;this.containerNodes.add(e.nodeKey(a,i)),a.id in s||(s[a.id]=Object.keys(s).length),-1===r.indexOf(u)&&r.push(u);let A=u.inboundLayers.length;for(let e=0;e<A;e++){let t=u.inputTensors[e],a=u.inboundLayers[e],i=u.nodeIndices[e],s=u.tensorIndices[e];l(t,n,r,a,i,s)}for(n.push(u);r.indexOf(u)>=0;)r.splice(r.indexOf(u),1);o.push(u)},c=[],u=[];for(let e of this.outputs)l(e,c,u);let A=o.slice().reverse();for(let e of A){r[e.id]=e,e.id in n||(n[e.id]=0);let t=n[e.id],s=null==a[e.outboundLayer.id]?0:a[e.outboundLayer.id];t=Math.max(t,s),a[e.outboundLayer.id]=t,i[e.outboundLayer.id]=e.outboundLayer,n[e.id]=t;for(let a=0;a<e.inboundLayers.length;a++){let i=e.inboundLayers[a],s=e.nodeIndices[a],o=i.inboundNodes[s],l=null==n[o.id]?0:n[o.id];n[o.id]=Math.max(t+1,l),r[o.id]=o}}let d={};for(let e in n){let t=n[e];t in d||(d[t]=[]),d[t].push(r[e])}let h={};for(let e in a){let t=a[e];t in h||(h[t]=[]),h[t].push(i[e])}let p=Object.keys(h).map(e=>parseInt(e,10)).sort(sk);this.layers=[];for(let y of p){let t=h[y];t.sort((e,t)=>{let n=s[e.id],r=s[t.id];return n<r?-1:n>r?1:0});for(let n of t)n instanceof e&&this.internalContainerRefs.push(n),this.layers.push(n)}this.layersByDepth=h,p=Object.keys(d).map(e=>parseInt(e,10)).sort(sk);let f=this.inputs.slice(),m=[];for(let e of p)for(let t of d[e]){let e=t.outboundLayer;if(null!=e){for(let n of t.inputTensors)if(-1===f.indexOf(n))throw new WC("Graph disconnected: cannot obtain value for tensor ".concat(n,' at layer "').concat(e.name,'". The following previous layers were accessed without issue: ').concat(m));for(let e of t.outputTensors)f.push(e);m.push(e.name)}}this.nodesByDepth=d;let g=this.layers.map(e=>e.name);for(let e of g){let t=g.filter(t=>t===e).length;if(1!==t)throw new WC('The name "'.concat(e,'" is used ').concat(t," times in the model. All layer names should be unique. Layer names: ")+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new UB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(e=>null),outputMasks:this.outputs.map(e=>null),inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs.map(e=>e.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}dispose(){this.assertNotDisposed();let e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){for(let t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(let t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(t=>t.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new VC("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(let t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){let t=[];for(let e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={},r=0,a=(e=>{let t=Object.keys(e);if(0===t.length)return!1;let n=t[0].split("/");return!isNaN(parseInt(n[n.length-1],10))})(e);a&&this.parseWeights(e);for(let s of this.layers)for(let[e,t]of s.weights.entries()){let i=a?"".concat(t.name.split("/").slice(0,-1).join("/")+"/").concat(e):t.originalName;if(null!=n[i])throw new VC("Duplicate weight name: ".concat(i));n[i]=t,r++}let i=[];for(let s in e){let r=s;if(null==n[s]){let e=s.split("/");r=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[r])i.push([n[r],e[s]]);else if(t)throw new VC("Provided weight data has no target variable: ".concat(s));delete n[r]}if(t){let e=[];for(let t in n)e.push(t);if(e.length>0)throw new VC("".concat(e.length," of ").concat(r," weights are not set: ").concat(e))}TB(i)}parseWeights(e){for(let t in Object.keys(e)){let n=t.split("/"),r=["vars","layer_checkpoint_dependencies"],a=n.map(e=>e.startsWith("_")?e.slice(1):e).filter(e=>!r.includes(e)).join("/");a!==t&&(e[a]=e[t],delete e[t])}}updatedConfig(){let e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(mI),t.backend="TensorFlow.js",t}toJSON(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=fI(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return PA(()=>{e=$C(e);let n=new HB;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return VB(this.outputs,n,t)})}computeMask(e,t){return PA(()=>{let n;return e=$C(e),n=null==t?XC(null,e.length):$C(t),this.runInternalGraph(e,n)[1]})}computeOutputShape(e){let t=BB(e);if(t.length!==this.inputLayers.length)throw new VC("Invalid inputShape argument ".concat(e,": model has ").concat(this.inputLayers.length," tensor inputs."));let n={};for(let s=0;s<t.length;s++){let e=this.inputLayers[s],r=t[s];n[e.name+"_0_0"]=r}let r=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(sk);if(r.length>1)for(let s of r){let e=this.nodesByDepth[s];for(let t of e){let e=t.outboundLayer;if(-1!==this.inputLayers.map(e=>e.id).indexOf(e.id))continue;let r=[];for(let s=0;s<t.inboundLayers.length;s++){let e=t.inboundLayers[s],a=t.nodeIndices[s],i=t.tensorIndices[s],o=n["".concat(e.name,"_").concat(a,"_").concat(i)];r.push(o)}let a=BB(e.computeOutputShape(ZC(r))),i=e.inboundNodes.indexOf(t);for(let t=0;t<a.length;t++){n["".concat(e.name,"_").concat(i,"_").concat(t)]=a[t]}}}let a=[],i=[];for(let s=0;s<this.outputLayers.length;s++){let e=this.outputLayers[s],t=this.outputLayersNodeIndices[s],n=this.outputLayersTensorIndices[s],r="".concat(e.name,"_").concat(t,"_").concat(n);i.push(r)}for(let s=0;s<i.length;s++){let e=i[s];JC(e in n),a.push(n[e])}return ZC(a)}runInternalGraph(e,t){null==t&&(t=XC(null,e.length));let n={};for(let o=0;o<this.inputs.length;++o){let r=this.inputs[o],a=e[o],i=t[o];n[r.id]=[a,i]}let r=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(sk);for(let o of r){let e=this.nodesByDepth[o];for(let t of e){let e=t.outboundLayer,r=t.inputTensors,a=t.outputTensors,i=new Array;for(let t of r)t.id in n&&i.push(n[t.id]);if(i.length===r.length){let r,s,o,l,c={};if(null!=t.callArgs&&(c=t.callArgs),1===i.length){let[t,n]=i[0];null==c.mask&&(c.mask=n),o=$C(e.call(t,c)),l=$C(e.computeMask(t,n)),r=[t],s=[n]}else r=i.map(e=>e[0]),s=i.map(e=>e[1]),null==c.mask&&(c.mask=s),o=$C(e.call(r,c)),l=$C(e.computeMask(r,s));if(e.activityRegularizer)throw new GC("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<a.length;++e){let t=a[e],r=o[e],i=l[e];n[t.id]=[r,i]}}}}let a=[],i=[],s=[];for(let o of this.outputs){JC(o.id in n,"Could not compute output ".concat(o.name," : ").concat(o.id));let[e,t]=n[o.id];s.push(e.shape),a.push(e),i.push(t)}return[a,i,s]}buildNodeConversionMap(t){let n,r={};for(let a of this.layers){n=a instanceof e?1:0;for(let t=0;t<a.inboundNodes.length;t++){let i=e.nodeKey(a,t);this.containerNodes.has(i)&&(r[i]=n,n+=1)}}return r}getLayer(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new VC("Provide either a layer name or layer index");if("number"==typeof e)return this.findLayer(e);for(let n of this.layers)if(n.name===e)return n;throw new VC("No such layer: ".concat(e))}findLayer(e){if(this.layers.length<=e)throw new VC("Was asked to retrieve layer at index ".concat(e,", but model only has ").concat(this.layers.length," layer(s)."));return this.layers[e]}calculateLosses(){return PA(()=>{let t=[];for(let n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){let a=e.nodeKey(n,r);this.containerNodes.has(a)&&t.push(...n.calculateLosses())}return t})}getConfig(){let t={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(let s of this.layers){let t=s.getClassName(),a=s.getConfig(),i=[];for(let r=0;r<s.inboundNodes.length;r++){let t=s.inboundNodes[r],a=e.nodeKey(s,r),o={};if(this.containerNodes.has(a)){if(t.callArgs)try{JSON.stringify(t.callArgs),o=t.callArgs}catch(Ct){console.warn("Layer ".concat(s.name," was passed non-serializable keyword arguments: ").concat(t.callArgs,". They will not be included in the serialized model (and thus will be missing at deserialization time).")),o={}}if(t.inboundLayers.length>0){let r=[];for(let a=0;a<t.inboundLayers.length;a++){let i=t.inboundLayers[a],s=t.nodeIndices[a],l=t.tensorIndices[a],c=n[e.nodeKey(i,s)];null==c&&(c=0),r.push([i.name,c,l,o])}i.push(r)}}}let o={};o.name=s.name,o.className=t,o.config=a,o.inboundNodes=i,r.push(o)}t.layers=r;let a=[];for(let s=0;s<this.inputLayers.length;s++){let t=this.inputLayers[s],r=this.inputLayersNodeIndices[s],i=e.nodeKey(t,r);if(!this.containerNodes.has(i))continue;let o=n[i];null==o&&(o=0);let l=this.inputLayersTensorIndices[s];a.push([t.name,o,l])}t.inputLayers=a;let i=[];for(let s=0;s<this.outputLayers.length;s++){let t=this.outputLayers[s],r=this.outputLayersNodeIndices[s],a=e.nodeKey(t,r);if(!this.containerNodes.has(a))continue;let o=n[a];null==o&&(o=0);let l=this.outputLayersTensorIndices[s];i.push([t.name,o,l])}return t.outputLayers=i,t}static fromConfig(e,t){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function s(e,t){let n,a=[];for(let s of t){let o=s[0],l=s[1],c=s[2];if(n=null==s[3]?{}:s[3],!(o in r))return void i(e,t);let u=r[o];if(u.inboundNodes.length<=l)return void i(e,t);let A=u.inboundNodes[l];a.push(A.outputTensors[c])}a.length>0&&e.apply(ZC(a),n)}function o(e){let a=e.name,s=MS(e,null!=t.customObjects?t.customObjects:{});s.setFastWeightInitDuringBuild(n),r[a]=s,e.inboundNodes.forEach(e=>{if(!(e instanceof Array))throw new VC("Corrupted configuration, expected array for nodeData: ".concat(e));i(s,e)})}let l=t.name,c=t.layers;for(let p of c)o(p);for(;!lk(a);)for(let e of c){let t=r[e.name];if(t.name in a){let e=a[t.name];delete a[t.name];for(let n of e)s(t,n)}}let u=[],A=[],d=t.inputLayers;for(let p of d){let e=p[0],t=p[1],n=p[2];JC(e in r);let a=r[e].inboundNodes[t].outputTensors;u.push(a[n])}let h=t.outputLayers;for(let p of h){let e=p[0],t=p[1],n=p[2];JC(e in r);let a=r[e].inboundNodes[t].outputTensors;A.push(a[n])}return new e({inputs:u,outputs:A,name:l})}get stateful(){if(this._stateful)throw new VC("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let e of this.layers)if(e.stateful)return!0;return!1}resetStates(){PA(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}};function yI(e,t){return function(e,t,n){let r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>null);if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," element(s), but the model has ").concat(r," outputs. Make sure a set of weights is provided for each model output."));return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){let n=[];return t.forEach(t=>{t in e?n.push(e[t]):n.push(null)}),n}throw new Error("The model has multiple (".concat(r,") outputs, so ").concat(n," must be either an array with ").concat(r," elements or an object with ").concat(t," keys. Provided ").concat(n," not understood: ").concat(JSON.stringify(e)))}(e,t,"classWeight")}async function bI(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){let t=PA(()=>{if(1===e.shape.length)return Yd(e);if(2===e.shape.length){if(e.shape[1]>1)return ch(e,1);if(1===e.shape[1])return _h(e,[e.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(e.shape[1],") during handling of class weights. The size is expected to be >= 1."))}throw new Error("Unexpected rank of target (y) tensor (".concat(e.rank,") during handling of class weights. The rank is expected to be 1 or 2."))}),r=Array.from(await t.data());QA(t);let a=[];return r.forEach(e=>{if(null==n[e])throw new Error("classWeight must contain all classes in the training data. The class ".concat(e," exists in the data but not in classWeight"));a.push(n[e])}),yg(a,"float32")}return null}function wI(e,t){return nh(e,t)}function vI(e,t){let n,r,a=t;n=a.xs,r=a.ys,su.assert(null!=n&&null!=r,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ".concat(t));let i=xI("input",e.inputNames,n),s=xI("output",e.outputNames,r),o=i[0].shape[0];su.assert(i.length===e.inputs.length,()=>"LayersModel has ".concat(e.inputs.length," inputs, but the dataset provides ").concat(i.length," inputs.  (Expected input keys: ").concat(JSON.stringify(e.inputNames),")")),su.assert(s.length===e.outputs.length,()=>"LayersModel has ".concat(e.outputs.length," outputs, but the dataset provides ").concat(s.length," outputs.  (Expected output keys: ").concat(JSON.stringify(e.outputNames),")"));for(let l=0;l<i.length;l++)su.assert(i[l].shape[0]===o,()=>"Batch size mismatch: input ".concat(e.inputNames[l]," has ").concat(i[l].shape[0],"; expected  ").concat(o," based on input ").concat(e.inputNames[0],"."));for(let l=0;l<s.length;l++)su.assert(s[l].shape[0]===o,()=>"Batch size mismatch: output ".concat(e.outputNames[l]," has ").concat(s[l].shape[0],"; expected  ").concat(o," based on input ").concat(e.inputNames[0],"."));return{xs:i,ys:s}}function xI(e,t,n){if(n instanceof ju)return[n];if(Array.isArray(n))return su.assert(n.length===t.length,()=>"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")),n;{let r=[];for(let a of t){if(null==n[a])throw new VC("The feature data generated by the dataset lacks the required ".concat(e," key '").concat(a,"'."));r.push(n[a])}return r}}async function CI(e,t,n){let r=null!=n.batchesPerEpoch;if(su.assert(null!=e.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),su.assert(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),su.assert(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive integer, but got ".concat(n.epochs)),su.assert(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ".concat(n.batchesPerEpoch)),su.assert(null==n.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{let a,i,s=null!=n.validationData;if(s)if(kI(n.validationData))su.assert(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ".concat(n.validationBatches));else{let e=function(e){if(3===e.length)throw new GC("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);a=e.xs,i=e.ys}let o,l=e.makeTrainFunction(),c=e.getDedupedMetricsNames();o=s?c.slice().concat(c.map(e=>"val_"+e)):c.slice();let u=RS(n.callbacks,n.yieldEvery),A=null==n.verbose?1:n.verbose,{callbackList:d,history:h}=OS(u,A,n.epochs,null,null,function(e,t){let n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}(t,n),null,s,o);d.setModel(e),e.history=h,await d.onTrainBegin(),e.stopTraining_=!1;let p=null==n.initialEpoch?0:n.initialEpoch,f=await t.iterator();for(;p<n.epochs;){let o={};await d.onEpochBegin(p);let u=0,A=0;for(r||(f=await t.iterator());!r||u<n.batchesPerEpoch;){let t=await f.next();if(r&&t.done){console.warn("You provided `batchesPerEpoch` as ".concat(n.batchesPerEpoch,", but your dataset iterator ran out of data after ").concat(u," batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, ").concat(n.batchesPerEpoch*n.epochs," batches). You may need to use the repeat() function when building your dataset."));break}if(null!=t.value){let{xs:r,ys:a}=vI(e,t.value),i={};i.batch=A,i.size=r[0].shape[0],await d.onBatchBegin(A,i);let s=[];if(null!=n.classWeight){let t=yI(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)s.push(await bI(a[e],null,t[e]))}let o=r.concat(a).concat(s),h=l(o);QA(o);for(let e=0;e<c.length;++e){let t=c[e],n=h[e];i[t]=n,jA(n)}await d.onBatchEnd(A,i),FS(i),A++,u++}if(r?u>=n.batchesPerEpoch:t.done){if(s){let t;t=kI(n.validationData)?$C(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):$C(e.evaluate(a,i,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)o["val_".concat(e.metricsNames[n])]=t[n]}break}if(e.stopTraining_)break}if(await d.onEpochEnd(p,o),p++,e.stopTraining_)break}return await d.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function kI(e){return"function"==typeof e.iterator}function BI(e){su.assert(e>0&&Number.isInteger(e),()=>"batchSize is required to be a positive integer, but got ".concat(e))}function SI(e,t,n){return null==e?[null]:Array.isArray(e)?e.map(e=>Hk(e,t,n-t)):Hk(e,t,n-t)}function II(e,t){return PA(()=>null==e?null:Array.isArray(e)?e.map(e=>II(e,t)):Jk(e,"int32"===t.dtype?t:Jd(t,"int32")))}function NI(e,t){let n=[],r=0,a=null;for(;r<e;)a=r+t,a>=e&&(a=e),n.push([r,a]),r=a;return n}function FI(e){let t=[];e instanceof ju&&(e=[e]);for(let n=0;n<e.length;++n){let r=e[n];if(1===r.rank)t.push(jk(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function EI(e,t){if(null==e)return;let n=[];if(t instanceof ju)n.push(t.id);else if(Array.isArray(t))t.forEach(e=>n.push(e.id));else if(null!=t)for(let a in t){let e=t[a];n.push(e.id)}let r=[];if(e instanceof ju)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach(e=>{-1===n.indexOf(e.id)&&r.push(e)});else if(null!=e)for(let a in e){let t=e[a];-1===n.indexOf(t.id)&&r.push(t)}r.forEach(e=>{e.isDisposed||e.dispose()})}function _I(e){return Array.isArray(e)}function TI(e){return!function(e){return e instanceof ju}(e)&&!_I(e)}function LI(e,t,n){let r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){let t=!1;if(_I(e)&&e.length>0)t=!0;else if(TI(e)){for(let n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new VC("Error when checking model ".concat(i," expected no data, but got ").concat(e))}return[]}if(null==e)return t.map(e=>null);if(TI(e)){r=[];for(let n of t){if(null==e[n])throw new VC('No data provided for "'.concat(n,'". Need data for each key in: ').concat(t));r.push(e[n])}}else if(_I(e)){if(e.length!==t.length)throw new VC("Error when checking model ".concat(i,": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ").concat(t.length," Tensor(s), but instead got the following list of Tensor(s): ").concat(e));r=e}else{if(t.length>1)throw new VC("The model ".concat(i," expects ").concat(t.length," Tensor(s), but only received one Tensor. Found: Tensor with shape ").concat(e.shape));r=[e]}if(r=FI(r),null!=n)for(let s=0;s<t.length;++s){if(null==n[s])continue;let e=r[s];if(e.shape.length!==n[s].length)throw new VC("Error when checking ".concat(i,": expected ").concat(t[s]," to have ").concat(n[s].length," dimension(s). but got array with shape ").concat(e.shape));for(let t=0;t<n[s].length;++t){if(0===t&&!a)continue;let r=e.shape[t],o=n[s][t];if(null!=o&&o>=0&&r!==o)throw new VC("".concat(i," expected a batch of elements where each example has shape [").concat(n[s].slice(1,n[s].length),"] (i.e.,tensor shape [*,").concat(n[s].slice(1,n[s].length),"]) but the ").concat(i," received an input with ").concat(e.shape[0]," examples, each with shape [").concat(e.shape.slice(1,e.shape.length),"] (tensor shape [").concat(e.shape,"])"))}}return r}function DI(e,t,n){let r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new VC("Error when checking model ".concat(i,": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ").concat(t.length," Tensor(s), but instead got ").concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new VC("The model expects ".concat(t.length," ").concat(i," Tensors, but only received one Tensor. Found: array with shape ").concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(let s=0;s<t.length;++s){if(null==n[s])continue;let e=r[s];if(e.shape.length!==n[s].length)throw new VC("Error when checking ".concat(i,": expected ").concat(t[s]," to have ").concat(n[s].length," dimension(s), but got array with shape ").concat(JSON.stringify(e.shape)));for(let r=0;r<n[s].length;++r){if(0===r&&!a)continue;let o=e.shape[r],l=n[s][r];if(null!=l&&l!==o)throw new VC("Error when checking ".concat(i,": expected ").concat(t[s]," to have shape ").concat(JSON.stringify(n[s])," but got array with shape ").concat(JSON.stringify(e.shape),"."))}}}var RI=class extends gI{constructor(e){super(e),this.isTraining=!1}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new VC("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");cI(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function(e){let t={Adagrad:()=>Nw.adagrad(.01),Adadelta:()=>Nw.adadelta(1,.95,Pk()),Adam:()=>Nw.adam(.001,.9,.999,Pk()),Adamax:()=>Nw.adamax(.002,.9,.999,Pk(),0),RMSProp:()=>Nw.rmsprop(.001,.9,0,Pk()),SGD:()=>Nw.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new VC("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof mb))throw new VC("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new VC("When passing an Array as loss, it should have one entry per model output. The model has ".concat(this.outputs.length," output(s), but you passed loss=").concat(e.loss,"."));t=e.loss.map(e=>qS(e))}else{let n=qS(e.loss);this.outputs.forEach(e=>{t.push(n)})}else{e.loss=e.loss;for(let t in e.loss)if(-1===this.outputNames.indexOf(t))throw new VC('Unknown entry in loss dictionary: "'.concat(t,'". Only expected the following keys: ').concat(this.outputNames));for(let n of this.outputNames)null==e.loss[n]&&console.warn('Output "'.concat(n,'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ').concat(n," during training")),t.push(qS(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){let e=this.internalOutputShapes[i],t=this.outputNames[i];this.feedOutputNames.push(t),this.feedOutputShapes.push(e),this.feedLossFns.push(this.lossFunctions[i])}let n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Nk("loss",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;let t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}});let r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>[]);let n;if("string"==typeof e||"function"==typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map(e=>n);{let e=[];for(let r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),a=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};Nk("metric",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;(t=>{let n,r,i;for(let s of t){if("string"==typeof s&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(s)){let t,a=this.internalOutputShapes[e];1===a[a.length-1]||this.lossFunctions[e]===VS?-1!==["accuracy","acc"].indexOf(s)?r=XS:-1!==["crossentropy","ce"].indexOf(s)&&(r=eI):this.lossFunctions[e]===WS?-1!==["accuracy","acc"].indexOf(s)?r=tI:-1!==["crossentropy","ce"].indexOf(s)&&(r=rI):-1!==["accuracy","acc"].indexOf(s)?r=JS:-1!==["crossentropy","ce"].indexOf(s)&&(r=nI),-1!==["accuracy","acc"].indexOf(s)?t="acc":-1!==["crossentropy","ce"].indexOf(s)&&(t="ce"),i=r,n=""+t}else i=iI(s),n=""+sI(s);let t;Nk(n,()=>{t=i}),a(e,n,t)}})(r[e])}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;BI(r);let a=this.standardizeUserDataXY(e,t,!0,r);try{let e=a[0].concat(a[1]);this.makeTestFunction();let t=this.testFunction;return ZC(this.testLoop(t,e,r,n.verbose,n.steps))}finally{EI(a[0],e),EI(a[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){let r=null!=(n=n||{}).batches,a=e.testFunction,i=[];if(n.verbose>0)throw new GC("Verbose mode is not implemented yet.");su.assert(!r||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but received ".concat(JSON.stringify(n.batches)));let s=function(e){return"function"==typeof e.next}(t)?t:await t.iterator(),o=0,l=0;for(;!r||l<n.batches;){let t=await s.next();if(i=PA(()=>{if(t.value){let{xs:n,ys:r}=vI(e,t.value),s=n.concat(r),c=PA(()=>a(s));if(QA(s),0===l)for(let e=0;e<c.length;++e)i.push(zp(0));let u=s[0].shape[0];for(let e=0;e<c.length;++e){let t=c[e],n=i[e];i[e]=PA(()=>$d(i[e],nh(u,t))),l>0&&QA(n)}QA(c),o+=u,++l}return i}),t.done){r&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` batches (in this case, ".concat(n.batches," batches). You may need to use the repeat() function when building your dataset."));break}}for(let c=0;c<i.length;++c){let e=i[c];i[c]=th(i[c],o),QA(e)}return ZC(i)}(this,e,t)}checkNumSamples(e,t,n){let r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new VC("If ".concat(a," is set, batchSize must be null or undefined.Got batchSize = ").concat(t))}else{if(null==e)throw new VC("Either the input data should have a defined shape, or ".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new VC("`outputs` is an empty Array, which is not allowed.");let n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new HB;if(e instanceof ju&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new VC("The number of inputs provided (".concat(e.length,") does not match the number of inputs of this model (").concat(this.inputs.length,")."));for(let t=0;t<this.inputs.length;++t)i.add(this.inputs[t],e[t])}else for(let o of this.inputs){let t=e[o.name];if(null==t)throw new VC("No value is provided for the model's input ".concat(o.name));i.add(o,t)}let s=VB(a,i);return n?s:s[0]}retrieveSymbolicTensors(e){let t=XC(null,e.length),n=e.length;for(let r of this.layers){let a=Array.isArray(r.output)?r.output:[r.output],i=a.map(e=>e.name);for(let r=0;r<e.length;++r){let s=i.indexOf(e[r]);if(-1!==s&&(t[r]=a[s],n--),0===n)break}if(0===n)break}if(n>0){let n=[];throw t.forEach((t,r)=>{null==t&&n.push(e[r])}),new VC("Cannot find SymbolicTensors for output name(s): ".concat(JSON.stringify(n)))}return t}predictLoop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return PA(()=>{let r=this.checkNumSamples(e);if(n)throw new GC("Verbose predictLoop() is not implemented yet.");let a=NI(r,t),i=this.outputs.map(e=>[]);for(let t=0;t<a.length;++t)PA(()=>{let n=a[t][0],r=a[t][1],i=SI(e,n,r),s=[];if(Array.isArray(i))for(let e=0;e<i.length;++e)s.push({key:this.inputs[e],value:i[e]});else s.push({key:this.inputs[0],value:i});let o=new HB(s);return VB(this.outputs,o)}).forEach((e,t)=>i[t].push(e));return ZC(i.map(e=>Dh(e,0)))})}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=FI(e);DI(n,this.inputNames,this.feedInputShapes,!1);try{let e=null==t.batchSize?32:t.batchSize;return BI(e),this.predictLoop(n,e)}finally{EI(n,e)}}predictOnBatch(e){DI(e,this.inputNames,this.feedInputShapes,!0);let t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t){let n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new WC("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let r=[];for(let a=0;a<this.feedOutputShapes.length;++a){let e=this.feedOutputShapes[a];this.feedLossFns[a]===WS?r.push(e.slice(0,e.length-1).concat([1])):r.push(e)}if(function(e,t){let n=ok(e.map(e=>e.shape[0]));n.sort();let r=ok(t.map(e=>e.shape[0]));if(r.sort(),n.length>1)throw new VC("All input Tensors (x) should have the same number of samples. Got array shapes: ".concat(JSON.stringify(e.map(e=>e.shape))));if(r.length>1)throw new VC("All target Tensors (y) should have the same number of samples. Got array shapes: ".concat(JSON.stringify(t.map(e=>e.shape))));if(n.length>0&&r.length>0&&!su.arraysEqual(n,r))throw new VC("Input Tensors should have the same number of samples as target Tensors. Found ".concat(n[0]," input sample(s) and ").concat(r[0]," target sample(s)."))}(e=LI(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=LI(t,this.feedOutputNames,r,!1,"target")),function(e,t,n){let r=[QS,VS,zS];for(let a=0;a<e.length;++a){let i=e[a],s=t[a],o=n[a];if(null!=s){if(s===zS&&1===i.shape[i.shape.length-1])throw new VC("You are passing a target array of shape ".concat(i.shape," while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes]."));if(-1!==r.indexOf(s)){let e=i.shape.slice(1),t=o.slice(1);for(let n=0;n<e.length;++n){let r=e[n],a=t[n];if(null!=a&&r!==a)throw new VC("A target Tensor with shape ".concat(i.shape," was passed for an output of shape ").concat(o,", while using a loss function that expects targets to have the same shape as the output."))}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new VC("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}async standardizeUserData(e,t,n,r){let a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5?arguments[5]:void 0,[s,o]=this.standardizeUserDataXY(e,t,a,i);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){let e=yI(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await bI(o[t],null,e[t]))}return[s,o,l]}testLoop(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0;return PA(()=>{let i=this.checkNumSamples(t,n,a,"steps"),s=[];if(r>0)throw new GC("Verbose mode is not implemented yet.");if(null!=a)throw new GC("steps mode in testLoop() is not implemented yet");{let r=NI(i,n),a=yg(Mk(0,i));for(let n=0;n<r.length;++n){let i=r[n][0],o=r[n][1],l=Hk(a,i,o-i),c=II(t,l),u=e(c);if(0===n)for(let e=0;e<u.length;++e)s.push(zp(0));for(let e=0;e<u.length;++e){let t=u[e];s[e]=$d(s[e],nh(o-i,t))}}for(let e=0;e<s.length;++e)s[e]=th(s[e],i)}return s})}getDedupedMetricsNames(){let e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){let r=e[n],a=r;if(YC(e,r)>1){let t=YC(e.slice(0,n),r);a+="_".concat(t)}t.push(a)}return t}makeTrainFunction(){return e=>{let t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),i=[],s=this.collectedTrainableWeights.map(e=>e.read());return[this.optimizer_.minimize(()=>{let e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});let s,o=new HB(e),l=VB(this.outputs,o,{training:!0});for(let n=0;n<this.lossFunctions.length;++n){let e=(0,this.lossFunctions[n])(r[n],l[n]);null!=a[n]&&(e=wI(e,a[n]));let i=jf(e);t.push(i),s=0===n?e:$d(s,e)}for(let n=0;n<this.metricsTensors.length;++n){let e;if(this.outputs.length>1&&n<this.outputs.length)e=t[n];else{let t=this.metricsTensors[n][0],a=this.metricsTensors[n][1];e=jf(t(r[a],l[a]))}jA(e),i.push(e)}return s=jf(s),this.calculateLosses().forEach(e=>{s=$d(s,e)}),s},!0,s)].concat(i)}}makeTestFunction(){this.testFunction=e=>PA(()=>{let t,n=[],r=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let e=0;e<this.inputs.length;++e)i.push({key:this.inputs[e],value:r[e]});let s=new HB(i),o=VB(this.outputs,s);for(let e=0;e<this.lossFunctions.length;++e){let r=this.lossFunctions[e],i=jf(r(a[e],o[e]));t=0===e?i:$d(t,i),n.push(t)}for(let e=0;e<this.metricsTensors.length;++e){let t=this.metricsTensors[e][0],r=this.metricsTensors[e][1],i=jf(t(a[r],o[r]));n.push(i)}return n})}async fit(e,t){let n,r,a,i,s,o,l,c,u,A=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;try{let d=null==A.batchSize?32:A.batchSize;BI(d);let h=await this.standardizeUserData(e,t,A.sampleWeight,A.classWeight,!1,d);n=h[0],r=h[1],u=h[2];let p,f=!1;if(null!=A.validationData&&A.validationData.length>0){if(f=!0,2!==A.validationData.length)throw 3===A.validationData.length?new GC("validationData including sample weights is not supported yet."):new VC("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ".concat(A.validationData," is invalid."));s=A.validationData[0],o=A.validationData[1];let e=await this.standardizeUserData(s,o,null,null,!0,d);l=e[0],c=e[1],p=l.concat(c)}else if(null!=A.validationSplit&&A.validationSplit>0&&A.validationSplit<1){f=!0;let e=Math.floor(n[0].shape[0]*(1-A.validationSplit)),t=n[0].shape[0];l=SI(n,e,t),a=n,n=SI(n,0,e),c=SI(r,e,t),i=r,r=SI(r,0,e),p=l.concat(c)}else null!=A.validationSteps&&(f=!0);let m=n.concat(r).concat(u);this.checkTrainableWeightsConsistency();let g,y,b=this.makeTrainFunction(),w=this.getDedupedMetricsNames();f?(this.makeTestFunction(),g=this.testFunction,y=w.slice().concat(w.map(e=>"val_"+e))):(g=null,p=[],y=w.slice());let v=RS(A.callbacks,A.yieldEvery);return await this.fitLoop(b,m,w,d,A.epochs,A.verbose,v,g,p,A.shuffle,y,A.initialEpoch,null,null)}finally{this.isTraining=!1,EI(n,e),EI(r,t),EI(a,e),EI(i,t),EI(l,s),EI(c,o),null!=u&&QA(u)}}async fitLoop(e,t,n,r,a,i,s,o,l,c,u,A,d,h){null==r&&(r=32),null==a&&(a=1),null==c&&(c=!0),null==A&&(A=0);let p=!1;if(null!=o&&null!=l&&(p=!0),null!=h&&(p=!0,null==d))throw new VC("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let f,m=this.checkNumSamples(t,r,d,"steps_per_epoch");null!=m&&(f=Mk(0,m)),null==i&&(i=1);let{callbackList:g,history:y}=OS(s,i,a,A,m,d,r,p,u);g.setModel(this),this.history=y,await g.onTrainBegin(),this.stopTraining_=!1;for(let b=A;b<a;++b){await g.onEpochBegin(b);let a={};if(null!=d)throw new GC("stepsPerEpoch mode is not implemented yet.");{if("batch"===c)throw new GC("batch shuffling is not implemneted yet");c&&su.shuffle(f);let i=yg(f),s=NI(m,r);for(let c=0;c<s.length;++c){let u={};if(await g.onBatchBegin(c,u),PA(()=>{let A=s[c][0],d=s[c][1],h=Hk(i,A,d-A);u.batch=c,u.size=d-A;let f=II(t,h),m=e(f);for(let e=0;e<n.length;++e){let t=n[e],r=m[e];u[t]=r,jA(r)}if(c===s.length-1&&p){let e=this.testLoop(o,l,r);for(let t=0;t<n.length;++t){let r=n[t],i=e[t];jA(i),a["val_"+r]=i}}}),await g.onBatchEnd(c,u),FS(u),this.stopTraining_)break}i.dispose()}if(await g.onEpochEnd(b,a),this.stopTraining_)break}return await g.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return CI(this,e,t)}async trainOnBatch(e,t){let n=await this.standardizeUserData(e,t),r=n[0],a=n[1],i=this.makeTrainFunction()(r.concat(a)),s=[];for(let o of i){let e=await o.data();s.push(e[0])}return QA(i),EI(n[0],e),EI(n[1],t),ZC(s)}getNamedWeights(e){let t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n);for(let i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){let e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){let t=OA().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-OA().numTensors}return e}getLossIdentifiers(){let e;if("string"==typeof this.loss)e=ek(this.loss);else if(Array.isArray(this.loss)){for(let e of this.loss)if("string"!=typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(e=>ek(e))}else{let t=Object.keys(this.loss);e={};let n=this.loss;for(let r of t){if("string"!=typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=ek(n[r])}}return e}getMetricIdentifiers(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[ek(sI(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>ek(sI(e)));{let e={};for(let t in this.metrics)e[t]=ek(sI(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");let t,n,r=MS(pI(e.optimizer_config));if("string"==typeof e.loss)t=tk(e.loss);else if(Array.isArray(e.loss))t=e.loss.map(e=>tk(e));else if(null!=e.loss){t={};for(let n in e.loss)t[n]=tk(e.loss[n])}if(Array.isArray(e.metrics))n=e.metrics.map(e=>tk(e));else if(null!=e.metrics){n={};for(let t in e.metrics)n[t]=tk(e.metrics[t])}this.compile({loss:t,metrics:n,optimizer:r})}async save(e,t){if("string"==typeof e){let t=Bb.getSaveHandlers(e);if(0===t.length)throw new VC("Cannot find any save handlers for URL '".concat(e,"'"));if(t.length>1)throw new VC("Found more than one (".concat(t.length,") save handlers for URL '").concat(e,"'"));e=t[0]}if(null==e.save)throw new VC("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let n=await Bb.encodeWeights(this.getNamedWeights(t)),r={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(mI),convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();let e="optimizer",{data:t,specs:a}=await Bb.encodeWeights(await this.optimizer.getWeights(),e);n.specs.push(...a),n.data=Bb.concatenateArrayBuffers([n.data,t])}return null!=this.userDefinedMetadata&&(oI(this.userDefinedMetadata,this.name,!0),r.userDefinedMetadata=this.userDefinedMetadata),r.weightData=n.data,r.weightSpecs=n.specs,e.save(r)}setUserDefinedMetadata(e){oI(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}};RI.className="Model",cb.registerClass(RI);var UI=class extends RI{};async function OI(e,t){"modelTopology"in e||(e={modelTopology:e});let n=e.modelTopology;null!=n.model_config&&(n=n.model_config);let r=MS(pI(n),t);if(null!=e.weightsManifest){let t=await Bb.loadWeights(e.weightsManifest,e.pathPrefix,r.weights.map(e=>e.originalName)),n={};for(let e of r.weights)n[e.originalName]=t[e.originalName];r.loadWeights(n),QA(t)}return r}async function MI(e,t){if(null==t&&(t={}),"string"==typeof e){let n=Bb.getLoadHandlers(e,t);if(0===n.length)n.push(Bb.browserHTTPRequest(e,t));else if(n.length>1)throw new VC("Found more than one (".concat(n.length,") load handlers for URL '").concat(e,"'"));e=n[0]}return async function(e,t,n){if(null==n&&(n={}),null==e.load)throw new VC("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let r=await e.load(),a=r.modelTopology;null!=a.model_config&&(a=a.model_config);let i=null==n.strict||n.strict,s=null!=r.weightData&&null!=r.weightSpecs&&i,o=MS(pI(a),t,s),l=r.trainingConfig;if(null!=l&&o.loadTrainingConfig(l),null!=r.userDefinedMetadata&&o.setUserDefinedMetadata(r.userDefinedMetadata),null!=r.weightData){if(null==r.weightSpecs)throw new VC("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:e,optimizerWeights:t}=function(e,t){let n=Bb.decodeWeights(e,t),r={},a=[];return t.forEach(e=>{"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]}),{modelWeights:r,optimizerWeights:a}}(r.weightData,r.weightSpecs);o.loadWeights(e,i),null!=o.optimizer&&t.length>0&&await o.optimizer.setWeights(t),QA(e),QA(t.map(e=>e.tensor))}return o}(e,void 0,t)}UI.className="Functional",cb.registerClass(UI);var PI=class e extends RI{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:gk("sequential_"),null!=e.layers)for(let t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(e=>e<0))throw new VC("Negative dimension size caused by adding layer ".concat(e.name," with input shape [").concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}add(t){let n,r=t instanceof e||t instanceof RI;if(r){if(n=t,1!==n.outputs.length)throw new VC("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new VC("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===t.inboundNodes.length){if(null==t.batchInputShape)throw new VC("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let e=jB({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(e)}if(r)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==t.inboundNodes.length)throw new VC("A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ".concat(t.name," which has ").concat(t.inboundNodes.length," pre-existing inbound connections."));if(1!==t.inboundNodes[0].outputTensors.length)throw new VC("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=PB(this.outputs[0])}this.inboundNodes=[],new UB({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:XC(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs[0].shape})}else{let e=t.apply(this.outputs[0]);if(Array.isArray(e))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[e],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(IB(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new RI({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new WC("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new WC("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new WC("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new WC("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(t,n){let r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(n instanceof Array){if(null==n[0].className||"Merge"===n[0].className)throw new VC("Legacy serialization format not supported yet.");r=n}else su.assert(null!=n.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),r=n.layers,delete n.layers,i=n;let s=new t(i);if(!(s instanceof e))throw new GC("Sequential.fromConfig called on non-Sequential input: ".concat(s));for(let e of r){let t=MS(e,void 0,a);a&&t.setFastWeightInitDuringBuild(!0),s.add(t)}return s}set stopTraining(e){if(null==this.model)throw new VC("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new VC("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let e=[];for(let t of this.layers){let n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}};function QI(e){return new RI(e)}function jI(e){return new PI(e)}function HI(e){return jB(e)}function zI(e,t){US.registerCallbackConstructor(e,t)}PI.className="Sequential",cb.registerClass(PI);var WI=class extends cb.Serializable{getConfig(){return{}}},VI=class extends WI{apply(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new GC("Support for alpha values other than 1 (".concat(t,") is not implemented yet."));return Fp(e)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}};VI.className="elu",cb.registerClass(VI);var GI=class extends WI{apply(e){return Jm(e)}};GI.className="selu",cb.registerClass(GI);var KI=class extends WI{apply(e){return jm(e)}};KI.className="relu",cb.registerClass(KI);var qI=class extends WI{apply(e){return PA(()=>Vf(6,jm(e)))}};qI.className="relu6",cb.registerClass(qI);var XI=class extends WI{apply(e){return e}};XI.className="linear",cb.registerClass(XI);var JI=class extends WI{apply(e){return Uh(e)}};JI.className="sigmoid",cb.registerClass(JI);var YI=class extends WI{apply(e){return function(e){return PA(()=>{let t=$d(.5,nh(.2,e));return Zh(t,0,1)})}(e)}};YI.className="hardSigmoid",cb.registerClass(YI);var ZI=class extends WI{apply(e){return Bf(e)}};ZI.className="softplus",cb.registerClass(ZI);var $I=class extends WI{apply(e){return function(e){return PA(()=>th(e,$d(rh(e),1)))}(e)}};$I.className="softsign",cb.registerClass($I);var eN=class extends WI{apply(e){return Mh(e)}};eN.className="tanh",cb.registerClass(eN);var tN=class extends WI{apply(e){return sg(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}};tN.className="softmax",cb.registerClass(tN);var nN=class extends WI{apply(e){return Nf(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1)}};nN.className="logSoftmax",cb.registerClass(nN);var rN=class extends WI{apply(e){return PA(()=>PA(()=>{let t=Math.sqrt(2),n=nh(.5,$d(1,_p(th(e,t))));return nh(e,n)}))}};rN.className="gelu",cb.registerClass(rN);var aN=class extends WI{apply(e){return PA(()=>nh(.5,nh(e,$d(1,Mh(nh(Wp(th(2,Math.PI)),$d(e,nh(.044715,Hp(e,3)))))))))}};aN.className="gelu_new",cb.registerClass(aN);var iN=class extends WI{apply(e){return PA(()=>nh(e,Mh(Bf(e))))}};iN.className="mish",cb.registerClass(iN);var sN=class extends WI{apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return PA(()=>nh(Uh(nh(e,t)),e))}};function oN(e){return e.getClassName()}function lN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ik(e,cb.SerializationMap.getMap().classNameMap,t,"activation")}function cN(e){if(null==e){let e={className:"linear",config:{}};return lN(e)}if("string"==typeof e){let t={};return t.className=e,t.config={},lN(t)}return e instanceof WI?e:lN(e)}function uN(e){if(null!=e&&"object"!=typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: ".concat(e))}sN.className="swish",cb.registerClass(sN);var AN=class extends cb.Serializable{},dN=class extends AN{constructor(e){super(),uN(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return PA(()=>{let t=Hf([1]);return this.hasL1&&(t=$d(t,Gp(nh(this.l1,rh(e))))),this.hasL2&&(t=$d(t,Gp(nh(this.l2,Yk(e))))),_h(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}};dN.className="L1L2",cb.registerClass(dN);var hN={l1l2:"L1L2"};function pN(e){return rk(e)}function fN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ik(e,cb.SerializationMap.getMap().classNameMap,t,"regularizer")}function mN(e){if(null==e)return null;if("string"==typeof e){return fN({className:e in hN?hN[e]:e,config:{}})}return e instanceof AN?e:fN(e)}var gN=class extends MB{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=SB(e);let n=jm(e);return null!=this.maxValue&&(n=Zh(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}};gN.className="ReLU",cb.registerClass(gN);var yN=class extends MB{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=SB(e);return uf(n,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};yN.className="LeakyReLU",cb.registerClass(yN);var bN=class extends MB{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=CB(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=mN(e.alphaRegularizer),this.alphaConstraint=iS(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new VC("Expected sharedAxes to be a number or an array of numbers, but got ".concat(e.sharedAxes));this.sharedAxes=[e.sharedAxes]}}build(e){let t=(e=IB(e)).slice(1);if(null!=this.sharedAxes)for(let r of this.sharedAxes)t[r-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let n={};if(null!=this.sharedAxes)for(let r=1;r<e.length;++r)n[r]=e[r];this.inputSpec=[new LB({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=SB(e),lm(e,this.alpha.read())}getConfig(){let e={alphaInitializer:xB(this.alphaInitializer),alphaRegularizer:pN(this.alphaRegularizer),alphaConstraint:rS(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}};bN.className="PReLU",cb.registerClass(bN);var wN=class extends MB{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new GC("Non-default alpha value (".concat(e.alpha,") is not supported by the ELU layer yet."));this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=SB(e);return Fp(n)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};wN.className="ELU",cb.registerClass(wN);var vN=class extends MB{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){let n=SB(e);return nh(n,Jd(rf(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}};vN.className="ThresholdedReLU",cb.registerClass(vN);var xN=class extends MB{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new tN).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){return PA(()=>{let n=SB(e),r=t.mask;if(null!=r){let e=nh(If(zf(n.shape),Jd(r,n.dtype)),zp(-1e9));n=$d(n,e)}return this.axis instanceof Array?this.axis.length>1?Jp(If(n,Ff(n,this.axis,!0))):this.softmax(n,this.axis[0]):this.softmax(n,this.axis)})}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};function CN(e,t,n){if("number"==typeof e)return XC(e,t);if(e.length!==t)throw new VC("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers. Received: ").concat(e.length," elements."));for(let r=0;r<t;++r){let a=e[r];if(!Dk(a))throw new VC("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers. Received: ").concat(JSON.stringify(e)," including a non-integer number ").concat(a))}return e}function kN(e,t,n,r){let a;return null==e?e:(a="same"===n?e:e-(t+(t-1)*((arguments.length>4&&void 0!==arguments[4]?arguments[4]:1)-1))+1,Math.floor((a+r-1)/r))}function BN(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+Ok([n-t,0]);else{if("same"!==r)throw new VC("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function SN(e,t){return PA(()=>(kk(t),"channelsFirst"===t?Pg(e,[0,2,3,1]):e))}function IN(e,t){return PA(()=>(kk(t),"channelsFirst"===t?Pg(e,[0,2,3,4,1]):e))}function NN(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return PA(()=>{if(null==i&&(i="channelsLast"),kk(i),3!==e.rank&&4!==e.rank)throw new VC("conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new VC("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ".concat(e.rank,"."));let l=SN(e,i);if("causal"===a)throw new GC("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=qg.conv2d({x:l,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:s,dataFormat:"NHWC",bias:n,activation:o}),"channelsFirst"===i&&(l=Pg(l,[0,3,1,2])),l})}xN.className="Softmax",cb.registerClass(xN);var FN=class e extends MB{constructor(t,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.verifyArgs(n),this.rank=t,Ak(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new GC("Convolution layer for rank other than 1, 2, or 3 (".concat(this.rank,") is not implemented yet."));if(this.kernelSize=CN(n.kernelSize,t,"kernelSize"),this.strides=CN(null==n.strides?1:n.strides,t,"strides"),this.padding=null==n.padding?"valid":n.padding,Bk(this.padding),this.dataFormat=null==n.dataFormat?"channelsLast":n.dataFormat,kk(this.dataFormat),this.activation=cN(n.activation),this.useBias=null==n.useBias||n.useBias,this.biasInitializer=CB(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=iS(n.biasConstraint),this.biasRegularizer=mN(n.biasRegularizer),this.activityRegularizer=mN(n.activityRegularizer),this.dilationRate=CN(null==n.dilationRate?1:n.dilationRate,t,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new VC("dilationRate must be a number or an array of a single number for 1D convolution, but received ".concat(JSON.stringify(this.dilationRate)));if(2===this.rank){if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new VC("dilationRate must be a number or array of two numbers for 2D convolution, but received ".concat(JSON.stringify(this.dilationRate)))}else if(3===this.rank)if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new VC("dilationRate must be a number or array of three numbers for 3D convolution, but received ".concat(JSON.stringify(this.dilationRate)))}static verifyArgs(e){if(JC("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!uk(e.kernelSize,"number",1,3))throw new VC("BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}getConfig(){let e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:oN(this.activation),useBias:this.useBias,biasInitializer:xB(this.biasInitializer),biasRegularizer:pN(this.biasRegularizer),activityRegularizer:pN(this.activityRegularizer),biasConstraint:rS(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}},EN=class e extends FN{constructor(t,n){super(t,n),this.kernel=null,e.verifyArgs(n),this.filters=n.filters,Ak(this.filters,"filters"),this.kernelInitializer=CB(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=iS(n.kernelConstraint),this.kernelRegularizer=mN(n.kernelRegularizer)}build(e){e=IB(e);let t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new VC("The channel dimension of the input should be defined. Found ".concat(e[t]));let n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return PA(()=>{e=SB(e);let t,n=null==this.bias?null:this.bias.read(),r=hk(this.activation.getClassName());if(null!=r&&2===this.rank)t=NN(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return PA(()=>{if(null==i&&(i="channelsLast"),kk(i),3!==e.shape.length)throw new VC("The input of a conv1dWithBias operation should be 3, but is ".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new VC("The kernel for a conv1dWithBias operation should be 3, but is ".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new VC("The bias for a conv1dWithBias operation should be 1, but is ".concat(n.shape.length," instead"));if("channelsFirst"===i&&(e=Pg(e,[0,2,1])),"causal"===a)throw new GC("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let o=ap(e,t,r,"same"===a?"same":"valid","NWC",s);return null!=n&&(o=$k(o,n)),o})}(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=NN(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new GC("convolutions greater than 3D are not implemented yet.");t=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;return PA(()=>{if(null==i&&(i="channelsLast"),kk(i),4!==e.rank&&5!==e.rank)throw new VC("conv3dWithBias expects input to be of rank 4 or 5, but received ".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new VC("conv3dWithBias expects kernel to be of rank 4 or 5, but received ".concat(e.rank,"."));let o=IN(e,i);if("causal"===a)throw new GC("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return o=op(o,t,r,"same"===a?"same":"valid","NDHWC",s),null!=n&&(o=$k(o,n)),"channelsFirst"===i&&(o=Pg(o,[0,4,1,2,3])),o})}(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t})}computeOutputShape(e){e=IB(e);let t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let a=0;a<n.length;++a){let e=kN(n[a],this.kernelSize[a],this.padding,this.strides[a],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[a]);t.push(e)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){let e={filters:this.filters,kernelInitializer:xB(this.kernelInitializer),kernelRegularizer:pN(this.kernelRegularizer),kernelConstraint:rS(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new VC("Convolution layer expected config.filters to be a 'number' > 0 but got ".concat(JSON.stringify(e.filters)))}},_N=class e extends EN{constructor(t){super(2,t),e.verifyArgs(t)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!uk(e.kernelSize,"number",1,2))throw new VC("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}};_N.className="Conv2D",cb.registerClass(_N);var TN=class e extends EN{constructor(t){super(3,t),e.verifyArgs(t)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new VC("Conv3D expects config.kernelSize to be number or [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}};TN.className="Conv3D",cb.registerClass(TN);var LN=class extends _N{constructor(e){if(super(e),this.inputSpec=[new LB({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new VC("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ".concat(this.padding))}build(e){if(4!==(e=IB(e)).length)throw new VC("Input should have rank 4; Received input shape: "+JSON.stringify(e));let t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new VC("The channel dimension of the inputs should be defined. Found `None`.");let n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new LB({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return PA(()=>{let t=SB(e);if(4!==t.shape.length)throw new VC("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-".concat(t.shape.length));let n,r,a=t.shape,i=a[0];"channelsFirst"===this.dataFormat?(n=2,r=3):(n=1,r=2);let s=a[n],o=a[r],l=this.kernelSize[0],c=this.kernelSize[1],u=this.strides[0],A=this.strides[1],d=[i,BN(s,u,l,this.padding),BN(o,A,c,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=Pg(t,[0,2,3,1]));let h=sp(t,this.kernel.read(),d,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(h=Pg(h,[0,3,1,2])),null!=this.bias&&(h=$k(h,this.bias.read(),this.dataFormat)),null!=this.activation&&(h=this.activation.apply(h)),h})}computeOutputShape(e){let t,n,r,a=(e=IB(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);let i=this.kernelSize[0],s=this.kernelSize[1],o=this.strides[0],l=this.strides[1];return a[t]=this.filters,a[n]=BN(a[n],o,i,this.padding),a[r]=BN(a[r],l,s,this.padding),a}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};LN.className="Conv2DTranspose",cb.registerClass(LN);var DN=class extends TN{constructor(e){if(super(e),this.inputSpec=[new LB({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new VC("Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ".concat(this.padding))}build(e){if(5!==(e=IB(e)).length)throw new VC("Input should have rank 5; Received input shape: "+JSON.stringify(e));let t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new VC("The channel dimension of the inputs should be defined. Found `None`.");let n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new LB({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return PA(()=>{let t=SB(e);if(5!==t.shape.length)throw new VC("Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-".concat(t.shape.length));let n,r,a,i=t.shape,s=i[0];"channelsFirst"===this.dataFormat?(a=2,n=3,r=4):(a=1,n=2,r=3);let o=i[a],l=i[n],c=i[r],u=this.kernelSize[0],A=this.kernelSize[1],d=this.kernelSize[2],h=this.strides[0],p=this.strides[1],f=this.strides[2],m=[s,BN(o,h,u,this.padding),BN(l,p,A,this.padding),BN(c,f,d,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=Pg(t,[0,2,3,4,1]));let g=cp(t,this.kernel.read(),m,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(g=Pg(g,[0,4,1,2,3])),null!==this.bias&&(g=$k(g,this.bias.read(),this.dataFormat)),null!==this.activation&&(g=this.activation.apply(g)),g})}computeOutputShape(e){let t,n,r,a,i=(e=IB(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);let s=this.kernelSize[0],o=this.kernelSize[1],l=this.kernelSize[2],c=this.strides[0],u=this.strides[1],A=this.strides[2];return i[t]=this.filters,i[n]=BN(i[n],c,s,this.padding),i[r]=BN(i[r],u,o,this.padding),i[a]=BN(i[a],A,l,this.padding),i}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};DN.className="Conv3DTranspose",cb.registerClass(DN);var RN=class extends EN{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new VC("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new VC("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new VC("SeparableConv".concat(this.rank,"D supports only padding modes: 'same' and 'valid', but received ").concat(JSON.stringify(t.padding)));this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=CB(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=mN(t.depthwiseRegularizer),this.depthwiseConstraint=iS(t.depthwiseConstraint),this.pointwiseInitializer=CB(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=mN(t.pointwiseRegularizer),this.pointwiseConstraint=iS(t.pointwiseConstraint)}build(e){if((e=IB(e)).length<this.rank+2)throw new VC("Inputs to SeparableConv".concat(this.rank,"D should have rank ").concat(this.rank+2,", but received input shape: ").concat(JSON.stringify(e)));let t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new VC("The channel dimension of the inputs should be defined, but found ".concat(JSON.stringify(e[t])));let n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[];for(let s=0;s<this.rank;++s)a.push(1);a.push(n*this.depthMultiplier,this.filters);let i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new LB({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return PA(()=>{let t;if(e=SB(e),1===this.rank)throw new GC("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=Pg(e,[0,2,3,1])),t=Ym(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=$k(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=Pg(t,[0,3,1,2])),t})}getConfig(){let e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=xB(this.depthwiseInitializer),e.pointwiseInitializer=xB(this.pointwiseInitializer),e.depthwiseRegularizer=pN(this.depthwiseRegularizer),e.pointwiseRegularizer=pN(this.pointwiseRegularizer),e.depthwiseConstraint=rS(this.depthwiseConstraint),e.pointwiseConstraint=rS(this.pointwiseConstraint),e}};RN.className="SeparableConv";var UN=class extends RN{constructor(e){super(2,e)}};UN.className="SeparableConv2D",cb.registerClass(UN);var ON=class e extends EN{constructor(t){super(1,t),e.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){let e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!uk(e.kernelSize,"number",1,1))throw new VC("Conv1D expects config.kernelSize to be number or number[] with length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}};ON.className="Conv1D",cb.registerClass(ON);var MN=class extends MB{constructor(e){super(e),"number"==typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return PA(()=>{if(e=SB(e),"channelsLast"===this.dataFormat){let t=Wk(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Wk(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{let t=Wk(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Wk(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};MN.className="Cropping2D",cb.registerClass(MN);var PN=class extends MB{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,kk(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,function(e){ck(bk,"InterpolationFormat",e)}(this.interpolation)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){let t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{let t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return PA(()=>{let t=SB(e),n=t.shape;if("channelsFirst"===this.dataFormat){t=Pg(t,[0,2,3,1]);let e=this.size[0]*n[2],r=this.size[1]*n[3],a="nearest"===this.interpolation?ab.resizeNearestNeighbor(t,[e,r]):ab.resizeBilinear(t,[e,r]);return Pg(a,[0,3,1,2])}{let e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?ab.resizeNearestNeighbor(t,[e,r]):ab.resizeBilinear(t,[e,r])}})}getConfig(){let e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}};PN.className="UpSampling2D",cb.registerClass(PN);var QN=class extends FN{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=CB(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=iS(e.depthwiseConstraint),this.depthwiseRegularizer=mN(e.depthwiseRegularizer)}build(e){if((e=IB(e)).length<4)throw new VC("Inputs to DepthwiseConv2D should have rank 4. Received input shape: ".concat(JSON.stringify(e),"."));let t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new VC("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (".concat(e[t],")."));let n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return PA(()=>{let t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return PA(()=>{null==a&&(a="channelsLast"),kk(a);let s=SN(e,a);if(4!==e.rank)throw new VC("Input for depthwiseConv2d is required to be 4-D, but is instead ".concat(e.rank,"-D"));if(4!==t.rank)throw new VC("depthwiseKernel is required to be 4-D, but is instead ".concat(t.rank,"-D"));return s=mp(s,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(s=Pg(s,[0,3,1,2])),s})}(e=SB(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=$k(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t})}computeOutputShape(e){e=IB(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=kN(t,this.kernelSize[0],this.padding,this.strides[0]),i=kN(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=xB(this.depthwiseInitializer),e.depthwiseRegularizer=pN(this.depthwiseRegularizer),e.depthwiseConstraint=rS(this.depthwiseRegularizer),e}};function jN(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new VC("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function HN(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return PA(()=>{let l=t.shape.length;if(l<3)throw new VC("Input should be at least 3D, but is ".concat(l,"D."));let c=[1,0].concat(Mk(2,l));if(t=Pg(t,c),null!=i)throw new GC("The rnn() functoin of the deeplearn.js backend does not support constants yet.");s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&(a=Jd(Jd(a,"bool"),"float32"),a.rank===l-1&&(a=Yp(a,-1)),a=Pg(a,c)),r&&(t=zm(t,0),null!=a&&(a=zm(a,0)));let u,A,d,h=[],p=n,f=t.shape[0],m=Lg(t);null!=a&&(A=Lg(a));for(let t=0;t<f;++t){let n=m[t],r=PA(()=>e(n,p));if(null==a)u=r[0],p=r[1];else{let e=PA(()=>{let e=A[t],n=If($f(e),e),a=$d(nh(r[0],e),nh(p[0],n)),i=p.map((t,a)=>$d(nh(r[1][a],e),nh(t,n)));return{output:a,newStates:i}});u=e.output,p=e.newStates}o&&h.push(u)}return o&&(d=pg(h,1)),[u,d,p]})}QN.className="DepthwiseConv2D",cb.registerClass(QN);var zN=class e extends MB{constructor(e){let t;if(super(e),null==e.cell)throw new VC("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new YN({cells:e.cell}):e.cell,null==t.stateSize)throw new VC("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new LB({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){return Mk(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(e=>null)}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){kB(e)&&(e=e[0]);let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);let n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){let r=[];for(let n of t)r.push([e[0],n]);return[n].concat(r)}return n}computeMask(e,t){return PA(()=>{Array.isArray(t)&&(t=t[0]);let e=this.returnSequences?t:null;if(this.returnState){let t=this.states.map(e=>null);return[e].concat(t)}return e})}get states(){if(null==this.states_){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new GC("Constants support is not implemented in RNN yet.");kB(e)&&(e=e[0]);let t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new LB({shape:[t,null,...n]});let r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!su.arraysEqual(this.stateSpec.map(e=>e.shape[e.shape.length-1]),r))throw new VC("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; However cell.stateSize is ").concat(this.cell.stateSize))}else this.stateSpec=r.map(e=>new LB({shape:[null,e]}));this.stateful&&this.resetStates()}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];PA(()=>{if(!this.stateful)throw new zC("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape[0];if(null==n)throw new VC("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>Hf([n,e])):this.states_=[Hf([n,this.cell.stateSize])];else if(null==e)QA(this.states_),null!=this.keptStates&&(QA(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>Hf([n,e])):this.states_[0]=Hf([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new VC("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), but it received ").concat(e.length," state value(s). Input received: ").concat(e));!0===t?this.keptStates.push(this.states_.slice()):QA(this.states_);for(let t=0;t<this.states_.length;++t){let r=e[t],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,i=[n,a];if(!su.arraysEqual(r.shape,i))throw new VC("State ".concat(t," is incompatible with layer ").concat(this.name,": expected shape=").concat(i,", received shape=").concat(r.shape));this.states_[t]=r}}this.states_=this.states_.map(e=>jA(e.clone()))})}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});let a=jN(e,n,r,this.numConstants);e=a.inputs,n=a.initialState,r=a.constants;let i=[],s=[];if(null!=n){t.initialState=n,i=i.concat(n),this.stateSpec=[];for(let e of n)this.stateSpec.push(new LB({shape:e.shape}));s=s.concat(this.stateSpec)}if(null!=r&&(t.constants=r,i=i.concat(r),this.numConstants=r.length),i[0]instanceof DB){let n=[e].concat(i),r=this.inputSpec.concat(s),a=this.inputSpec;this.inputSpec=r;let o=super.apply(n,t);return this.inputSpec=a,o}return super.apply(e,t)}call(e,t){return PA(()=>{let n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;e=SB(e),null==a&&(a=this.stateful?this.states_:this.getInitialState(e));let i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(a.length!==i)throw new VC("RNN Layer has ".concat(i," state(s) but was passed ").concat(a.length," initial state(s)."));this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let s={training:r},o=HN((e,t)=>{let n=this.cell.call([e].concat(t),s);return[n[0],n.slice(1)]},e,a,this.goBackwards,n,null,this.unroll,this.returnSequences),l=o[0],c=o[1],u=o[2];this.stateful&&this.resetStates(u,r);let A=this.returnSequences?c:l;return this.returnState?[A].concat(u):A})}getInitialState(e){return PA(()=>{let t=Hf(e.shape);return t=Gp(t,[1,2]),t=jk(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(e=>e>1?Kk(t,[1,e]):t):this.cell.stateSize>1?[Kk(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){let t=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(n.numConstants=this.numConstants);let r=this.cell.getConfig();return this.getClassName()===e.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),t),n)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=MS(t.cell,n);return new e(Object.assign(t,{cell:r}))}};zN.className="RNN",cb.registerClass(zN);var WN=class extends MB{},VN=class extends WN{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Ak(this.units,"units"),this.activation=cN(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=CB(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=CB(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=CB(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=mN(e.kernelRegularizer),this.recurrentRegularizer=mN(e.recurrentRegularizer),this.biasRegularizer=mN(e.biasRegularizer),this.kernelConstraint=iS(e.kernelConstraint),this.recurrentConstraint=iS(e.recurrentConstraint),this.biasConstraint=iS(e.biasConstraint),this.dropout=Uk([1,Ok([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Uk([1,Ok([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=IB(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return PA(()=>{if(2!==e.length)throw new VC("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));let n=e[1];e=e[0];let r=null!=t.training&&t.training;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=ZN({ones:()=>$f(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=ZN({ones:()=>$f(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));let a,i=this.dropoutMask,s=this.recurrentDropoutMask;a=Xk(null!=i?nh(e,i):e,this.kernel.read()),null!=this.bias&&(a=$k(a,this.bias.read())),null!=s&&(n=nh(n,s));let o=$d(a,Xk(n,this.recurrentKernel.read()));return null!=this.activation&&(o=this.activation.apply(o)),[o,o]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:oN(this.activation),useBias:this.useBias,kernelInitializer:xB(this.kernelInitializer),recurrentInitializer:xB(this.recurrentInitializer),biasInitializer:xB(this.biasInitializer),kernelRegularizer:pN(this.kernelRegularizer),recurrentRegularizer:pN(this.recurrentRegularizer),biasRegularizer:pN(this.biasRegularizer),activityRegularizer:pN(this.activityRegularizer),kernelConstraint:rS(this.kernelConstraint),recurrentConstraint:rS(this.recurrentConstraint),biasConstraint:rS(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}};VN.className="SimpleRNNCell",cb.registerClass(VN);var GN=class extends zN{constructor(e){e.cell=new VN(e),super(e)}call(e,t){return PA(()=>{null!=this.cell.dropoutMask&&(QA(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(QA(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}static fromConfig(e,t){return new e(t)}};GN.className="SimpleRNN",cb.registerClass(GN);var KN=class extends WN{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new VC("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Ak(this.units,"units"),this.activation=cN(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=cN(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=CB(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=CB(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=CB(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=mN(e.kernelRegularizer),this.recurrentRegularizer=mN(e.recurrentRegularizer),this.biasRegularizer=mN(e.biasRegularizer),this.kernelConstraint=iS(e.kernelConstraint),this.recurrentConstraint=iS(e.recurrentConstraint),this.biasConstraint=iS(e.biasConstraint),this.dropout=Uk([1,Ok([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Uk([1,Ok([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){let t=(e=IB(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return PA(()=>{if(2!==e.length)throw new VC("GRUCell expects 2 input Tensors (inputs, h, c), got ".concat(e.length,"."));let n=null!=t.training&&t.training,r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=ZN({ones:()=>$f(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=ZN({ones:()=>$f(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));let a,i,s,o=this.dropoutMask,l=this.recurrentDropoutMask;0<this.dropout&&this.dropout<1&&(e=nh(e,o[0]));let c=Xk(e,this.kernel.read());this.useBias&&(c=$k(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=nh(r,l[0]));let u=this.recurrentKernel.read(),[A,d]=ug(u,[2*this.units,this.units],u.rank-1),h=Xk(r,A),[p,f,m]=ug(c,3,c.rank-1),[g,y]=ug(h,2,h.rank-1);a=this.recurrentActivation.apply($d(p,g)),i=this.recurrentActivation.apply($d(f,y));let b=Xk(nh(i,r),d);s=this.activation.apply($d(m,b));let w=$d(nh(a,r),nh($d(1,kf(a)),s));return[w,w]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:oN(this.activation),recurrentActivation:oN(this.recurrentActivation),useBias:this.useBias,kernelInitializer:xB(this.kernelInitializer),recurrentInitializer:xB(this.recurrentInitializer),biasInitializer:xB(this.biasInitializer),kernelRegularizer:pN(this.kernelRegularizer),recurrentRegularizer:pN(this.recurrentRegularizer),biasRegularizer:pN(this.biasRegularizer),activityRegularizer:pN(this.activityRegularizer),kernelConstraint:rS(this.kernelConstraint),recurrentConstraint:rS(this.recurrentConstraint),biasConstraint:rS(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}};KN.className="GRUCell",cb.registerClass(KN);var qN=class extends zN{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new KN(e),super(e)}call(e,t){return PA(()=>{null!=this.cell.dropoutMask&&(QA(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(QA(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}};qN.className="GRU",cb.registerClass(qN);var XN=class extends WN{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Ak(this.units,"units"),this.activation=cN(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=cN(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=CB(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=CB(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=CB(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=mN(e.kernelRegularizer),this.recurrentRegularizer=mN(e.recurrentRegularizer),this.biasRegularizer=mN(e.biasRegularizer),this.kernelConstraint=iS(e.kernelConstraint),this.recurrentConstraint=iS(e.recurrentConstraint),this.biasConstraint=iS(e.biasConstraint),this.dropout=Uk([1,Ok([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=Uk([1,Ok([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;let n,r=(e=IB(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){let e=this.biasInitializer,r=this.units;n=new(t=class extends aB{apply(t,n){let a=e.apply([r]),i=(new sB).apply([r]),s=e.apply([2*r]);return Gk(Gk(a,i),s)}},t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return PA(()=>{let n=null!=t.training&&t.training;if(3!==e.length)throw new VC("LSTMCell expects 3 input Tensors (inputs, h, c), got ".concat(e.length,"."));let r=e[1],a=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=ZN({ones:()=>$f(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=ZN({ones:()=>$f(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));let i,s,o,l,c=this.dropoutMask,u=this.recurrentDropoutMask;0<this.dropout&&this.dropout<1&&(e=nh(e,c[0]));let A=Xk(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=nh(r,u[0])),A=$d(A,Xk(r,this.recurrentKernel.read())),this.useBias&&(A=$k(A,this.bias.read()));let[d,h,p,f]=ug(A,4,A.rank-1);i=this.recurrentActivation.apply(d),s=this.recurrentActivation.apply(h),o=$d(nh(s,a),nh(i,this.activation.apply(p))),l=this.recurrentActivation.apply(f);let m=nh(l,this.activation.apply(o));return[m,m,o]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:oN(this.activation),recurrentActivation:oN(this.recurrentActivation),useBias:this.useBias,kernelInitializer:xB(this.kernelInitializer),recurrentInitializer:xB(this.recurrentInitializer),biasInitializer:xB(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:pN(this.kernelRegularizer),recurrentRegularizer:pN(this.recurrentRegularizer),biasRegularizer:pN(this.biasRegularizer),activityRegularizer:pN(this.activityRegularizer),kernelConstraint:rS(this.kernelConstraint),recurrentConstraint:rS(this.recurrentConstraint),biasConstraint:rS(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}};XN.className="LSTMCell",cb.registerClass(XN);var JN=class extends zN{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new XN(e),super(e)}call(e,t){return PA(()=>{null!=this.cell.dropoutMask&&(QA(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(QA(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}};JN.className="LSTM",cb.registerClass(JN);var YN=class extends WN{constructor(e){super(e),this.cells=e.cells}get stateSize(){let e=[];for(let t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return PA(()=>{let n=e.slice(1),r=[];for(let e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();let a,i=[];for(let s=0;s<this.cells.length;++s){let o=this.cells[s];n=r[s],a=0===s?[e[0]].concat(n):[a[0]].concat(n),a=o.call(a,t),i.push(a.slice(1))}n=[];for(let e of i.slice().reverse())n.push(...e);return[a[0]].concat(n)})}build(e){let t;kB(e)&&(e=e[0]),this.cells.forEach((n,r)=>{Nk("RNNCell_".concat(r),()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){let e=super.getConfig(),t={cells:this.cells.map(e=>({className:e.getClassName(),config:e.getConfig()}))};return Object.assign(Object.assign({},e),t)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[];for(let a of t.cells)r.push(MS(a,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];let e=[];for(let t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){let t=[];for(let e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){let e=[];for(let t of this.cells)e.push(...t.weights);return _B(e)}setWeights(e){let t=[];for(let n of this.cells){let r=n.weights.length,a=e.splice(r);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],a[e]])}TB(t)}};function ZN(e){let{ones:t,rate:n,training:r=!1,count:a=1,dropoutFunc:i}=e,s=()=>null!=i?i(t(),n):eB(t(),n),o=()=>tB(s,t,r);return!a||a<=1?jA(o().clone()):Array(a).fill(void 0).map(o).map(e=>jA(e.clone()))}YN.className="StackedRNNCells",cb.registerClass(YN);var $N=class extends zN{constructor(e){if(e.unroll)throw new GC("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new GC("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new LB({ndim:5})]}call(e,t){return PA(()=>{if(null!=this.cell.dropoutMask&&(QA(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(QA(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new VC("ConvRNN2D cell does not support constants");let n=null==t?null:t.mask,r=null==t?null:t.training,a=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:a})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return PA(()=>{let{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),a=Hf([r[0],...r.slice(2)]);return Array.isArray(t)?Array(t.length).fill(a):[a]})}resetStates(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];PA(()=>{if(!this.stateful)throw new zC("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),a=[r[0],...r.slice(2)];if(null==n[0])throw new VC("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Hf(a)):this.states_=[Hf(a)];else if(null==e)QA(this.states_),null!=this.keptStates&&(QA(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Hf(a)):this.states_[0]=Hf(a);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new VC("Layer ".concat(this.name," expects ").concat(this.states_.length," state(s), but it received ").concat(e.length," state value(s). Input received: ").concat(e));t?this.keptStates.push(this.states_.slice()):QA(this.states_);for(let t=0;t<this.states_.length;++t){let n=e[t],r=a;if(!su.arraysEqual(n.shape,r))throw new VC("State ".concat(t," is incompatible with layer ").concat(this.name,": expected shape=").concat(r,", received shape=").concat(n.shape));this.states_[t]=n}}this.states_=this.states_.map(e=>jA(e.clone()))})}computeSingleOutputShape(e){let{dataFormat:t,filters:n,kernelSize:r,padding:a,strides:i,dilationRate:s}=this.cell,o="channelsFirst"===t,l=e[o?3:2],c=e[o?4:3],u=kN(l,r[0],a,i[0],s[0]),A=kN(c,r[1],a,i[1],s[1]);return[...e.slice(0,2),...o?[n,u,A]:[u,A,n]]}};$N.className="ConvRNN2D";var eF=class extends XN{constructor(e){let{filters:t,kernelSize:n,strides:r,padding:a,dataFormat:i,dilationRate:s}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,Ak(this.filters,"filters"),this.kernelSize=CN(n,2,"kernelSize"),this.kernelSize.forEach(e=>Ak(e,"kernelSize")),this.strides=CN(r||1,2,"strides"),this.strides.forEach(e=>Ak(e,"strides")),this.padding=a||"valid",Bk(this.padding),this.dataFormat=i||"channelsLast",kk(this.dataFormat),this.dilationRate=CN(s||1,2,"dilationRate"),this.dilationRate.forEach(e=>Ak(e,"dilationRate"))}build(e){var t;e=IB(e);let n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new VC("The channel dimension of the input should be defined. Found ".concat(e[n]));let r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){let n=this.biasInitializer,r=this.filters;e=new((t=class extends aB{apply(e,t){return Vk([n.apply([r]),zf([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return PA(()=>{if(3!==e.length)throw new VC("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ".concat(e.length,"."));let n=t.training||!1,r=e[0],a=e[1],i=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=ZN({ones:()=>$f(r),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));let s=this.dropoutMask,o=(e,t,n)=>t&&t[n]?nh(t[n],e):e,l=o(r,s,0),c=o(r,s,1),u=o(r,s,2),A=o(r,s,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=ZN({ones:()=>$f(a),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));let d=this.recurrentDropoutMask,h=o(a,d,0),p=o(a,d,1),f=o(a,d,2),m=o(a,d,3),[g,y,b,w]=ug(this.kernel.read(),4,3),[v,x,C,k]=this.useBias?ug(this.bias.read(),4):[null,null,null,null];l=this.inputConv(l,g,v,this.padding),c=this.inputConv(c,y,x,this.padding),u=this.inputConv(u,b,C,this.padding),A=this.inputConv(A,w,k,this.padding);let[B,S,I,N]=ug(this.recurrentKernel.read(),4,3);h=this.recurrentConv(h,B),p=this.recurrentConv(p,S),f=this.recurrentConv(f,I),m=this.recurrentConv(m,N);let F=this.recurrentActivation.apply($d(l,h)),E=this.recurrentActivation.apply($d(c,p)),_=$d(nh(E,i),nh(F,this.activation.apply($d(u,f)))),T=nh(this.recurrentActivation.apply($d(A,m)),this.activation.apply(_));return[T,T,_]})}getConfig(){let e=super.getConfig(),{units:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,t,n,r){let a=rp(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?$k(a,n,this.dataFormat):a}recurrentConv(e,t){return rp(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}};eF.className="ConvLSTM2DCell",cb.registerClass(eF);var tF=class extends $N{constructor(e){let t=new eF(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}};tF.className="ConvLSTM2D",cb.registerClass(tF);var nF=class extends MB{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;let t=e.shape,n=[];for(let r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}call(e,t){return PA(()=>{this.invokeCallHook(e,t);let n=SB(e);if(0<this.rate&&this.rate<1){let e=null!=t.training&&t.training,r=this.getNoiseShape(n);return tB(()=>eB(n,this.rate,r,this.seed),()=>n,e)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}};nF.className="Dropout",cb.registerClass(nF);var rF=class extends nF{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let t=e.shape;return[t[0],1,t[2]]}};rF.className="SpatialDropout1D",cb.registerClass(rF);var aF=class extends MB{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,Ak(this.units,"units"),this.activation=cN(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=CB(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=CB(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=iS(e.kernelConstraint),this.biasConstraint=iS(e.biasConstraint),this.kernelRegularizer=mN(e.kernelRegularizer),this.biasRegularizer=mN(e.biasRegularizer),this.activityRegularizer=mN(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){let t=(e=IB(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){let t=(e=IB(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return PA(()=>{this.invokeCallHook(e,t);let n,r=SB(e),a=hk(this.activation.getClassName());return null!=a?n=Xk(r,this.kernel.read(),a,this.bias?this.bias.read():null):(n=Xk(r,this.kernel.read()),null!=this.bias&&(n=$k(n,this.bias.read())),null!=this.activation&&(n=this.activation.apply(n))),n})}getConfig(){let e={units:this.units,activation:oN(this.activation),useBias:this.useBias,kernelInitializer:xB(this.kernelInitializer),biasInitializer:xB(this.biasInitializer),kernelRegularizer:pN(this.kernelRegularizer),biasRegularizer:pN(this.biasRegularizer),activityRegularizer:pN(this.activityRegularizer),kernelConstraint:rS(this.kernelConstraint),biasConstraint:rS(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}};aF.className="Dense",cb.registerClass(aF);var iF=class extends MB{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=IB(e);for(let t of e.slice(1))if(null==t)throw new VC('The shape of the input to "Flatten" is not fully defined (got '.concat(e.slice(1),'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.'));return[e[0],Rk(e,1)]}call(e,t){return PA(()=>{this.invokeCallHook(e,t);let n=SB(e);if("channelsFirst"===this.dataFormat&&n.rank>1){let e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=Pg(n,e)}return function(e){if(e.rank<=1)throw new VC("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));let t=[e.shape[0],Rk(e.shape,1)];return _h(e,t)}(n)})}getConfig(){let e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);let t=super.getConfig();return Object.assign(e,t),e}};iF.className="Flatten",cb.registerClass(iF);var sF=class extends MB{constructor(e){super(e),this.supportsMasking=!0,this.activation=cN(e.activation)}call(e,t){return PA(()=>{this.invokeCallHook(e,t);let n=SB(e);return this.activation.apply(n)})}getConfig(){let e={activation:oN(this.activation)},t=super.getConfig();return Object.assign(e,t),e}};sF.className="Activation",cb.registerClass(sF);var oF=class extends MB{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return PA(()=>function(e,t){return PA(()=>{if(2!==e.shape.length)throw new VC("repeat() expects a rank-2 tensor, but received a rank-".concat(e.shape.length," tensor."));return Kk(jk(e,1),[1,t,1])})}(e=SB(e),this.n))}getConfig(){let e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}};oF.className="RepeatVector",cb.registerClass(oF);var lF=class extends MB{constructor(e){super(e),this.targetShape=e.targetShape;for(let t=0;t<this.targetShape.length;++t)this.isUnknown(this.targetShape[t])&&(this.targetShape[t]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){let n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null;for(let o=0;o<r.length;++o){let e=r[o];if(this.isUnknown(e)){if(null!==i)throw new VC("Can only specifiy one unknown dimension.");i=o}else a*=e}let s=Rk(e);if(null!==i){if(0===a||s%a!==0)throw new VC(n);r[i]=s/a}else if(s!==a)throw new VC(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return PA(()=>{this.invokeCallHook(e,t);let n=SB(e),r=n.shape,a=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return _h(n,a)})}getConfig(){let e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}};lF.className="Reshape",cb.registerClass(lF);var cF=class extends MB{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received ".concat(e.dims," instead."));let t=Mk(1,e.dims.length+1);if(!su.arraysEqual(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new LB({ndim:this.dims.length+1})]}computeOutputShape(e){let t=(e=IB(e)).slice();return this.dims.forEach((n,r)=>{t[r+1]=e[n]}),t}call(e,t){return Pg(SB(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}};cF.className="Permute",cb.registerClass(cF);var uF=class extends MB{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){let n=SB(e);return lh(Yf(n,this.maskValue),-1)}call(e,t){return PA(()=>{this.invokeCallHook(e,t);let n=SB(e),r=lh(Yf(n,this.maskValue),-1,!0);return nh(n,Jd(r,n.dtype))})}};uF.className="Masking",cb.registerClass(uF);var AF=class extends MB{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat($C(e.inputLength))}this.inputDim=e.inputDim,Ak(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Ak(this.outputDim,"outputDim"),this.embeddingsInitializer=CB(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=mN(e.embeddingsRegularizer),this.activityRegularizer=mN(e.activityRegularizer),this.embeddingsConstraint=iS(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return PA(()=>this.maskZero?(e=SB(e),Yf(e,Bp(e))):null)}computeOutputShape(e){if(e=IB(e),null==this.inputLength)return[...e,this.outputDim];let t=$C(this.inputLength);if(t.length!==e.length-1)throw new VC('"inputLength" is '.concat(this.inputLength,", but received input shape has shape ").concat(e));{let n=0;for(let r=0;r<t.length;++r){let a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new VC('"inputLength" is '.concat(this.inputLength,", but received input shape has shape ").concat(e));null==a&&(t[n]=i),n++}}return[e[0],...t,this.outputDim]}call(e,t){return PA(()=>{this.invokeCallHook(e,t);let n=SB(e);"int32"!==n.dtype&&(n=Qk(n,"int32"));let r=Jk(this.embeddings.read(),_h(n,[n.size]));return _h(r,IB(this.computeOutputShape(n.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:xB(this.embeddingsInitializer),embeddingsRegularizer:pN(this.embeddingsRegularizer),activityRegularizer:pN(this.activityRegularizer),embeddingsConstraint:rS(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}};AF.className="Embedding",cb.registerClass(AF);var dF=class extends MB{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new GC}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;let n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){let a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new VC("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[IB(e)]),e.length<2)throw new VC("A merge layer should be called on an Array of at least 2 inputs. Got ".concat(e.length," input(s)."));let t=[];for(let a of e)null!=a&&null!==a[0]&&t.push(a[0]);if(t=ok(t),t.length>1)throw new VC("Can not merge tensors with different batch sizes. Got tensors with shapes: ".concat(JSON.stringify(e),"."));let n=null==e[0]?null:e[0].slice(1);for(let a=1;a<e.length;++a){let t=null==e[a]?null:e[a].slice(1);n=this.computeElementwiseOpOutputShape(n,t)}let r=e.map(e=>e.length);-1===e.indexOf(null)&&1===ok(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return PA(()=>{if(this.reshapeRequired){let t=[],n=e.map(e=>e.rank);if(-1===n.indexOf(null)){let r=Ok(n);for(let n of e){let e=n.rank;for(let t=0;t<r-e;++t)n=jk(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(let i of e){let e=i.rank;if(null==e){let e=i.shape,r=e[0],a=e.slice(1).concat([r]),s=_h(i,[r].concat(Rk(e.slice(1))));s=Pg(s,[1,0]),s=_h(s,a),t.push(s),n=!0}else if(e>1){let r=Mk(1,e).concat([0]);t.push(Pg(i,r)),n=!0}else t.push(i)}let r=this.mergeFunction(t),a=r.rank;if(n)if(null==a){let e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=_h(Pg(_h(r,[-1,t]),[1,0]),n)}else if(a>1){let e=[a-1].concat(Mk(0,a-1));r=Pg(r,e)}return r}}return this.mergeFunction(e)})}computeOutputShape(e){let t;t=null==e[0]?null:e[0].slice(1);for(let r=1;r<e.length;++r){let n=null==e[r]?null:e[r].slice(1);t=this.computeElementwiseOpOutputShape(t,n)}let n=[];for(let r of e)null!=r&&null!==r[0]&&n.push(r[0]);return n=ok(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return PA(()=>{if(null==t)return null;if(!Array.isArray(t))throw new VC("`mask` should be an Array");if(!Array.isArray(e))throw new VC("`inputs` should be an Array");if(t.length!==e.length)throw new VC("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (".concat(e.length," vs ").concat(t.length,")"));if(t.every(e=>null==e))return null;t=t.map(e=>null==e?e:Yp(e,0));let n=t[0];for(let e=1;e<t.length-1;++e)n=Ef(n,t[e]);return n})}},hF=class extends dF{constructor(e){super(e)}mergeFunction(e){return PA(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=$d(t,e[n]);return t})}};hF.className="Add",cb.registerClass(hF);var pF=class extends dF{constructor(e){super(e)}mergeFunction(e){return PA(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=nh(t,e[n]);return t})}};pF.className="Multiply",cb.registerClass(pF);var fF=class extends dF{constructor(e){super(e)}mergeFunction(e){return PA(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=$d(t,e[n]);return nh(1/e.length,t)})}};fF.className="Average",cb.registerClass(fF);var mF=class extends dF{constructor(e){super(e)}mergeFunction(e){return PA(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=Qf(t,e[n]);return t})}};mF.className="Maximum",cb.registerClass(mF);var gF=class extends dF{constructor(e){super(e)}mergeFunction(e){return PA(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=Vf(t,e[n]);return t})}};gF.className="Minimum",cb.registerClass(gF);var yF=class extends dF{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new VC("A `Concatenate` layer should be called on a list of at least 2 inputs");let t=!0;for(let r of e)if(null!=r){t=!1;break}if(t)return;let n=[];for(let r=0;r<e.length;++r){let t=e[r].slice();t.splice(this.axis,1);let a=!1;for(let e of n)if(su.arraysEqual(e,t)){a=!0;break}a||n.push(t)}if(n.length>1)throw new VC("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return PA(()=>Vk(e,this.axis))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new VC("A `Concatenate` layer should be called on a list of inputs.");let t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(let a of t.slice(1)){if(null==n[r]||null==a[r]){n[r]=null;break}n[r]+=a[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new VC("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new VC("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new VC("Mismatch in the length of mask (".concat(t.length,") and the legnth of inputs (").concat(e.length,")"));return PA(()=>{let n=!0;if(t.forEach(e=>{null==e||(n=!1)}),n)return null;let r=[];for(let i=0;i<e.length;++i)null==t[i]?r.push(Jd($f(e[i]),"bool")):t[i].rank<e[i].rank?r.push(Yp(t[i],-1)):r.push(t[i]);let a=Dh(r,this.axis);return oh(a,-1,!1)})}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};function bF(e,t){for(;e<0;)e+=t;return e}yF.className="Concatenate",cb.registerClass(yF);var wF=class extends dF{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){su.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0],n=e[1];if(t.length>3||n.length>3)throw new GC("Dot layer does not support tensors of 4D or higher rank yet.");let r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new VC("Dimension incompatibility: ".concat(t[r[0]]," !== ").concat(n[r[1]]))}mergeFunction(e){if(2!==e.length)throw new VC("A `Dot` layer must be called on exactly 2 inputs, but received ".concat(e.length," input(s)."));let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((t,n)=>bF(t,e[n].shape.length)):[bF(this.axes,n.shape.length),bF(this.axes,r.shape.length)],this.normalize&&(n=PS(n,t[0]),r=PS(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new GC("batchDot is not implemented for tensors of 4D or higher rank yet");if(su.assert(e.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, but got ".concat(e.shape.length)),su.assert(e.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, but got ".concat(t.shape.length)),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new GC("batchDot is not implemented for complex64-type Tensors yet.");let r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);let i=n;return PA(()=>{let n,s;if(r>a){n=r-a;let e=[];for(let t=0;t<n;++t)e.push(1);t=_h(t,t.shape.concat(e))}else if(a>r){n=a-r;let t=[];for(let e=0;e<n;++e)t.push(1);e=_h(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)s=i[0]===i[1]?Gp(nh(e,t),i[0]):Gp(nh(Pg(e,[1,0]),t),i[1]);else{let n=i[0]!==e.shape.length-1,r=i[1]===t.shape.length-1;s=Rh(e,t,n,r)}if(n>0){let e;e=r>a?r+a-3:r-1;let t=[];for(let r=e;r<e+n;++r)t.push(r);s=hg(s,t)}return 1===s.shape.length&&(s=Yp(s,1)),s})}(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[bF(this.axes,e.length),bF(this.axes,t.length)],n}computeOutputShape(e){su.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new GC("Dot layer does not support tensors of 4D or higher rank yet.");let r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);let a=t.concat(n);return 1===a.length&&a.push(1),a}computeMask(e,t){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}};wF.className="Dot",cb.registerClass(wF);var vF=class extends MB{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return PA(()=>{this.invokeCallHook(e,t);let n=SB(e);return tB(()=>$d(qk(n.shape,0,this.stddev),n),()=>n,t.training||!1)})}};vF.className="GaussianNoise",cb.registerClass(vF);var xF=class extends MB{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return PA(()=>{this.invokeCallHook(e,t);let n=SB(e);return this.rate>0&&this.rate<1?tB(()=>{let e=Math.sqrt(this.rate/(1-this.rate));return nh(n,qk(n.shape,1,e))},()=>n,t.training||!1):n})}};xF.className="GaussianDropout",cb.registerClass(xF);var CF=class extends MB{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||SB(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return PA(()=>{if(this.rate<1&&this.rate>0){let n=this._getNoiseShape(e);return tB(()=>{let t=SB(e),r=-1.7580993408473766,a=af(Um(n),this.rate);a=Qk(a,"float32");let i=((1-this.rate)*(1+this.rate*r**2))**-.5,s=-i*r*this.rate,o=$d(nh(t,a),nh($d(a,-1),r));return $d(nh(o,i),s)},()=>SB(e),t.training||!1)}return e})}};function kF(e,t,n,r,a){let i,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=zh(e,t,n,r,a,s);else if(3===e.rank)i=Wh(e,t,n,r,a,s);else{if(4!==e.rank)throw new GC("batchNormalization is not implemented for array of rank ".concat(e.rank," yet"));i=Vh(e,t,n,r,a,s)}return i}function BF(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return su.arraysEqual(r.slice().sort(),Mk(0,e.rank-1))?function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return PA(()=>{let i=qf(e,r),s=i.mean,o=i.variance;return[kF(e,s,o,n,t,a),s,o]})}(e,t,n,r,a):function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return PA(()=>{let i=qf(e,r),s=i.mean,o=i.variance,l=[];for(let t of Mk(0,e.rank))-1!==r.indexOf(t)?l.push(1):l.push(e.shape[t]);let c=_h(s,l),u=_h(o,l),A=null==t?null:_h(t,l),d=null==n?null:_h(n,l);return[kF(e,c,u,d,A,a),s,o]})}(e,t,n,r,a)}CF.className="AlphaDropout",cb.registerClass(CF);var SF=class extends MB{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=CB(e.betaInitializer||"zeros"),this.gammaInitializer=CB(e.gammaInitializer||"ones"),this.movingMeanInitializer=CB(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=CB(e.movingVarianceInitializer||"ones"),this.betaConstraint=iS(e.betaConstraint),this.gammaConstraint=iS(e.gammaConstraint),this.betaRegularizer=mN(e.betaRegularizer),this.gammaRegularizer=mN(e.gammaRegularizer)}build(e){e=IB(e);let t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new VC("Axis ".concat(t," of input tensor should have a defined dimension but the layer received an input with shape ").concat(JSON.stringify(e),"."));this.inputSpec=[new LB({ndim:e.length,axes:{[t]:n}})];let r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return PA(()=>{let n=null!=t.training&&t.training,r=SB(e),a=r.shape,i=a.length,s=Mk(0,i),o=this.axis>=0?this.axis:this.axis+i;s.splice(o,1);let l=XC(1,i);l[o]=a[o];let c=s.slice();c.sort();let u=!su.arraysEqual(c,Mk(0,i).slice(0,i-1));if(!n)return(()=>{if(u){let e=_h(this.movingMean.read(),l),t=_h(this.movingVariance.read(),l),n=this.center?_h(this.beta.read(),l):null,a=this.scale?_h(this.gamma.read(),l):null;return kF(r,e,t,n,a,this.epsilon)}return kF(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();let[A,d,h]=BF(r,this.gamma.read(),this.beta.read(),s,this.epsilon),p=(e,t,n)=>{PA(()=>{let r=1-n,a=e.read(),i=nh(If(a,t),r);e.write(If(a,i))})};return p(this.movingMean,d,this.momentum),p(this.movingVariance,h,this.momentum),A})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:xB(this.betaInitializer),gammaInitializer:xB(this.gammaInitializer),movingMeanInitializer:xB(this.movingMeanInitializer),movingVarianceInitializer:xB(this.movingVarianceInitializer),betaRegularizer:pN(this.betaRegularizer),gammaRegularizer:pN(this.gammaRegularizer),betaConstraint:rS(this.betaConstraint),gammaConstraint:rS(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}};SF.className="BatchNormalization",cb.registerClass(SF);var IF=class extends MB{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received ".concat(this.axis))}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, but received ".concat(JSON.stringify(this.axis)));for(let e of this.axis)if(!Number.isInteger(e))throw new Error("Expected axis to be an array of integers, but received ".concat(JSON.stringify(this.axis)))}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=CB(e.betaInitializer||"zeros"),this.gammaInitializer=CB(e.gammaInitializer||"ones"),this.betaRegularizer=mN(e.betaRegularizer),this.gammaRegularizer=mN(e.gammaRegularizer),this.supportsMasking=!0}build(e){let t=(e=IB(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let a=0;a<this.axis.length;++a)this.axis[a]<0&&(this.axis[a]+=t);for(let a of this.axis)if(a<0||a>=t)throw new Error("Invalid axis: ".concat(a));if(this.axis.length!==ok(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));let n=this.axis.map(t=>e[t]),r=!0;this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,r):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,r):this.beta=null,this.built=!0}call(e,t){let n=SB(e),r=n.shape,a=r.length;return PA(()=>{let{mean:e,variance:t}=qf(n,this.axis,!0),i=XC(1,a);for(let n of this.axis)i[n]=r[n];let s=e=>null!=e&&e.shape.length!==a?_h(e,i):e,o=this.scale?s(this.gamma.read()):null,l=this.center?s(this.beta.read()):null,c=[],u=[];for(let n=0;n<a;++n)-1!==this.axis.indexOf(n)?(c.push(r[n]),u.push(1)):(c.push(1),u.push(r[n]));return e=$p(e,c),t=$p(t,c),null!=o&&(o=$p(o,u)),null!=l&&(l=$p(l,u)),kF(n,e,t,l,o,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:xB(this.betaInitializer),gammaInitializer:xB(this.gammaInitializer),betaRegularizer:pN(this.betaRegularizer),gammaRegularizer:pN(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}};IF.className="LayerNormalization",cb.registerClass(IF);var NF=class extends MB{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new VC("ZeroPadding2D expects padding to be a length-2 array, but received a length-".concat(e.padding.length," array."));let t,n;if("number"==typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new VC("ZeroPadding2D expects height padding to be a length-2 array, but received a length-".concat(e.padding[0].length," array."));if(t=e.padding[0],2!==e.padding[1].length)throw new VC("ZeroPadding2D expects width padding to be a length-2 array, but received a length-".concat(e.padding[1].length," array."));n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new LB({ndim:4})]}computeOutputShape(e){let t,n;return e=IB(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return PA(()=>function(e,t,n){return PA(()=>{if(4!==e.rank)throw new VC("temporalPadding expects input tensor to be 4-D, but received a ".concat(e.rank,"-D tensor."));if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new VC("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new VC("Unknown data format: ".concat(n,". Supported data formats are 'channelsLast' and 'channelsFirst."));let r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],tm(e,r)})}(SB(e),this.padding,this.dataFormat))}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};function FF(e,t,n,r,a,i){return PA(()=>{kk(a),Sk(i),Bk(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=SN(e,a);let s,o="same"===r?"same":"valid";return s="max"===i?Of(e,t,n,o):Th(e,t,n,o),"channelsFirst"===a&&(s=Pg(s,[0,3,1,2])),s})}function EF(e,t,n,r,a,i){return PA(()=>{kk(a),Sk(i),Bk(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=IN(e,a);let s,o="same"===r?"same":"valid";return s="max"===i?Mf(e,t,n,o):Lh(e,t,n,o),"channelsFirst"===a&&(s=Pg(s,[0,4,1,2,3])),s})}NF.className="ZeroPadding2D",cb.registerClass(NF);var _F=class extends MB{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"==typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new VC("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ".concat(JSON.stringify(e.poolSize)));this.poolSize=e.poolSize}if(Ak(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"==typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new VC("strides for 1D convolutional layer must be a number or an Array of a single number, but received ".concat(JSON.stringify(e.strides)));this.strides=e.strides}Ak(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,Bk(this.padding),this.inputSpec=[new LB({ndim:3})]}computeOutputShape(e){let t=kN((e=IB(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return PA(()=>{this.invokeCallHook(e,t),e=jk(SB(e),2);let n=this.poolingFunction(SB(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return hg(n,[2])})}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}},TF=class extends _F{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return kk(a),Bk(r),FF(e,t,n,r,a,"max")}};TF.className="MaxPooling1D",cb.registerClass(TF);var LF=class extends _F{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return kk(a),Bk(r),FF(e,t,n,r,a,"avg")}};LF.className="AveragePooling1D",cb.registerClass(LF);var DF=class extends MB{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new VC("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides];Ak(this.poolSize,"poolSize"),Ak(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,kk(this.dataFormat),Bk(this.padding),this.inputSpec=[new LB({ndim:4})]}computeOutputShape(e){e=IB(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=kN(t,this.poolSize[0],this.padding,this.strides[0]),n=kN(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return PA(()=>(this.invokeCallHook(e,t),this.poolingFunction(SB(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},RF=class extends DF{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return kk(a),Bk(r),FF(e,t,n,r,a,"max")}};RF.className="MaxPooling2D",cb.registerClass(RF);var UF=class extends DF{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return kk(a),Bk(r),FF(e,t,n,r,a,"avg")}};UF.className="AveragePooling2D",cb.registerClass(UF);var OF=class extends MB{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new VC("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ".concat(e.strides.length,"."));this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Ak(this.poolSize,"poolSize"),Ak(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,kk(this.dataFormat),Bk(this.padding),this.inputSpec=[new LB({ndim:5})]}computeOutputShape(e){e=IB(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=kN(t,this.poolSize[0],this.padding,this.strides[0]),n=kN(n,this.poolSize[1],this.padding,this.strides[1]),r=kN(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return PA(()=>(this.invokeCallHook(e,t),this.poolingFunction(SB(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},MF=class extends OF{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return kk(a),Bk(r),EF(e,t,n,r,a,"max")}};MF.className="MaxPooling3D",cb.registerClass(MF);var PF=class extends OF{constructor(e){super(e)}poolingFunction(e,t,n,r,a){return kk(a),Bk(r),EF(e,t,n,r,a,"avg")}};PF.className="AveragePooling3D",cb.registerClass(PF);var QF=class extends MB{constructor(e){super(e),this.inputSpec=[new LB({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new GC}},jF=class extends QF{constructor(e){super(e||{})}call(e,t){return PA(()=>{let t=SB(e);return jf(t,1)})}};jF.className="GlobalAveragePooling1D",cb.registerClass(jF);var HF=class extends QF{constructor(e){super(e||{})}call(e,t){return PA(()=>{let t=SB(e);return Qp(t,1)})}};HF.className="GlobalMaxPooling1D",cb.registerClass(HF);var zF=class extends MB{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,kk(this.dataFormat),this.inputSpec=[new LB({ndim:4})]}computeOutputShape(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new GC}getConfig(){let e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},WF=class extends zF{call(e,t){return PA(()=>{let t=SB(e);return"channelsLast"===this.dataFormat?jf(t,[1,2]):jf(t,[2,3])})}};WF.className="GlobalAveragePooling2D",cb.registerClass(WF);var VF=class extends zF{call(e,t){return PA(()=>{let t=SB(e);return"channelsLast"===this.dataFormat?Qp(t,[1,2]):Qp(t,[2,3])})}};VF.className="GlobalMaxPooling2D",cb.registerClass(VF);var GF=class extends MB{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){let e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=MS(t.layer,n);delete t.layer;let a={layer:r};return Object.assign(a,t),new e(a)}},KF=class extends GF{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=IB(e)).length<3)throw new VC("TimeDistributed layer expects an input shape >= 3D, but received input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];let t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){let t=[(e=IB(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return PA(()=>HN((e,n)=>[SB(this.layer.call(e,t)),[]],e=SB(e),[],!1,null,null,!1,!0)[1])}};KF.className="TimeDistributed",cb.registerClass(KF);var qF=class extends GF{constructor(e){super(e);let t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=MS(n),t.goBackwards=!0!==t.goBackwards;let r={};if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=MS(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function(e){ck(xk,"BidirectionalMergeMode",e)}(this.mergeMode),e.weights)throw new GC("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState&&(r=a.slice(1)),t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):ZC(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});let a=jN(e,n,r,this.numConstants);if(e=a.inputs,n=a.initialState,r=a.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);let i=[],s=[];if(null!=n){let e=n.length;if(e%2>0)throw new VC("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,i.push(...n);let r=n.map(e=>new LB({shape:e.shape}));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),s.push(...r)}if(null!=r)throw new GC("Support for constants in Bidirectional layers is not implemented yet.");let o=i[0]instanceof DB;for(let l of i)if(l instanceof DB!==o)throw new VC("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(o){let n=[e].concat(i),r=this.inputSpec.concat(s),a=this.inputSpec;this.inputSpec=r;let o=super.apply(n,t);return this.inputSpec=a,o}return super.apply(e,t)}call(e,t){return PA(()=>{let n,r,a,i,s=t.initialState;if(null==s)n=this.forwardLayer.call(e,t),r=this.backwardLayer.call(e,t);else{let a=s.slice(0,s.length/2),i=s.slice(s.length/2);n=this.forwardLayer.call(e,Object.assign(t,{initialState:a})),r=this.backwardLayer.call(e,Object.assign(t,{initialState:i}))}return this.returnState&&(Array.isArray(n)&&(a=n.slice(1).concat(r.slice(1))),n=n[0],r=r[0]),this.returnSequences&&(r=zm(r,1)),"concat"===this.mergeMode?i=Vk([n,r]):"sum"===this.mergeMode?i=$d(n,r):"ave"===this.mergeMode?i=nh(.5,$d(n,r)):"mul"===this.mergeMode?i=nh(n,r):null==this.mergeMode&&(i=[n,r]),this.returnState?null==this.mergeMode?i.concat(a):[i].concat(a):i})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Nk(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Nk(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){let e=this.forwardLayer.states.map(e=>null);return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){let n=MS(t.layer);if(delete t.layer,null!=t.numConstants)throw new GC("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let r=t;return r.layer=n,new e(r)}};qF.className="Bidirectional",cb.registerClass(qF);var XF=class extends MB{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){let e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return PA(()=>("float32"!==(e=SB(e)).dtype&&(e=Qk(e,"float32")),$d(nh(e,this.scale),this.offset)))}};XF.className="Rescaling",cb.registerClass(XF);var{resizeBilinear:JF,cropAndResize:YF}=ab,ZF=class extends MB{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,r,a,i,s,o){return PA(()=>{let l,c=!1,u=[t/i,n/s,(r+t)/i,(a+n)/s],A=[];3===e.rank?(c=!0,l=pg([e])):l=e;for(let e=0;e<l.shape[0];e++)A.push(u);let d=NA(A,[A.length,4]),h=Mm(0,A.length,1,"int32"),p=YF(l,d,h,[r,a],"nearest");return Qk(c?SB(Lg(p)):p,o)})}upsize(e,t,n,r){return PA(()=>Qk(JF(e,[t,n]),r))}call(e,t){return PA(()=>{let t=SB(e),n=t.dtype,r=t.shape,a=r[r.length-3],i=r[r.length-2],s=0;a!==this.height&&(s=Math.floor((a-this.height)/2));let o=0;return i!==this.width&&(o=Math.floor((i-this.width)/2),0===o&&(o=1)),s>=0&&o>=0?this.centerCrop(t,s,o,this.height,this.width,a,i,n):this.upsize(e,this.height,this.width,n)})}getConfig(){let e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){let t=(e=IB(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}};ZF.className="CenterCrop",cb.registerClass(ZF);var $F=class extends MB{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){let e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return null==(e=IB(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return PA(()=>{let n;if("int32"!==(e=SB(e)).dtype&&(e=Qk(e,"int32")),"undefined"!=typeof t.countWeights){if("count"!==this.outputMode)throw new VC("countWeights is not used when outputMode !== count.\n              Received countWeights=".concat(t.countWeights));n=SB(t.countWeights)}let r=Qp(e),a=jp(e),i=rf(this.numTokens,r).bufferSync().get(0),s=af(a,0).bufferSync().get(0);if(!i||!s)throw new VC("Input values must be between 0 < values <= numTokens with numTokens=".concat(this.numTokens));return function(e,t,n,r){let a=SB(e);if("int32"!==a.dtype&&(a=Qk(a,"int32")),"int"===t)return a;let i=a.shape;if(0===a.rank&&(a=Yp(a,-1)),"oneHot"===t&&1!==a.shape[a.shape.length-1]&&(a=Yp(a,-1)),a.rank>2)throw new VC("When outputMode is not int, maximum output rank is 2 Received outputMode ".concat(t," and input shape ").concat(i," which would result in output rank ").concat(a.rank,"."));let s,o=["multiHot","oneHot"].includes(t),l=a;if(s=pp(l,"undefined"!=typeof r&&"count"===t?r:[],n,o),"tfIdf"!==t)return s;if(r)return nh(s,r);throw new VC("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n)})}};$F.className="CategoryEncoding",cb.registerClass($F);var eE=new Set(["bilinear","nearest"]),tE=class extends MB{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!eE.has(e.interpolation))throw new VC("Invalid interpolation parameter: ".concat(e.interpolation," is not implemented"));this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){let t=(e=IB(e))[2];return[this.height,this.width,t]}getConfig(){let e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return PA(()=>{let t=[this.height,this.width];if("bilinear"===this.interpolation)return ab.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return ab.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw new Error("Interpolation is ".concat(this.interpolation," but only ").concat([...eE]," are supported"))})}};tE.className="Resizing",cb.registerClass(tE);var nE=class{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}};nE.className="RandomSeed";var rE=class extends MB{constructor(e){super(e),this.randomGenerator=new nE(e.seed)}getConfig(){let e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}};rE.className="BaseRandomLayer";var aE=new Set(["bilinear","nearest"]),iE=class extends rE{constructor(e){super(e);let{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new VC("Invalid factor: ".concat(this.factor,". Must be positive number or tuple of 2 numbers"));this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new VC("factor must have values larger than -1. Got: ".concat(this.factor));if(this.widthUpper<this.widthLower)throw new VC("factor cannot have upper bound less than lower bound.\n        Got upper bound: ".concat(this.widthUpper,".\n        Got lower bound: ").concat(this.widthLower,"\n      "));if(n){if(!aE.has(n))throw new VC("Invalid interpolation parameter: ".concat(n," is not implemented"));this.interpolation=n}}getConfig(){let e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){let t=(e=IB(e))[2];return[this.imgHeight,-1,t]}call(e,t){return PA(()=>{let t=SB(e);this.imgHeight=t.shape[t.shape.length-3];let n=t.shape[t.shape.length-2];this.widthFactor=Um([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*n;r=Math.round(r);let a=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return ab.resizeBilinear(e,a);case"nearest":return ab.resizeNearestNeighbor(e,a);default:throw new Error("Interpolation is ".concat(this.interpolation,"\n          but only ").concat([...aE]," are supported"))}})}};function sE(e){return new QB(e)}function oE(e){return new wN(e)}function lE(e){return new gN(e)}function cE(e){return new yN(e)}function uE(e){return new bN(e)}function AE(e){return new xN(e)}function dE(e){return new vN(e)}function hE(e){return new ON(e)}function pE(e){return new _N(e)}function fE(e){return new LN(e)}function mE(e){return new TN(e)}function gE(e){return new DN(e)}function yE(e){return new UN(e)}function bE(e){return new MN(e)}function wE(e){return new PN(e)}function vE(e){return new QN(e)}function xE(e){return new sF(e)}function CE(e){return new aF(e)}function kE(e){return new nF(e)}function BE(e){return new rF(e)}function SE(e){return new iF(e)}function IE(e){return new oF(e)}function NE(e){return new lF(e)}function FE(e){return new cF(e)}function EE(e){return new AF(e)}function _E(e){return new hF(e)}function TE(e){return new fF(e)}function LE(e){return new yF(e)}function DE(e){return new mF(e)}function RE(e){return new gF(e)}function UE(e){return new pF(e)}function OE(e){return new wF(e)}function ME(e){return new SF(e)}function PE(e){return new IF(e)}function QE(e){return new NF(e)}function jE(e){return new LF(e)}function HE(e){return jE(e)}function zE(e){return jE(e)}function WE(e){return new UF(e)}function VE(e){return WE(e)}function GE(e){return WE(e)}function KE(e){return new PF(e)}function qE(e){return KE(e)}function XE(e){return KE(e)}function JE(e){return new jF(e)}function YE(e){return new WF(e)}function ZE(e){return new HF(e)}function $E(e){return new VF(e)}function e_(e){return new TF(e)}function t_(e){return new RF(e)}function n_(e){return new MF(e)}function r_(e){return new qN(e)}function a_(e){return new KN(e)}function i_(e){return new JN(e)}function s_(e){return new XN(e)}function o_(e){return new GN(e)}function l_(e){return new VN(e)}function c_(e){return new tF(e)}function u_(e){return new eF(e)}function A_(e){return new zN(e)}function d_(e){return new YN(e)}function h_(e){return new qF(e)}function p_(e){return new KF(e)}iE.className="RandomWidth",cb.registerClass(iE);var f_=ZE,m_=$E,g_=e_,y_=t_;function b_(e){return new vF(e)}function w_(e){return new xF(e)}function v_(e){return new CF(e)}function x_(e){return new uF(e)}function C_(e){return new XF(e)}function k_(e){return new ZF(e)}function B_(e){return new tE(e)}function S_(e){return new $F(e)}function I_(e){return new iE(e)}var N_={};function F_(e,t){return XS(e,t)}function E_(e,t){return eI(e,t)}function __(e,t){return tI(e,t)}function T_(e,t){return JS(e,t)}function L_(e,t){return nI(e,t)}function D_(e,t){return ZS(e,t)}function R_(e,t){return $S(e,t)}function U_(e,t){return GS(e,t)}function O_(e,t){return jS(e,t)}function M_(e,t){return HS(e,t)}function P_(e,t){return HS(e,t)}function Q_(e,t){return HS(e,t)}function j_(e,t){return QS(e,t)}function H_(e,t){return QS(e,t)}function z_(e,t){return QS(e,t)}function W_(e,t){return function(e,t){return PA(()=>{let n=e.sub(t).square().sum(),r=e.sub(e.mean()).square().sum();return zp(1).sub(n.div(r))})}(e,t)}ei(N_,{MAPE:()=>P_,MSE:()=>H_,binaryAccuracy:()=>F_,binaryCrossentropy:()=>E_,categoricalAccuracy:()=>T_,categoricalCrossentropy:()=>L_,cosineProximity:()=>U_,mape:()=>Q_,meanAbsoluteError:()=>O_,meanAbsolutePercentageError:()=>M_,meanSquaredError:()=>j_,mse:()=>z_,precision:()=>D_,r2Score:()=>W_,recall:()=>R_,sparseCategoricalAccuracy:()=>__});var V_={};ei(V_,{modelFromJSON:()=>OI});var G_={};function K_(e){return new dN(e)}function q_(e){return function(e){return uN(e),new dN({l1:null!=e?e.l1:null,l2:0})}(e)}function X_(e){return function(e){return uN(e),new dN({l2:null!=e?e.l2:null,l1:0})}(e)}ei(G_,{l1:()=>q_,l1l2:()=>K_,l2:()=>X_});var J_=class extends ES{constructor(){super(...arguments),this.model=null}setModel(e){if(!(e instanceof RI))throw new Error("model must be a LayersModel, not some other Container");this.model=e}};function Y_(e,t){return e<t}function Z_(e,t){return e>t}var $_=class extends J_{constructor(e){if(super(),null==e&&(e={}),e.restoreBestWeights)throw new GC("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=e.monitor||"val_loss",this.minDelta=Math.abs(e.minDelta||0),this.patience=e.patience||0,this.verbose=e.verbose||0,this.mode=e.mode||"auto",this.baseline=e.baseline,-1===["auto","min","max"].indexOf(this.mode)&&(console.warn("EarlyStopping mode '".concat(this.mode,"' is invalid. Falling back to mode 'auto'.")),this.mode="auto"),"min"===this.mode?this.monitorFunc=Y_:"max"===this.mode||-1!==this.monitor.indexOf("acc")?this.monitorFunc=Z_:this.monitorFunc=Y_,this.monitorFunc===Y_&&(this.minDelta*=-1)}async onTrainBegin(e){this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===Y_?1/0:-1/0}async onEpochEnd(e,t){await NS(t);let n=this.getMonitorValue(t);null!=n&&(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0)))}async onTrainEnd(e){this.stoppedEpoch>0&&this.verbose&&console.log("Epoch ".concat(this.stoppedEpoch,": early stopping."))}getMonitorValue(e){null==e&&(e={});let t=e[this.monitor];return null==t&&console.warn("Metric for EarlyStopping ".concat(this.monitor," is not available. Available metrics are: ").concat(Object.keys(e))),t}};var eT,tT,nT={earlyStopping:function(e){return new $_(e)}};Cs().registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(eT||(eT={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(tT||(tT={}));var rT={};function aT(e,t){let n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};rT[e]=n}function iT(e){return rT[e]}function sT(e){delete rT[e]}function oT(e,t,n,r,a){let i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){let e=i.inputIndexStart,s=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?e+1:i.inputIndexEnd,o=e<0?t.inputNames.length+e:e;if("tensor"===i.type)return lT(t.inputNames[o],n,r,a);if("tensors"===i.type){let i=t.inputs.slice(e,s);return t.inputNames.slice(e,s).filter((e,t)=>{var n;return"NoOp"!==(null===(n=i[t])||void 0===n?void 0:n.op)}).map(e=>lT(e,n,r,a))}let l=lT(t.inputNames[o],n,r,a),c=l.dataSync();return"number"===i.type?c[0]:su.toNestedArray(l.shape,c)}let s=t.attrParams[e];return s&&s.value}function lT(e,t,n,r){let[a,i]=dT(e,n);if(null!=r){let e=r.getHashTableHandleByName(a);if(null!=e)return e}let s=n.currentContextIds.find(e=>!!t[AT(a,e)]);return void 0!==s?t[AT(a,s)][i]:void 0}function cT(e,t,n){return t[AT(e,n.currentContextId)]}function uT(e,t){let[n,r,a]=dT(e,t);return[AT(n,t&&t.currentContextId),r,a]}function AT(e,t){return t?"".concat(e,"-").concat(t):e}function dT(e,t){if(""===e)return["",0,void 0];let n=null!=t&&null!=t.parseNodeNameCache;if(n){let n=t.parseNodeNameCache.get(e);if(null!=n)return n}let r,a=e.split(":");if(1===a.length)r=[e,0,void 0];else{let e=a[0],t=3===a.length?a[1]:void 0;r=[e,Number(a[a.length-1]),t]}return n&&t.parseNodeNameCache.set(e,r),r}function hT(e,t,n){let r=oT("pad",e,t,n);if("explicit"===r){r=oT("explicitPaddings",e,t,n);let a=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)a[e][0]=r[2*e],a[e][1]=r[2*e+1];return a}return r}function pT(e){return e.kept?e:Yd(e)}var fT={};ei(fT,{json:()=>mT});var mT=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],gT={};ei(gT,{json:()=>yT});var yT=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],bT={};ei(bT,{json:()=>wT});var wT=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],vT={};ei(vT,{json:()=>xT});var xT=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],CT={};ei(CT,{json:()=>kT});var kT=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],BT={};ei(BT,{json:()=>ST});var ST=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],IT={};ei(IT,{json:()=>NT});var NT=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],FT={};ei(FT,{json:()=>ET});var ET=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],_T={};ei(_T,{json:()=>TT});var TT=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],LT={};ei(LT,{json:()=>DT});var DT=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],RT={};ei(RT,{json:()=>UT});var UT=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],OT={};ei(OT,{json:()=>MT});var MT=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],PT={};ei(PT,{json:()=>QT});var QT=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],jT={};ei(jT,{json:()=>HT});var HT=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],zT={};ei(zT,{json:()=>WT});var WT=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],VT={};ei(VT,{json:()=>GT});var GT=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],KT={};ei(KT,{json:()=>qT});var qT=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],XT={};ei(XT,{json:()=>JT});var JT=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],YT={};ei(YT,{json:()=>ZT});var ZT=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],$T=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let e=[].concat(...[fT,gT,bT,vT,CT,BT,IT,FT,_T,LT,RT,OT,PT,jT,zT,VT,KT,XT,YT].map(e=>e.json));this.opMappers=e.reduce((e,t)=>(e[t.tfOpName]=t,e),{})}transformGraph(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.node,r=[],a=[],i=[],s=n.reduce((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?a.push(e[t.name]):(null==t.input||0===t.input.length)&&i.push(e[t.name]),e),{}),o=[],l=[],c={},u={};null!=t&&(c=this.mapSignatureEntries(t.inputs),u=this.mapSignatureEntries(t.outputs));let A=Object.keys(s);A.forEach(e=>{let t=s[e];t.inputNames.forEach((e,n)=>{let[r,,a]=uT(e),i=s[r];if(null!=i.outputs){let e=i.outputs.indexOf(a);if(-1!==e){let a="".concat(r,":").concat(e);t.inputNames[n]=a}}t.inputs.push(i),i.children.push(t)})}),0===Object.keys(u).length?A.forEach(e=>{let t=s[e];0===t.children.length&&l.push(t)}):Object.keys(u).forEach(e=>{let[t]=uT(e),n=s[t];null!=n&&(n.signatureKey=u[e],l.push(n))}),Object.keys(c).length>0?Object.keys(c).forEach(e=>{let[t]=uT(e),n=s[t];n&&(n.signatureKey=c[e],o.push(n))}):o=r;let d={};null!=e.library&&null!=e.library.function&&(d=e.library.function.reduce((e,t)=>(e[t.signature.name]=this.mapFunction(t),e),{}));let h={nodes:s,inputs:o,outputs:l,weights:a,placeholders:r,signature:t,functions:d};return i.length>0&&(h.initNodes=i),h}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,n)=>(t[e[n].name]=n,t),{})}mapNode(e){let t=iT(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});let n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(e=>e.startsWith("^")?e.slice(1):e),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((t,n)=>{let r,a=n.type;switch(n.type){case"string":r=tL(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=tL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":r=AL(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=AL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":r=rL(e.attr,n.tfName,n.defaultValue||0),void 0===r&&n.tfDeprecatedName&&(r=rL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":r=uL(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=uL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":r=nL(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=nL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":r=hL(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=hL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":r=cL(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=cL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":r=dL(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=dL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":r=sL(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=sL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":r=oL(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=oL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":r=iL(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=iL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:r,type:a},t},{})),n}mapFunction(e){let t=e.nodeDef,n=[],r={};null!=t&&(r=t.reduce((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e),{}));let a=[],i=[];e.signature.inputArg.forEach(e=>{let[t]=uT(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:aL(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,a.push(n),r[t]=n}),Object.keys(r).forEach(e=>{let t=r[e];t.inputNames.forEach((e,n)=>{let[a,,i]=uT(e),s=r[a];if(null!=s.outputs){let e=s.outputs.indexOf(i);if(-1!==e){let r="".concat(a,":").concat(e);t.inputNames[n]=r}}t.inputs.push(s),s.children.push(t)})});let s=e.ret;e.signature.outputArg.forEach(e=>{let[t,n]=uT(s[e.name]),a=r[t];null!=a&&(a.defaultOutput=n,i.push(a))});let o=this.mapArgsToSignature(e);return{nodes:r,inputs:a,outputs:i,weights:n,placeholders:[],signature:o}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e),{}),outputs:e.signature.outputArg.reduce((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}};function eL(e,t){let n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){let t=Cs().global;if("undefined"!=typeof t.atob)return t.atob(e);if("undefined"!=typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function tL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?eL(a.s,r):n}function nL(e,t,n){let r=e[t];return r?r.b:n}function rL(e,t,n){let r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof a?a:parseInt(a,10)}function aL(e){switch("string"==typeof e&&(e=eT[e]),e){case eT.DT_FLOAT:case eT.DT_HALF:return"float32";case eT.DT_INT32:case eT.DT_INT64:case eT.DT_INT8:case eT.DT_UINT8:return"int32";case eT.DT_BOOL:return"bool";case eT.DT_DOUBLE:return"float32";case eT.DT_STRING:return"string";case eT.DT_COMPLEX64:case eT.DT_COMPLEX128:return"complex64";default:return null}}function iL(e,t,n){let r=e[t];return r&&r.func?r.func.name:n}function sL(e,t,n){let r=e[t];return r&&r.type?aL(r.type):n}function oL(e,t,n){let r=e[t];return r&&r.list&&r.list.type?r.list.type.map(e=>aL(e)):n}function lL(e){if(!e.unknownRank)return null!=e.dim?e.dim.map(e=>"number"==typeof e.size?e.size:parseInt(e.size,10)):[]}function cL(e,t,n){let r=e[t];return r&&r.shape?lL(r.shape):n}function uL(e,t,n){let r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(e=>"number"==typeof e?e:parseInt(e,10)):n}function AL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map(e=>eL(e,r)):n}function dL(e,t,n){let r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(e=>lL(e)):n}function hL(e,t,n){let r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var pL=class{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(e=>this.getInput(e)),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((e,t)=>(e[t]=this.getAttr(t),e),{}))}getInput(e){return lT(e,this.tensorMap,this.context)}getAttr(e,t){let n=this.node.rawAttrs[e];if(null!=n.tensor)return lT(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return rL(this.node.rawAttrs,e,t);if(null!=n.s)return tL(this.node.rawAttrs,e,t);if(null!=n.b)return nL(this.node.rawAttrs,e,t);if(null!=n.shape)return cL(this.node.rawAttrs,e,t);if(null!=n.type)return sL(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return uL(this.node.rawAttrs,e,t);if(null!=n.list.s)return AL(this.node.rawAttrs,e,t);if(null!=n.list.shape)return dL(this.node.rawAttrs,e,t);if(null!=n.list.b)return hL(this.node.rawAttrs,e,t);if(null!=n.list.type)return oL(this.node.rawAttrs,e,t)}return t}},fL={};ei(fL,{OP_SCOPE_SUFFIX:()=>kA,abs:()=>rh,acos:()=>ah,acosh:()=>ih,add:()=>$d,addN:()=>sh,all:()=>oh,any:()=>lh,argMax:()=>ch,argMin:()=>uh,asin:()=>Ah,asinh:()=>dh,atan:()=>hh,atan2:()=>ph,atanh:()=>fh,avgPool:()=>Th,avgPool3d:()=>Lh,basicLSTMCell:()=>Ph,batchNorm:()=>Hh,batchNorm2d:()=>zh,batchNorm3d:()=>Wh,batchNorm4d:()=>Vh,batchToSpaceND:()=>Qh,bincount:()=>Gh,bitwiseAnd:()=>Kh,booleanMaskAsync:()=>Mg,broadcastArgs:()=>qh,broadcastTo:()=>Xh,buffer:()=>Xd,cast:()=>Jd,ceil:()=>Jh,clipByValue:()=>Zh,clone:()=>Yd,complex:()=>SA,concat:()=>Dh,concat1d:()=>$h,concat2d:()=>ep,concat3d:()=>tp,concat4d:()=>np,conv1d:()=>ap,conv2d:()=>rp,conv2dTranspose:()=>sp,conv3d:()=>op,conv3dTranspose:()=>cp,cos:()=>up,cosh:()=>Ap,cosineWindow:()=>Gg,cumprod:()=>dp,cumsum:()=>hp,denseBincount:()=>pp,depthToSpace:()=>fp,depthwiseConv2d:()=>mp,diag:()=>gp,dilation2d:()=>yp,div:()=>th,divNoNan:()=>Sp,dot:()=>Ip,dropout:()=>Wg,einsum:()=>Np,elu:()=>Fp,enclosingPowerOfTwo:()=>Vg,ensureShape:()=>Ep,equal:()=>Cp,erf:()=>_p,euclideanNorm:()=>Xp,exp:()=>Jp,expandDims:()=>Yp,expm1:()=>Zp,eye:()=>ef,fft:()=>og,fill:()=>Yh,floor:()=>tf,floorDiv:()=>eh,fused:()=>qg,gather:()=>nf,gatherND:()=>zg,greater:()=>rf,greaterEqual:()=>af,ifft:()=>lg,imag:()=>sf,image:()=>ab,inTopKAsync:()=>Kg,irfft:()=>cg,isFinite:()=>of,isInf:()=>lf,isNaN:()=>cf,leakyRelu:()=>uf,less:()=>Af,lessEqual:()=>df,linalg:()=>ib,linspace:()=>hf,localResponseNormalization:()=>pf,log:()=>ff,log1p:()=>mf,logSigmoid:()=>Sf,logSoftmax:()=>Nf,logSumExp:()=>Ff,logicalAnd:()=>Ef,logicalNot:()=>_f,logicalOr:()=>Tf,logicalXor:()=>Lf,losses:()=>sb,lowerBound:()=>Uf,matMul:()=>Rh,max:()=>Qp,maxPool:()=>Of,maxPool3d:()=>Mf,maxPoolWithArgmax:()=>Pf,maximum:()=>Qf,mean:()=>jf,meshgrid:()=>Wf,min:()=>jp,minimum:()=>Vf,mirrorPad:()=>Gf,mod:()=>Kf,moments:()=>qf,movingAverage:()=>Qg,mul:()=>nh,multiRNNCell:()=>Xf,multinomial:()=>Jf,neg:()=>kf,norm:()=>qp,notEqual:()=>Yf,oneHot:()=>Zf,ones:()=>zf,onesLike:()=>$f,op:()=>BA,outerProduct:()=>em,pad:()=>tm,pad1d:()=>nm,pad2d:()=>rm,pad3d:()=>am,pad4d:()=>im,pool:()=>om,pow:()=>Hp,prelu:()=>lm,print:()=>Zd,prod:()=>cm,raggedGather:()=>um,raggedRange:()=>Am,raggedTensorToTensor:()=>dm,rand:()=>hm,randomGamma:()=>Lm,randomNormal:()=>Dm,randomStandardNormal:()=>Rm,randomUniform:()=>Um,randomUniformInt:()=>Om,range:()=>Mm,real:()=>Pm,reciprocal:()=>Qm,relu:()=>jm,relu6:()=>Hm,reshape:()=>_h,reverse:()=>zm,reverse1d:()=>Wm,reverse2d:()=>Vm,reverse3d:()=>Gm,reverse4d:()=>Km,rfft:()=>Ag,round:()=>qm,rsqrt:()=>Xm,scalar:()=>zp,scatterND:()=>jg,searchSorted:()=>Rf,selu:()=>Jm,separableConv2d:()=>Ym,setdiff1dAsync:()=>Zm,sigmoid:()=>Uh,sign:()=>$m,signal:()=>rb,sin:()=>eg,sinh:()=>tg,slice:()=>Oh,slice1d:()=>ng,slice2d:()=>rg,slice3d:()=>ag,slice4d:()=>ig,softmax:()=>sg,softplus:()=>Bf,spaceToBatchND:()=>sm,sparse:()=>ob,sparseToDense:()=>Hg,spectral:()=>nb,split:()=>ug,sqrt:()=>Wp,square:()=>Vp,squaredDifference:()=>dg,squeeze:()=>hg,stack:()=>pg,step:()=>fg,stridedSlice:()=>mg,string:()=>lb,sub:()=>If,sum:()=>Gp,tan:()=>gg,tanh:()=>Mh,tensor:()=>NA,tensor1d:()=>yg,tensor2d:()=>bg,tensor3d:()=>wg,tensor4d:()=>vg,tensor5d:()=>xg,tensor6d:()=>Cg,tensorScatterUpdate:()=>Ng,tile:()=>$p,topk:()=>Fg,transpose:()=>Pg,truncatedNormal:()=>Eg,unique:()=>_g,unsortedSegmentSum:()=>Tg,unstack:()=>Lg,upperBound:()=>Dg,variable:()=>Rg,where:()=>kp,whereAsync:()=>Og,zeros:()=>Hf,zerosLike:()=>Bp});function mL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!=typeof e&&"number"!=typeof t){su.assert(e.length===t.length,()=>n+" Shapes ".concat(e," and ").concat(t," must match"));for(let r=0;r<e.length;r++){let a=e[r],i=t[r];su.assert(a<0||i<0||a===i,()=>n+" Shapes ".concat(e," and ").concat(t," must match"))}}}function gL(e){return!("number"==typeof e||e.some(e=>e<0))}function yL(e,t,n){let r=bL(e,n),a=!gL(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach(e=>{r=bL(e.shape,r)}),!gL(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function bL(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));let n=[];for(let r=0;r<e.length;++r){let a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var wL=class{constructor(e,t,n,r,a,i,s){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=a,this.dynamicSize=i,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=zp(0),jA(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{(null==e||!e.has(t.tensor.id))&&t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));let t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?)."));return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(e=>this.read(e))}write(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));let n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0===this.size()&&(null==this.elementShape||0===this.elementShape.length)&&(this.elementShape=t.shape),mL(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,jA(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,because the index size: ").concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((e,n)=>this.write(e,t[n]))}gather(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return NA([],[0].concat(this.elementShape));let n=this.readMany(e);return mL(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),pg(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return NA([],[0].concat(this.elementShape));let t=[];for(let r=0;r<this.size();r++)t.push(r);let n=this.readMany(t);return mL(this.elementShape,n[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(n[0].shape,")")),Dh(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));let n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,Lg(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));let n=0,r=e.map(e=>(n+=e,n));if(n!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(n,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), and the TensorArray is not marked as dynamically resizeable"));let a=0===n?0:t.size/n,i=[];PA(()=>{t=_h(t,[1,n,a]);for(let n=0;n<e.length;++n){let s=[0,0===n?0:r[n-1],0],o=[1,e[n],a];i[n]=_h(Oh(t,s,o),this.elementShape)}return i});let s=[];for(let o=0;o<e.length;o++)s[o]=o;this.writeMany(s,i)}},vL=class e{get id(){return this.idTensor.id}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach(e=>{if(n!==e.dtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(e.dtype));mL(t,e.shape,"TensorList shape mismatch: "),jA(e)}),this.idTensor=zp(0),this.maxNumElements=r,jA(this.idTensor)}copy(){return new e([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{(null==e||!e.has(t.id))&&t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==n&&this.tensors.length!==n)throw new Error("Operation expected a list with ".concat(n," elements but got a list with ").concat(this.tensors.length," elements."));mL(e,this.elementShape,"TensorList shape mismatch: ");let r=yL(this.elementShape,this.tensors,e);return PA(()=>{let e=this.tensors.map(e=>_h(e,r));return pg(e,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");let n=yL(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,mL(r.shape,e,"TensorList shape mismatch: "),_h(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(mL(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");jA(e),this.tensors.push(e)}resize(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(t));if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error("TensorListResize input size ".concat(t," is greater maxNumElement ").concat(this.maxNumElements,"."));let n=new e([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(let e=0;e<Math.min(this.tensors.length,t);++e)n.tensors[e]=this.tensors[e];return n}getItem(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));mL(this.tensors[e].shape,t,"TensorList shape mismatch: ");let r=yL(this.elementShape,this.tensors,t);return _h(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));mL(this.elementShape,t.shape,"TensorList shape mismatch: "),jA(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));mL(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());let r=yL(this.elementShape,this.tensors,n);return 0===e.length?NA([],[0].concat(r)):PA(()=>{let t=e.map(e=>_h(this.tensors[e],r));return pg(t,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));mL(this.elementShape,t,"TensorList shape mismatch: ");let n=yL(this.elementShape,this.tensors,t);return 0===this.size()?NA([],[0].concat(n)):PA(()=>{let e=this.tensors.map(e=>_h(e,n));return Dh(e,0)})}};var xL=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{let r=oT("thenBranch",e,t,n),a=oT("elseBranch",e,t,n),i=oT("cond",e,t,n),s=oT("args",e,t,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap):n.functionMap[a].executeFunctionAsync(s,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{let r=oT("body",e,t,n),a=oT("cond",e,t,n),i=oT("args",e,t,n),s=await n.functionMap[a].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),o=i.map(e=>e.id),l=await s[0].data();s.forEach(e=>{!e.kept&&-1===o.indexOf(e.id)&&e.dispose()});let c=i;for(;l[0];){let e=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);let t=c.map(e=>e.id);e.forEach(e=>{!e.kept&&-1===o.indexOf(e.id)&&-1===t.indexOf(e.id)&&e.dispose()});let i=await n.functionMap[a].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await i[0].data(),i.forEach(e=>{!e.kept&&-1===o.indexOf(e.id)&&-1===t.indexOf(e.id)&&e.dispose()})}return c}case"LoopCond":return[pT(oT("pred",e,t,n))];case"Switch":{let r=oT("pred",e,t,n),a=oT("data",e,t,n);return a.kept||(a=pT(a)),(await r.data())[0]?[void 0,a]:[a,void 0]}case"Merge":{let r=e.inputNames.find(e=>void 0!==lT(e,t,n));if(r){return[pT(lT(r,t,n))]}return}case"Enter":{let r=oT("frameName",e,t,n),a=oT("tensor",e,t,n);return n.enterFrame(r),[pT(a)]}case"Exit":{let r=oT("tensor",e,t,n);return n.exitFrame(),[pT(r)]}case"NextIteration":{let r=oT("tensor",e,t,n);return n.nextIteration(),[pT(r)]}case"TensorArrayV3":{let r=oT("size",e,t,n),a=oT("dtype",e,t,n),i=oT("elementShape",e,t,n),s=oT("dynamicSize",e,t,n),o=oT("clearAfterRead",e,t,n),l=oT("identicalElementShapes",e,t,n),c=oT("name",e,t,n),u=new wL(c,a,r,i,l,s,o);return n.addTensorArray(u),[u.idTensor,zp(1)]}case"TensorArrayWriteV3":{let r=oT("tensorArrayId",e,t,n),a=oT("index",e,t,n),i=oT("tensor",e,t,n),s=n.getTensorArray(r.id);return s.write(a,i),[s.idTensor]}case"TensorArrayReadV3":{let r=oT("tensorArrayId",e,t,n),a=oT("index",e,t,n);return[n.getTensorArray(r.id).read(a)]}case"TensorArrayGatherV3":{let r=oT("tensorArrayId",e,t,n),a=oT("indices",e,t,n),i=oT("dtype",e,t,n);return[n.getTensorArray(r.id).gather(a,i)]}case"TensorArrayScatterV3":{let r=oT("tensorArrayId",e,t,n),a=oT("indices",e,t,n),i=oT("tensor",e,t,n),s=n.getTensorArray(r.id);return s.scatter(a,i),[s.idTensor]}case"TensorArrayConcatV3":{let r=oT("tensorArrayId",e,t,n),a=n.getTensorArray(r.id),i=oT("dtype",e,t,n);return[a.concat(i)]}case"TensorArraySplitV3":{let r=oT("tensorArrayId",e,t,n),a=oT("tensor",e,t,n),i=oT("lengths",e,t,n),s=n.getTensorArray(r.id);return s.split(i,a),[s.idTensor]}case"TensorArraySizeV3":{let r=oT("tensorArrayId",e,t,n);return[zp(n.getTensorArray(r.id).size(),"int32")]}case"TensorArrayCloseV3":{let r=oT("tensorArrayId",e,t,n),a=n.getTensorArray(r.id);return a.clearAndClose(),[a.idTensor]}case"TensorListSetItem":{let r=oT("tensorListId",e,t,n),a=oT("index",e,t,n),i=oT("tensor",e,t,n),s=n.getTensorList(r.id);return s.setItem(a,i),[s.idTensor]}case"TensorListGetItem":{let r=oT("tensorListId",e,t,n),a=oT("index",e,t,n),i=oT("elementShape",e,t,n),s=oT("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(a,i,s)]}case"TensorListScatterV2":case"TensorListScatter":{let r=oT("indices",e,t,n),a=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));let a=Math.max(...t);if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));let i=new vL([],n,e.dtype,r),s=Lg(e,0);return t.forEach((e,t)=>{i.setItem(e,s[t])}),i}(oT("tensor",e,t,n),r,oT("elementShape",e,t,n),oT("numElements",e,t,n));return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r,a=oT("elementShape",e,t,n),i=oT("elementDType",e,t,n);r="TensorListReserve"===e.op?"numElements":"maxNumElements";let s=oT(r,e,t,n),o=function(e,t,n,r){return new vL([],e,t,r)}(a,i,0,"TensorListReserve"===e.op?-1:s);return n.addTensorList(o),[o.idTensor]}case"TensorListGather":{let r=oT("tensorListId",e,t,n),a=oT("indices",e,t,n),i=oT("elementShape",e,t,n),s=oT("elementDType",e,t,n);return[n.getTensorList(r.id).gather(a,s,i)]}case"TensorListStack":{let r=oT("tensorListId",e,t,n),a=oT("elementShape",e,t,n),i=oT("elementDType",e,t,n),s=oT("numElements",e,t,n);return[n.getTensorList(r.id).stack(a,i,s)]}case"TensorListFromTensor":{let r=function(e,t,n){let r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));mL(e.shape.slice(1),t,"TensorList shape mismatch: ");let a=Lg(e);return new vL(a,t,r)}(oT("tensor",e,t,n),oT("elementShape",e,t,n),oT("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let r=oT("tensorListId",e,t,n),a=n.getTensorList(r.id),i=oT("dtype",e,t,n),s=oT("elementShape",e,t,n);return[a.concat(i,s)]}case"TensorListPushBack":{let r=oT("tensorListId",e,t,n),a=oT("tensor",e,t,n),i=n.getTensorList(r.id);return i.pushBack(a),[i.idTensor]}case"TensorListPopBack":{let r=oT("tensorListId",e,t,n),a=oT("elementShape",e,t,n),i=oT("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(a,i)]}case"TensorListSplit":{let r=oT("tensor",e,t,n),a=oT("elementShape",e,t,n),i=function(e,t,n){let r=0,a=t.map(e=>(r+=e,r));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));let i=bL(e.shape.slice(1),n),s=0===r?0:e.size/r,o=PA(()=>{let n=[];e=_h(e,[1,r,s]);for(let r=0;r<t.length;++r){let o=[0,0===r?0:a[r-1],0],l=[1,t[r],s];n[r]=_h(Oh(e,o,l),i)}return e.dispose(),n}),l=new vL([],n,e.dtype,t.length);for(let c=0;c<o.length;c++)l.setItem(c,o[c]);return l}(r,oT("lengths",e,t,n),a);return n.addTensorList(i),[i.idTensor]}case"TensorListLength":{let r=oT("tensorListId",e,t,n);return[zp(n.getTensorList(r.id).size(),"int32")]}case"TensorListResize":{let r=oT("tensorListId",e,t,n),a=oT("size",e,t,n),i=n.getTensorList(r.id).resize(a);return n.addTensorList(i),[i.idTensor]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}};function CL(e,t,n){let[r,a]=oT("fusedOps",e,t,n),i="biasadd"===r,s=!i,o="prelu"===a,l="fusedbatchnorm"===r,c=oT("numArgs",e,t,n);if(i){if(o&&2!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&i&&1!==c)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let u=oT("strides",e,t,n),A=hT(e,t,n),d=oT("dataFormat",e,t,n).toUpperCase(),h=oT("dilations",e,t,n),[p,f]=oT("args",e,t,n);return s&&(f=p,p=void 0),{stride:u,pad:A,dataFormat:d,dilations:h,biasArg:p,preluArg:f,activationFunc:a,leakyreluAlpha:oT("leakyreluAlpha",e,t,n)}}function kL(e,t,n){return{boxes:oT("boxes",e,t,n),scores:oT("scores",e,t,n),maxOutputSize:oT("maxOutputSize",e,t,n),iouThreshold:oT("iouThreshold",e,t,n),scoreThreshold:oT("scoreThreshold",e,t,n),softNmsSigma:oT("softNmsSigma",e,t,n)}}var BL=class{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=zp(0),this.tensorMap=new Map,jA(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return zp(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);let n=await e.data();return this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),PA(()=>{let e=Lg(t),r=n.length,a=e.length;su.assert(r===a,()=>"The number of elements doesn't match, keys has ".concat(r," elements, the values has ").concat(a," elements."));for(let t=0;t<r;t++){let r=n[t],a=e[t];jA(a),this.tensorMap.set(r,a)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);let n=await e.data();return PA(()=>{let e=[];for(let r=0;r<n.length;r++){let a=n[r],i=this.findWithDefault(a,t);e.push(i)}return pg(e)})}findWithDefault(e,t){let n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ").concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ").concat(t.dtype))}};function SL(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:PA,i=((e,t,n)=>{switch(e.category){case"arithmetic":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fL;switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(oT("a",e,t,n),oT("b",e,t,n))];case"AddN":return[r.addN(oT("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(oT("a",e,t,n),oT("b",e,t,n))];case"Mul":return[r.mul(oT("a",e,t,n),oT("b",e,t,n))];case"RealDiv":case"Div":return[r.div(oT("a",e,t,n),oT("b",e,t,n))];case"DivNoNan":return[r.divNoNan(oT("a",e,t,n),oT("b",e,t,n))];case"FloorDiv":return[r.floorDiv(oT("a",e,t,n),oT("b",e,t,n))];case"Sub":return[r.sub(oT("a",e,t,n),oT("b",e,t,n))];case"Minimum":return[r.minimum(oT("a",e,t,n),oT("b",e,t,n))];case"Maximum":return[r.maximum(oT("a",e,t,n),oT("b",e,t,n))];case"Pow":return[r.pow(oT("a",e,t,n),oT("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(oT("a",e,t,n),oT("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"basic_math":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fL;switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(oT("x",e,t,n))];case"Acos":return[r.acos(oT("x",e,t,n))];case"Acosh":return[r.acosh(oT("x",e,t,n))];case"Asin":return[r.asin(oT("x",e,t,n))];case"Asinh":return[r.asinh(oT("x",e,t,n))];case"Atan":return[r.atan(oT("x",e,t,n))];case"Atan2":return[r.atan2(oT("x",e,t,n),oT("y",e,t,n))];case"Atanh":return[r.atanh(oT("x",e,t,n))];case"Ceil":return[r.ceil(oT("x",e,t,n))];case"Complex":return[r.complex(oT("real",e,t,n),oT("imag",e,t,n))];case"Cos":return[r.cos(oT("x",e,t,n))];case"Cosh":return[r.cosh(oT("x",e,t,n))];case"Elu":return[r.elu(oT("x",e,t,n))];case"Erf":return[r.erf(oT("x",e,t,n))];case"Exp":return[r.exp(oT("x",e,t,n))];case"Expm1":return[r.expm1(oT("x",e,t,n))];case"Floor":return[r.floor(oT("x",e,t,n))];case"Log":return[r.log(oT("x",e,t,n))];case"Log1p":return[r.log1p(oT("x",e,t,n))];case"Imag":return[r.imag(oT("x",e,t,n))];case"Neg":return[r.neg(oT("x",e,t,n))];case"Reciprocal":return[r.reciprocal(oT("x",e,t,n))];case"Real":return[r.real(oT("x",e,t,n))];case"Relu":return[r.relu(oT("x",e,t,n))];case"Round":return[r.round(oT("x",e,t,n))];case"Selu":return[r.selu(oT("x",e,t,n))];case"Sigmoid":return[r.sigmoid(oT("x",e,t,n))];case"Sin":return[r.sin(oT("x",e,t,n))];case"Sign":return[r.sign(oT("x",e,t,n))];case"Sinh":return[r.sinh(oT("x",e,t,n))];case"Softplus":return[r.softplus(oT("x",e,t,n))];case"Sqrt":return[r.sqrt(oT("x",e,t,n))];case"Square":return[r.square(oT("x",e,t,n))];case"Tanh":return[r.tanh(oT("x",e,t,n))];case"Tan":return[r.tan(oT("x",e,t,n))];case"ClipByValue":return[r.clipByValue(oT("x",e,t,n),oT("clipValueMin",e,t,n),oT("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(oT("x",e,t,n))];case"Rsqrt":return[r.rsqrt(lT(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(oT("x",e,t,n),oT("alpha",e,t,n))];case"Prelu":return[r.prelu(oT("x",e,t,n),oT("alpha",e,t,n))];case"IsNan":return[r.isNaN(lT(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(lT(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(lT(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"control":return xL(e,t,n);case"convolution":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fL;switch(e.op){case"Conv1D":{let a=oT("stride",e,t,n),i=oT("pad",e,t,n),s=oT("dataFormat",e,t,n).toUpperCase(),o=oT("dilation",e,t,n);return[r.conv1d(oT("x",e,t,n),oT("filter",e,t,n),a,i,s,o)]}case"Conv2D":{let a=oT("strides",e,t,n),i=hT(e,t,n),s=oT("dataFormat",e,t,n).toUpperCase(),o=oT("dilations",e,t,n);return[r.conv2d(oT("x",e,t,n),oT("filter",e,t,n),[a[1],a[2]],i,s,[o[1],o[2]])]}case"_FusedConv2D":{let{stride:a,pad:i,dataFormat:s,dilations:o,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:A}=CL(e,t,n);return[r.fused.conv2d({x:oT("x",e,t,n),filter:oT("filter",e,t,n),strides:[a[1],a[2]],pad:i,dataFormat:s,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:A})]}case"FusedDepthwiseConv2dNative":{let{stride:a,pad:i,dataFormat:s,dilations:o,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:A}=CL(e,t,n);return[r.fused.depthwiseConv2d({x:oT("x",e,t,n),filter:oT("filter",e,t,n),strides:[a[1],a[2]],pad:i,dataFormat:s,dilations:[o[1],o[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:A})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let a=oT("outputShape",e,t,n),i=oT("strides",e,t,n),s=hT(e,t,n);return[r.conv2dTranspose(oT("x",e,t,n),oT("filter",e,t,n),a,[i[1],i[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let a=oT("strides",e,t,n),i=hT(e,t,n),s=oT("dilations",e,t,n),o=oT("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(oT("input",e,t,n),oT("filter",e,t,n),[a[1],a[2]],i,o,[s[1],s[2]])]}case"Conv3D":{let a=oT("strides",e,t,n),i=oT("pad",e,t,n),s=oT("dataFormat",e,t,n).toUpperCase(),o=oT("dilations",e,t,n);return[r.conv3d(oT("x",e,t,n),oT("filter",e,t,n),[a[1],a[2],a[3]],i,s,[o[1],o[2],o[3]])]}case"AvgPool":{let a=oT("strides",e,t,n),i=oT("pad",e,t,n),s=oT("kernelSize",e,t,n);return[r.avgPool(oT("x",e,t,n),[s[1],s[2]],[a[1],a[2]],i)]}case"MaxPool":{let a=oT("strides",e,t,n),i=oT("pad",e,t,n),s=oT("kernelSize",e,t,n);return[r.maxPool(oT("x",e,t,n),[s[1],s[2]],[a[1],a[2]],i)]}case"MaxPoolWithArgmax":{let a=oT("strides",e,t,n),i=oT("pad",e,t,n),s=oT("kernelSize",e,t,n),o=oT("includeBatchInIndex",e,t,n),{result:l,indexes:c}=r.maxPoolWithArgmax(oT("x",e,t,n),[s[1],s[2]],[a[1],a[2]],i,o);return[l,c]}case"AvgPool3D":{let a=oT("strides",e,t,n),i=oT("pad",e,t,n),s=oT("kernelSize",e,t,n);return[r.avgPool3d(oT("x",e,t,n),[s[1],s[2],s[3]],[a[1],a[2],a[3]],i)]}case"MaxPool3D":{let a=oT("strides",e,t,n),i=oT("pad",e,t,n),s=oT("kernelSize",e,t,n);return[r.maxPool3d(oT("x",e,t,n),[s[1],s[2],s[3]],[a[1],a[2],a[3]],i)]}case"Dilation2D":{let a=oT("strides",e,t,n),i=oT("pad",e,t,n),s=oT("dilations",e,t,n),o=a[1],l=a[2],c=s[1],u=s[2];return[r.dilation2d(oT("x",e,t,n),oT("filter",e,t,n),[o,l],i,[c,u],"NHWC")]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"creation":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fL;switch(e.op){case"Fill":{let a=oT("shape",e,t,n),i=oT("dtype",e,t,n),s=oT("value",e,t,n);return[r.fill(a,s,i)]}case"LinSpace":{let a=oT("start",e,t,n),i=oT("stop",e,t,n),s=oT("num",e,t,n);return[r.linspace(a,i,s)]}case"Multinomial":{let a=oT("logits",e,t,n),i=oT("numSamples",e,t,n),s=oT("seed",e,t,n);return[r.multinomial(a,i,s)]}case"OneHot":{let a=oT("indices",e,t,n),i=oT("depth",e,t,n),s=oT("onValue",e,t,n),o=oT("offValue",e,t,n),l=oT("dtype",e,t,n);return[r.oneHot(a,i,s,o,l)]}case"Ones":return[r.ones(oT("shape",e,t,n),oT("dtype",e,t,n))];case"OnesLike":return[r.onesLike(oT("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(oT("shape",e,t,n),oT("dtype",e,t,n),oT("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(oT("shape",e,t,n),oT("minval",e,t,n),oT("maxval",e,t,n),oT("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(oT("shape",e,t,n),oT("minval",e,t,n),oT("maxval",e,t,n),oT("seed",e,t,n))];case"Range":{let a=oT("start",e,t,n),i=oT("stop",e,t,n),s=oT("step",e,t,n);return[r.range(a,i,s,oT("dtype",e,t,n))]}case"TruncatedNormal":{let a=oT("shape",e,t,n),i=oT("mean",e,t,n),s=oT("stdDev",e,t,n),o=oT("seed",e,t,n);return[r.truncatedNormal(a,i,s,oT("dtype",e,t,n),o)]}case"Zeros":return[r.zeros(oT("shape",e,t,n),oT("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(oT("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"dynamic":return async function(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fL;switch(e.op){case"NonMaxSuppressionV5":{let{boxes:r,scores:i,maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=kL(e,t,n),u=await a.image.nonMaxSuppressionWithScoreAsync(r,i,s,o,l,c);return[u.selectedIndices,u.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:r,scores:i,maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=kL(e,t,n),c=oT("padToMaxOutputSize",e,t,n),u=await a.image.nonMaxSuppressionPaddedAsync(r,i,s,o,l,c);return[u.selectedIndices,u.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:r,scores:i,maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=kL(e,t,n);return[await a.image.nonMaxSuppressionAsync(r,i,s,o,l)]}case"Where":{let r=a.cast(oT("condition",e,t,n),"bool"),i=[await a.whereAsync(r)];return r.dispose(),i}case"ListDiff":return a.setdiff1dAsync(oT("x",e,t,n),oT("y",e,t,n));default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n);case"evaluation":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fL;switch(e.op){case"LowerBound":{let a=oT("sortedSequence",e,t,n),i=oT("values",e,t,n);return[r.lowerBound(a,i)]}case"TopKV2":{let a=oT("x",e,t,n),i=oT("k",e,t,n),s=oT("sorted",e,t,n),o=r.topk(a,i,s);return[o.values,o.indices]}case"UpperBound":{let a=oT("sortedSequence",e,t,n),i=oT("values",e,t,n);return[r.upperBound(a,i)]}case"Unique":{let a=oT("x",e,t,n),i=r.unique(a);return[i.values,i.indices]}case"UniqueV2":{let a=oT("x",e,t,n),i=oT("axis",e,t,n),s=r.unique(a,i);return[s.values,s.indices]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"image":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fL;switch(e.op){case"ResizeBilinear":{let a=oT("images",e,t,n),i=oT("size",e,t,n),s=oT("alignCorners",e,t,n),o=oT("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(a,[i[0],i[1]],s,o)]}case"ResizeNearestNeighbor":{let a=oT("images",e,t,n),i=oT("size",e,t,n),s=oT("alignCorners",e,t,n),o=oT("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(a,[i[0],i[1]],s,o)]}case"CropAndResize":{let a=oT("image",e,t,n),i=oT("boxes",e,t,n),s=oT("boxInd",e,t,n),o=oT("cropSize",e,t,n),l=oT("method",e,t,n),c=oT("extrapolationValue",e,t,n);return[r.image.cropAndResize(a,i,s,o,l,c)]}case"ImageProjectiveTransformV3":{let a=oT("images",e,t,n),i=oT("transforms",e,t,n),s=oT("outputShape",e,t,n),o=oT("fillValue",e,t,n),l=oT("interpolation",e,t,n),c=oT("fillMode",e,t,n);return[r.image.transform(a,i,l.toLowerCase(),c.toLowerCase(),o,s)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"graph":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fL;switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":let a=oT("default",e,t,n);return[lT(e.name,t,n)||a];case"Placeholder":return[lT(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[pT(oT("x",e,t,n))];case"IdentityN":return oT("x",e,t,n).map(e=>pT(e));case"Shape":return[r.tensor1d(oT("x",e,t,n).shape,"int32")];case"ShapeN":return oT("x",e,t,n).map(e=>r.tensor1d(e.shape));case"Size":return[r.scalar(oT("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(oT("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let i=oT("x",e,t,n),s=oT("data",e,t,n),o=oT("message",e,t,n),l=oT("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(let e=0;e<s.length;e++)console.log(Array.prototype.slice.call(s[e].dataSync()).slice(0,l));return[i];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"logical":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fL;switch(e.op){case"Equal":return[r.equal(oT("a",e,t,n),oT("b",e,t,n))];case"NotEqual":return[r.notEqual(oT("a",e,t,n),oT("b",e,t,n))];case"Greater":return[r.greater(oT("a",e,t,n),oT("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(oT("a",e,t,n),oT("b",e,t,n))];case"Less":return[r.less(oT("a",e,t,n),oT("b",e,t,n))];case"LessEqual":return[r.lessEqual(oT("a",e,t,n),oT("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(oT("a",e,t,n),oT("b",e,t,n))];case"LogicalNot":return[r.logicalNot(oT("a",e,t,n))];case"LogicalOr":return[r.logicalOr(oT("a",e,t,n),oT("b",e,t,n))];case"Select":case"SelectV2":return[r.where(oT("condition",e,t,n),oT("a",e,t,n),oT("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(oT("a",e,t,n),oT("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"matrices":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fL;switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(oT("a",e,t,n),oT("b",e,t,n),oT("transposeA",e,t,n),oT("transposeB",e,t,n))];case"Einsum":return[r.einsum(oT("equation",e,t,n),...oT("tensors",e,t,n))];case"Transpose":return[r.transpose(oT("x",e,t,n),oT("perm",e,t,n))];case"_FusedMatMul":let[a,i]=oT("fusedOps",e,t,n),s="biasadd"===a,o="prelu"===i,l=oT("numArgs",e,t,n),c=oT("leakyreluAlpha",e,t,n);if(s){if(o&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!o&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[u,A]=oT("args",e,t,n);return[r.fused.matMul({a:oT("a",e,t,n),b:oT("b",e,t,n),transposeA:oT("transposeA",e,t,n),transposeB:oT("transposeB",e,t,n),bias:u,activation:i,preluActivationWeights:A,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(oT("a",e,t,n),oT("numLower",e,t,n),oT("numUpper",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"normalization":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fL;switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(oT("x",e,t,n),oT("axis",e,t,n),oT("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(oT("x",e,t,n),oT("mean",e,t,n),oT("variance",e,t,n),oT("offset",e,t,n),oT("scale",e,t,n),oT("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(oT("x",e,t,n),oT("radius",e,t,n),oT("bias",e,t,n),oT("alpha",e,t,n),oT("beta",e,t,n))];case"Softmax":return[r.softmax(oT("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(oT("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"ragged":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fL;switch(e.op){case"RaggedGather":{let{outputNestedSplits:a,outputDenseValues:i}=r.raggedGather(oT("paramsNestedSplits",e,t,n),oT("paramsDenseValues",e,t,n),oT("indices",e,t,n),oT("outputRaggedRank",e,t,n));return a.concat(i)}case"RaggedRange":{let{rtNestedSplits:a,rtDenseValues:i}=r.raggedRange(oT("starts",e,t,n),oT("limits",e,t,n),oT("splits",e,t,n));return[a,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(oT("shape",e,t,n),oT("values",e,t,n),oT("defaultValue",e,t,n),oT("rowPartitionTensors",e,t,n),oT("rowPartitionTypes",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"reduction":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fL;switch(e.op){case"Max":{let a=oT("axis",e,t,n),i=oT("keepDims",e,t,n);return[r.max(oT("x",e,t,n),a,i)]}case"Mean":{let a=oT("axis",e,t,n),i=oT("keepDims",e,t,n);return[r.mean(oT("x",e,t,n),a,i)]}case"Min":{let a=oT("axis",e,t,n),i=oT("keepDims",e,t,n);return[r.min(oT("x",e,t,n),a,i)]}case"Sum":{let a=oT("axis",e,t,n),i=oT("keepDims",e,t,n);return[r.sum(oT("x",e,t,n),a,i)]}case"All":{let a=oT("axis",e,t,n),i=oT("keepDims",e,t,n);return[r.all(oT("x",e,t,n),a,i)]}case"Any":{let a=oT("axis",e,t,n),i=oT("keepDims",e,t,n);return[r.any(oT("x",e,t,n),a,i)]}case"ArgMax":{let a=oT("axis",e,t,n);return[r.argMax(oT("x",e,t,n),a)]}case"ArgMin":{let a=oT("axis",e,t,n);return[r.argMin(oT("x",e,t,n),a)]}case"Prod":{let a=oT("axis",e,t,n),i=oT("keepDims",e,t,n);return[r.prod(oT("x",e,t,n),a,i)]}case"Cumprod":{let a=oT("axis",e,t,n),i=oT("exclusive",e,t,n),s=oT("reverse",e,t,n);return[r.cumprod(oT("x",e,t,n),a,i,s)]}case"Cumsum":{let a=oT("axis",e,t,n),i=oT("exclusive",e,t,n),s=oT("reverse",e,t,n);return[r.cumsum(oT("x",e,t,n),a,i,s)]}case"Bincount":let a=oT("x",e,t,n),i=oT("weights",e,t,n),s=oT("size",e,t,n);return[r.bincount(a,i,s)];case"DenseBincount":{let a=oT("x",e,t,n),i=oT("weights",e,t,n),s=oT("size",e,t,n),o=oT("binaryOutput",e,t,n);return[r.denseBincount(a,i,s,o)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"slice_join":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fL;switch(e.op){case"ConcatV2":case"Concat":{let a=oT("n",e,t,n),i=oT("axis",e,t,n),s=oT("tensors",e,t,n);return s=s.slice(0,a),[r.concat(s,i)]}case"Gather":{let a=oT("x",e,t,n),i=oT("indices",e,t,n);return[r.gather(a,r.cast(i,"int32"),0)]}case"GatherV2":{let a=oT("axis",e,t,n),i=oT("batchDims",e,t,n),s=oT("x",e,t,n),o=oT("indices",e,t,n);return[r.gather(s,r.cast(o,"int32"),a,i)]}case"Reverse":{let a=oT("dims",e,t,n),i=[];for(let e=0;e<a.length;e++)a[e]&&i.push(e);let s=oT("x",e,t,n);return[r.reverse(s,i)]}case"ReverseV2":{let a=oT("axis",e,t,n),i=oT("x",e,t,n);return[r.reverse(i,a)]}case"Slice":{let a=oT("begin",e,t,n),i=oT("size",e,t,n);return[r.slice(oT("x",e,t,n),a,i)]}case"StridedSlice":{let a=oT("begin",e,t,n),i=oT("end",e,t,n),s=oT("strides",e,t,n),o=oT("beginMask",e,t,n),l=oT("endMask",e,t,n),c=oT("ellipsisMask",e,t,n),u=oT("newAxisMask",e,t,n),A=oT("shrinkAxisMask",e,t,n),d=oT("x",e,t,n);return[r.stridedSlice(d,a,i,s,o,l,c,u,A)]}case"Pack":return PA(()=>{let a=oT("axis",e,t,n),i=oT("tensors",e,t,n),s=i[0].shape,o=r.squeeze(i[0]).shape,l=i.map(e=>{let t=su.arraysEqual(e.shape,s);if(!t&&!su.arraysEqual(r.squeeze(e).shape,o))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,s)});return[r.stack(l,a)]});case"Unpack":{let a=oT("axis",e,t,n),i=oT("tensor",e,t,n);return r.unstack(i,a)}case"Tile":{let a=oT("reps",e,t,n);return[r.tile(oT("x",e,t,n),a)]}case"Split":case"SplitV":{let a=oT("axis",e,t,n),i=oT("numOrSizeSplits",e,t,n),s=oT("x",e,t,n);return r.split(s,i,a)}case"ScatterNd":{let a=oT("indices",e,t,n),i=oT("values",e,t,n),s=oT("shape",e,t,n);return[r.scatterND(a,i,s)]}case"GatherNd":{let a=oT("x",e,t,n),i=oT("indices",e,t,n);return[r.gatherND(a,i)]}case"SparseToDense":{let a=oT("sparseIndices",e,t,n),i=oT("outputShape",e,t,n),s=oT("sparseValues",e,t,n),o=oT("defaultValue",e,t,n);return[r.sparseToDense(a,s,i,s.dtype===o.dtype?o:r.cast(o,s.dtype))]}case"TensorScatterUpdate":{let a=oT("indices",e,t,n),i=oT("values",e,t,n),s=oT("tensor",e,t,n);return[r.tensorScatterUpdate(s,a,i)]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"sparse":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fL;switch(e.op){case"SparseFillEmptyRows":{let{outputIndices:a,outputValues:i,emptyRowIndicator:s,reverseIndexMap:o}=r.sparse.sparseFillEmptyRows(oT("indices",e,t,n),oT("values",e,t,n),oT("denseShape",e,t,n),oT("defaultValue",e,t,n));return[a,i,s,o]}case"SparseReshape":{let{outputIndices:a,outputShape:i}=r.sparse.sparseReshape(oT("inputIndices",e,t,n),oT("inputShape",e,t,n),oT("newShape",e,t,n));return[a,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(oT("data",e,t,n),oT("indices",e,t,n),oT("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(oT("data",e,t,n),oT("indices",e,t,n),oT("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"spectral":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fL;switch(e.op){case"FFT":return[r.fft(oT("x",e,t,n))];case"IFFT":return[r.ifft(oT("x",e,t,n))];case"RFFT":return[r.rfft(oT("x",e,t,n))];case"IRFFT":return[r.irfft(oT("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"string":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fL;switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(oT("input",e,t,n),oT("pattern",e,t,n),oT("rewrite",e,t,n),oT("replaceGlobal",e,t,n))];case"StringNGrams":{let{nGrams:a,nGramsSplits:i}=r.string.stringNGrams(oT("data",e,t,n),oT("dataSplits",e,t,n),oT("separator",e,t,n),oT("nGramWidths",e,t,n),oT("leftPad",e,t,n),oT("rightPad",e,t,n),oT("padWidth",e,t,n),oT("preserveShortSequences",e,t,n));return[a,i]}case"StringSplit":{let{indices:a,values:i,shape:s}=r.string.stringSplit(oT("input",e,t,n),oT("delimiter",e,t,n),oT("skipEmpty",e,t,n));return[a,i,s]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(oT("input",e,t,n),oT("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"transformation":return a(()=>function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fL;switch(e.op){case"Cast":return[r.cast(oT("x",e,t,n),oT("dtype",e,t,n))];case"ExpandDims":{let a=oT("axis",e,t,n);return[r.expandDims(oT("x",e,t,n),a)]}case"Squeeze":{let a=oT("axis",e,t,n);return[r.squeeze(oT("x",e,t,n),a)]}case"Reshape":return[r.reshape(oT("x",e,t,n),oT("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(oT("x",e,t,n),oT("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(oT("x",e,t,n),oT("padding",e,t,n),oT("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(oT("x",e,t,n),oT("padding",e,t,n),oT("constantValue",e,t,n))];case"SpaceToBatchND":{let a=oT("blockShape",e,t,n),i=oT("paddings",e,t,n);return[r.spaceToBatchND(oT("x",e,t,n),a,i)]}case"BatchToSpaceND":{let a=oT("blockShape",e,t,n),i=oT("crops",e,t,n);return[r.batchToSpaceND(oT("x",e,t,n),a,i)]}case"DepthToSpace":{let a=oT("blockSize",e,t,n),i=oT("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(oT("x",e,t,n),a,i)]}case"BroadcastTo":return[r.broadcastTo(oT("x",e,t,n),oT("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(oT("s0",e,t,n),oT("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n));case"hash_table":return(async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{let a=r.getHashTableHandleByName(e.name);if(null!=a)return[a];{let a=oT("keyDType",e,t,n),i=oT("valueDType",e,t,n),s=new BL(a,i);return r.addHashTable(e.name,s),[s.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let a=oT("tableHandle",e,t,n,r),i=oT("keys",e,t,n),s=oT("values",e,t,n);return[await r.getHashTableById(a.id).import(i,s)]}case"LookupTableFind":case"LookupTableFindV2":{let a=oT("tableHandle",e,t,n,r),i=oT("keys",e,t,n),s=oT("defaultValue",e,t,n);return[await r.getHashTableById(a.id).find(i,s)]}case"LookupTableSize":case"LookupTableSizeV2":{let a=oT("tableHandle",e,t,n,r);return[r.getHashTableById(a.id).tensorSize()]}default:throw TypeError("Node type ".concat(e.op," is not implemented"))}})(e,t,n,r);case"custom":let i=iT(e.op);if(i&&i.customExecutor)return i.customExecutor(new pL(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()"))}})(e,t,n);return su.isPromise(i)?i.then(e=>[].concat(e)):[].concat(i)}var IL=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0;this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.parseNodeNameCache=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let e=[];for(let t=0;t<this.contexts.length-1;t++){let n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(e=>0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;let e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(let t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(let t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}};function NL(e,t,n,r){let a=new Set,i=[],s=null,o=null,l=new Set,c=new Set(Object.keys(e).map(e=>dT(e)[0]));r=r||[];let u=new Set(r.map(e=>dT(e.name)[0])),A=[...t];for(;A.length>0;){let e=A.pop();if((DL(e)||RL(e)||UL(e))&&null==s&&(s=e,o=s.children.map(e=>e.name).filter(e=>a.has(e))),a.add(e.name),null==n[e.name]&&!c.has(e.name)&&!u.has(e.name)){if(0===e.inputs.length){i.push(e.name);continue}e.inputs.forEach(e=>{l.has(e.name)||(l.add(e.name),A.push(e))})}}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:s,syncInputs:o}}function FL(e,t){let{usedNodes:n,inputs:r}=t,a=Object.keys(r).map(e=>dT(e)[0]).map(t=>e.nodes[t]),i=e.initNodes||[],s=e=>n.has("string"==typeof e?e:e.name);function o(e){return[...new Map(e.map(e=>[e.name,e])).values()]}let l=o([...a,...e.weights,...i]).filter(s),c=o([...l,...Object.values(e.nodes)]).filter(s),u=new Map(c.map(e=>[e.name,e])),A={};for(let m of c){A[m.name]=A[m.name]||0;for(let e of m.children)s(e)||(A[e.name]=Number.POSITIVE_INFINITY),A[e.name]=(A[e.name]||0)+1}let d=Object.entries(A).filter(e=>{let[,t]=e;return 0===t}).map(e=>{let[t]=e;return t}),h=[...d];for(;d.length>0;){let e=d.pop(),t=u.get(e);for(let n of t.children.filter(s))0===--A[n.name]&&(h.push(n.name),d.push(n.name))}let p=h.map(e=>u.get(e)),f=function(e,t){let n=new Map(e.map(e=>[e.name,e])),r=t.map(e=>e.name),a=new Set(r);for(;r.length>0;){let e=r.pop(),t=n.get(e);for(let i of t.children)!n.has(i.name)||a.has(i.name)||(a.add(i.name),r.push(i.name))}return e.filter(e=>a.has(e.name))}(p,l);return function(e,t){let n=new Map(e.map((e,t)=>[e.name,t])),r=new Set(t.map(e=>e.name)),a=e=>r.has("string"==typeof e?e:e.name),i=new Set(e.map(e=>e.name)),s=e=>i.has("string"==typeof e?e:e.name);for(let o of e){for(let e of o.children.filter(s)){if(!n.has(e.name))throw new EL("Child ".concat(e.name," of node ").concat(o.name," is unreachable."));if(n.get(o.name)>n.get(e.name))throw new EL("Node ".concat(o.name," is scheduled to run after its child ").concat(e.name,"."))}if(!a(o))for(let e of o.inputs){if(!n.has(e.name))throw new EL("Input ".concat(e.name," of node ").concat(o.name," is unreachable."));if(n.get(e.name)>n.get(o.name))throw new EL("Node ".concat(o.name," is scheduled to run before its input ").concat(e.name,"."))}}}(f,l),f}var EL=class extends Error{constructor(e){super("NodesExecutionOrderError: ".concat(e))}};var _L=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),TL=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),LL=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function DL(e){return _L.has(e.op)}function RL(e){return TL.has(e.op)}function UL(e){return LL.has(e.op)}var OL=class e{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){let t=Object.keys(e).map(t=>e[t].map(e=>e.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{let t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}constructor(t,n){this.graph=t,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach(n=>{this._functionExecutorMap[n]=new e(t.functions[n],this)})}getCompilationKey(e,t){let n=e.map(e=>e.name).sort(),r=t.map(e=>e.name).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(e,t){let n=NL(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:a,syncInputs:i}=n;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has the dynamic op '").concat(a.op,"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [").concat(i,"]"));if(r.length>0){let n=t.map(e=>e.name),a=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(n,"] from the provided inputs [").concat(a,"]. Missing the following inputs: [").concat(r,"]"))}let s=FL(this.graph,n),o=function(e){let t=new Map(e.map((e,t)=>[e.name,t])),n=Number.MAX_SAFE_INTEGER,r=e.map((e,t)=>DL(e)?n:t),a=e=>{let n=r[t.get(e.name)];return null==n?-1:n},i=e.map((e,t)=>e.children.map(a).reduce((e,t)=>Math.max(e,t),r[t])),s=new Map;for(let o=0;o<e.length;++o){let t=i[o];if(t===n)continue;let r=e[o],a=e[t];s.has(a.name)||s.set(a.name,[]),s.get(a.name).push(r)}return s}(s);return{orderedNodes:s,nodeLiveUntilMap:o}}cloneAndKeepTensor(e){if(null==e)return null;let t=e.clone();return jA(t),t}cloneTensorList(e){return e?e.map(e=>this.cloneAndKeepTensor(e)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(e=>{let[t,n]=e;return[t,this.cloneTensorList(n)]}))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);let n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);let r=n.map(e=>this.graph.nodes[dT(e)[0]]),a=t.map(e=>dT(e)[0]),i=new Set(a),s=a.map(e=>this.graph.nodes[e]);0===s.length&&(s=this._outputs);let o=this.getCompilationKey(r,s),l=this.compiledMap.get(o);null==l&&(l=this.compile(e,s),this.compiledMap.set(o,l));try{this.keepIntermediateTensors=Cs().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(bt){this.keepIntermediateTensors=!1,console.warn(bt.message)}let c={},u={};return PA(()=>{let n=new IL(this.weightMap,c,u,this.functionExecutorMap,this.parseNodeNameCache),r=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(t=>{let[a,i]=dT(t,n),s=[];s[i]=e[t],r[a]=s,this.keepIntermediateTensors&&(this.clonedTensorsMap[a]=this.cloneTensorList(s))});let a=this.getFrozenTensorIds(r),{orderedNodes:s,nodeLiveUntilMap:o}=l;for(let e of s){if(r[e.name])continue;let t=SL(e,r,n,this._resourceManager);if(su.isPromise(t))throw new Error("The execution of the op '".concat(e.op,"' returned a promise. Please use model.executeAsync() instead."));r[e.name]=t,this.keepIntermediateTensors&&(this.clonedTensorsMap[e.name]=this.cloneTensorList(t)),this.checkTensorForDisposalWithNodeLiveUntilInfo(e,r,n,a,i,o.get(e.name))}return null==this.parent&&n.dispose(a),t.map(e=>lT(e,r,n))})}getFrozenTensorIds(e){let t=[].concat.apply([],Object.keys(e).map(t=>e[t]).map(e=>e.map(e=>e.id)));return new Set(t)}checkTensorForDisposal(e,t,n,r,a,i,s){if(!DL(t)&&!i.has(e)){for(let r of n[e])null!=r&&(s[r.id]=(s[r.id]||0)+t.children.length);for(let e of t.inputs){if(DL(e))continue;let t=cT(e.name,n,r);if(null!=t)for(let e of t){if(!e||e.kept||a.has(e.id))continue;let t=s[e.id];1===t?(e.dispose(),delete s[e.id]):null!=t&&s[e.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,n,r,a,i){function s(e){return DL(e)||a.has(e.name)}if(!DL(e)&&null!=i)for(let o of i){if(s(o))continue;let e=cT(o.name,t,n);for(let t of e)!t||t.kept||r.has(t.id)||t.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(let t of e)t&&!t.isDisposed&&t.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.disposeIntermediateTensors(),n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=Cs().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(bt){this.keepIntermediateTensors=!1,console.warn(bt.message)}let i=new IL(this.weightMap,r,a,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let s=await this.executeWithControlFlow(e,i,t,n),o=t.map(e=>lT(e,s,i)),l=o.map(e=>e.id),c=Object.keys(e).map(t=>e[t].id),u=new Set([...l,...c,...this.weightIds]);return Object.values(s).forEach(e=>{e.forEach(e=>{e&&!e.isDisposed&&!u.has(e.id)&&e.dispose()})}),null==this.parent&&i.dispose(u),o}async executeFunctionAsync(e,t,n){let r=e.reduce((e,t,n)=>(e[this.inputs[n].name]=t,e),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){let a=Object.keys(e),i=a.map(e=>this.graph.nodes[dT(e)[0]]),s=n.map(e=>dT(e)[0]),o=new Set(s),l=s.map(e=>this.graph.nodes[e]);0===l.length&&(l=this._outputs);let{usedNodes:c,missingInputs:u,dynamicNode:A,syncInputs:d}=NL(e,l,this.weightMap,this._initNodes),h=[...i,...this.graph.weights,...this._initNodes||[]].map(e=>({node:e,contexts:t.currentContext})),p=Object.assign({},this.weightMap);Object.keys(e).forEach(t=>{let[n,r]=dT(t),a=[];a[r]=e[t],p[n]=a});let f={},m=this.getFrozenTensorIds(p),g={};for(;h.length>0;){let e=this.processStack(i,h,t,p,g,m,o,f,c);await Promise.all(e)}null==A&&!r&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let y=l.filter(e=>!DL(e)&&!lT(e.name,p,t)).map(e=>e.name);if(y.length>0){let e="";throw null!=A&&(e="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [".concat(d,"]")),new Error("Cannot compute the outputs [".concat(y,"] from the provided inputs [").concat(a,"]. Consider providing the following inputs: [").concat(u,"]. ").concat(e))}return p}processStack(e,t,n,r,a,i,s,o,l){let c=[];for(;t.length>0;){let e=t.pop();n.currentContext=e.contexts;let u="";if("Enter"===e.node.op&&oT("isConstant",e.node,r,n)&&([u]=uT(e.node.name,n)),null==r[e.node.name]){let A=SL(e.node,r,n,this._resourceManager);u||([u]=uT(e.node.name,n));let d=n.currentContext;su.isPromise(A)?c.push(A.then(c=>(r[u]=c,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(c)),n.currentContext=d,this.checkTensorForDisposal(u,e.node,r,n,i,s,o),this.processChildNodes(e.node,t,n,r,a,l),c))):(r[u]=A,this.keepIntermediateTensors&&(this.clonedTensorsMap[u]=this.cloneTensorList(A)),this.checkTensorForDisposal(u,e.node,r,n,i,s,o),this.processChildNodes(e.node,t,n,r,a,l))}else this.processChildNodes(e.node,t,n,r,a,l)}return c}processChildNodes(e,t,n,r,a,i){e.children.forEach(e=>{let[s]=uT(e.name,n);a[s]||!i.has(e.name)||("Merge"===e.op?e.inputNames.some(e=>!!lT(e,r,n))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every(e=>!!lT(e,r,n))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(e=>e.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{let n=e[t],[r]=dT(t),a=this.graph.nodes[r];if(a.attrParams.shape&&a.attrParams.shape.value){let e=a.attrParams.shape.value,t=e.length===n.shape.length&&n.shape.every((t,n)=>-1===e[n]||e[n]===t);su.assert(t,()=>"The shape of dict['".concat(a.name,"'] provided in model.execute(dict) must be [").concat(e,"], but was [").concat(n.shape,"]"))}a.attrParams.dtype&&a.attrParams.dtype.value&&su.assert(n.dtype===a.attrParams.dtype.value,()=>"The dtype of dict['".concat(a.name,"'] provided in model.execute(dict) must be ").concat(a.attrParams.dtype.value,", but was ").concat(n.dtype))})}mapInputs(e){var t,n;let r={};for(let a in e){let i=null===(n=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===n?void 0:n[a];null!=i?r[i.name]=e[a]:r[a]=e[a]}return r}checkInputs(e){let t=Object.keys(e).filter(e=>{let[t]=dT(e);return null==this.graph.nodes[t]});if(t.length>0)throw new Error("The dict provided in model.execute(dict) has keys: [".concat(t,"] that are not part of graph"))}mapOutputs(e){return e.map(e=>{var t,n;let r=null===(n=null===(t=this._signature)||void 0===t?void 0:t.outputs)||void 0===n?void 0:n[e];return null!=r?r.name:e},{})}checkOutputs(e){e.forEach(e=>{let[t]=dT(e);if(!this.graph.nodes[t])throw new Error("The output '".concat(e,"' is not found in the graph"))})}},ML=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(let e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(let e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}},PL="?tfjs-format=file",QL="model.json",jL=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bb;this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=n,null==t&&(this.loadOptions={}),this.resourceManager=new ML}findIOHandler(){let e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{let t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for URL '").concat([e],"'"));this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let e=this.handler.load();return su.isPromise(e)?e.then(e=>null==e.getWeightStream?this.loadSync(e):this.loadStreaming(e)):this.loadSync(e)}loadSync(e){let t=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,t)}async loadStreaming(e){if(null==e.getWeightStream)throw new Error("Model artifacts missing streamWeights function");let t=await ad(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,t)}loadWithWeightMap(e,t){this.artifacts=e;let n=this.artifacts.modelTopology,r=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){let e=this.artifacts.userDefinedMetadata;null!=e.signature&&(r=e.signature),null!=e.structuredOutputKeys&&(this.structuredOutputKeys=e.structuredOutputKeys)}if(this.signature=r,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer),this.executor=new OL($T.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(t),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){let t=$T.Instance.transformGraph(e.modelInitializer);this.initializer=new OL(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if("string"==typeof e){let t=this.io.getSaveHandlers(e);if(0===t.length)throw new Error("Cannot find any save handlers for URL '".concat(e,"'"));if(t.length>1)throw new Error("Found more than one (".concat(t.length,") save handlers for URL '").concat(e,"'"));e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){let t={};return(e instanceof ju?[e]:e).forEach((e,n)=>t[this.structuredOutputKeys[n]]=e),t}return e}predict(e,t){let n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}async predictAsync(e,t){let n=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(n)}normalizeInputs(e){var t;if(!(e instanceof ju)&&!Array.isArray(e)){let n=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=n)for(let t in n){let r=n[t];null!=r.resourceId&&(e[t]=this.resourceIdToCapturedInput[r.resourceId])}return e}e=Array.isArray(e)?e:[e];let n=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+n!==this.inputNodes.length)throw new Error("Input tensor count mismatch, the graph model has ".concat(this.inputNodes.length-n," non-resource placeholders, while there are ").concat(e.length," input tensors provided."));let r=0;return this.inputNodes.reduce((t,n)=>{var a,i,s;let o=null===(s=null===(i=null===(a=this.signature)||void 0===a?void 0:a.inputs)||void 0===i?void 0:i[n])||void 0===s?void 0:s.resourceId;return t[n]=null!=o?this.resourceIdToCapturedInput[o]:e[r++],t},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){let t=this.initializerSignature.outputs,n=Object.keys(t);for(let r=0;r<n.length;r++){let a=t[n[r]];this.resourceIdToCapturedInput[a.resourceId]=e[r]}}}execute(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,n)=>(t[n]=[e[n]],t),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&QA(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}};async function HL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bb;if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&"string"==typeof e&&(e=function(e){return e.endsWith("/")||(e+="/"),"".concat(e).concat(QL).concat(PL)}(e));let r=new jL(e,t,n);return await r.load(),r}function zL(e){if(null==e)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let t;if(e instanceof Array){let[n,r]=e;if(!n)throw new Error("modelJSON must be the first element of the array");if(!r||!(r instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in n))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in n))throw new Error("Model JSON is missing 'weightsManifest'");let a=Bb.getWeightSpecs(n.weightsManifest),i=Bb.getModelArtifactsForJSONSync(n,a,r);t=Bb.fromMemorySync(i)}else if("load"in e)t=e;else{if(!("modelTopology"in e&&"weightSpecs"in e&&"weightData"in e))throw new Error("Unknown model format");t=Bb.fromMemorySync(e)}let n=new jL(t);return n.load(),n}var WL="4.22.0",VL={};ei(VL,{CSVDataset:()=>OD,Dataset:()=>kD,FileDataSource:()=>JD,TextLineDataset:()=>ED,URLDataSource:()=>YD,array:()=>SD,csv:()=>ZD,func:()=>$D,generator:()=>eR,microphone:()=>nR,version_data:()=>rR,webcam:()=>tR,zip:()=>ID});var GL=ti(hi()),KL=ti(hi());function qL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"==typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);let a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if($L(e)){let a=Array.isArray(e)?[]:{};r.add(e);for(let i in e){let s=qL(e[i],t,n,r);a[i]=s}return r.delete(e),e.__proto__&&(a.__proto__=e.__proto__),a}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function XL(e){return JL(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:YL)}function JL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");let a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if($L(r)){let a=Array.isArray(r)?[]:{};n.add(r);for(let i in r){let r=e.map(e=>e[i]),s=JL(r,t,n);a[i]=s}return n.delete(r),a}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function YL(e){return null===e?null:$L(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}async function ZL(e,t){let n=new Map;qL(e,t,n);for(let r of Array.from(n.keys())){let e=n.get(r);if(su.isPromise(e)){let t=await e;n.set(r,t)}}return qL(e,t,n)}function $L(e){let t=!1;if(Cs().get("IS_BROWSER"))t=e instanceof TextDecoder;else{let{StringDecoder:n}=pi();t=e instanceof n}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof ju)&&!(e instanceof Promise)&&!t)}function eD(e){return function(e,t){return qL(e,t)}(e,tD)}function tD(e){return e instanceof ju?{value:e.clone(),recurse:!1}:$L(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var nD=class{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(let t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);let e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}},rD=class e extends nD{constructor(){super(e.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){let e=2*this.capacity,t=new Array(e),n=this.length();for(let r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}};function aD(e){return new lD(e)}function iD(e){return new cD(e)}rD.INITIAL_CAPACITY=32;var sD,oD=class{async toArray(){let e=[],t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){let e=this.prefetch(100),t=[],n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new mD(this,e)}filter(e){return new pD(this,e)}map(e){return new fD(this,e)}mapAsync(e){return new gD(this,e)}serialMapAsync(e){return new gD(this,e).serial()}flatmap(e){return new bD(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(e=>!0===e)}rowMajorBatch(e){return new hD(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}columnMajorBatch(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:YL;return this.rowMajorBatch(e,t).map(e=>XL(e,n))}concatenate(e,t){return new wD(aD([this,e]),t)}take(e){return e<0||null==e?this:new dD(this,e)}skip(e){return e<0||null==e?this:new AD(this,e)}prefetch(e){return new xD(this,e)}shuffle(e,t){return new CD(this,e,t)}serial(){return new uD(this)}},lD=class extends oD{constructor(e){super(),this.items=e,this.trav=0}summary(){return"Array of ".concat(this.items.length," items")}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};let e=this.items[this.trav];return this.trav++,{value:eD(e),done:!1}}},cD=class extends oD{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(Vu){throw Vu.message="Error thrown while iterating through a dataset: ".concat(Vu.message),Vu}}},uD=class extends oD{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Serial")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}},AD=class extends oD{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Skip")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){let e=await this.upstream.next();if(e.done)return e;QA(e.value)}return this.upstream.next()}},dD=class extends oD{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return"".concat(this.upstream.summary()," -> Take")}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}},hD=class extends oD{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){let e=[];for(;e.length<this.batchSize;){let t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}},pD=class extends oD{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> Filter")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){let e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;QA(e.value)}}},fD=class extends oD{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Map")}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=Ju.getTensorsInContainer(e.value),n=this.transform(e.value),r=Ju.getTensorsInContainer(n);for(let a of t)Ju.isTensorInList(a,r)||a.dispose();return{value:n,done:!1}}},mD=class extends oD{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return"".concat(this.upstream.summary()," -> handleErrors")}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(Vu){if(!this.handler(Vu))return{value:null,done:!0}}}},gD=class extends oD{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> AsyncMap")}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=Ju.getTensorsInContainer(e.value),n=await this.transform(e.value),r=Ju.getTensorsInContainer(n);for(let a of t)Ju.isTensorInList(a,r)||a.dispose();return{value:n,done:!1}}},yD=class extends oD{constructor(){super(),this.outputQueue=new rD,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}},bD=class extends yD{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return"".concat(this.upstream.summary()," -> Flatmap")}async pump(){let e=await this.upstream.next();if(e.done)return!1;let t=Ju.getTensorsInContainer(e.value),n=this.transform(e.value),r=Ju.getTensorsInContainer(n);this.outputQueue.pushAll(n);for(let a of t)Ju.isTensorInList(a,r)||a.dispose();return!0}},wD=class extends oD{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){let e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}let t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}};!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(sD||(sD={}));var vD=class extends oD{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sD.FAIL;super(),this.iterators=e,this.mismatchMode=t,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let t=0,n=0;let r=await ZL(this.iterators,function(e){return e instanceof oD?{value:e.next().then(e=>(t++,e.done&&n++,e.value)),recurse:!1}:{value:null,recurse:!0}});if(t===n)return{value:null,done:!0};if(n>0)switch(this.mismatchMode){case sD.FAIL:throw new Error("Zipped streams should have the same length. Mismatched at element ".concat(this.count,"."));case sD.SHORTEST:return{value:null,done:!0};case sD.LONGEST:}return this.count++,{value:r,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}},xD=class extends oD{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new nD(t)}summary(){return"".concat(this.upstream.summary()," -> Prefetch")}refill(){for(;!this.buffer.isFull();){let e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}},CD=class extends xD{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=KL.alea(n||su.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){let e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}},kD=class{constructor(){this.size=null}batch(e){let t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return su.assert(e>0,()=>"batchSize needs to be positive, but it is\n      ".concat(e)),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),BD(async()=>(await r.iterator()).columnMajorBatch(e,n,ND),t)}concatenate(e){let t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,BD(async()=>(await n.iterator()).concatenate(await e.iterator()),t)}filter(e){let t,n=this;return t=this.size===1/0?1/0:null,BD(async()=>(await n.iterator()).filter(t=>PA(()=>e(t))),t)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){let t=this;return BD(async()=>(await t.iterator()).map(t=>PA(()=>e(t))),this.size)}mapAsync(e){let t=this;return BD(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");let t=this;return BD(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){let t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,BD(async()=>function(e,t){return new wD(e,t)}(iD(async()=>({value:await n.iterator(),done:!1})).take(e)),t)}skip(e){let t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,BD(async()=>(await n.iterator()).skip(e),t)}shuffle(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting bufferSize to the dataset size (".concat(this.size," elements)"));let r=this,a=GL.alea(t||su.now().toString());return BD(async()=>{let t=a.int32();return n&&(t+=a.int32()),(await r.iterator()).shuffle(e,t.toString())},this.size)}take(e){let t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,BD(async()=>(await n.iterator()).take(e),t)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}};function BD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new class extends kD{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function SD(e){return BD(async()=>aD(e),e.length)}function ID(e){if(!$L(e))throw new Error("The argument to zip() must be an object or array.");let t;if(Array.isArray(e))for(let n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(let n in e)t=null==t?e[n].size:Math.min(t,e[n].size);return BD(async()=>{let t=await ZL(e,e=>{if(e instanceof kD)return{value:e.iterator(),recurse:!1};if($L(e))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sD.FAIL;return new vD(e,t)}(t,sD.SHORTEST)},t)}function ND(e){if(null===e)return null;return function(e){return null==e||function(e){return null===e||"object"!=typeof e&&"function"!=typeof e}(e)||Array.isArray(e)||"object"==typeof e&&e instanceof ju||su.isTypedArray(e)}(e[0])?{value:FD(e),recurse:!1}:{value:null,recurse:!0}}function FD(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof ju?pg(e):NA(e)}kD.MAX_BUFFER_SIZE=1e4;var ED=class extends kD{constructor(e){super(),this.input=e}async iterator(){return(await this.input.iterator()).decodeUTF8().split("\n").map(e=>(e.endsWith("\r")&&(e=e.slice(0,-1)),e))}},_D='"',TD=Symbol("out"),LD=Symbol("field"),DD=Symbol("quote"),RD=Symbol("quoteafterquote"),UD=Symbol("quoteinquote"),OD=class extends kD{async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){let e=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!e)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&e&&su.assert(e.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=e);let t=this.fullColumnNames.reduce((e,t)=>(e[t]=e[t]+1||1,e),{}),n=Object.keys(t).filter(e=>t[e]>1);if(su.assert(0===n.length,()=>"Duplicate column names found: "+n.toString()),this.columnConfigs)for(let r of Object.keys(this.columnConfigs))if(-1===this.fullColumnNames.indexOf(r))throw new Error('The key "'+r+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").");this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){let e=await(await this.base.iterator()).next();if(e.done)throw new Error("No data was found for CSV parsing.");let t=e.value;return this.parseRow(t,!1)}return null}constructor(e,t){super(),this.input=e,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new ED(e),t||(t={}),this.hasHeader=!1!==t.hasHeader,this.fullColumnNames=t.columnNames,this.columnConfigs=t.columnConfigs,this.configuredColumnsOnly=t.configuredColumnsOnly,t.delimWhitespace?(su.assert(null==t.delimiter,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=t.delimiter?t.delimiter:","}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map(e=>this.makeDataElement(e))}makeDataElement(e){let t=this.parseRow(e),n={},r={};for(let a=0;a<this.fullColumnNames.length;a++){let i=this.fullColumnNames[a],s=this.columnConfigs?this.columnConfigs[i]:null;if(!this.configuredColumnsOnly||s){let o=t[a],l=null;if(""===o)if(s&&void 0!==s.default)l=s.default;else{if(s&&(s.required||s.isLabel))throw new Error("Required column ".concat(i," is empty in this line: ").concat(e));l=void 0}else{let e=Number(o);if(isNaN(e))l=s&&"bool"===s.dtype?this.getBoolean(o):o;else if(s&&s.dtype)switch(s.dtype){case"float32":default:l=e;break;case"int32":l=Math.floor(e);break;case"bool":l=this.getBoolean(o)}else l=e}s&&s.isLabel?r[i]=l:n[i]=l}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}getBoolean(e){return"1"===e||"true"===e.toLowerCase()?1:0}parseRow(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r=0,a=e.length,i=TD;for(let s=0;s<a;s++)switch(i){case TD:switch(e.charAt(s)){case _D:r=s+1,i=DD;break;case this.delimiter:if(r=s+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),i=TD;break;default:i=LD,r=s}break;case LD:if(e.charAt(s)===this.delimiter)n.push(e.substring(r,s)),i=TD,r=s+1;break;case DD:if(e.charAt(s)===_D)i=RD;break;case RD:switch(e.charAt(s)){case this.delimiter:n.push(e.substring(r,s-1)),i=TD,r=s+1;break;case _D:i=DD;break;default:i=UD}break;case UD:if(e.charAt(s)===_D)i=DD}if(i===RD?n.push(e.substring(r,a-1)):n.push(e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have ".concat(this.fullColumnNames.length," elements in a row, but got ").concat(n));return n}},MD=class e extends oD{constructor(e){super(),this.microphoneConfig=e,this.isClosed=!1,this.fftSize=e.fftSize||1024;let t=Math.log2(this.fftSize);if(this.fftSize<0||t<4||t>14||!Number.isInteger(t))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ".concat(this.fftSize));if(this.numFrames=e.numFramesPerSpectrogram||43,this.sampleRateHz=e.sampleRateHz,this.columnTruncateLength=e.columnTruncateLength||this.fftSize,this.audioTrackConstraints=e.audioTrackConstraints,this.smoothingTimeConstant=e.smoothingTimeConstant||0,this.includeSpectrogram=!1!==e.includeSpectrogram,this.includeWaveform=!0===e.includeWaveform,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Cs().get("IS_BROWSER"))throw new Error("microphone API is only supported in browser environment.");let n=new e(t);return await n.start(),n}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})}catch(mt){throw new Error("Error thrown while initializing video stream: ".concat(mt.message))}if(!this.stream)throw new Error("Could not obtain audio from microphone.");let e=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new e,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error("Mismatch in sampling rate: Expected: ".concat(this.sampleRateHz,"; Actual: ").concat(this.audioContext.sampleRate))}else this.sampleRateHz=this.audioContext.sampleRate;let t=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,t.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let e,t,n=await this.getAudioData();if(this.includeSpectrogram){let t=this.flattenQueue(n.freqDataQueue);e=this.getTensorFromAudioDataArray(t,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){let e=this.flattenQueue(n.timeDataQueue);t=this.getTensorFromAudioDataArray(e,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:e,waveform:t},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){let e=[],t=[],n=0;return new Promise(r=>{let a=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&r({freqDataQueue:e,timeDataQueue:t}),e.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),t.push(this.timeData.slice())),++n===this.numFrames&&(clearInterval(a),r({freqDataQueue:e,timeDataQueue:t}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(e){let t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((e,r)=>n.set(e,r*t)),n}getTensorFromAudioDataArray(e,t){let n=new Float32Array(su.sizeFromShape(t));return n.set(e,n.length-e.length),NA(n,t)}},PD=class e extends oD{constructor(e,t){if(super(),this.webcamVideoElement=e,this.webcamConfig=t,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=yg([0],"int32"),this.webcamConfig.centerCrop){let e=1*this.webcamConfig.resizeWidth/this.webcamVideoElement.width,t=1*this.webcamConfig.resizeHeight/this.webcamVideoElement.height,n=(1-e)/2,r=(1-t)/2,a=n+e,i=t+r;this.cropBox=bg([r,n,i,a],[1,4])}else this.cropBox=bg([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Cs().get("IS_BROWSER"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!t){if(t=document.createElement("video"),!n.resizeWidth||!n.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");t.width=n.resizeWidth,t.height=n.resizeHeight}let r=new e(t,n);return await r.start(),r}async start(){this.webcamConfig.facingMode&&su.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,()=>"Invalid webcam facing mode: ".concat(this.webcamConfig.facingMode,". Please provide 'user' or 'environment'"));try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(x){throw x.message="Error thrown while initializing video stream: ".concat(x.message),x}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(x){console.log(x),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(e=>{this.webcamVideoElement.onloadedmetadata=()=>{e()}})}async next(){if(this.isClosed)return{value:null,done:!0};let e;try{e=qb.fromPixels(this.webcamVideoElement)}catch(pt){throw new Error("Error thrown converting video to pixels: ".concat(JSON.stringify(pt)))}if(!this.resize)return{value:e,done:!1};try{return{value:this.cropAndResizeFrame(e),done:!1}}catch(pt){throw new Error("Error thrown cropping the video: ".concat(pt.message))}finally{e.dispose()}}needToResize(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}cropAndResizeFrame(e){return PA(()=>{let t,n=Yp(Jd(e,"float32"),0);t=ab.cropAndResize(n,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");let r=t.shape;return _h(t,r.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(e=>e.stop());try{this.webcamVideoElement.srcObject=null}catch(x){console.log(x),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}},QD=class{},jD=class extends oD{split(e){return new HD(this,e)}},HD=class extends jD{constructor(e,t){super(),this.upstream=e,this.impl=new zD(e,t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}},zD=class extends yD{constructor(e,t){super(),this.upstream=e,this.separator=t,this.carryover=""}summary(){return"".concat(this.upstream.summary()," -> Split('").concat(this.separator,"')")}async pump(){let e=await this.upstream.next();if(e.done)return""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0);let t=e.value.split(this.separator);t[0]=this.carryover+t[0];for(let n of t.slice(0,-1))this.outputQueue.push(n);return this.carryover=t[t.length-1],!0}},WD=class extends oD{decodeUTF8(){return new VD(this)}},VD=class extends jD{constructor(e){super(),this.upstream=e,this.impl=new GD(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}},GD=class extends yD{constructor(e){if(super(),this.upstream=e,Cs().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{let{StringDecoder:e}=pi();this.decoder=new e("utf8")}}summary(){return"".concat(this.upstream.summary()," -> Utf8")}async pump(){let e,t,n=await this.upstream.next();return!n.done&&(e=n.value,t=Cs().get("IS_BROWSER")?this.decoder.decode(e,{stream:!0}):this.decoder.write(Buffer.from(e.buffer)),this.outputQueue.push(t),!0)}},KD=class extends WD{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.file=e,this.options=t,su.assert(e instanceof Uint8Array||!!Cs().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=t.offset||0,this.chunkSize=t.chunkSize||1048576}summary(){return"FileChunks ".concat(this.file)}async next(){return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?{value:null,done:!0}:{value:await new Promise((e,t)=>{let n=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,n)));else{let r=new FileReader;r.onload=n=>{let a=r.result;if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),!(a instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(a)},r.onabort=e=>t(new Error("Aborted")),r.onerror=e=>t(new Error(e.type));let a=this.file.slice(this.offset,n);r.readAsArrayBuffer(a)}this.offset=n}),done:!1}}};var qD=e=>({method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity});function XD(e){return"string"==typeof e&&"file://"===e.slice(0,7)}var JD=class extends QD{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.input=e,this.options=t}async iterator(){if(XD(this.input)&&Cs().get("IS_NODE")){let e=fi();this.input=e.readFileSync(this.input.slice(7))}return new KD(this.input,this.options)}},YD=class extends QD{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.url=e,this.fileOptions=t}async iterator(){return XD(this.url)?new JD(this.url,this.fileOptions).iterator():async function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;"string"==typeof e?t=e:(t=e.url,n=qD(e));let i=await(a||su.fetch)(t,n);if(i.ok){let e=new Uint8Array(await i.arrayBuffer());return new KD(e,r)}throw new Error(i.statusText)}(this.url,this.fileOptions)}};function ZD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new OD(new YD(e),t)}function $D(e){let t=iD(e);return BD(async()=>t)}function eR(e){return BD(async()=>{let t=await e();return iD(()=>t.next())})}async function tR(e,t){return PD.create(e,t)}async function nR(e){return MD.create(e)}var rR="4.22.0";function aR(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&su.assert("complex64"!==e.dtype,()=>"".concat(t," does not support complex64 tensors in the CPU backend."))})}var iR=Mv.whereImpl,sR=class e extends ki{nextDataId(){return e.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Ci(this,UA())}write(e,t,n){this.firstUse&&(this.firstUse=!1,Cs().get("IS_NODE")&&Tw.warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));let r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&su.isString(n[0])){let a=n.map(e=>su.encodeString(e));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){let{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){let e=this.readSync(n.real.dataId),t=this.readSync(n.imag.dataId);return Tw.mergeRealAndImagArrays(e,t)}return su.convertBackendValuesAndArrayBuffer(this.data.get(e).values,t)}bufferSync(e){let t=this.readSync(e.dataId);if("string"===e.dtype)try{let n=t.map(e=>su.decodeString(e));return Xd(e.shape,e.dtype,n)}catch(mt){throw new Error("Failed to decode encoded string bytes into utf-8")}return Xd(e.shape,e.dtype,t)}makeOutput(e,t,n){return UA().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;let{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){let t=su.now();return e(),{kernelMs:su.now()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){aR([e],"where");let t=this.readSync(e.dataId);return iR(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}};sR.nextDataId=0;var oR={};function lR(e){let t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}ei(oR,{addImpl:()=>CR,bincountImpl:()=>IR,bincountReduceImpl:()=>NR,bitwiseAndImpl:()=>FR,castImpl:()=>yR,ceilImpl:()=>RR,concatImpl:()=>MR,equalImpl:()=>PR,expImpl:()=>HR,expm1Impl:()=>VR,floorDivImpl:()=>YR,floorImpl:()=>qR,gatherNdImpl:()=>eU,gatherV2Impl:()=>tU,greaterEqualImpl:()=>iU,greaterImpl:()=>nU,lessEqualImpl:()=>AU,lessImpl:()=>lU,linSpaceImpl:()=>pU,logImpl:()=>fU,maxImpl:()=>yU,maximumImpl:()=>bU,minimumImpl:()=>xU,multiplyImpl:()=>BU,negImpl:()=>FU,notEqualImpl:()=>_U,prodImpl:()=>OU,raggedGatherImpl:()=>HU,raggedRangeImpl:()=>WU,raggedTensorToTensorImpl:()=>XU,rangeImpl:()=>JU,rsqrtImpl:()=>YU,scatterImpl:()=>eO,sigmoidImpl:()=>tO,simpleAbsImpl:()=>lR,sliceImpl:()=>aO,sparseFillEmptyRowsImpl:()=>oO,sparseReshapeImpl:()=>lO,sparseSegmentReductionImpl:()=>cO,sqrtImpl:()=>uO,squaredDifferenceImpl:()=>hO,staticRegexReplaceImpl:()=>mO,stridedSliceImpl:()=>bO,stringNGramsImpl:()=>vO,stringSplitImpl:()=>CO,stringToHashBucketFastImpl:()=>kO,subImpl:()=>BO,tileImpl:()=>FO,topKImpl:()=>TO,transposeImpl:()=>DU,uniqueImpl:()=>LO});var cR={kernelName:Ns,backendName:"cpu",kernelFunc:e=>{let{x:t}=e.inputs,n=e.backend;aR(t,"abs");let r=new Float32Array(su.sizeFromShape(t.shape));return r=lR(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}};function uR(e){return(t,n,r,a,i)=>{let s=Tw.assertAndGetBroadcastShape(t,n),o=s.length,l=su.computeStrides(s),c=su.sizeFromShape(s),u=su.getTypedArrayFromDType(i,c),A=t.length,d=n.length,h=su.computeStrides(t),p=su.computeStrides(n),f=Tw.getBroadcastDims(t,s),m=Tw.getBroadcastDims(n,s);if(f.length+m.length===0)for(let g=0;g<u.length;++g)u[g]=e(r[g%r.length],a[g%a.length]);else for(let g=0;g<u.length;++g){let t=su.indexToLoc(g,o,l),n=t.slice(-A);f.forEach(e=>n[e]=0);let i=su.locToIndex(n,A,h),s=t.slice(-d);m.forEach(e=>s[e]=0);let c=su.locToIndex(s,d,p);u[g]=e(r[i],a[c])}return[u,s]}}function AR(e){let{inputs:t,backend:n}=e,{real:r,imag:a}=t,i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,o=n.makeTensorInfo(r.shape,"complex64");return n.data.get(o.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",s)},o}var dR={kernelName:to,backendName:"cpu",kernelFunc:AR};function hR(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){return AR({inputs:{real:hR(e,t,"float32"),imag:hR(e,t,"float32")},backend:e})}let r=su.makeZerosTypedArray(su.sizeFromShape(t),n);return e.makeTensorInfo(t,n,r)}function pR(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var fR={kernelName:Vo,backendName:"cpu",kernelFunc:pR};function mR(e){let{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var gR={kernelName:zl,backendName:"cpu",kernelFunc:mR};function yR(e,t,n,r){if("int32"===r){return[t,"int32",Int32Array.from(e)]}if("bool"===r){let r=su.toTypedArray([0],n),[a,i]=uR((e,t)=>e!==t?1:0)(t,[],e,r,"bool");return[i,"bool",a]}throw new Error("Error in Cast: failed to cast ".concat(n," to ").concat(r))}function bR(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dtype:i}=r;if("complex64"===i){if("complex64"===a.dtype)return pR({inputs:{x:a},backend:n});let e=hR(n,a.shape,a.dtype),t=bR({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),r=AR({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===a.dtype){let e=mR({inputs:{input:a},backend:n}),t=bR({inputs:{x:e},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(e),t}if(!su.hasEncodingLoss(a.dtype,i)){let e=pR({inputs:{x:a},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:i}}let s=n.data.get(a.dataId).values,[o,l,c]=yR(s,a.shape,a.dtype,i);return n.makeTensorInfo(o,l,c)}var wR={kernelName:Zs,backendName:"cpu",kernelFunc:bR};function vR(e,t,n,r){return null==n?n=>{let{inputs:a,backend:i}=n,{a:s,b:o}=a,l=i;aR([s,o],e);let c=l.data.get(s.dataId).values,u=l.data.get(o.dataId).values,A="string"===s.dtype?Tw.fromUint8ToStringArray(c):c,d="string"===s.dtype?Tw.fromUint8ToStringArray(u):u,h=r||s.dtype,[p,f]=t(s.shape,o.shape,A,d,h);return l.makeTensorInfo(f,h,p)}:e=>{let{inputs:a,backend:i}=e,{a:s,b:o}=a,l=i;if("complex64"===s.dtype||"complex64"===o.dtype){let e=bR({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),t=l.data.get(e.dataId),r=t.complexTensorInfos.real,a=t.complexTensorInfos.imag,i=l.data.get(r.dataId).values,c=l.data.get(a.dataId).values,u=bR({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),A=l.data.get(u.dataId),d=A.complexTensorInfos.real,h=A.complexTensorInfos.imag,p=l.data.get(d.dataId).values,f=l.data.get(h.dataId).values,[m,g,y]=n(s.shape,o.shape,i,c,p,f),b=l.makeTensorInfo(y,"float32",m),w=l.makeTensorInfo(y,"float32",g),v=AR({inputs:{real:b,imag:w},backend:l});return l.disposeIntermediateTensorInfo(e),l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(b),l.disposeIntermediateTensorInfo(w),v}{let e=l.data.get(s.dataId).values,n=l.data.get(o.dataId).values,a=r||s.dtype,[i,c]=t(s.shape,o.shape,e,n,a);return l.makeTensorInfo(c,a,i)}}}function xR(e){return(t,n,r,a,i,s)=>{let o=Tw.assertAndGetBroadcastShape(t,n),l=su.sizeFromShape(o),c=o.length,u=su.computeStrides(o),A=su.getTypedArrayFromDType("float32",l),d=su.getTypedArrayFromDType("float32",l),h=Tw.getBroadcastDims(t,o),p=Tw.getBroadcastDims(n,o),f=Tw.mergeRealAndImagArrays(r,a),m=Tw.mergeRealAndImagArrays(i,s),g=t.length,y=su.computeStrides(t),b=n.length,w=su.computeStrides(n);if(h.length+p.length===0)for(let v=0;v<A.length;v++){let t=v%f.length,n=v%m.length,r=e(f[2*t],f[2*t+1],m[2*n],m[2*n+1]);A[v]=r.real,d[v]=r.imag}else for(let v=0;v<A.length;v++){let t=su.indexToLoc(v,c,u),n=t.slice(-g);h.forEach(e=>n[e]=0);let r=su.locToIndex(n,g,y),a=t.slice(-b);p.forEach(e=>a[e]=0);let i=su.locToIndex(a,b,w),s=e(f[2*r],f[2*r+1],m[2*i],m[2*i+1]);A[v]=s.real,d[v]=s.imag}return[A,d,o]}}var CR=uR((e,t)=>e+t),kR=xR((e,t,n,r)=>({real:e+n,imag:t+r})),BR=vR(_s,CR,kR),SR={kernelName:_s,backendName:"cpu",kernelFunc:BR};function IR(e,t,n,r,a){let i=su.sizeFromShape(r),s=su.makeZerosTypedArray(a,n);for(let o=0;o<e.length;o++){let n=e[o];if(n<0)throw new Error("Input x must be non-negative!");n>=a||(s[n]+=i>0?t[o]:1)}return s}function NR(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],s=Xd([a,n],t.dtype);for(let o=0;o<a;o++)for(let a=0;a<i;a++){let i=e.get(o,a);if(i<0)throw new Error("Input x must be non-negative!");i>=n||(r?s.set(1,o,i):t.size>0?s.set(s.get(o,i)+t.get(o,a),o,i):s.set(s.get(o,i)+1,o,i))}return s}var FR=uR((e,t)=>e&t),ER=vR(Xs,FR),_R={kernelName:Xs,backendName:"cpu",kernelFunc:ER};function TR(e){return(t,n,r)=>{let a=su.getArrayFromDType(n,t.length);for(let i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}function LR(e,t,n){return DR(e,TR(t),n)}function DR(e,t,n){return r=>{let{inputs:a,attrs:i,backend:s}=r,{x:o}=a;aR(o,e);let l,c=s,u=c.data.get(o.dataId).values;if("string"===o.dtype){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");l=Tw.fromUint8ToStringArray(u)}else l=u;let A=n||o.dtype,d=t(l,A,i);return c.makeTensorInfo(o.shape,A,d)}}var RR=TR(e=>Math.ceil(e)),UR=DR($s,RR),OR={kernelName:$s,backendName:"cpu",kernelFunc:UR};function MR(e,t,n,r){let a=su.getArrayFromDType(n,su.sizeFromShape(t));if(r&&"string"!==n){let t=0;e.forEach(e=>{let n=su.sizeFromShape(e.shape);a.set(e.vals,t),t+=n})}else{let r=0;e.forEach(e=>{let i="string"===n?Tw.fromUint8ToStringArray(e.vals):e.vals,s=0;for(let n=0;n<e.shape[0];++n){let o=n*t[1]+r;for(let t=0;t<e.shape[1];++t)a[o+t]=i[s++]}r+=e.shape[1]})}return a}var PR=uR((e,t)=>e===t?1:0),QR=vR(_o,PR,null,"bool"),jR={kernelName:_o,backendName:"cpu",kernelFunc:QR},HR=TR(e=>Math.exp(e)),zR=DR(To,HR,"float32"),WR={kernelName:To,backendName:"cpu",kernelFunc:zR},VR=TR(e=>Math.expm1(e)),GR=DR(Do,VR),KR={kernelName:Do,backendName:"cpu",kernelFunc:GR},qR=TR(e=>Math.floor(e)),XR=DR(Mo,qR),JR={kernelName:Mo,backendName:"cpu",kernelFunc:XR},YR=uR((e,t)=>Math.floor(e/t)),ZR=vR(Po,YR,null,"int32"),$R={kernelName:Po,backendName:"cpu",kernelFunc:ZR};function eU(e,t,n,r,a,i,s,o,l){let c=Xd([r,i],n);for(let u=0;u<r;u++){let n=[],r=0;for(let t=0;t<a;t++){let i=e[u*a+t];r+=i*s[t],n.push(i)}if(r<0||r>=l/i)throw new Error("Invalid indices: ".concat(n," does not index into ").concat(o));for(let e=0;e<i;e++)c.values[u*i+e]=t.get(...t.indexToLoc(r*i+e))}return c}function tU(e,t,n){let r=Xd(n,e.dtype);for(let a=0;a<r.size;++a){let n=r.indexToLoc(a).slice(),i=n[0],s=n[2],o=t.locToIndex([i,s]);n[2]=t.values[o];let l=e.locToIndex(n);0<=l&&l<e.values.length&&(r.values[a]=e.values[l])}return r}var nU=uR((e,t)=>e>t?1:0),rU=vR(zo,nU,null,"bool"),aU={kernelName:zo,backendName:"cpu",kernelFunc:rU},iU=uR((e,t)=>e>=t?1:0),sU=vR(Wo,iU,null,"bool"),oU={kernelName:Wo,backendName:"cpu",kernelFunc:sU},lU=uR((e,t)=>e<t?1:0),cU=vR(Zo,lU,null,"bool"),uU={kernelName:Zo,backendName:"cpu",kernelFunc:cU},AU=uR((e,t)=>e<=t?1:0),dU=vR($o,AU,null,"bool"),hU={kernelName:$o,backendName:"cpu",kernelFunc:dU};function pU(e,t,n){let r=(t-e)/(n-1),a=su.makeZerosTypedArray(n,"float32");a[0]=e;for(let i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var fU=TR(e=>Math.log(e)),mU=DR(tl,fU),gU={kernelName:tl,backendName:"cpu",kernelFunc:mU};function yU(e,t,n,r){let a=su.getTypedArrayFromDType(r,su.sizeFromShape(n));for(let i=0;i<a.length;++i){let n=i*t,r=e[n];for(let a=0;a<t;++a){let t=e[n+a];(Number.isNaN(t)||t>r)&&(r=t)}a[i]=r}return a}var bU=uR((e,t)=>Math.max(e,t)),wU=vR(hl,bU),vU={kernelName:hl,backendName:"cpu",kernelFunc:wU},xU=uR((e,t)=>Math.min(e,t)),CU=vR(vl,xU),kU={kernelName:vl,backendName:"cpu",kernelFunc:CU},BU=uR((e,t)=>e*t),SU=xR((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),IU=vR(Bl,BU,SU),NU={kernelName:Bl,backendName:"cpu",kernelFunc:IU};function FU(e,t,n){let r=su.createScalarValue(-1,n);return BU([],t,r,e,n)}var EU={kernelName:Sl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t;aR(r,"neg");let a=n.data.get(r.dataId).values,[i,s]=FU(a,r.shape,r.dtype);return n.makeTensorInfo(s,r.dtype,i)}},_U=uR((e,t)=>e!==t?1:0),TU=vR(Il,_U,null,"bool"),LU={kernelName:Il,backendName:"cpu",kernelFunc:TU};function DU(e,t,n,r,a){let i=t.length,s=su.sizeFromShape(t),o=su.computeStrides(t),l=su.computeStrides(a),c=su.getTypedArrayFromDType(n,su.sizeFromShape(a));for(let u=0;u<s;++u){let t=su.indexToLoc(u,i,o),n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t[r[e]];c[su.locToIndex(n,i,l)]=e[u]}return c}function RU(e){let{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{perm:i}=n;aR(a,"transpose");let s=a.shape.length,o=new Array(s);for(let c=0;c<o.length;c++)o[c]=a.shape[i[c]];let l=DU(r.data.get(a.dataId).values,a.shape,a.dtype,i,o);return{dataId:r.write(l,o,a.dtype),shape:o,dtype:a.dtype}}var UU={kernelName:Rc,backendName:"cpu",kernelFunc:RU};function OU(e,t,n,r){let[a,i]=Tw.computeOutAndReduceShapes(e,r),s=Zu(t,"int32"),o=su.makeZerosTypedArray(su.sizeFromShape(a),s),l=su.sizeFromShape(i);for(let c=0;c<o.length;++c){let e=c*l,t=1;for(let r=0;r<l;++r)t*=n[e+r];o[c]=t}return{outVals:o,outShape:a,outDtype:s}}var MU={kernelName:Ml,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;aR(a,"prod");let o=a.shape.length,l=su.parseAxisParam(i,a.shape),c=Tw.getAxesPermutation(l,o),u=l,A=a,d=[];null!=c&&(A=RU({inputs:{x:a},backend:n,attrs:{perm:c}}),d.push(A),u=Tw.getInnerMostAxes(u.length,o));let h=n.data.get(A.dataId).values,{outVals:p,outShape:f,outDtype:m}=OU(A.shape,A.dtype,h,u),g=f;return s&&(g=Tw.expandShapeToKeepDim(f,l)),d.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(g,m,p)}};function PU(e,t,n,r){let a=[],i=0,s=t.length-1+n.length,o=new Array(s).fill(null).map(()=>[0]);!function(e,t){for(let n=0;n<e.length;++n){let r=e[n],a=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>a)throw new Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let l=1;for(let c=0;c<t.length-1;++c){l*=t[c];let e=t[c+1];for(let t=1;t<l+1;++t)o[c].push(t*e)}for(let c=0;c<e.length;++c){let r=e[c],s=e[c]+1;for(let e=0;e<n.length;++e){let a=n[e],i=e+t.length-1;if(i>=0){let e=o[i],t=e[e.length-1]-a[r];for(let n=r;n<s;++n)o[i].push(a[n+1]+t)}r=a[r],s=a[s]}s!==r&&(a.push([r,s]),i+=s-r)}return{outSplits:o,valueSlices:a,numValues:i}}function QU(e,t){let n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function jU(e,t,n,r,a){let i=t.slice();i[0]=a;let s=su.getArrayFromDType(n,su.sizeFromShape(i)),o=e.length;return function(e,t,n,r,a,i){let s=QU(t,2)[1],o=QU(i,2)[1],l=0;for(let c of n)for(let t=c[0];t<c[1];++t){for(let n=0;n<r;++n)a[l*o+n]=e[t*s+n];++l}}(e,t,r,0===o?0:o/t[0],s,i),[s,i]}function HU(e,t,n,r,a,i,s,o){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach((e,r)=>{if(e<0||e>=n){let a=su.indexToLoc(r,t.length,su.computeStrides(t)).join(",");throw new Error("indices[".concat(a,"] = ").concat(e," is not in [0, ").concat(n,")"))}})}(i,s,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");let l=r[0],{outSplits:c,valueSlices:u,numValues:A}=PU(i,s,e,l),d=function(e){let t=[];for(let n=0;n<e.length;++n){let r=e[n].length,a=su.getArrayFromDType("int32",r);t.push(a),e[n].forEach((e,t)=>a[t]=e)}return t}(c),h=jU(n,r,a,u,A);return[d,h[0],h[1]]}var zU=2147483647;function WU(e,t,n,r,a,i,s){if(t.length>1)throw new Error("starts must be a scalar or vector");if(a.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");let o=0===t.length,l=0===a.length,c=0===s.length,u=[];o||u.push(t[0]),l||u.push(a[0]),c||u.push(s[0]);for(let m=1;m<u.length;++m)if(u[m]!==u[m-1])throw new Error("starts, limits, and deltas must have the same shape");let A=0===u.length?1:u[0],d=su.getArrayFromDType("int32",A+1);d[0]=0;for(let m=0;m<A;++m){let t,n=o?e[0]:e[m],a=l?r[0]:r[m],s=c?i[0]:i[m];if(0===s)throw new Error("Requires delta != 0");if(s>0&&a<n||s<0&&a>n)t=0;else if(t=Math.ceil(Math.abs((a-n)/s)),t>zU)throw new Error("Requires ((limit - start) / delta) <= ".concat(zU));d[m+1]=d[m]+t}let h=d[A],p=su.getArrayFromDType(n,h),f=0;for(let m=0;m<A;++m){let t=d[m+1]-d[m],n=o?e[0]:e[m],r=c?i[0]:i[m];for(let e=0;e<t;++e)p[f++]=n,n+=r}return[d,p]}var VU=Tw.RowPartitionType,GU=class e{constructor(e,t,n,r,a,i,s,o,l,c){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=a,this.defaultValue=i,this.defaultValueShape=s,this.rowPartitionValues=o,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=Tw.getRowPartitionTypesHelper(c),this.raggedRank=Tw.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===VU.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===VU.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(t){let n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case VU.VALUE_ROWIDS:return e.getMaxWidthValueRowID(n);case VU.ROW_SPLITS:return e.getMaxWidthRowSplit(n);default:throw new Error("Cannot handle partition type ".concat(VU[this.getRowPartitionTypeByDimension(t-1)]))}}static getMaxWidthRowSplit(e){let t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){let t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){let t=e.length;if(0===t)return 0;let n=0,r=e[0],a=0;for(let i=1;i<t;++i){let t=e[i];t!==r&&(r=t,a=Math.max(i-n,a),n=i)}return Math.max(t-n,a)}tensorShapeFromTensor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return qU(e,n)}calculateOutputSize(e){let t=this.valuesShape,n=this.defaultValueShape;Tw.validateDefaultValueShape(n,t);let r=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=Tw.combineRaggedTensorToTensorShapes(this.raggedRank,r,t);a[0]<0&&(a[0]=e);for(let i=1;i<=this.raggedRank;++i)a[i]<0&&(a[i]=this.getMaxWidth(i));return a}calculateFirstParentOutputIndex(e,t,n){let r=Math.min(e,n),a=[],i=0;for(let s=0;s<r;++s,i+=t)a.push(i);for(let s=r;s<e;++s)a.push(-1);return su.assert(a.length===e,()=>"Final length of result must be equal to firstDimension."),a}calculateOutputIndexRowSplit(e,t,n,r){let a=e.length,i=[];for(let s=0;s<a-1;++s){let a=e[s+1]-e[s],o=Math.min(r,a),l=t[s];-1===l&&(o=0);for(let e=0;e<o;++e)i.push(l),l+=n;for(let e=0;e<a-o;++e)i.push(-1)}if(a>0&&i.length!==e[a-1])throw new Error("Invalid row split size.");return i}calculateOutputIndexValueRowID(e,t,n,r){let a=e.length,i=[];if(0===a)return[];let s=0,o=e[0];if(o>=t.length)throw new Error("Got currentValueRowId=".concat(o,", which is not less than ").concat(t.length));let l=t[o];i.push(l);for(let c=1;c<a;++c){let a=e[c];if(a===o)l>=0&&(++s,s<r?l+=n:l=-1);else{if(s=0,o=a,a>=t.length)throw new Error("Got nextValueRowId=".concat(a," which is not less than ").concat(t.length));l=t[a]}i.push(l)}if(i.length!==e.length)throw new Error("Invalid row ids.");return i}calculateOutputIndex(e,t,n,r){let a=this.getRowPartitionTensor(e),i=this.getRowPartitionTypeByDimension(e);switch(i){case VU.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(a,t,n,r);case VU.ROW_SPLITS:if(a.length-1>t.length)throw new Error("Row partition size is greater than output size: ".concat(a.length-1," > ").concat(t.length));return this.calculateOutputIndexRowSplit(a,t,n,r);default:throw new Error("Unsupported partition type: ".concat(VU[i]))}}getFirstDimensionSize(){let e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");let t=this.rowPartitionTypes[0];switch(t){case VU.FIRST_DIM_SIZE:return e[0];case VU.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case VU.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type ".concat(VU[t]))}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let i=n.length-2;i>=0;--i)n[i]=n[i+1]*t[i+1];let r=qU(t,!1),a=su.getArrayFromDType(this.valuesDType,su.sizeFromShape(r));if(n[0]*t[0]>0){let i=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e)i=this.calculateOutputIndex(e-1,i,n[e],t[e]);this.setOutput(this.raggedRank,i,a,r)}return[r,a]}setOutput(e,t,n,r){if(0===n.length)return;let a=this.values,i=n,s=r.slice();s=s.slice(e+1);let o=su.sizeFromShape(s),l=t.length,c=this.defaultValue;if(c.length!==o&&1!==c.length){let e=this.defaultValueShape;PA(()=>{let t=_h(c,e);c=Xh(t,s).dataSync()})}let u=0,A=0,d=0;for(let h=0;h<=l;++h){let e=h<l?t[h]:-1;if(e!==d){if(A<d){let e=a.subarray(u*o);KU(i.subarray(A*o),e,(d-A)*o)}if(h>=l){let t=n.length;e=Math.floor(t/o)}if(e>d)if(1===this.defaultValue.length)i.subarray(d*o,e*o).fill(this.defaultValue[0]),d=e;else for(;e>d;){KU(i.slice(d*o),c,o),++d}e<0?(u=h+1,A=d):(u=h,A=d,d=A+1)}else++d}}};function KU(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function qU(e,t){let n=[];for(let r of e){if(r<0){if(!t)throw new Error("Dimension ".concat(r," must be >= 0"));if(r<-1)throw new Error("Dimension ".concat(r," must be >= -1"));r=-1}n.push(r)}return n}function XU(e,t,n,r,a,i,s,o,l,c){return new GU(e,t,n,r,a,i,s,o,l,c).compute()}function JU(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return su.makeZerosTypedArray(0,r);let a=Math.abs(Math.ceil((t-e)/n)),i=su.makeZerosTypedArray(a,r);t<e&&1===n&&(n=-1),i[0]=e;for(let s=1;s<i.length;s++)i[s]=i[s-1]+n;return i}var YU=TR(e=>1/Math.sqrt(e)),ZU=DR(ec,YU),$U={kernelName:ec,backendName:"cpu",kernelFunc:ZU};function eO(e,t,n,r,a,i,s,o,l,c){let u=[r/a,a],A=e.values,d=t.values;if(0===r)return Xd(n,t.dtype);let h=l instanceof Mu?l:Xd(u,t.dtype);"string"==typeof l||"number"==typeof l?h.values.fill(l):"boolean"==typeof l&&h.values.fill(+l);for(let p=0;p<i;p++){let e=[],i=0;for(let t=0;t<s;t++){let n=A[p*s+t];e.push(n),i+=n*o[t]}if(i<0||i>=r/a)throw new Error("Invalid indices: ".concat(e," does not index into ").concat(n));for(let n=0;n<a;n++)c?h.values[i*a+n]+=d[p*a+n]:h.values[i*a+n]=0===t.rank?d[0]:d[p*a+n]}return h}var tO=TR(e=>1/(1+Math.exp(-e))),nO=LR(uc,e=>1/(1+Math.exp(-e))),rO={kernelName:uc,backendName:"cpu",kernelFunc:nO};function aO(e,t,n,r,a){let i=sw.isSliceContinous(r,t,n),s=su.sizeFromShape(n),o=su.computeStrides(r);if(i){let n=sw.computeFlatOffset(t,o);return"string"===a?e.slice(n,n+s):e.subarray(n,n+s)}let l=Xd(r,a,"string"===a?Tw.fromUint8ToStringArray(e):e),c=Xd(n,a);for(let u=0;u<c.size;++u){let e=c.indexToLoc(u),n=e.map((e,n)=>e+t[n]);c.set(l.get(...n),...e)}return"string"===a?Tw.fromStringArrayToUint8(c.values):c.values}function iO(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,size:s}=r;aR(a,"slice");let[o,l]=sw.parseSliceParams(a,i,s);sw.assertParamsValid(a,o,l);let c=aO(n.data.get(a.dataId).values,o,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,c)}var sO={kernelName:sc,backendName:"cpu",kernelFunc:iO};function oO(e,t,n,r,a,i,s){let o=t[0],l=i[0],c=new Array(l),u=new Array(o),A=t[1];if(0===l){if(0!==o)throw new Error(Tw.getSparseFillEmptyRowsIndicesDenseShapeMismatch(o));return[su.getArrayFromDType(n,0),[0,A],su.getArrayFromDType(a,0),c,u]}let d=!0,h=0,p=new Array(l).fill(0);for(let m=0;m<o;++m){let t=e[m*A];if(t<0)throw new Error(Tw.getSparseFillEmptyRowsNegativeIndexErrorMessage(m,t));if(t>=l)throw new Error(Tw.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(m,t,l));++p[t],d=d&&t>=h,h=t}let f=!0;for(let m=0;m<l;++m){let e=0===p[m];c[m]=e,f=f&&!e,p[m]=Math.max(p[m],1),m>0&&(p[m]+=p[m-1])}if(f&&d){let t=e,n=r;for(let e=0;e<o;++e)u[e]=e;return[t,[o,A],n,c,u]}{let t=p[l-1],i=su.getArrayFromDType(n,t*A),d=su.getArrayFromDType(a,t),h=new Array(l).fill(0);for(let n=0;n<o;++n){let t=e[n*A],a=h[t],s=(0===t?0:p[t-1])+a;h[t]++;for(let r=0;r<A;++r)i[s*A+r]=e[n*A+r];d[s]=r[n],u[n]=s}for(let e=0;e<l;++e)if(0===h[e]){let t=0===e?0:p[e-1];i[t*A+0]=e;for(let e=1;e<A;++e)i[t*A+e]=0;d[t]=s}return[i,[t,A],d,c,u]}}function lO(e,t,n,r,a){let i=su.sizeFromShape(r),s=t[0],o=a.length,l=[],c=1,u=-1;for(let f=0;f<o;++f){let e=a[f];if(-1===e){if(-1!==u)throw new Error(Tw.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(u,f));u=f,l.push(1)}else{if(e<0)throw new Error(Tw.getSparseReshapeNegativeOutputDimErrorMessage(f,e));c*=e,l.push(e)}}if(-1!==u){if(c<=0)throw new Error(Tw.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let e=Math.trunc(i/c);if(c*e!==i)throw new Error(Tw.getSparseReshapeInputOutputMultipleErrorMessage(r,l));l[u]=e}if(su.sizeFromShape(l)!==i)throw new Error(Tw.getSparseReshapeInputOutputMismatchErrorMessage(r,l));let A=r.length,d=[];if(A>0){d[A-1]=1;for(let e=A-2;e>=0;--e)d[e]=d[e+1]*r[e+1]}let h=[];if(o>0){h[o-1]=1;for(let e=o-2;e>=0;--e)h[e]=h[e+1]*l[e+1]}let p=su.getArrayFromDType(n,s*o);for(let f=0;f<s;++f){let t=0;for(let n=0;n<A;++n)t+=e[f*A+n]*d[n];for(let e=0;e<o;++e)p[f*o+e]=Math.trunc(t/h[e]),t%=h[e]}return[p,[s,o],l]}function cO(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=r.length,l=[t[0],e.length/t[0]],c=l[1],u=o>0?a[o-1]+1:0;if(u<0)throw new Error(Tw.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let A=t.slice();A[0]=u;let d=A.reduce((e,t)=>e*t,1),h=su.getArrayFromDType(n,d);if(0===o)return u>0&&h.fill(s),[h,A];if(u<=0)throw new Error(Tw.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let p=0,f=1,m=0,g=a[p];for(;;){let t=0;if(f<o){if(t=a[f],g===t){++f;continue}if(g>=t)throw new Error(Tw.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(g<0||g>=u)throw new Error(Tw.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(g,u));g>m&&h.fill(s,m*c,g*c);for(let n=p;n<f;++n){let t=r[n];if(t<0||t>=l[0])throw new Error(Tw.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(n,r[n],l[0]));for(let n=0;n<c;n++)h[g*c+n]+=e[t*c+n]}if(i)for(let e=0;e<c;e++)h[g*c+e]/=f-p;if(p=f,++f,m=g+1,g=t,f>o)break}return m<u&&h.fill(s,m*c,u*c),[h,A]}var uO=TR(e=>Math.sqrt(e)),AO=LR(dc,e=>Math.sqrt(e)),dO={kernelName:dc,backendName:"cpu",kernelFunc:AO},hO=uR((e,t)=>{let n=e-t;return n*n}),pO=vR(xc,hO),fO={kernelName:xc,backendName:"cpu",kernelFunc:pO},mO=TR((e,t)=>{let{pattern:n,replaceGlobal:r,rewrite:a}=t;return e.replace(new RegExp(n,r?"g":""),a)}),gO=DR(kc,mO),yO={kernelName:kc,backendName:"cpu",kernelFunc:gO};function bO(e,t,n,r){let a=Xd(e,t.dtype);for(let i=0;i<a.size;i++){let e=a.indexToLoc(i),s=new Array(e.length);for(let t=0;t<s.length;t++)s[t]=e[t]*n[t]+r[t];a.set(t.get(...s),...e)}return a}var wO=class{constructor(e,t,n,r,a,i){this.separator=su.encodeString(e),this.nGramWidths=t,this.leftPad=su.encodeString(n),this.rightPad=su.encodeString(r),this.padWidth=a,this.preserveShort=i}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){let n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,a,i){for(let s=0;s<a;++s){let o=this.getPadWidth(i),l=Math.max(0,o-s),c=Math.max(0,o-(a-(s+1))),u=i-(l+c),A=t+(l>0?0:s-o),d=0;d+=l*this.leftPad.length;for(let t=0;t<u;++t)d+=e[A+t].length;d+=c*this.rightPad.length,d+=(l+c+u-1)*this.separator.length,n[r+s]=new Uint8Array(d);let h=n[r+s],p=0,f=e=>e.forEach(e=>h[p++]=e);for(let e=0;e<l;++e)f(this.leftPad),f(this.separator);for(let t=0;t<u-1;++t)f(e[A+t]),f(this.separator);if(u>0){f(e[A+u-1]);for(let e=0;e<c;++e)f(this.separator),f(this.rightPad)}else{for(let e=0;e<c-1;++e)f(this.rightPad),f(this.separator);f(this.rightPad)}}}compute(e,t){let n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error("First split value must be 0, got ".concat(e));for(let a=1;a<r;++a){let r=t[a]>=e;if(r=r&&t[a]<=n,!r)throw new Error("Invalid split value ".concat(t[a],", must be in [").concat(e,", ").concat(n,"]"));e=t[a]}if(e!==n)throw new Error("Last split value must be data size. Expected ".concat(n,", got ").concat(e))}let a=r-1,i=su.getArrayFromDType("int32",r);if(0===n||0===r){let e=new Array(n);for(let t=0;t<=a;++t)i[t]=0;return[e,i]}i[0]=0;for(let o=1;o<=a;++o){let e=t[o]-t[o-1],n=0;this.nGramWidths.forEach(t=>{n+=this.getNumNGrams(e,t)}),this.preserveShort&&e>0&&0===n&&(n=1),i[o]=i[o-1]+n}let s=new Array(i[a]);for(let o=0;o<a;++o){let n=t[o],r=i[o];if(this.nGramWidths.forEach(a=>{let i=t[o+1]-t[o],l=this.getNumNGrams(i,a);this.createNGrams(e,n,s,r,l,a),r+=l}),this.preserveShort&&r===i[o]){let a=t[o+1]-t[o];if(0===a)continue;let i=a+2*this.padWidth;this.createNGrams(e,n,s,r,1,i)}}return[s,i]}};function vO(e,t,n,r,a,i,s,o){return new wO(n,r,a,i,s,o).compute(e,t)}function xO(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){let a=t[0],i=e.indexOf(a);for(;-1!==i;){let t=e.subarray(0,i);(!n||0!==t.length)&&r.push(t),i=(e=e.subarray(i+1)).indexOf(a)}return void((!n||0!==e.length)&&r.push(e))}let a=0;for(let i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){let t=e.subarray(a,i);(!n||0!==t.length)&&r.push(t),a=i+1}}function CO(e,t,n){let r=e.length,a=[],i=0,s=0,o=new Array(r);for(let d=0;d<r;++d){let r=a.length;xO(e[d],t,n,a);let l=a.length-r;o[d]=l,i+=l,s=Math.max(s,l)}let l=su.getArrayFromDType("int32",2*i),c=new Array(i),u=[r,s],A=0;for(let d=0;d<r;++d)for(let e=0;e<o[d];++e)l[2*A]=d,l[2*A+1]=e,c[A]=a[A],++A;return[l,c,u]}function kO(e,t){let n=su.getArrayFromDType("int32",e.length);for(let r=0;r<e.length;++r)n[r]=su.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var BO=uR((e,t)=>e-t),SO=xR((e,t,n,r)=>({real:e-n,imag:t-r})),IO=vR(Fc,BO,SO),NO={kernelName:Fc,backendName:"cpu",kernelFunc:IO};function FO(e,t){let n=new Array(e.rank);for(let a=0;a<n.length;a++)n[a]=e.shape[a]*t[a];let r=Xd(n,e.dtype);for(let a=0;a<r.values.length;++a){let t=r.indexToLoc(a),n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=t[r]%e.shape[r];let i=e.locToIndex(n);r.values[a]=e.values[i]}return r}var EO=(e,t)=>{let n=t.value-e.value;return 0===n?e.index-t.index:n};function _O(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;for(;r>n;){if(r-n>600){let a=r-n+1,i=t-n+1,s=Math.log(a),o=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*o*(a-o)/a)*Math.sign(i-a/2);_O(e,t,Math.max(n,Math.floor(t-i*o/a+l)),Math.min(r,Math.floor(t+(a-i)*o/a+l)))}let a=e[t],i=n,s=r;for(su.swap(e,n,t),EO(e[r],a)>0&&su.swap(e,n,r);i<s;){for(su.swap(e,i,s),i++,s--;EO(e[i],a)<0;)i+=1;for(;EO(e[s],a)>0;)s-=1}0===EO(e[n],a)?su.swap(e,n,s):(s+=1,su.swap(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}}function TO(e,t,n,r,a){let i=t[t.length-1],[s,o]=[e.length/i,i],l=su.getTypedArrayFromDType(n,s*r),c=su.getTypedArrayFromDType("int32",s*r);for(let A=0;A<s;A++){let t=A*o,n=e.subarray(t,t+o),i=new Array(n.length);n.forEach((e,t)=>i[t]={value:e,index:t}),r<i.length&&(_O(i,r),i=i.slice(0,r)),a&&i.sort(EO);let s=A*r,u=l.subarray(s,s+r),d=c.subarray(s,s+r);for(let e=0;e<r;e++)u[e]=i[e].value,d[e]=i[e].index}let u=t.slice();return u[u.length-1]=r,[Xd(u,n,l),Xd(u,"int32",c)]}function LO(e,t,n,r){let a=su.parseAxisParam(t,n)[0],i=[1,n[0],1];for(let p=0;p<a;p++)i[0]*=n[p];i[1]=n[a];for(let p=a+1;p<n.length;p++)i[2]*=n[p];let s=new Map,o=new Int32Array(n[a]),l=new Mu(i,r,e),c=[],u=1===i[0]&&1===i[2];for(let p=0;p<n[a];p++){let t;if(u)t=e[p].toString();else{let e=[];for(let t=0;t<i[0];t++)for(let n=0;n<i[2];n++)e.push(l.get(t,p,n));t=e.join(",")}let n=s.get(t);if(null!=n)o[p]=n;else{let e=s.size;s.set(t,e),o[p]=e,c.push(p)}}let A=i.slice();A[1]=s.size;let d=new Mu(A,r);c.forEach((e,t)=>{for(let n=0;n<i[0];n++)for(let r=0;r<i[2];r++)d.set(l.get(n,e,r),n,t,r)});let h=n.slice();return h[a]=A[1],{outputValues:d.values,outputShape:h,indices:o}}var DO="4.22.0";XA("cpu",()=>new sR,1);var RO=LR(No,e=>e>=0?e:Math.exp(e)-1),UO={kernelName:No,backendName:"cpu",kernelFunc:RO};function OO(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:i}=r;aR([a],"leakyRelu");let s=su.sizeFromShape(a.shape),o=n.data.get(a.dataId).values,l=su.getTypedArrayFromDType("float32",s);for(let c=0;c<o.length;c++)l[c]=o[c]<0?i*o[c]:o[c];return n.makeTensorInfo(a.shape,"float32",l)}var MO={kernelName:Yo,backendName:"cpu",kernelFunc:OO},PO=uR((e,t)=>e<0?t*e:e);function QO(e){let{inputs:t,backend:n}=e,{x:r,alpha:a}=t;aR([r,a],"prelu");let i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,[o,l]=PO(r.shape,a.shape,i,s,"float32");return n.makeTensorInfo(l,"float32",o)}var jO={kernelName:Ol,backendName:"cpu",kernelFunc:QO},HO=LR(Vl,e=>Math.max(0,e)),zO={kernelName:Vl,backendName:"cpu",kernelFunc:HO},WO=LR(Yl,e=>Math.min(Math.max(0,e),6)),VO={kernelName:Yl,backendName:"cpu",kernelFunc:WO};function GO(e,t,n,r,a){if("linear"===n)return pR({inputs:{x:t},backend:e});if("relu"===n)return HO({inputs:{x:t},backend:e});if("elu"===n)return RO({inputs:{x:t},backend:e});if("relu6"===n)return WO({inputs:{x:t},backend:e});if("prelu"===n)return QO({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return OO({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return nO({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function KO(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:i}=r,s=su.sizeFromShape(a.shape),o=su.inferFromImplicitShape(i,s),l=su.sizeFromShape(o);su.assert(s===l,()=>"The new shape (".concat(o,") has ").concat(l," elements and the old shape (").concat(a.shape,") has ").concat(s," elements. The new shape and old shape must have the same number of elements.")),n.incRef(a.dataId);let c=n.data.get(a.dataId);if(null!=c.complexTensorInfos){let e=c.complexTensorInfos.real,t=c.complexTensorInfos.imag;e.shape=o,t.shape=o}return{dataId:a.dataId,shape:o,dtype:a.dtype}}var qO={kernelName:Gl,backendName:"cpu",kernelFunc:KO};function XO(e){let{inputs:t,backend:n,attrs:r}=e,{a:a,b:i}=t,{transposeA:s,transposeB:o}=r;aR([a,i],"matMul");let l=a.shape.length,c=i.shape.length,u=s?a.shape[l-2]:a.shape[l-1],A=o?i.shape[c-1]:i.shape[c-2],d=s?a.shape[l-1]:a.shape[l-2],h=o?i.shape[c-2]:i.shape[c-1],p=a.shape.slice(0,-2),f=i.shape.slice(0,-2),m=su.sizeFromShape(p),g=su.sizeFromShape(f),y=bp.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([d,h]);su.assert(u===A,()=>"Error in matMul: inner shapes (".concat(u,") and (").concat(A,") of Tensors with shapes ").concat(a.shape," and ").concat(i.shape," and transposeA=").concat(s," and transposeB=").concat(o," must match."));let b=o?[g,h,A]:[g,A,h],w=KO({inputs:{x:a},backend:n,attrs:{shape:s?[m,u,d]:[m,d,u]}}),v=KO({inputs:{x:i},backend:n,attrs:{shape:b}}),x=s?w.shape[1]:w.shape[2],C=s?w.shape[2]:w.shape[1],k=o?v.shape[1]:v.shape[2],B=Math.max(m,g),S=n.data.get(w.dataId).values,I=n.data.get(v.dataId).values,N=su.computeStrides(w.shape),F=su.computeStrides(v.shape),[E,_,T]=s?[N[0],1,N[1]]:[N[0],N[1],1],[L,D,R]=o?[1,F[1],F[0]]:[F[1],1,F[0]],U=C*k,O=Xd([B,C,k],w.dtype),M=O.values,P=n.blockSize;for(let Q=0;Q<B;Q++){let e=Q%m,t=Q%g;for(let n=0;n<C;n+=P){let r=Math.min(n+P,C);for(let a=0;a<k;a+=P){let i=Math.min(a+P,k);for(let s=0;s<x;s+=P){let o=Math.min(s+P,x);for(let l=n;l<r;l++)for(let n=a;n<i;n++){let r=0;for(let a=s;a<o;a++){r+=S[e*E+l*_+a*T]*I[a*L+n*D+t*R]}M[Q*U+(l*k+n)]+=r}}}}}return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(v),n.makeTensorInfo(y,O.dtype,O.values)}var JO={kernelName:Gs,backendName:"cpu",kernelFunc:XO};var YO={kernelName:Wc,backendName:"cpu",kernelFunc:function(e){let t,n,r,{inputs:a,backend:i,attrs:s}=e,{a:o,b:l,bias:c,preluActivationWeights:u}=a,{transposeA:A,transposeB:d,activation:h,leakyreluAlpha:p}=s,f=[];t=XO({inputs:{a:o,b:l},attrs:{transposeA:A,transposeB:d},backend:i}),c&&(n=BR({inputs:{a:t,b:c},backend:i}),f.push(t),t=n),h&&(r=GO(i,t,h,u,p),f.push(t),t=r);for(let m of f)i.disposeIntermediateTensorInfo(m);return t}},ZO=LR(Fs,e=>Math.acos(e)),$O={kernelName:Fs,backendName:"cpu",kernelFunc:ZO},eM=LR(Es,e=>Math.acosh(e)),tM={kernelName:Es,backendName:"cpu",kernelFunc:eM};var nM={kernelName:Ts,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,r=t;aR(t,"addN");let a=r.map(e=>n.data.get(e.dataId).values),i=Xd(r[0].shape,r[0].dtype),s=i.values;for(let o=0;o<r.length;o++){let e=a[o];for(let t=0;t<s.length;t++)s[t]+=e[t]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}};var rM={kernelName:Ls,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;aR(a,"all");let o=su.parseAxisParam(i,a.shape),l=o,c=Tw.getAxesPermutation(l,a.shape.length),u=a;null!=c&&(u=RU({inputs:{x:a},backend:n,attrs:{perm:c}}),l=Tw.getInnerMostAxes(l.length,a.shape.length)),Tw.assertAxesAreInnerMostDims("all",l,u.shape.length);let[A,d]=Tw.computeOutAndReduceShapes(u.shape,l),h=su.sizeFromShape(d),p=su.makeZerosTypedArray(su.sizeFromShape(A),u.dtype),f=n.data.get(u.dataId).values;for(let g=0;g<p.length;++g){let e=g*h,t=f[e];for(let n=0;n<h;++n){let r=f[e+n];t=t&&r}p[g]=t}null!=c&&n.disposeIntermediateTensorInfo(u);let m=n.makeTensorInfo(A,u.dtype,p);if(s){let e=KO({inputs:{x:m},backend:n,attrs:{shape:Tw.expandShapeToKeepDim(A,o)}});return n.disposeIntermediateTensorInfo(m),e}return m}};var aM={kernelName:Ds,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;aR(a,"any");let o=su.parseAxisParam(i,a.shape),l=o,c=Tw.getAxesPermutation(l,a.shape.length),u=a;null!=c&&(u=RU({inputs:{x:a},backend:n,attrs:{perm:c}}),l=Tw.getInnerMostAxes(l.length,a.shape.length)),Tw.assertAxesAreInnerMostDims("any",l,u.shape.length);let[A,d]=Tw.computeOutAndReduceShapes(u.shape,l),h=su.sizeFromShape(d),p=su.makeZerosTypedArray(su.sizeFromShape(A),u.dtype),f=n.data.get(u.dataId).values;for(let g=0;g<p.length;++g){let e=g*h,t=f[e];for(let n=0;n<h;++n){let r=f[e+n];t=t||r}p[g]=t}null!=c&&n.disposeIntermediateTensorInfo(u);let m=n.makeTensorInfo(A,u.dtype,p);if(s){let e=KO({inputs:{x:m},backend:n,attrs:{shape:Tw.expandShapeToKeepDim(A,o)}});return n.disposeIntermediateTensorInfo(m),e}return m}};var iM={kernelName:Rs,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r;aR(a,"argMax");let s=su.parseAxisParam(i,a.shape),o=Tw.getAxesPermutation(s,a.shape.length),l=a,c=[];null!=o&&(l=RU({inputs:{x:a},backend:n,attrs:{perm:o}}),c.push(l),s=Tw.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],Tw.assertAxesAreInnerMostDims("argMax",s,l.shape.length);let[u,A]=Tw.computeOutAndReduceShapes(l.shape,s),d=su.sizeFromShape(u),h=su.makeZerosTypedArray(d,"int32"),p=su.sizeFromShape(A),f=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){let e=m*p,t=f[e],n=0;for(let r=0;r<p;++r){let a=f[e+r];a>t&&(t=a,n=r)}h[m]=n}return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(u,"int32",h)}};var sM={kernelName:Us,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r;aR(a,"argMin");let s=su.parseAxisParam(i,a.shape),o=Tw.getAxesPermutation(s,a.shape.length),l=a,c=[];null!=o&&(l=RU({inputs:{x:a},backend:n,attrs:{perm:o}}),c.push(l),s=Tw.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],Tw.assertAxesAreInnerMostDims("argMin",s,l.shape.length);let[u,A]=Tw.computeOutAndReduceShapes(l.shape,s),d=su.sizeFromShape(u),h=su.makeZerosTypedArray(d,"int32"),p=su.sizeFromShape(A),f=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){let e=m*p,t=f[e],n=0;for(let r=0;r<p;++r){let a=f[e+r];a<t&&(t=a,n=r)}h[m]=n}return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(u,"int32",h)}},oM=LR(Os,e=>Math.asin(e)),lM={kernelName:Os,backendName:"cpu",kernelFunc:oM},cM=LR(Ms,e=>Math.asinh(e)),uM={kernelName:Ms,backendName:"cpu",kernelFunc:cM},AM=LR(Ps,e=>Math.atan(e)),dM={kernelName:Ps,backendName:"cpu",kernelFunc:AM},hM=uR((e,t)=>Math.atan2(e,t)),pM=vR(js,hM),fM={kernelName:js,backendName:"cpu",kernelFunc:pM},mM=LR(Qs,e=>Math.atanh(e)),gM={kernelName:Qs,backendName:"cpu",kernelFunc:mM};function yM(e,t,n,r,a,i){let s=a.strideHeight,o=a.strideWidth,l=a.dilationHeight,c=a.dilationWidth,u=a.effectiveFilterHeight,A=a.effectiveFilterWidth,d=a.padInfo.top,h=a.padInfo.left,p="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,f=Xd(a.outShape,n),m=f.values,g=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3];for(let w=0;w<a.batchSize;++w){let t=w*g,n=w*r[0];for(let f=0;f<a.inChannels;++f)for(let g=0;g<a.outHeight;++g){let w=g*s-d,v=Math.max(0,w),x=Math.min(a.inHeight,u+w),C=t+g*y;for(let t=0;t<a.outWidth;++t){let s=t*o-h,u=Math.max(0,s),d=Math.min(a.inWidth,A+s),g=p,y=0,w=0;for(let t=v;t<x;t+=l){let a=n+t*r[1];for(let t=u;t<d;t+=c){let n=e[a+t*r[2]+f];"max"===i&&n>g?g=n:"avg"===i&&(y+=n,w++)}if(isNaN(g))break}m[C+t*b+f]="avg"===i?y/w:g}}}return f}function bM(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=Xd(r.outShape,"int32"),o=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,A=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,f=Xd(t,n,e);for(let m=0;m<r.batchSize;++m)for(let e=0;e<r.inChannels;++e)for(let t=0;t<r.outHeight;++t){let n=t*o-h,g=n;for(;g<0;)g+=c;let y=Math.min(r.inHeight,A+n);for(let o=0;o<r.outWidth;++o){let A=o*l-p,h=A;for(;h<0;)h+=u;let b=Math.min(r.inWidth,d+A),w=Number.NEGATIVE_INFINITY,v=-1;for(let t=g;t<y;t+=c){let s=t-n;for(let n=h;n<b;n+=u){let o=n-A,l=f.get(m,t,n,e);l>w&&(w=l,v=a?i?((m*r.inHeight+t)*r.inWidth+n)*r.inChannels+e:(t*r.inWidth+n)*r.inChannels+e:s*d+o)}}s.set(v,m,t,o,e)}}return s}function wM(e,t,n,r,a,i){let s=a.strideDepth,o=a.strideHeight,l=a.strideWidth,c=a.dilationDepth,u=a.dilationHeight,A=a.dilationWidth,d=a.effectiveFilterDepth,h=a.effectiveFilterHeight,p=a.effectiveFilterWidth,f=a.padInfo.front,m=a.padInfo.top,g=a.padInfo.left,y="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=Xd(a.outShape,n),w=b.values,v=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],x=a.outShape[2]*a.outShape[3]*a.outShape[4],C=a.outShape[3]*a.outShape[4],k=a.outShape[4];for(let B=0;B<a.batchSize;++B){let t=B*v,n=B*r[0];for(let b=0;b<a.inChannels;++b)for(let v=0;v<a.outDepth;++v){let B=v*s-f,S=B;for(;S<0;)S+=c;let I=Math.min(a.inDepth,d+B),N=t+v*x;for(let t=0;t<a.outHeight;++t){let s=t*o-m,d=s;for(;d<0;)d+=u;let f=Math.min(a.inHeight,h+s),v=N+t*C;for(let t=0;t<a.outWidth;++t){let s=t*l-g,o=s;for(;o<0;)o+=A;let h=Math.min(a.inWidth,p+s),m=v+t*k,x=y,C=0,B=0;for(let t=S;t<I;t+=c){let a=n+t*r[1];for(let t=d;t<f;t+=u){let n=a+t*r[2];for(let t=o;t<h;t+=A){let a=e[n+t*r[3]+b];if("max"===i&&a>x?x=a:"avg"===i&&(C+=a,B++),isNaN(x))break}if(isNaN(x))break}if(isNaN(x))break}w[m+b]="avg"===i?C/Math.max(B,1):x}}}}return b}var vM={kernelName:Hs,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;aR(a,"avgPool");let{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r;su.assert(Tw.eitherStridesOrDilationsAreOne(s,1),()=>"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(1,"'"));let c,u=Tw.computePool2DInfo(a.shape,i,s,1,o,l);if(1===u.filterWidth&&1===u.filterHeight&&su.arraysEqual(u.inShape,u.outShape))c=pR({inputs:{x:a},backend:n});else{let e=n.data.get(a.dataId).values,t=su.computeStrides(a.shape),r=yM(e,a.shape,a.dtype,t,u,"avg");c=n.makeTensorInfo(u.outShape,a.dtype,r.values)}return c}};var xM={kernelName:Ws,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r;aR(a,"avgPool3d");let u=Tw.computePool3DInfo(a.shape,i,s,1,o,l,c),A=wM(n.data.get(a.dataId).values,a.shape,a.dtype,su.computeStrides(a.shape),u,"avg");return n.makeTensorInfo(A.shape,"float32",A.values)}};var CM={kernelName:Vs,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r;aR([a,i],"avgPool3DGrad");let u=Tw.computePool3DInfo(i.shape,s,o,1,l,c),A=u.strideDepth,d=u.strideHeight,h=u.strideWidth,p=u.filterDepth,f=u.filterHeight,m=u.filterWidth,g=u.dilationDepth,y=u.dilationHeight,b=u.dilationWidth,w=u.effectiveFilterDepth,v=u.effectiveFilterHeight,x=u.effectiveFilterWidth,C=w-1-u.padInfo.front,k=x-1-u.padInfo.left,B=v-1-u.padInfo.top,S=Xd(i.shape,"float32"),I=1/(p*f*m),N=n.bufferSync(a);for(let F=0;F<u.batchSize;++F)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let r=0;r<u.inWidth;++r){let a=t-C,i=n-B,s=r-k,o=0;for(let t=0;t<w;t+=g){let n=(a+t)/A;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let t=0;t<v;t+=y){let r=(i+t)/d;if(!(r<0||r>=u.outHeight||Math.floor(r)!==r))for(let t=0;t<x;t+=b){let a=(s+t)/h;a<0||a>=u.outWidth||Math.floor(a)!==a||(o+=N.get(F,n,r,a,e))}}}S.set(o*I,F,t,n,r,e)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};var kM={kernelName:zs,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,s=i;aR([a,i],"avgPoolGrad");let{filterSize:o,strides:l,pad:c}=r,u=Tw.computePool2DInfo(s.shape,o,l,1,c),A=u.strideHeight,d=u.strideWidth,h=u.filterHeight,p=u.filterWidth,f=u.dilationHeight,m=u.dilationWidth,g=u.effectiveFilterHeight,y=u.effectiveFilterWidth,b=y-1-u.padInfo.left,w=g-1-u.padInfo.top,v=Xd(s.shape,"float32"),x=1/(h*p),C=n.data.get(a.dataId).values,k=Xd(a.shape,"float32",C);for(let B=0;B<u.batchSize;++B)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inHeight;++t)for(let n=0;n<u.inWidth;++n){let r=t-w,a=n-b,i=0;for(let t=0;t<g;t+=f){let n=(r+t)/A;if(!(n<0||n>=u.outHeight||Math.floor(n)!==n))for(let t=0;t<y;t+=m){let r=(a+t)/d;r<0||r>=u.outWidth||Math.floor(r)!==r||(i+=k.get(B,n,r,e))}}v.set(i*x,B,t,n,e)}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var BM={kernelName:Qo,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,scale:i,offset:s,mean:o,variance:l}=t;su.assert(o.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),su.assert(null==s||o.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),su.assert(null==i||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),aR([a,o,l,i,s],"batchNorm");let{varianceEpsilon:c}=r;null==c&&(c=.001);let u=n.data.get(a.dataId).values,A=n.data.get(o.dataId).values,d=n.data.get(l.dataId).values,h=i?n.data.get(i.dataId).values:new Float32Array([1]),p=s?n.data.get(s.dataId).values:new Float32Array([0]),f=new Float32Array(u.length),m=p.length,g=h.length,y=d.length,b=A.length,w=0,v=0,x=0,C=0;for(let k=0;k<u.length;++k)f[k]=p[w++]+(u[k]-A[v++])*h[x++]/Math.sqrt(d[C++]+c),w>=m&&(w=0),v>=b&&(v=0),x>=g&&(x=0),C>=y&&(C=0);return n.makeTensorInfo(a.shape,a.dtype,f)}};var SM={kernelName:Ks,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,crops:s}=r;aR([a],"batchToSpaceND");let o=i.reduce((e,t)=>e*t),l=Tw.getReshaped(a.shape,i,o),c=Tw.getPermuted(l.length,i.length),u=Tw.getReshapedPermuted(a.shape,i,o),A=Tw.getSliceBeginCoords(s,i.length),d=Tw.getSliceSize(u,s,i.length),h=KO({inputs:{x:a},backend:n,attrs:{shape:l}}),p=RU({inputs:{x:h},backend:n,attrs:{perm:c}}),f=KO({inputs:{x:p},backend:n,attrs:{shape:u}}),m=iO({inputs:{x:f},backend:n,attrs:{begin:A,size:d}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}};var IM={kernelName:qs,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:s}=r,o=IR(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,o)}};var NM={kernelName:Ys,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{s0:r,s1:a}=t,i=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,o=Tw.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}},FM=LR(eo,(e,t)=>{let n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),EM={kernelName:eo,backendName:"cpu",kernelFunc:FM},_M={kernelName:no,backendName:"cpu",kernelFunc:e=>{let{x:t}=e.inputs,n=e.backend,r=new Float32Array(su.sizeFromShape(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,s=a.complexTensorInfos.imag,o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values;for(let c=0;c<o.length;c++){let e=o[c],t=l[c];r[c]=Math.hypot(e,t)}return n.makeOutput(r,t.shape,"float32")}};function TM(e){let{inputs:t,backend:n}=e,{input:r}=t,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var LM={kernelName:Ko,backendName:"cpu",kernelFunc:TM};function DM(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,i=su.parseAxisParam(a,t[0].shape)[0],s=t.map(e=>e.shape);Tw.assertParamsConsistent(s,i);let o=Tw.computeOutShape(t.map(e=>e.shape),i);if(0===su.sizeFromShape(o))return n.makeTensorInfo(o,t[0].dtype,[]);let l=t.filter(e=>su.sizeFromShape(e.shape)>0);if(1===l.length)return pR({inputs:{x:l[0]},backend:n});if("complex64"===l[0].dtype){let e=l.map(e=>mR({inputs:{input:e},backend:n})),t=l.map(e=>TM({inputs:{input:e},backend:n})),r=DM({inputs:e,backend:n,attrs:{axis:i}}),a=DM({inputs:t,backend:n,attrs:{axis:i}}),s=AR({inputs:{real:r,imag:a},backend:n});return e.forEach(e=>n.disposeIntermediateTensorInfo(e)),t.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a),s}let c=l.map(e=>{let t=[-1,su.sizeFromShape(e.shape.slice(i))];return KO({inputs:{x:e},backend:n,attrs:{shape:t}})}),u=c.map(e=>({vals:n.data.get(e.dataId).values,shape:e.shape}));o=Tw.computeOutShape(c.map(e=>e.shape),1);let A=1===c[0].shape[0],d=MR(u,o,t[0].dtype,A),h=Tw.computeOutShape(l.map(e=>e.shape),i),p=n.makeTensorInfo(h,t[0].dtype,d);return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),p}var RM={kernelName:ro,backendName:"cpu",kernelFunc:DM};function UM(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dataFormat:l,dilations:c,dimRoundingMode:u}=r;aR([a,i],"conv2d");let A=Tw.convertConv2DDataFormat(l),d=Tw.computeConv2DInfo(a.shape,i.shape,s,c,o,u,!1,A),h=d.filterHeight,p=d.filterWidth,f=d.dilationHeight,m=d.dilationWidth,g=d.padInfo.left,y=d.padInfo.top,b="channelsLast"===d.dataFormat,w=new Mu(d.outShape,a.dtype),v=su.computeStrides(a.shape),x=su.computeStrides(i.shape),C=v[0],k=b?v[1]:v[2],B=b?v[2]:1,S=b?1:v[1],I=w.strides[0],N=b?w.strides[1]:w.strides[2],F=b?w.strides[2]:1,E=b?1:w.strides[1],_=n.data.get(a.dataId).values,T=n.data.get(i.dataId).values,L=w.values;for(let D=0;D<d.batchSize;++D){let e=D*C,t=D*I;for(let n=0;n<d.outHeight;++n){let r=t+n*N,a=n*d.strideHeight-y;for(let t=0;t<h;++t){let n=a+t*f;if(n<0||n>=d.inHeight)continue;let i=t*x[0],s=e+n*k;for(let e=0;e<d.outWidth;++e){let t=r+e*F,n=e*d.strideWidth-g;for(let e=0;e<p;++e){let r=n+e*m;if(r<0||r>=d.inWidth)continue;let a=s+r*B,o=i+e*x[1];for(let e=0;e<d.inChannels;++e){let n=_[a+e*S];for(let e=0;e<d.outChannels;++e)L[t+e*E]+=n*T[o+e];o+=d.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,L)}var OM={kernelName:ao,backendName:"cpu",kernelFunc:UM};var MM={kernelName:io,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;aR([a,i],"conv2dBackpropFilter");let A=Tw.convertConv2DDataFormat(l),d=Tw.computeConv2DInfo(a.shape,u,s,1,o,c,!1,A),{strideHeight:h,strideWidth:p,filterHeight:f,filterWidth:m}=d,g="channelsLast"===d.dataFormat,y=new Mu(d.filterShape,"float32"),b=d.padInfo.left,w=d.padInfo.top,v=n.data.get(a.dataId).values,x=n.data.get(i.dataId).values,C=new Mu(a.shape,a.dtype,v),k=new Mu(i.shape,i.dtype,x);for(let B=0;B<f;++B){let e=Math.max(0,Math.ceil((w-B)/h)),t=Math.min(d.outHeight,(d.inHeight+w-B)/h);for(let n=0;n<m;++n){let r=Math.max(0,Math.ceil((b-n)/p)),a=Math.min(d.outWidth,(d.inWidth+b-n)/p);for(let i=0;i<d.inChannels;++i)for(let s=0;s<d.outChannels;++s){let o=0;for(let l=0;l<d.batchSize;++l)for(let c=e;c<t;++c){let e=B+c*h-w;for(let t=r;t<a;++t){let r=n+t*p-b;o+=g?C.get(l,e,r,i)*k.get(l,c,t,s):C.get(l,i,e,r)*k.get(l,s,c,t)}}y.set(o,B,n,i,s)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var PM={kernelName:so,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{inputShape:s,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r;aR([a,i],"conv2dBackpropInput");let A=su.computeStrides(i.shape),d=su.computeStrides(a.shape),h=Tw.convertConv2DDataFormat(c),p=Tw.computeConv2DInfo(s,i.shape,o,1,l,u,!1,h),f=new Mu(p.inShape,"float32"),m=f.values,g=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,[b,w,v]=A,{batchSize:x,filterHeight:C,filterWidth:k,inChannels:B,inHeight:S,inWidth:I,outChannels:N,outHeight:F,outWidth:E,strideHeight:_,strideWidth:T}=p;h=p.dataFormat;let L=C-1-p.padInfo.top,D=k-1-p.padInfo.left,R="channelsLast"===h,U=f.strides[0],O=R?f.strides[1]:f.strides[2],M=R?f.strides[2]:1,P=R?1:f.strides[1],Q=d[0],j=R?d[1]:d[2],H=R?d[2]:1,z=R?1:d[1];for(let W=0;W<x;++W)for(let e=0;e<B;++e)for(let t=0;t<S;++t){let n=t-L,r=Math.max(0,Math.ceil(n/_)),a=Math.min(F,(C+n)/_);for(let i=0;i<I;++i){let s=i-D,o=Math.max(0,Math.ceil(s/T)),l=Math.min(E,(k+s)/T),c=0;for(let t=r;t<a;++t){let r=t*_-n;for(let n=o;n<l;++n){let a=Q*W+j*t+H*n,i=b*(C-1-r)+w*(k-1-(n*T-s))+v*e;for(let e=0;e<N;++e){c+=g[a+z*e]*y[i+e]}}}m[U*W+O*t+M*i+P*e]=c}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};var QM={kernelName:oo,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r;aR([a,i],"conv3d");let c=Tw.computeConv3DInfo(a.shape,i.shape,s,l,o),{filterDepth:u,filterHeight:A,filterWidth:d,dilationDepth:h,dilationHeight:p,dilationWidth:f,padInfo:m}=c,g=m.front,y=m.left,b=m.top,w=new Mu(c.outShape,a.dtype),v=n.data.get(a.dataId).values,x=n.data.get(i.dataId).values,C=w.values,k=su.computeStrides(a.shape),B=su.computeStrides(i.shape);for(let S=0;S<c.batchSize;++S){let e=S*k[0],t=S*w.strides[0];for(let n=0;n<c.outDepth;++n){let r=t+n*w.strides[1],a=n*c.strideDepth-g;for(let t=0;t<u;++t){let n=a+t*h;if(n<0||n>=c.inDepth)continue;let i=t*B[0],s=e+n*k[1];for(let e=0;e<c.outHeight;++e){let t=r+e*w.strides[2],n=e*c.strideHeight-b;for(let e=0;e<A;++e){let r=n+e*p;if(r<0||r>=c.inHeight)continue;let a=i+e*B[1],o=s+r*k[2];for(let e=0;e<c.outWidth;++e){let n=t+e*c.outChannels,r=e*c.strideWidth-y;for(let e=0;e<d;++e){let t=r+e*f;if(t<0||t>=c.inWidth)continue;let i=a+e*B[2],s=o+t*c.inChannels,l=i;for(let e=0;e<c.inChannels;++e){let t=v[s+e];for(let e=0;e<c.outChannels;++e)C[n+e]+=t*x[l+e];l+=c.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var jM={kernelName:lo,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,filterShape:l}=r;aR([a,i],"conv3dBackpropFilterV2");let c=su.computeStrides(a.shape),u=su.computeStrides(i.shape),A=Tw.computeConv3DInfo(a.shape,l,s,1,o),d=A.strideDepth,h=A.strideHeight,p=A.strideWidth,f=A.filterDepth,m=A.filterHeight,g=A.filterWidth,y=new Mu(A.filterShape,"float32"),b=y.values,[w,v,x,C]=y.strides,k=n.data.get(i.dataId).values,[B,S,I,N]=u,F=n.data.get(a.dataId).values,[E,_,T,L]=c,D=A.padInfo.front,R=A.padInfo.left,U=A.padInfo.top;for(let O=0;O<f;++O){let e=Math.max(0,Math.ceil((D-O)/d)),t=Math.min(A.outDepth,(A.inDepth+D-O)/d),n=O*w;for(let r=0;r<m;++r){let a=Math.max(0,Math.ceil((U-r)/h)),i=Math.min(A.outHeight,(A.inHeight+U-r)/h),s=r*v+n;for(let n=0;n<g;++n){let o=Math.max(0,Math.ceil((R-n)/p)),l=Math.min(A.outWidth,(A.inWidth+R-n)/p),c=n*x+s;for(let s=0;s<A.inChannels;++s){let u=s*C+c;for(let c=0;c<A.outChannels;++c){let f=0;for(let u=0;u<A.batchSize;++u){let A=u*E,m=u*B;for(let u=e;u<t;++u){let e=(O+u*d-D)*_+A,t=u*S+m;for(let u=a;u<i;++u){let a=(r+u*h-U)*T+e,i=u*I+t;for(let e=o;e<l;++e){let t=e*N+i;f+=F[(n+e*p-R)*L+a+s]*k[t+c]}}}}b[u+c]=f}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var HM={kernelName:co,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{pad:s,strides:o,inputShape:l}=r;aR([a],"conv3dBackpropInputV2");let c=su.computeStrides(a.shape),u=su.computeStrides(i.shape),A=Tw.computeConv3DInfo(l,i.shape,o,1,s),d=new Mu(A.inShape,"float32"),h=d.values,[p,f,m,g]=d.strides,y=n.data.get(a.dataId).values,[b,w,v,x]=c,C=n.data.get(i.dataId).values,[k,B,S,I]=u,{batchSize:N,filterDepth:F,filterHeight:E,filterWidth:_,inChannels:T,inDepth:L,inHeight:D,inWidth:R,outChannels:U,outDepth:O,outHeight:M,outWidth:P,strideDepth:Q,strideHeight:j,strideWidth:H}=A,z=F-1-A.padInfo.front,W=E-1-A.padInfo.top,V=_-1-A.padInfo.left;for(let G=0;G<N;++G)for(let e=0;e<T;++e)for(let t=0;t<L;++t){let n=t-z,r=Math.max(0,Math.ceil(n/Q)),a=Math.min(O,(F+n)/Q);for(let i=0;i<D;++i){let s=i-W,o=Math.max(0,Math.ceil(s/j)),l=Math.min(M,(E+s)/j);for(let c=0;c<R;++c){let u=c-V,A=Math.max(0,Math.ceil(u/H)),d=Math.min(P,(_+u)/H),N=0;for(let t=r;t<a;++t){let r=t*Q-n;for(let n=o;n<l;++n){let a=n*j-s;for(let i=A;i<d;++i){let s=b*G+w*t+v*n+x*i,o=k*(F-1-r)+B*(E-1-a)+S*(_-1-(i*H-u))+I*e;for(let e=0;e<U;++e){N+=y[s+e]*C[o+e]}}}}h[p*G+f*t+m*i+g*c+e]=N}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},zM=LR(uo,e=>Math.cos(e)),WM={kernelName:uo,backendName:"cpu",kernelFunc:zM},VM=LR(Ao,e=>Math.cosh(e)),GM={kernelName:Ao,backendName:"cpu",kernelFunc:VM};var KM={kernelName:fo,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:i,boxInd:s}=t,{cropSize:o,method:l,extrapolationValue:c}=r,[u,A,d,h]=a.shape,p=i.shape[0],[f,m]=o,g=Xd([p,f,m,h],"float32"),y=n.data.get(i.dataId).values,b=n.data.get(s.dataId).values,w=n.data.get(a.dataId).values,v=su.computeStrides(a.shape),x=su.computeStrides(g.shape);for(let C=0;C<p;C++){let e=4*C,t=y[e],n=y[e+1],r=y[e+2],a=y[e+3],i=b[C];if(i>=u)continue;let s=f>1?(r-t)*(A-1)/(f-1):0,o=m>1?(a-n)*(d-1)/(m-1):0;for(let u=0;u<f;u++){let e=f>1?t*(A-1)+u*s:.5*(t+r)*(A-1);if(e<0||e>A-1)for(let t=0;t<m;t++)for(let e=0;e<h;e++){let n=e+t*x[2]+u*x[1]+C*x[0];g.values[n]=c}else if("bilinear"===l){let t=Math.floor(e),r=Math.ceil(e),s=e-t;for(let e=0;e<m;e++){let l=m>1?n*(d-1)+e*o:.5*(n+a)*(d-1);if(l<0||l>d-1){for(let t=0;t<h;t++){let n=t+e*x[2]+u*x[1]+C*x[0];g.values[n]=c}continue}let A=Math.floor(l),p=Math.ceil(l),f=l-A;for(let n=0;n<h;n++){let a=n+A*v[2]+t*v[1]+i*v[0],o=w[a];a=n+p*v[2]+t*v[1]+i*v[0];let l=w[a];a=n+A*v[2]+r*v[1]+i*v[0];let c=w[a];a=n+p*v[2]+r*v[1]+i*v[0];let d=o+(l-o)*f,h=c+(w[a]-c)*f;a=n+e*x[2]+u*x[1]+C*x[0],g.values[a]=d+(h-d)*s}}}else for(let t=0;t<m;++t){let r=m>1?n*(d-1)+t*o:.5*(n+a)*(d-1);if(r<0||r>d-1){for(let e=0;e<h;e++){let n=e+t*x[2]+u*x[1]+C*x[0];g.values[n]=c}continue}let s=Math.round(r),l=Math.round(e);for(let e=0;e<h;e++){let n=e+s*v[2]+l*v[1]+i*v[0],r=e+t*x[2]+u*x[1]+C*x[0];g.values[r]=w[n]}}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var qM={kernelName:ho,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r;aR(a,"cumprod");let l=Tw.getAxesPermutation([i],a.shape.length),c=a;null!=l&&(c=RU({inputs:{x:a},backend:n,attrs:{perm:l}}));let u=Tw.getInnerMostAxes(1,a.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most axis=".concat(c.shape.length-1," but got axis=").concat(u));let A=Zu(c.dtype,"int32"),d=su.makeOnesTypedArray(su.sizeFromShape(c.shape),A),h=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],f=o?(e,t)=>e+p-t-1:(e,t)=>e+t;for(let g=0;g<h.length;g+=p)for(let e=0;e<p;e++){let t=f(g,e);if(0===e)d[t]=s?1:h[t];else{let n=f(g,e-1);d[t]=s?h[n]*d[n]:h[t]*d[n]}}let m=n.makeTensorInfo(c.shape,A,d);if(null!=l){let e=RU({inputs:{x:m},backend:n,attrs:{perm:Tw.getUndoAxesPermutation(l)}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(c),e}return m}};var XM={kernelName:po,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r;aR(a,"cumsum");let l=Tw.getAxesPermutation([i],a.shape.length),c=a;null!=l&&(c=RU({inputs:{x:a},backend:n,attrs:{perm:l}}));let u=Tw.getInnerMostAxes(1,a.shape.length)[0];if(u!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most axis=".concat(c.shape.length-1," but got axis=").concat(u));let A=Zu(c.dtype,"int32"),d=su.makeZerosTypedArray(su.sizeFromShape(c.shape),A),h=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],f=o?(e,t)=>e+p-t-1:(e,t)=>e+t;for(let g=0;g<h.length;g+=p)for(let e=0;e<p;e++){let t=f(g,e);if(0===e)d[t]=s?0:h[t];else{let n=f(g,e-1);d[t]=s?h[n]+d[n]:h[t]+d[n]}}let m=n.makeTensorInfo(c.shape,A,d);if(null!=l){let e=RU({inputs:{x:m},backend:n,attrs:{perm:Tw.getUndoAxesPermutation(l)}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(c),e}return m}};var JM={kernelName:mo,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:s,binaryOutput:o}=r;if(1===a.shape.length){let e=IR(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,e)}if(2===a.shape.length){let e=NR(n.bufferSync(a),n.bufferSync(i),s,o);return n.makeTensorInfo(e.shape,i.dtype,e.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}};var YM={kernelName:go,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:i,dataFormat:s}=r;su.assert("NHWC"===s,()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(s));let o=a.shape[0],l=a.shape[1],c=a.shape[2],u=a.shape[3],A=l*i,d=c*i,h=u/(i*i),p=n.data.get(a.dataId).values,f=new Float32Array(o*A*d*h),m=0;for(let g=0;g<o;++g)for(let e=0;e<A;++e){let t=Math.floor(e/i),n=e%i;for(let e=0;e<d;++e){let r=Math.floor(e/i),a=(n*i+e%i)*h;for(let e=0;e<h;++e){let n=e+a+u*(r+c*(t+l*g));f[m++]=p[n]}}}return n.makeTensorInfo([o,A,d,h],a.dtype,f)}};function ZM(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l,dimRoundingMode:c}=r;aR([a,i],"depthwiseConv2DNative");let u=su.computeStrides(a.shape),A=su.computeStrides(i.shape),d=l;null==d&&(d=[1,1]),su.assert(Tw.eitherStridesOrDilationsAreOne(s,d),()=>"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(d,"'"));let h=Tw.computeConv2DInfo(a.shape,i.shape,s,d,o,c,!0),{filterHeight:p,filterWidth:f,dilationHeight:m,dilationWidth:g,padInfo:y}=h,b=y.left,w=y.top,v=h.outChannels/h.inChannels,x=new Mu(h.outShape,a.dtype),C=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,B=x.values;for(let S=0;S<h.batchSize;++S){let e=S*u[0],t=S*x.strides[0];for(let n=0;n<h.outHeight;++n){let r=t+n*x.strides[1],a=n*h.strideHeight-w;for(let t=0;t<p;++t){let n=a+t*m;if(n<0||n>=h.inHeight)continue;let i=t*A[0],s=e+n*u[1];for(let e=0;e<h.outWidth;++e){let t=r+e*x.strides[2],n=e*h.strideWidth-b;for(let e=0;e<f;++e){let r=n+e*g;if(r<0||r>=h.inWidth)continue;let a=i+e*A[1],o=s+r*h.inChannels,l=t,c=a;for(let e=0;e<h.inChannels;++e){let t=C[o+e];for(let e=0;e<v;++e)B[l+e]+=t*k[c+e];l+=v,c+=v}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}var $M={kernelName:yo,backendName:"cpu",kernelFunc:ZM};var eP={kernelName:bo,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r;aR([a,i],"depthwiseConv2dNativeBackpropFilter");let A=Tw.computeConv2DInfo(a.shape,u,s,o,l,c,!0),{strideHeight:d,strideWidth:h,filterHeight:p,filterWidth:f}=A,m=new Mu(A.filterShape,"float32"),g=A.padInfo.left,y=A.padInfo.top,b=A.outChannels/A.inChannels,w=n.data.get(a.dataId).values,v=new Mu(a.shape,a.dtype,w),x=n.data.get(i.dataId).values,C=new Mu(i.shape,i.dtype,x);for(let k=0;k<p;++k){let e=Math.max(0,Math.ceil((y-k)/d)),t=Math.min(A.outHeight,(A.inHeight+y-k)/d);for(let n=0;n<f;++n){let r=Math.max(0,Math.ceil((g-n)/h)),a=Math.min(A.outWidth,(A.inWidth+g-n)/h);for(let i=0;i<A.outChannels;++i){let s=Math.trunc(i/b),o=i%b,l=0;for(let c=0;c<A.batchSize;++c)for(let o=e;o<t;++o){let e=k+o*d-y;for(let t=r;t<a;++t){let r=n+t*h-g;l+=v.get(c,e,r,s)*C.get(c,o,t,i)}}m.set(l,k,n,s,o)}}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var tP={kernelName:wo,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r;aR([a,i],"depthwiseConv2DNativeBackpropInput");let A=su.computeStrides(a.shape),d=su.computeStrides(i.shape),h=Tw.computeConv2DInfo(u,i.shape,s,o,l,c,!0),p=new Mu(h.inShape,"float32"),f=p.values,[m,g,y]=p.strides,b=n.data.get(a.dataId).values,[w,v,x]=A,C=n.data.get(i.dataId).values,[k,B,S]=d,{batchSize:I,filterHeight:N,filterWidth:F,inChannels:E,inHeight:_,inWidth:T,outChannels:L,outHeight:D,outWidth:R,strideHeight:U,strideWidth:O}=h,M=N-1-h.padInfo.top,P=F-1-h.padInfo.left,Q=L/E;for(let j=0;j<I;++j)for(let e=0;e<E;++e)for(let t=0;t<_;++t){let n=t-M,r=Math.max(0,Math.ceil(n/U)),a=Math.min(D,(N+n)/U);for(let i=0;i<T;++i){let s=i-P,o=Math.max(0,Math.ceil(s/O)),l=Math.min(R,(F+s)/O),c=0;for(let t=r;t<a;++t){let r=t*U-n;for(let n=o;n<l;++n){let a=w*j+v*t+x*n,i=k*(N-1-r)+B*(F-1-(n*O-s))+S*e;for(let t=0;t<Q;++t){c+=b[a+(e*Q+t)]*C[i+t]}}}f[m*j+g*t+y*i+e]=c}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}};var nP={kernelName:vo,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t,a=su.sizeFromShape(r.shape),i=n.data.get(r.dataId).values,s=Xd([a,a],r.dtype),o=s.values;for(let c=0;c<i.length;c++)o[c*a+c]=i[c];let l=[...r.shape,...r.shape];return n.makeTensorInfo(l,s.dtype,s.values)}},rP={kernelName:xo,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r,c=n,u=c.data.get(a.dataId).values,A=a.shape.length,d=c.data.get(i.dataId).values,h=i.shape.length,{batchSize:p,inHeight:f,inWidth:m,inChannels:g,outHeight:y,outWidth:b,padInfo:w,strideHeight:v,strideWidth:x,filterHeight:C,filterWidth:k,dilationHeight:B,dilationWidth:S,outShape:I}=Tw.computeDilation2DInfo(a.shape,i.shape,s,o,"NHWC",l),N=su.sizeFromShape(I),F=I.length,E=su.getArrayFromDType(a.dtype,N);for(let _=0;_<p;++_)for(let e=0;e<y;++e){let t=e*v-w.top;for(let n=0;n<b;++n){let r=n*x-w.left;for(let s=0;s<g;++s){let o=Number.MIN_SAFE_INTEGER;for(let e=0;e<C;++e){let n=t+e*B;if(n>=0&&n<f)for(let t=0;t<k;++t){let l=r+t*S;if(l>=0&&l<m){let r=su.locToIndex([_,n,l,s],A,su.computeStrides(a.shape)),c=su.locToIndex([e,t,s],h,su.computeStrides(i.shape)),p=u[r]+d[c];p>o&&(o=p)}}}E[su.locToIndex([_,e,n,s],F,su.computeStrides(I))]=o}}}return{dataId:c.write(su.toTypedArray(E,a.dtype),I,a.dtype),shape:I,dtype:a.dtype}}},aP={kernelName:ko,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,dy:s}=t,{strides:o,pad:l,dilations:c}=r,u=n,A=su.toNestedArray(a.shape,u.data.get(a.dataId).values),d=su.toNestedArray(i.shape,u.data.get(i.dataId).values),{batchSize:h,inHeight:p,inWidth:f,inChannels:m,outHeight:g,outWidth:y,padInfo:b,strideHeight:w,strideWidth:v,filterHeight:x,filterWidth:C,dilationHeight:k,dilationWidth:B,outShape:S}=Tw.computeDilation2DInfo(a.shape,i.shape,o,l,"NHWC",c);su.assert(s.rank===S.length,()=>"Error in ".concat(ko,", dy must have the same rank as output ").concat(S.length,", but got ").concat(s.rank));let I=su.toNestedArray(S,u.data.get(s.dataId).values),N=su.makeZerosNestedTypedArray(i.shape,i.dtype);for(let F=0;F<h;++F)for(let e=0;e<g;++e){let t=e*w-b.top;for(let n=0;n<y;++n){let r=n*v-b.left;for(let a=0;a<m;++a){let i=Number.MIN_SAFE_INTEGER,s=0,o=0;for(let e=0;e<x;++e){let n=t+e*k;if(n>=0&&n<p)for(let t=0;t<C;++t){let l=r+t*B;if(l>=0&&l<f){let r=A[F][n][l][a]+d[e][t][a];r>i&&(i=r,s=e,o=t)}}}N[s][o][a]+=I[F][e][n][a]}}}return{dataId:u.write(su.toTypedArray(N,a.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},iP={kernelName:Co,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,dy:s}=t,{strides:o,pad:l,dilations:c}=r,u=n,A=su.toNestedArray(a.shape,u.data.get(a.dataId).values),d=su.toNestedArray(i.shape,u.data.get(i.dataId).values),{batchSize:h,inHeight:p,inWidth:f,inChannels:m,outHeight:g,outWidth:y,padInfo:b,strideHeight:w,strideWidth:v,filterHeight:x,filterWidth:C,dilationHeight:k,dilationWidth:B,outShape:S}=Tw.computeDilation2DInfo(a.shape,i.shape,o,l,"NHWC",c);su.assert(s.rank===S.length,()=>"Error in ".concat(Co,", dy must have the same rank as output ").concat(S.length,", but got ").concat(s.rank));let I=su.toNestedArray(S,u.data.get(s.dataId).values),N=su.makeZerosNestedTypedArray(a.shape,a.dtype);for(let F=0;F<h;++F)for(let e=0;e<g;++e){let t=e*w-b.top;for(let n=0;n<y;++n){let r=n*v-b.left;for(let a=0;a<m;++a){let i=Number.MIN_SAFE_INTEGER,s=t<0?0:t,o=r<0?0:r;for(let e=0;e<x;++e){let n=t+e*k;if(n>=0&&n<p)for(let t=0;t<C;++t){let l=r+t*B;if(l>=0&&l<f){let r=A[F][n][l][a]+d[e][t][a];r>i&&(i=r,s=n,o=l)}}}N[F][s][o][a]+=I[F][e][n][a]}}}return{dataId:u.write(su.toTypedArray(N,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};var sP={kernelName:Bo,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{image:a}=t,{canvas:i,options:s}=r,{contextOptions:o,imageOptions:l}=s||{},c=(null==l?void 0:l.alpha)||1,u=(null==o?void 0:o.contextType)||"2d";if("2d"!==u)throw new Error("Context type ".concat(o.contextType," is not supported by the CPU backend."));let A=i.getContext(u,(null==o?void 0:o.contextAttributes)||{});if(null==A)throw new Error("Could not get the context with ".concat(u," type."));let[d,h]=a.shape.slice(0,2),p=2===a.shape.length?1:a.shape[2],f=n.data.get(a.dataId).values,m="float32"===a.dtype?255:1,g=new Uint8ClampedArray(h*d*4);for(let b=0;b<d*h;++b){let e=[0,0,0,255*c];for(let n=0;n<p;n++){let t=f[b*p+n];if("float32"===a.dtype){if(t<0||t>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ".concat(t,"."))}else if("int32"===a.dtype&&(t<0||t>255))throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ".concat(t,"."));1===p?(e[0]=t*m,e[1]=t*m,e[2]=t*m):e[n]=t*m}let t=4*b;g[t+0]=Math.round(e[0]),g[t+1]=Math.round(e[1]),g[t+2]=Math.round(e[2]),g[t+3]=Math.round(e[3])}i.width=h,i.height=d;let y=new ImageData(g,h,d);return A.putImageData(y,0,0),a}};function oP(e){let t,{inputs:n,backend:r,attrs:a}=e,{x:i}=n,{axis:s,keepDims:o}=a;aR(i,"sum"),t="bool"===i.dtype?bR({inputs:{x:i},backend:r,attrs:{dtype:"int32"}}):pR({inputs:{x:i},backend:r});let l=t.shape.length,c=su.parseAxisParam(s,t.shape),u=Tw.getAxesPermutation(c,l),A=c,d=t;null!=u&&(d=RU({inputs:{x:t},backend:r,attrs:{perm:u}}),A=Tw.getInnerMostAxes(A.length,l)),Tw.assertAxesAreInnerMostDims("sum",A,d.shape.length);let[h,p]=Tw.computeOutAndReduceShapes(d.shape,A),f=hR(r,h,Tw.upcastType(d.dtype,"int32")),m=su.sizeFromShape(p),g=r.data.get(f.dataId).values,y=r.data.get(d.dataId).values;for(let b=0;b<g.length;++b){let e=b*m,t=0;for(let n=0;n<m;++n)t+=y[e+n];g[b]=t}if(o){let e=f;f=KO({inputs:{x:f},backend:r,attrs:{shape:Tw.expandShapeToKeepDim(f.shape,c)}}),r.disposeIntermediateTensorInfo(e)}return r.disposeIntermediateTensorInfo(t),null!=u&&r.disposeIntermediateTensorInfo(d),f}var lP={kernelName:hc,backendName:"cpu",kernelFunc:oP};var cP={kernelName:Io,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,i=t,{allDims:s,summedDims:o,idDims:l}=Tw.decodeEinsumEquation(a,i.length);Tw.checkEinsumDimSizes(s.length,l,i);let{path:c,steps:u}=Tw.getEinsumComputePath(o,l),A=u.length,d=null,h=s.length,p=[];for(let f=0;f<A;++f){for(let e of u[f]){let t,{permutationIndices:r,expandDims:a}=Tw.getEinsumPermutation(h,l[e]);Tw.isIdentityPermutation(r)?t=i[e]:(t=RU({inputs:{x:i[e]},backend:n,attrs:{perm:r}}),p.push(t));let s=t.shape.slice();for(let e=0;e<a.length;++e)s.splice(a[e],0,1);su.arraysEqual(t.shape,s)||(t=KO({inputs:{x:t},backend:n,attrs:{shape:s}}),p.push(t)),null===d?d=t:(d=IU({inputs:{a:t,b:d},backend:n}),p.push(d))}f<A-1&&(c[f]>=0&&(d=oP({inputs:{x:d},backend:n,attrs:{axis:c[f]-(s.length-h),keepDims:!1}}),p.push(d)),h--)}for(let f of p)f!==d&&n.disposeIntermediateTensorInfo(f);return d}};var uP={kernelName:Fo,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{dy:r,y:a}=t;aR([r,a],"eluGrad");let i=new Float32Array(su.sizeFromShape(a.shape)),s=n.data.get(a.dataId).values,o=n.data.get(r.dataId).values;for(let l=0;l<s.length;++l){let e=s[l];i[l]=e>=0?o[l]:o[l]*(e+1)}return n.makeTensorInfo(a.shape,"float32",i)}},AP=Tw.ERF_P,dP=Tw.ERF_A1,hP=Tw.ERF_A2,pP=Tw.ERF_A3,fP=Tw.ERF_A4,mP=Tw.ERF_A5,gP=LR(Eo,e=>{let t=Math.sign(e),n=Math.abs(e),r=1/(1+AP*n);return t*(1-((((mP*r+fP)*r+pP)*r+hP)*r+dP)*r*Math.exp(-n*n))}),yP={kernelName:Eo,backendName:"cpu",kernelFunc:gP};function bP(e){let{inputs:t,backend:n,attrs:r}=e,{input:a}=t,{dim:i}=r,s=a.shape.length,o=a.shape.slice(),l=i;return i<0&&(su.assert(-(s+1)<=i,()=>"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")),l=s+i+1),o.splice(l,0,1),KO({inputs:{x:a},backend:n,attrs:{shape:o}})}var wP={kernelName:Lo,backendName:"cpu",kernelFunc:bP},vP=uR((e,t)=>e/t),xP=vR(So,vP),CP={kernelName:So,backendName:"cpu",kernelFunc:xP};function kP(e,t,n){let r=e.shape,a=r[0],i=r[1],s=n.data.get(e.dataId),o=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,c=[a,i],u=su.sizeFromShape(c),A=su.getTypedArrayFromDType("float32",u),d=su.getTypedArrayFromDType("float32",u);for(let m=0;m<a;m++){let e=iO({inputs:{x:o},backend:n,attrs:{begin:[m,0],size:[1,i]}}),r=iO({inputs:{x:l},backend:n,attrs:{begin:[m,0],size:[1,i]}}),a=AR({inputs:{real:e,imag:r},backend:n}),{real:s,imag:c}=BP(a,t,n),u=Tw.mergeRealAndImagArrays(s,c);for(let t=0;t<i;t++){let e=Tw.getComplexWithIndex(u,t);A[m*i+t]=e.real,d[m*i+t]=e.imag}n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(a)}let h=n.makeTensorInfo(c,"float32",A),p=n.makeTensorInfo(c,"float32",d),f=AR({inputs:{real:h,imag:p},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),f}function BP(e,t,n){let r=su.sizeFromShape(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,s=n.data.get(a.complexTensorInfos.imag.dataId).values;if(function(e){return 0===(e&e-1)}(r)){let a=SP(i,s,r,t,n),o=[e.shape[0],e.shape[1]];if(t){let e=n.makeTensorInfo(o,"float32",a.real),t=n.makeTensorInfo(o,"float32",a.imag),i=n.makeTensorInfo([],"float32",su.createScalarValue(r,"float32")),s=pR({inputs:{x:i},backend:n}),l=CP.kernelFunc({inputs:{a:e,b:i},backend:n}),c=CP.kernelFunc({inputs:{a:t,b:s},backend:n}),u=n.data.get(l.dataId).values,A=n.data.get(c.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),{real:u,imag:A}}return a}{let e=function(e,t,n){let r=new Float32Array(2*t);for(let a=0;a<t;a++){let i=0,s=0;for(let r=0;r<t;r++){let o=Tw.exponent(a*r,t,n),l=Tw.getComplexWithIndex(e,r);i+=l.real*o.real-l.imag*o.imag,s+=l.real*o.imag+l.imag*o.real}n&&(i/=t,s/=t),Tw.assignToTypedArray(r,i,s,a)}return r}(Tw.mergeRealAndImagArrays(i,s),r,t);return Tw.splitRealAndImagArrays(e)}}function SP(e,t,n,r,a){if(1===n)return{real:e,imag:t};let i=Tw.mergeRealAndImagArrays(e,t),s=n/2,o=Tw.complexWithEvenIndex(i),l=o.real,c=o.imag,u=[l.length],A=a.makeTensorInfo(u,"float32",l),d=a.makeTensorInfo(u,"float32",c),h=AR({inputs:{real:A,imag:d},backend:a}),p=Tw.complexWithOddIndex(i),f=p.real,m=p.imag,g=[f.length],y=a.makeTensorInfo(g,"float32",f),b=a.makeTensorInfo(g,"float32",m),w=AR({inputs:{real:y,imag:b},backend:a}),v=SP(l,c,s,r,a),x=v.real,C=v.imag,k=[x.length],B=a.makeTensorInfo(k,"float32",x),S=a.makeTensorInfo(k,"float32",C),I=AR({inputs:{real:B,imag:S},backend:a}),N=SP(f,m,s,r,a),F=N.real,E=N.imag,_=[F.length],T=a.makeTensorInfo(_,"float32",F),L=a.makeTensorInfo(_,"float32",E),D=AR({inputs:{real:T,imag:L},backend:a}),R=Tw.exponents(n,r),U=[R.real.length],O=a.makeTensorInfo(U,"float32",R.real),M=a.makeTensorInfo(U,"float32",R.imag),P=AR({inputs:{real:O,imag:M},backend:a}),Q=IU({inputs:{a:P,b:D},backend:a}),j=BR({inputs:{a:I,b:Q},backend:a}),H=IO({inputs:{a:I,b:Q},backend:a}),z=mR({inputs:{input:j},backend:a}),W=mR({inputs:{input:H},backend:a}),V=TM({inputs:{input:j},backend:a}),G=TM({inputs:{input:H},backend:a}),K=DM({inputs:[z,W],backend:a,attrs:{axis:0}}),q=DM({inputs:[V,G],backend:a,attrs:{axis:0}}),X=a.data.get(K.dataId).values,J=a.data.get(q.dataId).values;return a.disposeIntermediateTensorInfo(A),a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(w),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo(I),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(Q),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(q),{real:X,imag:J}}var IP={kernelName:Ro,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{input:r}=t,a=su.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],s=KO({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),o=kP(s,!1,n),l=KO({inputs:{x:o},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}};function NP(e){let{backend:t,attrs:n}=e,{shape:r,value:a,dtype:i}=n,s=i||su.inferDtype(a),o=su.getArrayFromDType(s,su.sizeFromShape(r));return function(e,t){e.fill(t)}(o,a),t.makeTensorInfo(r,s,o)}var FP={kernelName:Uo,backendName:"cpu",kernelFunc:NP};var EP={kernelName:Oo,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e,{image:a}=t,i=r,s=su.getTypedArrayFromDType(a.dtype,su.sizeFromShape(a.shape)),[o,l,c,u]=a.shape,A=i.data.get(a.dataId).values;for(let d=0;d<o;d++){let e=d*c*l*u;for(let t=0;t<l;t++){let n=t*(c*u);for(let t=0;t<c;t++){let r=t*u;for(let a=0;a<u;a++){let i=Math.round(c-t-1),o=e+n+r+a,l=A[o];if(i>=0&&i<c){l=A[e+n+i*u+a]}s[o]=l}}}}return{dataId:i.write(s,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};var _P={kernelName:Vc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dataFormat:u,dilations:A,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r,f=UM({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:A,dimRoundingMode:d}});if(s){let e=f;if("NCHW"===u&&1===s.shape.length&&1!==s.shape[0]){let e=KO({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});f=BR({inputs:{a:f,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else f=BR({inputs:{a:f,b:s},backend:n});n.disposeIntermediateTensorInfo(e)}if(h){let e=f;if("NCHW"===u&&"prelu"===h&&1===o.shape.length&&1!==o.shape[0]){let e=KO({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});f=GO(n,f,h,e,p),n.disposeIntermediateTensorInfo(e)}else f=GO(n,f,h,o,p);n.disposeIntermediateTensorInfo(e)}return f}};var TP={kernelName:Gc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dataFormat:u,dilations:A,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=r,f=ZM({inputs:{x:a,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:A,dimRoundingMode:d}});if(s){let e=f;f=BR({inputs:{a:f,b:s},backend:n}),n.disposeIntermediateTensorInfo(e)}if(h){let e=f;f=GO(n,f,h,o,p),n.disposeIntermediateTensorInfo(e)}return f}};var LP={kernelName:Ho,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{params:r,indices:a}=t,i=su.sizeFromShape(r.shape),s=a.shape,o=s[s.length-1],[l,c,u,A]=Tw.prepareAndValidate(r,a);if(0===c)return n.makeTensorInfo(l,r.dtype,[]);let d=eU(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,c,o,u,A,r.shape,i);return n.makeTensorInfo(l,r.dtype,d.values)}};var DP={kernelName:jo,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,indices:i}=t,{axis:s,batchDims:o}=r;aR([a,i],"gatherV2");let l=su.parseAxisParam(s,a.shape)[0],c=n.data.get(i.dataId).values,u=a.shape[l];for(let b=0;b<c.length;++b){let e=c[b];su.assert(e<=u-1&&e>=0,()=>"GatherV2: the index value ".concat(e," is not in [0, ").concat(u-1,"]"))}let A=o;null==o&&(A=0);let d=su.sizeFromShape(i.shape),h=Tw.segment_util.collectGatherOpShapeInfo(a,i,l,A),p=KO({inputs:{x:a},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),f=KO({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,d/h.batchSize]}}),m=[h.batchSize,h.outerSize,d/h.batchSize,h.sliceSize],g=n.bufferSync(f),y=tU(n.bufferSync(p),g,m);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.makeTensorInfo(h.outputShape,y.dtype,y.values)}};var RP={kernelName:Go,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{input:r}=t,a=su.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],s=KO({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),o=kP(s,!0,n),l=KO({inputs:{x:o},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),l}},UP=LR(qo,e=>Number.isFinite(e)?1:0,"bool"),OP={kernelName:qo,backendName:"cpu",kernelFunc:UP},MP=LR(Xo,e=>Math.abs(e)===1/0?1:0,"bool"),PP={kernelName:Xo,backendName:"cpu",kernelFunc:MP},QP=LR(Jo,e=>Number.isNaN(e)?1:0,"bool"),jP={kernelName:Jo,backendName:"cpu",kernelFunc:QP};var HP={kernelName:el,backendName:"cpu",kernelFunc:function(e){let{backend:t,attrs:n}=e,{start:r,stop:a,num:i}=n,s=pU(r,a,i);return t.makeTensorInfo([s.length],"float32",s)}},zP=LR(nl,e=>Math.log1p(e)),WP={kernelName:nl,backendName:"cpu",kernelFunc:zP},VP=uR((e,t)=>e&&t),GP=vR(rl,VP,null,"bool"),KP={kernelName:rl,backendName:"cpu",kernelFunc:GP},qP=LR(al,e=>e?0:1,"bool"),XP={kernelName:al,backendName:"cpu",kernelFunc:qP},JP=uR((e,t)=>e||t),YP=vR(il,JP,null,"bool"),ZP={kernelName:il,backendName:"cpu",kernelFunc:YP};var $P={kernelName:cl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:i,bias:s,alpha:o,beta:l}=r;aR(a,"LRN");let c=a.shape[3],u=c-1,A=n.data.get(a.dataId).values,d=su.sizeFromShape(a.shape),h=new Float32Array(d);function p(e){let t=e%c,n=e-t+Math.max(0,t-i),r=e-t+Math.min(t+i,u),a=0;for(;n<=r;n++){let e=A[n];a+=e*e}return a}for(let f=0;f<d;f++){let e=p(f),t=A[f]*Math.pow(s+o*e,-l);h[f]=t}return n.makeTensorInfo(a.shape,a.dtype,h)}};var eQ={kernelName:ul,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,y:i,dy:s}=t,{depthRadius:o,bias:l,alpha:c,beta:u}=r;aR(s,"LRNGrad");let A=su.sizeFromShape(s.shape),d=s.shape[3],h=n.data.get(s.dataId).values,p=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,m=new Float32Array(A),g=A;for(let y=0;y<g;y++){let e=y%d,t=y-e+Math.max(0,e-o),n=y-e+Math.min(d,e+o+1),r=0;for(let a=t;a<n;a++)r+=Math.pow(p[a],2);r=c*r+l;for(let a=t;a<n;a++){let e=-2*c*u*p[a]*f[y]/r;y===a&&(e+=Math.pow(r,-u)),e*=h[y],m[a]+=e}}return n.makeTensorInfo(s.shape,a.dtype,m)}};function tQ(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:i,keepDims:s}=r,o=n,l=a.shape,c=l.length,u=su.parseAxisParam(i,l),A=u,d=Tw.getAxesPermutation(A,c),h=o.data.get(a.dataId).values;if(null!=d){let e=new Array(c);for(let t=0;t<e.length;t++)e[t]=l[d[t]];h=DU(h,l,a.dtype,d,e),A=Tw.getInnerMostAxes(A.length,c),l=e}aR(a,"max"),Tw.assertAxesAreInnerMostDims("max",A,c);let[p,f]=Tw.computeOutAndReduceShapes(l,A),m=yU(h,su.sizeFromShape(f),p,a.dtype),g=o.write(m,p,a.dtype),y=p;return s&&(y=Tw.expandShapeToKeepDim(p,u)),{dataId:g,shape:y,dtype:a.dtype}}var nQ={kernelName:dl,backendName:"cpu",kernelFunc:tQ};var rQ={kernelName:pl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;aR(a,"maxPool");let{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r;su.assert(Tw.eitherStridesOrDilationsAreOne(s,1),()=>"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(1,"'"));let c,u=Tw.computePool2DInfo(a.shape,i,s,1,o,l);if(1===u.filterWidth&&1===u.filterHeight&&su.arraysEqual(u.inShape,u.outShape))c=pR({inputs:{x:a},backend:n});else{let e=n.data.get(a.dataId).values,t=su.computeStrides(a.shape),r=yM(e,a.shape,a.dtype,t,u,"max");c=n.makeTensorInfo(u.outShape,a.dtype,r.values)}return c}};var aQ={kernelName:ml,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r;aR(a,"maxPool3d");let u=Tw.computePool3DInfo(a.shape,i,s,1,o,l,c),A=wM(n.data.get(a.dataId).values,a.shape,a.dtype,su.computeStrides(a.shape),u,"max");return n.makeTensorInfo(A.shape,"float32",A.values)}};var iQ={kernelName:gl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r;aR([a,i],"maxPool3DGrad");let u=Tw.computePool3DInfo(i.shape,s,o,1,l,c),A=function(e,t){let n=Xd(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,s=t.dilationDepth,o=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,u=t.effectiveFilterHeight,A=t.effectiveFilterWidth,d=t.padInfo.front,h=t.padInfo.top,p=t.padInfo.left;for(let f=0;f<t.batchSize;++f)for(let m=0;m<t.inChannels;++m)for(let g=0;g<t.outDepth;++g){let y=g*r-d,b=y;for(;b<0;)b+=s;let w=Math.min(t.inDepth,c+y);for(let r=0;r<t.outHeight;++r){let c=r*a-h,d=c;for(;d<0;)d+=o;let v=Math.min(t.inHeight,u+c);for(let a=0;a<t.outWidth;++a){let h=a*i-p,x=h;for(;x<0;)x+=l;let C=Math.min(t.inWidth,A+h),k=Number.NEGATIVE_INFINITY,B=-1;for(let t=b;t<w;t+=s){let n=t-y;for(let r=d;r<v;r+=o){let a=r-c;for(let i=x;i<C;i+=l){let s=i-h,o=e.get(f,t,r,i,m);o>=k&&(k=o,B=n*u*A+a*u+s)}}}n.set(B,f,g,r,a,m)}}}return n}(n.bufferSync(i),u),d=u.strideDepth,h=u.strideHeight,p=u.strideWidth,f=u.dilationDepth,m=u.dilationHeight,g=u.dilationWidth,y=u.effectiveFilterDepth,b=u.effectiveFilterHeight,w=u.effectiveFilterWidth,v=y-1-u.padInfo.front,x=w-1-u.padInfo.left,C=b-1-u.padInfo.top,k=Xd(i.shape,"float32"),B=n.bufferSync(a);for(let S=0;S<u.batchSize;++S)for(let e=0;e<u.inChannels;++e)for(let t=0;t<u.inDepth;++t)for(let n=0;n<u.inHeight;++n)for(let r=0;r<u.inWidth;++r){let a=t-v,i=n-C,s=r-x,o=0;for(let t=0;t<y;t+=f){let n=(a+t)/d;if(!(n<0||n>=u.outDepth||Math.floor(n)!==n))for(let r=0;r<b;r+=m){let a=(i+r)/h;if(!(a<0||a>=u.outHeight||Math.floor(a)!==a))for(let i=0;i<w;i+=g){let l=(s+i)/p;if(l<0||l>=u.outWidth||Math.floor(l)!==l)continue;let c=y*b*w-1-A.get(S,n,a,l,e)===t*b*w+r*w+i?1:0;0!==c&&(o+=B.get(S,n,a,l,e)*c)}}}k.set(o,S,t,n,r,e)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var sQ={kernelName:fl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i,output:s}=t,o=i;aR([i,s],"maxPoolGrad");let{filterSize:l,strides:c,pad:u,dimRoundingMode:A}=r,d=Tw.computePool2DInfo(o.shape,l,c,1,u,A),h=n.data.get(o.dataId).values,p=Xd(d.outShape,o.dtype,bM(h,o.shape,o.dtype,d).values),f=d.strideHeight,m=d.strideWidth,g=d.dilationHeight,y=d.dilationWidth,b=d.effectiveFilterHeight,w=d.effectiveFilterWidth,v=w-1-d.padInfo.left,x=b-1-d.padInfo.top,C=Xd(o.shape,"float32"),k=n.data.get(a.dataId).values,B=Xd(a.shape,"float32",k);for(let S=0;S<d.batchSize;++S)for(let e=0;e<d.inChannels;++e)for(let t=0;t<d.inHeight;++t)for(let n=0;n<d.inWidth;++n){let r=t-x,a=n-v,i=0;for(let t=0;t<b;t+=g){let n=(r+t)/f;if(!(n<0||n>=d.outHeight||Math.floor(n)!==n))for(let r=0;r<w;r+=y){let s=(a+r)/m;if(s<0||s>=d.outWidth||Math.floor(s)!==s)continue;let o=b*w-1-p.get(S,n,s,e)===t*w+r?1:0;0!==o&&(i+=B.get(S,n,s,e)*o)}}C.set(i,S,t,n,e)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};var oQ={kernelName:yl,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:l}=n,c=r;aR(a,"MaxPoolWithArgmax");let u=c.data.get(a.dataId).values,A=Tw.computePool2DInfo(a.shape,i,s,[1,1],o),[d,h]=function(e,t,n,r,a){let i=yM(e,0,n,su.computeStrides(t),a,"max"),s=bM(e,t,n,a,!0,r);return[i.values,s.values]}(u,a.shape,a.dtype,l,A),p=c.write(d,A.outShape,a.dtype),f=c.write(h,A.outShape,a.dtype);return[{dataId:p,shape:A.outShape,dtype:a.dtype},{dataId:f,shape:A.outShape,dtype:"int32"}]}};var lQ={kernelName:bl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=su.parseAxisParam(i,a.shape),l=Tw.computeOutAndReduceShapes(a.shape,o)[1],c=su.sizeFromShape(l),u=[],A=n.makeTensorInfo([],"float32",new Float32Array([c]));u.push(A);let d=bR({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});u.push(d);let h=xP({inputs:{a:d,b:A},backend:n});u.push(h);let p=oP({inputs:{x:h},backend:n,attrs:{axis:i,keepDims:s}});return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),p}};var cQ={kernelName:wl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;aR(a,"min");let o=su.parseAxisParam(i,a.shape),l=o,c=Tw.getAxesPermutation(l,a.shape.length),u=a;null!=c&&(u=RU({inputs:{x:a},backend:n,attrs:{perm:c}}),l=Tw.getInnerMostAxes(l.length,a.shape.length)),Tw.assertAxesAreInnerMostDims("min",l,u.shape.length);let[A,d]=Tw.computeOutAndReduceShapes(u.shape,l),h=su.sizeFromShape(d),p=su.makeZerosTypedArray(su.sizeFromShape(A),u.dtype),f=n.data.get(u.dataId).values;for(let g=0;g<p.length;++g){let e=g*h,t=f[e];for(let n=0;n<h;++n){let r=f[e+n];(Number.isNaN(r)||r<t)&&(t=r)}p[g]=t}null!=c&&n.disposeIntermediateTensorInfo(u);let m=n.makeTensorInfo(A,u.dtype,p);if(s){let e=KO({inputs:{x:m},backend:n,attrs:{shape:Tw.expandShapeToKeepDim(A,o)}});return n.disposeIntermediateTensorInfo(m),e}return m}};var uQ={kernelName:xl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,mode:s}=r;aR(a,"mirrorPad");let o=i.map((e,t)=>e[0]+a.shape[t]+e[1]),l=i.map(e=>e[0]),c=i.map((e,t)=>e[0]+a.shape[t]),u="reflect"===s?0:1,A=n.data.get(a.dataId).values,d=a.shape.length,h=su.computeStrides(a.shape),p=su.sizeFromShape(o),f=o.length,m=su.computeStrides(o),g=su.getTypedArrayFromDType(a.dtype,p);for(let y=0;y<p;y++){let e=su.indexToLoc(y,f,m);for(let n=0;n<f;n++)e[n]<l[n]?e[n]=2*l[n]-e[n]-u:e[n]>=c[n]&&(e[n]=2*(c[n]-1)-e[n]+u);e=e.map((e,t)=>e-l[t]);let t=su.locToIndex(e,d,h);g[y]=A[t]}return{dataId:n.write(g,o,a.dtype),shape:o,dtype:a.dtype}}},AQ=uR((e,t)=>{let n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),dQ=vR(Cl,AQ),hQ={kernelName:Cl,backendName:"cpu",kernelFunc:dQ},pQ=ti(hi());function fQ(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:i}=r,s=a.shape.length,o=i;if(-1===o&&(o=s-1),o!==s-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(s," and dim was ").concat(o));let l=su.parseAxisParam([o],a.shape),c=tQ({inputs:{x:a},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=Tw.expandShapeToKeepDim(c.shape,l),A=KO({inputs:{x:c},backend:n,attrs:{shape:u}}),d=IO({inputs:{a:a,b:A},backend:n}),h=zR({inputs:{x:d},backend:n}),p=oP({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),f=KO({inputs:{x:p},backend:n,attrs:{shape:u}}),m=xP({inputs:{a:h,b:f},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),m}var mQ={kernelName:mc,backendName:"cpu",kernelFunc:fQ};var gQ={kernelName:kl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:i,seed:s,normalized:o}=r;aR(a,"multinomial");let l=o?a:fQ({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],A=n.data.get(l.dataId).values,d=[c,i],h=su.makeZerosTypedArray(su.sizeFromShape(d),"int32");for(let p=0;p<c;++p){let e=p*u,t=new Float32Array(u-1);t[0]=A[e];for(let a=1;a<t.length;++a)t[a]=t[a-1]+A[e+a];let n=pQ.alea(s.toString()),r=p*i;for(let a=0;a<i;++a){let e=n();h[r+a]=t.length;for(let n=0;n<t.length;n++)if(e<t[n]){h[r+a]=n;break}}}return o||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",h)}},yQ=Mv.nonMaxSuppressionV3Impl;var bQ={kernelName:Nl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=r;aR(a,"NonMaxSuppression");let c=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,{selectedIndices:A}=yQ(c,u,s,o,l);return n.makeTensorInfo([A.length],"int32",new Int32Array(A))}},wQ=Mv.nonMaxSuppressionV4Impl;var vQ={kernelName:Fl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r;aR(a,"NonMaxSuppressionPadded");let u=n.data.get(a.dataId).values,A=n.data.get(i.dataId).values,{selectedIndices:d,validOutputs:h}=wQ(u,A,s,o,l,c);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},xQ=Mv.nonMaxSuppressionV5Impl;var CQ={kernelName:El,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r;aR(a,"NonMaxSuppressionWithScore");let u=n.data.get(a.dataId).values,A=n.data.get(i.dataId).values,d=s,h=o,p=l,f=c,{selectedIndices:m,selectedScores:g}=xQ(u,A,d,h,p,f);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}};var kQ={kernelName:Tl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:i,depth:s,onValue:o,offValue:l}=r;aR(a,"oneHot");let c=su.sizeFromShape(a.shape),u=new Float32Array(c*s);u.fill(l);let A=n.data.get(a.dataId).values;for(let d=0;d<c;++d)A[d]>=0&&A[d]<s&&(u[d*s+A[d]]=o);return n.makeTensorInfo([...a.shape,s],i,u)}};function BQ(e){let{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){let e=mR({inputs:{input:r},backend:n}),t=BQ({inputs:{x:e},backend:n}),a=TM({inputs:{input:r},backend:n}),i=BQ({inputs:{x:a},backend:n}),s=AR({inputs:{real:t,imag:i},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),s}return NP({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var SQ={kernelName:Qc,backendName:"cpu",kernelFunc:BQ};var IQ={kernelName:_l,backendName:"cpu",kernelFunc:function e(t){let{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){let t=mR({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),i=TM({inputs:{input:a},backend:r}),s=BQ({inputs:{x:i},backend:r}),o=AR({inputs:{real:n,imag:s},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),o}return NP({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function NQ(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return bP({inputs:{input:t[0]},backend:n,attrs:{dim:a}});let i=t[0].shape,s=t[0].dtype;t.forEach(e=>{su.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),su.assert(s===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],l=t.map(e=>{let t=bP({inputs:{input:e},backend:n,attrs:{dim:a}});return o.push(t),t}),c=DM({inputs:l,backend:n,attrs:{axis:a}});return o.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}var FQ={kernelName:Ll,backendName:"cpu",kernelFunc:NQ};var EQ={kernelName:Dl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,constantValue:s}=r;aR(a,"pad");let o=i.map((e,t)=>e[0]+a.shape[t]+e[1]),l=i.map(e=>e[0]),c=n.data.get(a.dataId).values,u=su.sizeFromShape(a.shape),A=a.shape.length,d=su.computeStrides(a.shape),h=su.sizeFromShape(o),p=o.length,f=su.computeStrides(o),m=su.getTypedArrayFromDType(a.dtype,h);0!==s&&m.fill(s);for(let g=0;g<u;g++){let e=su.indexToLoc(g,A,d).map((e,t)=>e+l[t]);m[su.locToIndex(e,p,f)]=c[g]}return{dataId:n.write(m,o,a.dtype),shape:o,dtype:a.dtype}}},_Q=uR((e,t)=>Math.pow(e,t)),TQ=vR(Ul,_Q),LQ={kernelName:Ul,backendName:"cpu",kernelFunc:TQ};var DQ={kernelName:Pl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:a,paramsDenseValues:i,indices:s}=t,{outputRaggedRank:o}=r,l=a.map(e=>n.data.get(e.dataId).values),c=a.map(e=>e.shape),u=n.data.get(i.dataId).values,A=n.data.get(s.dataId).values,[d,h,p]=HU(l,c,u,i.shape,i.dtype,A,s.shape),f=d.map(e=>n.makeTensorInfo([e.length],"int32",e)),m=n.makeTensorInfo(p,i.dtype,h);return f.concat([m])}};var RQ={kernelName:Ql,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{starts:r,limits:a,deltas:i}=t,s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[c,u]=WU(s,r.shape,r.dtype,o,a.shape,l,i.shape);return[n.makeTensorInfo([c.length],"int32",c),n.makeTensorInfo([u.length],r.dtype,u)]}};var UQ={kernelName:jl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{shape:a,values:i,defaultValue:s,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=r,c=n.data.get(a.dataId).values,u=n.data.get(i.dataId).values,A=n.data.get(s.dataId).values,d=o.map(e=>n.data.get(e.dataId).values),h=o.map(e=>e.shape),[p,f]=XU(c,a.shape,u,i.shape,i.dtype,A,s.shape,d,h,l);return n.makeTensorInfo(p,i.dtype,f)}};var OQ={kernelName:Hl,backendName:"cpu",kernelFunc:function(e){let{backend:t,attrs:n}=e,{start:r,stop:a,dtype:i,step:s}=n,o=JU(r,a,s,i);return t.makeTensorInfo([o.length],i,o)}},MQ=LR(Wl,e=>1/e),PQ={kernelName:Wl,backendName:"cpu",kernelFunc:MQ};var QQ={kernelName:Xl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:s,size:o}=r;aR(a,"resizeBilinear");let l=su.computeStrides(a.shape),[c,u]=o,[A,d,h,p]=a.shape,f=n.data.get(a.dataId).values,m=new Float32Array(su.sizeFromShape([A,c,u,p])),g=[i&&c>1?d-1:d,i&&u>1?h-1:h],y=[i&&c>1?c-1:c,i&&u>1?u-1:u],b=0,w=g[0]/y[0],v=g[1]/y[1];for(let x=0;x<A;x++)for(let e=0;e<c;e++){let t;t=s?w*(e+.5)-.5:w*e;let n=Math.max(0,Math.floor(t)),r=t-n,a=Math.min(d-1,Math.ceil(t)),i=x*l[0]+n*l[1],o=x*l[0]+a*l[1];for(let e=0;e<u;e++){let t;t=s?v*(e+.5)-.5:v*e;let n=Math.max(0,Math.floor(t)),a=t-n,c=Math.min(h-1,Math.ceil(t)),u=i+n*l[2],A=o+n*l[2],d=i+c*l[2],g=o+c*l[2];for(let e=0;e<p;e++){let t=f[u+e],n=f[A+e],i=t+(f[d+e]-t)*a,s=i+(n+(f[g+e]-n)*a-i)*r;m[b++]=s}}}return n.makeTensorInfo([A,c,u,p],"float32",m)}};var jQ={kernelName:Jl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r;aR([i,a],"resizeBilinearGrad");let o=su.computeStrides(a.shape),[l,c,u,A]=a.shape,[,d,h]=i.shape,p=new Float32Array(l*c*u*A),f=[s&&d>1?c-1:c,s&&h>1?u-1:u],m=[s&&d>1?d-1:d,s&&h>1?h-1:h],g=f[0]/m[0],y=f[1]/m[1],b=n.data.get(i.dataId).values,w=0;for(let v=0;v<l;v++){let e=v*o[0];for(let t=0;t<d;t++){let n=t*g,r=Math.floor(n),a=Math.min(Math.ceil(n),c-1),i=e+r*o[1],s=e+a*o[1],l=n-r,d=1-l;for(let e=0;e<h;e++){let t=e*y,n=Math.floor(t),r=Math.min(Math.ceil(t),u-1),a=t-n,c=1-a,h=i+n*o[2],f=i+r*o[2],m=s+n*o[2],g=s+r*o[2],v=d*c,x=d*a,C=l*c,k=l*a;for(let e=0;e<A;e++){let t=b[w++];p[h+e]+=t*v,p[f+e]+=t*x,p[m+e]+=t*C,p[g+e]+=t*k}}}}return n.makeTensorInfo([l,u,c,A],"float32",p)}};var HQ={kernelName:Kl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:s,size:o}=r;aR(a,"resizeNearestNeighbor");let l=su.computeStrides(a.shape),[c,u]=o,[A,d,h,p]=a.shape,f=n.data.get(a.dataId).values,m=new Float32Array(A*c*u*p),g=[i&&c>1?d-1:d,i&&u>1?h-1:h],y=[i&&c>1?c-1:c,i&&u>1?u-1:u],b=g[0]/y[0],w=g[1]/y[1],v=0;for(let x=0;x<A;x++){let e=x*l[0];for(let t=0;t<c;t++){let n=s?b*(t+.5):b*t,r=Math.min(d-1,i?Math.round(n):Math.floor(n));s&&(r=Math.max(0,r));let a=e+r*l[1];for(let e=0;e<u;e++){let t=s?w*(e+.5):w*e,n=Math.min(h-1,i?Math.round(t):Math.floor(t));s&&(n=Math.max(0,n));let r=a+n*l[2];for(let e=0;e<p;e++){let t=f[r+e];m[v++]=t}}}}return n.makeTensorInfo([A,c,u,p],a.dtype,m)}};var zQ={kernelName:ql,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r;aR([i,a],"resizeNearestNeighborGrad");let o=su.computeStrides(a.shape),l=su.computeStrides(i.shape),[c,u,A,d]=a.shape,[,h,p]=i.shape,f=new Float32Array(c*u*A*d),m=n.data.get(i.dataId).values,g=[s&&h>1?u-1:u,s&&p>1?A-1:A],y=[s&&h>1?h-1:h,s&&p>1?p-1:p],b=g[0]/y[0],w=g[1]/y[1],v=1/b,x=1/w,C=2*Math.ceil(v)+2,k=2*Math.ceil(x)+2;for(let B=0;B<c;B++){let e=B*o[0];for(let t=0;t<u;t++){let n=e+t*o[1],r=Math.floor(t*v),a=Math.floor(r-C/2);for(let i=0;i<A;i++){let r=n+i*o[2],c=Math.floor(i*x),g=Math.floor(c-k/2);for(let n=0;n<d;n++){let o=0;for(let r=0;r<C;r++){let c=r+a;if(c<0||c>=h)continue;let d=e+c*l[1],f=c*b;if(t===Math.min(u-1,s?Math.round(f):Math.floor(f)))for(let e=0;e<k;e++){let t=e+g;if(t<0||t>=p)continue;let r=d+t*l[2],a=t*w;i===Math.min(A-1,s?Math.round(a):Math.floor(a))&&(o+=m[r+n])}}f[r+n]=o}}}}return n.makeTensorInfo(a.shape,a.dtype,f)}};var WQ={kernelName:Zl,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:i}=r;aR(a,"reverse");let s=a.shape.length,o=su.parseAxisParam(i,a.shape);if(0===s)return pR({inputs:{x:a},backend:n});let l=new Mu(a.shape,a.dtype),c=n.bufferSync(a);for(let u=0;u<l.size;u++){let e=l.indexToLoc(u),t=e.slice();o.forEach(e=>t[e]=a.shape[e]-1-t[e]),l.set(c.get(...t),...e)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},VQ={kernelName:zc,backendName:"cpu",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e,{image:a}=t,{radians:i,fillValue:s,center:o}=n,l=r,c=su.getTypedArrayFromDType(a.dtype,su.sizeFromShape(a.shape)),[u,A,d,h]=a.shape,[p,f]=Tw.getImageCenter(o,A,d),m=Math.sin(i),g=Math.cos(i),y=l.data.get(a.dataId).values;for(let b=0;b<u;b++){let e=b*d*A*h;for(let t=0;t<A;t++){let n=t*(d*h);for(let r=0;r<d;r++){let a=r*h;for(let i=0;i<h;i++){let o=[u,t,r,i],l=o[2],b=o[1],w=(l-p)*g-(b-f)*m,v=(l-p)*m+(b-f)*g;w=Math.round(w+p),v=Math.round(v+f);let x=s;if("number"!=typeof s&&(x=3===i?255:s[i]),w>=0&&w<d&&v>=0&&v<A){x=y[e+v*(d*h)+w*h+i]}c[e+n+a+i]=x}}}}return{dataId:l.write(c,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},GQ=LR($l,e=>{let t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),KQ={kernelName:$l,backendName:"cpu",kernelFunc:GQ};var qQ={kernelName:tc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:i}=t,{shape:s}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:A}=Tw.calculateShapes(i,a,s),d=eO(n.bufferSync(a),n.bufferSync(i),s,A,c,l,o,u,0,!0);return n.makeTensorInfo(s,d.dtype,d.values)}};function XQ(e,t){let n=0,r=e.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),e[a]<t?n=a+1:r=a;return r}function JQ(e,t){let n=0,r=e.length,a=0;for(;n<r;)a=Math.floor((n+r)/2),e[a]<=t?n=a+1:r=a;return r}var YQ={kernelName:rc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:i}=t,{side:s}=r,o=function(e,t,n,r,a,i){let s=su.getArrayFromDType("int32",n*a);for(let o=0;o<n;++o){let n=e.slice(o*r,(o+1)*r),l=o*a;for(let e=0;e<a;++e)s[l+e]="left"===i?XQ(n,t[e+l]):JQ(n,t[e+l])}return s}(n.data.get(a.dataId).values,n.data.get(i.dataId).values,a.shape[0],a.shape[1],i.shape[1],s);return n.makeTensorInfo(i.shape,"int32",o)}};var ZQ={kernelName:ac,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{condition:r,t:a,e:i}=t;aR([r,a,i],"select");let s=r.shape.length,o=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,u=Zu(a.dtype,i.dtype),A=su.makeZerosTypedArray(su.sizeFromShape(a.shape),u),d=0,h=0===s||s>1||1===a.shape.length?1:su.sizeFromShape(a.shape.slice(1));for(let p=0;p<o.length;p++)for(let e=0;e<h;e++)1===o[p]?A[d++]=l[p]:A[d++]=c[p];return n.makeTensorInfo(a.shape,u,A)}},$Q=Tw.SELU_SCALEALPHA,ej=Tw.SELU_SCALE,tj=LR(ic,e=>e>=0?ej*e:$Q*(Math.exp(e)-1)),nj={kernelName:ic,backendName:"cpu",kernelFunc:tj},rj=LR(cc,e=>e<0?-1:e>0?1:0),aj={kernelName:cc,backendName:"cpu",kernelFunc:rj},ij=LR(oc,e=>Math.sin(e)),sj={kernelName:oc,backendName:"cpu",kernelFunc:ij},oj=LR(lc,e=>Math.sinh(e)),lj={kernelName:lc,backendName:"cpu",kernelFunc:oj},cj=Math.log(1.1920928955078125e-7)+2,uj=LR(Ac,e=>{let t,n=e>-cj,r=e<cj,a=Math.exp(e);return t=r?a:n?e:Math.log(1+a),t}),Aj={kernelName:Ac,backendName:"cpu",kernelFunc:uj};var dj={kernelName:pc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,paddings:s}=r;aR([a],"spaceToBatchND");let o=su.sizeFromShape(i),l=[[0,0]];l.push(...s);for(let m=1+i.length;m<a.shape.length;++m)l.push([0,0]);let c=EQ.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),u=Tw.getReshaped(c.shape,i,o,!1),A=Tw.getPermuted(u.length,i.length,!1),d=Tw.getReshapedPermuted(c.shape,i,o,!1),h=KO({inputs:{x:c},backend:n,attrs:{shape:u}}),p=RU({inputs:{x:h},backend:n,attrs:{perm:A}}),f=KO({inputs:{x:p},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),f}};var hj={kernelName:gc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:i,defaultValue:s}=t;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==s.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));let o=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,u=n.data.get(s.dataId).values[0],[A,d,h,p,f]=oO(o,r.shape,r.dtype,l,a.dtype,c,u);return[n.makeTensorInfo(d,r.dtype,A),n.makeTensorInfo([d[0]],a.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(e=>Number(e)))),n.makeTensorInfo([f.length],r.dtype,new Int32Array(f))]}};var pj={kernelName:yc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:i}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));let s=Array.from(n.data.get(a.dataId).values),o=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[c,u,A]=lO(o,r.shape,r.dtype,s,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([A.length],i.dtype,new Int32Array(A))]}};var fj={kernelName:bc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");let s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[c,u]=cO(s,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(u,r.dtype,c)}};var mj={kernelName:wc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");let s=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,[c,u]=cO(s,r.shape,r.dtype,o,l);return n.makeTensorInfo(u,r.dtype,c)}};var gj={kernelName:vc,backendName:"cpu",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:a}=e,{sparseIndices:i,sparseValues:s,defaultValue:o}=n,{outputShape:l}=a,{sliceRank:c,numUpdates:u,sliceSize:A,strides:d,outputSize:h}=Tw.calculateShapes(s,i,l),p=!1,f=r.bufferSync(i);switch(s.dtype){case"bool":t=eO(f,r.bufferSync(s),l,h,A,u,c,d,!!r.data.get(o.dataId).values[0],p);break;case"float32":case"int32":t=eO(f,r.bufferSync(s),l,h,A,u,c,d,r.data.get(o.dataId).values[0],p);break;case"string":t=eO(f,r.bufferSync(s),l,h,A,u,c,d,su.decodeString(r.data.get(o.dataId).values[0]),p);break;default:throw new Error("Unsupported type ".concat(s.dtype))}return r.makeTensorInfo(l,t.dtype,t.values)}};var yj={kernelName:fc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:i,axis:s}=r,o=su.parseAxisParam(s,a.shape)[0],l=Tw.prepareSplitSize(a,i,o),c=new Array(a.shape.length).fill(0),u=a.shape.slice();return l.map(e=>{let t=[...u];t[o]=e;let r=iO({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[o]+=e,r})}},bj={kernelName:Cc,backendName:"cpu",kernelFunc:e=>{let{inputs:t,backend:n}=e,{x:r}=t,a=n;aR(r,"square");let i=a.data.get(r.dataId).values,s=new Float32Array(i.length);for(let o=0;o<i.length;++o){let e=i[o];s[o]=e*e}return{dataId:a.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},wj=LR(jc,(e,t)=>{let n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),vj={kernelName:jc,backendName:"cpu",kernelFunc:wj};var xj={kernelName:Bc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,end:s,strides:o,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:A,shrinkAxisMask:d}=r;aR(a,"stridedSlice");let h,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:b,end:w,strides:v}=sw.sliceInfo(a.shape,i,s,o,l,c,u,A,d);if(m)h=KO({inputs:{x:a},backend:n,attrs:{shape:f}});else if(g||y){su.assert(a.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(a.shape.length));let e=sw.computeOutShape(b,w,v),t=iO({inputs:{x:a},backend:n,attrs:{begin:b,size:e}});h=KO({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{let e=bO(p,n.bufferSync(a),v,b);h=n.makeTensorInfo(f,e.dtype,e.values)}return h}};var Cj={kernelName:Sc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:i,leftPad:s,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:A}=t,d=n.data.get(u.dataId).values,h=n.data.get(A.dataId).values,[p,f]=vO(d,h,a,i,s,o,l,c);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(A.shape,"int32",f)]}};var kj={kernelName:Ic,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:i,delimiter:s}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(1!==i.shape.length)throw new Error("Input must be a vector, got shape: ".concat(i.shape));if(0!==s.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(s.shape));let o=n.data.get(i.dataId).values,l=n.data.get(s.dataId).values[0],[c,u,A]=CO(o,l,a),d=u.length;return[n.makeTensorInfo([d,2],"int32",c),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(A))]}};var Bj={kernelName:Nc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:i}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");let s=kO(n.data.get(i.dataId).values,a);return n.makeTensorInfo(i.shape,"int32",s)}},Sj=LR(Ec,e=>Math.tan(e)),Ij={kernelName:Ec,backendName:"cpu",kernelFunc:Sj},Nj=LR(_c,e=>Math.tanh(e));var Fj={kernelName:nc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{tensor:r,indices:a,updates:i}=t,{sliceRank:s,numUpdates:o,sliceSize:l,strides:c,outputSize:u}=Tw.calculateShapes(i,a,r.shape),A=n.bufferSync(a),d=n.bufferSync(i),h=n.bufferSync(r),p=eO(A,d,r.shape,u,l,o,s,c,h,!1);return n.makeTensorInfo(r.shape,p.dtype,p.values)}};var Ej={kernelName:Tc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:i}=r;aR(a,"tile");let s=FO(n.bufferSync(a),i);return n.makeTensorInfo(s.shape,s.dtype,s.values)}};var _j={kernelName:Lc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:i,sorted:s}=r;aR(a,"topk");let o=n.data.get(a.dataId).values,[l,c]=TO(o,a.shape,a.dtype,i,s);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}};var Tj={kernelName:Dc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{image:a,transforms:i}=t,{interpolation:s,fillMode:o,fillValue:l,outputShape:c}=n,[u,A,d,h]=a.shape,[p,f]=null!=c?c:[A,d],m=[u,p,f,h],g=su.computeStrides(a.shape),y=g[0],b=g[1],w=g[2],v=su.computeStrides(m),x=v[0],C=v[1],k=v[2],B=su.getTypedArrayFromDType(a.dtype,su.sizeFromShape(m));B.fill(l);let S=r.data.get(a.dataId).values,I=r.data.get(i.dataId).values;for(let N=0;N<u;++N){let e=1===i.shape[0]?I:I.subarray(8*N,8*N+8);for(let t=0;t<p;++t)for(let n=0;n<f;++n)for(let r=0;r<h;++r){let a,i=e[6]*n+e[7]*t+1;if(0===i)continue;let c=(e[0]*n+e[1]*t+e[2])/i,u=(e[3]*n+e[4]*t+e[5])/i,h=Lj(c,d,o),p=Lj(u,A,o);switch(s){case"nearest":a=Rj(S,A,d,y,b,w,N,p,h,r,l);break;case"bilinear":a=Uj(S,A,d,y,b,w,N,p,h,r,l);break;default:throw new Error("Error in Transform: Expect 'nearest' or 'bilinear', but got ".concat(s))}B[N*x+t*C+n*k+r]=a}return r.makeTensorInfo(m,a.dtype,B)}return{dataId:r.write(B,m,a.dtype),shape:a.shape,dtype:a.dtype}}};function Lj(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{let e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{let e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return su.clamp(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{let e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{let e=t-1;n-=t*Math.trunc(n/e)}return su.clamp(0,n,t-1)}(e,t);case"nearest":return function(e,t){return su.clamp(0,e,t-1)}(e,t);default:return function(e){return e}(e)}}function Dj(e,t,n,r,a,i,s,o,l,c,u){return 0<=o&&o<t&&0<=l&&l<n?e[s*r+o*a+l*i+c]:u}function Rj(e,t,n,r,a,i,s,o,l,c,u){return Dj(e,t,n,r,a,i,s,Math.round(o),Math.round(l),c,u)}function Uj(e,t,n,r,a,i,s,o,l,c,u){let A=Math.floor(o),d=Math.floor(l),h=A+1,p=d+1;return(h-o)*((p-l)*Dj(e,t,n,r,a,i,s,A,d,c,u)+(l-d)*Dj(e,t,n,r,a,i,s,A,p,c,u))+(o-A)*((p-l)*Dj(e,t,n,r,a,i,s,h,d,c,u)+(l-d)*Dj(e,t,n,r,a,i,s,h,p,c,u))}var Oj={kernelName:Uc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:i}=t;aR(i,"unique");let s=r.data.get(i.dataId).values,{outputValues:o,outputShape:l,indices:c}=LO(s,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}};var Mj={kernelName:Oc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{value:a}=t,{axis:i}=r;i<0&&(i+=a.shape.length);let s=a.shape.length,o=a.shape[i],l=new Array(s-1),c=0;for(let h=0;h<s;h++)h!==i&&(l[c++]=a.shape[h]);let u=new Array(s).fill(0),A=a.shape.slice();A[i]=1;let d=new Array(o);for(let h=0;h<d.length;h++){u[i]=h;let e=iO({inputs:{x:a},backend:n,attrs:{begin:u,size:A}});d[h]=KO({inputs:{x:e},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(e)}return d}};var Pj={kernelName:Mc,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:i}=t,{numSegments:s}=r;aR(a,"unsortedSegmentSum");let o=[],l=[],c=a.shape.length-i.shape.length,u=i;for(let d=0;d<c;++d){let e=bP({inputs:{input:u},backend:n,attrs:{dim:d+1}});u=e,l.push(e)}for(let d=0;d<s;++d){let e=su.createScalarValue(d,"int32"),t=n.makeTensorInfo([],"int32",e),r=QR({inputs:{a:t,b:u},backend:n}),i=bR({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),s=IU({inputs:{a:i,b:a},backend:n}),c=oP({inputs:{x:s},backend:n,attrs:{axis:0,keepDims:!1}});o.push(c),l.push(t),l.push(r),l.push(i),l.push(s),l.push(c)}let A=NQ({inputs:o,backend:n,attrs:{axis:0}});return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),A}},Qj=[YO,cR,$O,tM,SR,nM,rM,aM,iM,sM,lM,uM,dM,fM,gM,vM,xM,CM,kM,JO,BM,SM,IM,_R,NM,wR,OR,EM,dR,_M,RM,OM,MM,PM,QM,jM,HM,WM,GM,KM,qM,XM,JM,YM,$M,eP,tP,nP,rP,aP,iP,sP,cP,UO,uP,jR,yP,WR,wP,KR,IP,FP,EP,JR,$R,_P,TP,LP,DP,aU,oU,fR,RP,LM,OP,PP,jP,MO,uU,hU,HP,gU,WP,KP,XP,ZP,$P,eQ,nQ,vU,rQ,aQ,iQ,sQ,oQ,lQ,cQ,kU,uQ,hQ,gQ,NU,EU,bQ,vQ,CQ,LU,kQ,IQ,FQ,EQ,LQ,jO,MU,DQ,RQ,UQ,OQ,gR,CP,PQ,zO,VO,qO,QQ,jQ,HQ,zQ,WQ,VQ,KQ,$U,qQ,YQ,ZQ,nj,rO,aj,sj,lj,sO,mQ,Aj,dj,hj,pj,fj,mj,gj,yj,dO,bj,fO,yO,vj,xj,Cj,kj,Bj,NO,lP,Ij,{kernelName:_c,backendName:"cpu",kernelFunc:Nj},Fj,Ej,_j,Tj,UU,Oj,Mj,Pj,SQ];for(let n of Qj)eu(n);var jj={};ei(jj,{assertNotComplex:()=>JH,bindCanvasToFramebuffer:()=>SH,bindColorTextureToFramebuffer:()=>IH,bindTextureToProgramUniformSampler:()=>BH,bindTextureUnit:()=>vH,bindVertexBufferToProgramAttribute:()=>wH,callAndCheck:()=>$j,canBeRepresented:()=>nH,createFragmentShader:()=>sH,createFramebuffer:()=>bH,createProgram:()=>AH,createStaticIndexBuffer:()=>fH,createStaticVertexBuffer:()=>pH,createTexture:()=>gH,createVertexShader:()=>iH,getBatchDim:()=>LH,getExtensionOrThrow:()=>aH,getFramebufferErrorMessage:()=>EH,getMaxTexturesInShader:()=>HH,getNumChannels:()=>mH,getProgramUniformLocation:()=>kH,getProgramUniformLocationOrThrow:()=>CH,getRowsCols:()=>DH,getShapeAs3D:()=>RH,getTextureShapeFromLogicalShape:()=>UH,getWebGLDisjointQueryTimerVersion:()=>zH,getWebGLErrorMessage:()=>rH,getWebGLMaxTextureSize:()=>PH,hasExtension:()=>WH,isCapableOfRenderingToFloatTexture:()=>GH,isDownloadFloatTextureEnabled:()=>KH,isReshapeFree:()=>MH,isWebGLFenceEnabled:()=>XH,isWebGLVersionEnabled:()=>VH,linkProgram:()=>dH,logShaderSourceAndInfoLog:()=>uH,resetMaxTextureSize:()=>QH,resetMaxTexturesInShader:()=>jH,unbindColorTextureFromFramebuffer:()=>NH,unbindTextureUnit:()=>xH,validateFramebuffer:()=>FH,validateProgram:()=>hH,validateTextureSize:()=>yH});var Hj,zj,Wj,Vj={},Gj={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Kj(e,t){Vj[e]=t}function qj(e,t){if(!(e in Vj)||null!=t){let n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let n=null==t?function(e){if(!Cs().getBool("IS_SAFARI")&&"undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;return n.addEventListener("webglcontextlost",t=>{t.preventDefault(),delete Vj[e]},!1),Cs().getBool("SOFTWARE_WEBGL_ENABLED")&&(Gj.failIfMajorPerformanceCaveat=!1),1===e?n.getContext("webgl",Gj)||n.getContext("experimental-webgl",Gj):n.getContext("webgl2",Gj)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;Vj[e]=n}let n=Vj[e];return null==n||n.isContextLost()?(delete Vj[e],qj(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Vj[e])}function Xj(e,t){return[t,e]}function Jj(e){let t=su.sizeFromShape(e),n=Math.ceil(t/4);return su.sizeToSquarishShape(n)}function Yj(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Zj(e,t){let n,r,a,i,s,o,l,c,u,A,d=e;return 2===Cs().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,a=d.RGBA16F,i=d.RGBA32F,s=d.RED,l=4,c=1,u=d.HALF_FLOAT,A=d.FLOAT,o=d.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=d.RGBA,s=e.RGBA,l=4,c=4,u=null!=t?t.HALF_FLOAT_OES:null,A=e.FLOAT,o=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:s,downloadTextureFormat:o,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:u,textureTypeFloat:A}}function $j(e,t){let n=t();return Cs().getBool("DEBUG")&&function(e){let t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+rH(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(Hj||(Hj={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(zj||(zj={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Wj||(Wj={}));var eH=5.96e-8,tH=65504;function nH(e){return!!(Cs().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||eH<Math.abs(e)&&Math.abs(e)<tH)}function rH(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}function aH(e,t){return _H(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function iH(e,t){let n=_H(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if($j(e,()=>e.shaderSource(n,t)),$j(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function sH(e,t){let n=_H(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if($j(e,()=>e.shaderSource(n,t)),$j(e,()=>e.compileShader(n)),Cs().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw uH(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var oH,lH,cH=/ERROR: [0-9]+:([0-9]+):/g;function uH(e,t){let n=cH.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);let r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,s=a.map((e,t)=>su.rightPad((t+1).toString(),i)+e),o=0;for(let A=0;A<s.length;A++)o=Math.max(s[A].length,o);let l=s.slice(0,r-1),c=s.slice(r-1,r),u=s.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(su.rightPad(c[0],o)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join("\n"))}function AH(e){return _H(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function dH(e,t){if($j(e,()=>e.linkProgram(t)),!Cs().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function hH(e,t){if($j(e,()=>e.validateProgram(t)),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function pH(e,t){let n=_H(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return $j(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),$j(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function fH(e,t){let n=_H(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return $j(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),$j(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function mH(){return 2===Cs().getNumber("WEBGL_VERSION")?1:4}function gH(e){return _H(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function yH(e,t){let n=Cs().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){let n="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+n+" is invalid.")}if(e>n||t>n){let r="[".concat(e,"x").concat(t,"]"),a="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+a+".")}}function bH(e){return _H(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function wH(e,t,n,r,a,i,s){let o=e.getAttribLocation(t,n);return-1!==o&&($j(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),$j(e,()=>e.vertexAttribPointer(o,a,e.FLOAT,!1,i,s)),$j(e,()=>e.enableVertexAttribArray(o)),!0)}function vH(e,t,n){TH(e,n),$j(e,()=>e.activeTexture(e.TEXTURE0+n)),$j(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function xH(e,t){TH(e,t),$j(e,()=>e.activeTexture(e.TEXTURE0+t)),$j(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function CH(e,t,n){return _H(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function kH(e,t,n){return e.getUniformLocation(t,n)}function BH(e,t,n,r){$j(e,()=>vH(e,t,r)),$j(e,()=>e.uniform1i(n,r))}function SH(e){$j(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),$j(e,()=>e.viewport(0,0,e.canvas.width,e.canvas.height)),$j(e,()=>e.scissor(0,0,e.canvas.width,e.canvas.height))}function IH(e,t,n){$j(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),$j(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function NH(e,t){$j(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),$j(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function FH(e){let t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+EH(e,t))}function EH(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}function _H(e,t,n){let r=$j(e,()=>t());if(null==r)throw new Error(n);return r}function TH(e,t){let n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){let e="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(e,"."))}}function LH(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return su.sizeFromShape(e.slice(0,e.length-t))}function DH(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function RH(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[LH(e),...DH(e)]),t}function UH(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Cs().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=Cs().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&Cs().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,e=e.map((t,n)=>n>=e.length-2?su.nearestLargerEven(e[n]):e[n]),1===e.length&&(e=[2,e[0]])),2!==e.length&&(e=su.squeezeShape(e).newShape);let a=su.sizeFromShape(e),i=null;e.length<=1&&a<=n?i=[1,a]:2===e.length&&e[0]<=n&&e[1]<=n?i=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?i=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?i=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?i=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(i=[e[0],e[1]*e[2]*e[3]]);let s=null!=i&&Math.max(...i)>r&&Math.min(...i)<=(t?2:1)&&Math.min(...i)>0;if(null==i||s)if(t){let t=LH(e),n=2,r=2;e.length&&([n,r]=DH(e)),a=t*(n/2)*(r/2),i=su.sizeToSquarishShape(a).map(e=>2*e)}else i=su.sizeToSquarishShape(a);return i}function OH(e){return e%2===0}function MH(e,t){if(e=e.slice(-2),t=t.slice(-2),su.arraysEqual(e,t)||!e.length||!t.length||0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){let n=e[e.length-1],r=t[t.length-1];if(n===r||OH(n)&&OH(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&OH(e[0])&&OH(t[0])}function PH(e){if(null==oH){let t=qj(e);oH=t.getParameter(t.MAX_TEXTURE_SIZE)}return oH}function QH(){oH=null}function jH(){lH=null}function HH(e){if(null==lH){let t=qj(e);lH=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,lH)}function zH(e){if(0===e)return 0;let t,n=qj(e);return t=WH(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:WH(n,"EXT_disjoint_timer_query")?1:0,t}function WH(e,t){return null!=e.getExtension(t)}function VH(e){try{if(null!=qj(e))return!0}catch(x){return console.log("Error when getting WebGL context: ",x),!1}return!1}function GH(e){if(0===e)return!1;let t=qj(e);if(1===e){if(!WH(t,"OES_texture_float"))return!1}else if(!WH(t,"EXT_color_buffer_float"))return!1;return qH(t)}function KH(e){if(0===e)return!1;let t=qj(e);if(1!==e){if(WH(t,"EXT_color_buffer_float"))return qH(t);let e="EXT_color_buffer_half_float";if(WH(t,e)){let n=t.getExtension(e);return function(e,t){let n=Zj(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);let a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);let i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),i}(t,n)}return!1}return!(!WH(t,"OES_texture_float")||!WH(t,"WEBGL_color_buffer_float"))&&qH(t)}function qH(e){let t=Zj(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);let r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);let a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function XH(e){return 2===e&&null!=qj(e).fenceSync}function JH(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&su.assert("complex64"!==e.dtype,()=>"".concat(t," does not support complex64 tensors in the WebGL backend."))})}var YH=Cs();function ZH(){let e,t,n,r,a,i,s,o,l,c;return 2===Cs().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",s="out vec4 outputColor;",o=Cs().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",s="",o="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:s,defineSpecialNaN:o,defineSpecialInf:l,defineRound:c}}function $H(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=su.computeStrides(t);return r.map((t,a)=>{let i="int ".concat(e[a]," = ").concat(n," / ").concat(t),s=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(s,";")}).join("")}function ez(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=su.computeStrides(t);return r.map((t,a)=>{let i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),s=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(s,";")}).join("")}function tz(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((e,t)=>t),a=function(e,t){let n=e.length,r=e.map(e=>"".concat(t,"[").concat(e,"]")),a=new Array(n-1);a[n-2]=r[n-1];for(let i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}(r,t);return a.map((t,r)=>{let i="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),s=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(i,"; ").concat(s,";")}).join("")}function nz(e){let t=su.computeStrides(e).map(e=>e.toString());return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}YH.registerFlag("HAS_WEBGL",()=>YH.getNumber("WEBGL_VERSION")>0),YH.registerFlag("WEBGL_VERSION",()=>VH(2)?2:VH(1)?1:0),YH.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),YH.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===YH.get("WEBGL_VERSION")),YH.registerFlag("WEBGL_CPU_FORWARD",()=>!0),YH.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),YH.registerFlag("WEBGL_PACK",()=>YH.getBool("HAS_WEBGL")),YH.registerFlag("WEBGL_PACK_NORMALIZATION",()=>YH.getBool("WEBGL_PACK")),YH.registerFlag("WEBGL_PACK_CLIP",()=>YH.getBool("WEBGL_PACK")),YH.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>YH.getBool("WEBGL_PACK")),YH.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>YH.getBool("WEBGL_PACK")),YH.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>YH.getBool("WEBGL_PACK")),YH.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>YH.getBool("WEBGL_PACK")),YH.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>YH.getBool("WEBGL_PACK")),YH.registerFlag("WEBGL_PACK_REDUCE",()=>YH.getBool("WEBGL_PACK")),YH.registerFlag("WEBGL_LAZILY_UNPACK",()=>YH.getBool("WEBGL_PACK")),YH.registerFlag("WEBGL_CONV_IM2COL",()=>YH.getBool("WEBGL_PACK")),YH.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>YH.getBool("WEBGL_PACK")),YH.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>PH(YH.getNumber("WEBGL_VERSION"))),YH.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>HH(YH.getNumber("WEBGL_VERSION"))),YH.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let e=YH.getNumber("WEBGL_VERSION");return 0===e?0:zH(e)}),YH.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>YH.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!pA.isMobile()),YH.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>GH(YH.getNumber("WEBGL_VERSION"))),YH.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!YH.getBool("WEBGL_FORCE_F16_TEXTURES")&&YH.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),YH.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>KH(YH.getNumber("WEBGL_VERSION"))),YH.registerFlag("WEBGL_FENCE_API_ENABLED",()=>XH(YH.getNumber("WEBGL_VERSION"))),YH.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>YH.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),YH.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if("number"!=typeof e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ".concat(e,"."))}),YH.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>pA.isMobile()?1:-1,e=>{if("number"!=typeof e)throw new Error("WEBGL_FLUSH_THRESHOLD must be a number but got ".concat(e,"."));if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ".concat(e,"."))}),YH.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),YH.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),YH.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),YH.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),YH.registerFlag("WEBGL_EXP_CONV",()=>!1),YH.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>YH.getBool("IS_TEST")),YH.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),YH.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),YH.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1),YH.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);var rz="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:az}=Tw;function iz(e,t,n){let r=[];if(e.forEach(e=>{let t=su.sizeFromShape(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){let{uniformShape:t}=fz(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(e=>{r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))});let a,i,s=r.join("\n"),o=e.map(e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?oz(e,r):sz(e,r);let i=e.shapeInfo.logicalShape,s=t.logicalShape;return i.length<=s.length&&(a+=n?function(e,t){let n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",s=e.shapeInfo.logicalShape.length,o=t.logicalShape.length,l=az(e.shapeInfo.logicalShape,t.logicalShape),c=pz(o),u=o-s,A=["x","y","z","w","u","v"];n=0===s?"":o<2&&l.length>=1?"coords = 0;":l.map(e=>"coords.".concat(A[e+u]," = 0;")).join("\n");let d="";d=o<2&&s>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords.".concat(A[t+u])).join(", ");let h="return outputValue;",p=1===su.sizeFromShape(e.shapeInfo.logicalShape),f=1===su.sizeFromShape(t.logicalShape);if(1!==s||p||f){if(p&&!f)h=1===o?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(l.length){let e=s-2,t=s-1;l.indexOf(e)>-1&&l.indexOf(t)>-1?h="return vec4(outputValue.x);":l.indexOf(e)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(t)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(d,");\n      ").concat(h,"\n    }\n  ")}(e,t):function(e,t){let n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,s=e.shapeInfo.texShape,o=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&o===l&&null==e.shapeInfo.flatOffset&&su.arraysEqual(s,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");let c,u=pz(l),A=az(e.shapeInfo.logicalShape,t.logicalShape),d=l-o,h=["x","y","z","w","u","v"];c=0===o?"":l<2&&A.length>=1?"coords = 0;":A.map(e=>"coords.".concat(h[e+d]," = 0;")).join("\n");let p="";return p=l<2&&o>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords.".concat(h[t+d])).join(", "),"\n    float ".concat(a,"() {\n      ").concat(u," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(p,");\n    }\n  ")}(e,t)),a}(e,t,n.packedInputs,n.enableShapeUniforms)).join("\n"),l=t.texShape,c=ZH(),u=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c),A=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(lz,"\n    ").concat(cz,"\n    ").concat(uz,"\n  ")}(c);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===r[0]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    "):1===r[1]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    "):n?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(su.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");let a=Math.ceil(e[1]/2);return n?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),s=i,o="",l="b, r, c";for(let c=2;c<e.length-1;c++)s*=e[e.length-c-1],o="\n      int b".concat(c," = index / ").concat(s,";\n      index -= b").concat(c," * ").concat(s,";\n    ")+o,l="b".concat(c,", ")+l;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(o,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(l,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,l,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){return 1===t[0]?n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    "):1===t[1]?n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    "):n?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){return su.arraysEqual(e,t)?n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    "):1===e[1]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    "):1===e[0]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    "):n?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(ez(["r","c","d"],e),"\n    return ivec3(r, c, d);\n  }\n");let r=$H(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(ez(["r","c","d","d2"],e),"\n      return ivec4(r, c, d, d2);\n    }\n  ");let r=$H(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){let n=$H(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){let n=$H(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,l,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(A+=Az),[A,u,i,s,a,o,n.userCode].join("\n")}function sz(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");let[a,i]=e.shapeInfo.texShape;if(1===a&&1===i)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");let s=dz(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");let[o,l]=e.shapeInfo.texShape;return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(o,", ").concat(l,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 1:return function(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(hz(e),"\n      }\n    ");let a=e.shapeInfo.texShape,i=a[0],s=a[1];if(1===s&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");let o=dz(n);return 1===s?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(o,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(o,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(o,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(o,") + 0.5) / ").concat(s,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(o,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(s,", index + ").concat(o,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){let n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&su.arraysEqual(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");let e=i[0],n=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(n,".0, ").concat(e,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}let{newShape:s,keptDims:o}=su.squeezeShape(n),l=s;if(l.length<n.length){let n=mz(e,l),r=["row","col"];return"\n      ".concat(sz(n,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(gz(r,o),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(hz(e),"\n      }\n    ");let c=i[0],u=i[1],A=dz(r);return 1===u?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(A,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(A,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(c,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===c?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(A,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(A,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(u,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(A,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(A,";\n    vec2 uv = uvFromFlat(").concat(c,", ").concat(u,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}(e,t);case 3:return function(e,t){let n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],s=n[2],{newShape:o,keptDims:l}=su.squeezeShape(n),c=o;if(c.length<n.length){let n=mz(e,c),r=["row","col","depth"];return"\n        ".concat(sz(n,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(gz(r,l),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(s,", 1)));\n        ").concat(hz(e),"\n      }\n    ");let u=e.shapeInfo.texShape,A=u[0],d=u[1],h=e.shapeInfo.flatOffset;if(d===i&&null==h)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(s,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(d,".0, ").concat(A,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(d===s&&null==h)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(d,".0, ").concat(A,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");let p=dz(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ").concat(p,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(s," + depth + ").concat(p,";\n        vec2 uv = uvFromFlat(").concat(A,", ").concat(d,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}(e,t);case 4:return function(e,t){let n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],s=n[2]*i,o=n[1]*s,{newShape:l,keptDims:c}=su.squeezeShape(n);if(l.length<n.length){let n=mz(e,l),r=["row","col","depth","depth2"];return"\n      ".concat(sz(n,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(gz(r,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(o,", ").concat(s,", ").concat(i,", 1)));\n        ").concat(hz(e),"\n      }\n    ");let u=e.shapeInfo.flatOffset,A=e.shapeInfo.texShape,d=A[0],h=A[1],p="int stride2 = ".concat(r,"Shape[3];"),f="int stride1 = ".concat(r,"Shape[2] * stride2;"),m="int stride0 = ".concat(r,"Shape[1] * stride1;");if(h===o&&null==u)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(p,"\n        ").concat(f,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(s,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(h,".0, ").concat(d,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(h===i&&null==u)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(h,".0, ").concat(d,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");let g=dz(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(p,"\n      ").concat(f,"\n      ").concat(m,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(g,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(o," + col * ").concat(s," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(d,", ").concat(h,", index + ").concat(g,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}(e,t);case 5:return function(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,s=t[2]*i,o=t[1]*s,{newShape:l,keptDims:c}=su.squeezeShape(t);if(l.length<t.length){let t=mz(e,l),n=["row","col","depth","depth2","depth3"];return"\n      ".concat(sz(t),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(gz(n,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(o,", ").concat(s,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(hz(e),"\n      }\n    ");let u=e.shapeInfo.flatOffset,A=e.shapeInfo.texShape,d=A[0],h=A[1];if(h===o&&null==u)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(s,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(h,".0, ").concat(d,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(h===a&&null==u)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(h,".0, ").concat(d,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");let p=dz(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(o," + col * ").concat(s," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(p,";\n      vec2 uv = uvFromFlat(").concat(d,", ").concat(h,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);case 6:return function(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:a,keptDims:i}=su.squeezeShape(t);if(a.length<t.length){let t=mz(e,a),n=["row","col","depth","depth2","depth3","depth4"];return"\n      ".concat(sz(t),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(gz(n,i),");\n      }\n    ")}let s=t[5],o=t[4]*s,l=t[3]*o,c=t[2]*l,u=t[1]*c;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(u,", ").concat(c,", ").concat(l,", ").concat(o,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(s,", 1)));\n        ").concat(hz(e),"\n      }\n    ");let A=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],p=d[1];if(p===u&&null==A)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(c,", ").concat(l,", ").concat(o,", ").concat(s,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(p===s&&null==A)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(p,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");let f=dz(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(u," + col * ").concat(c," + depth * ").concat(l," +\n          depth2 * ").concat(o," + depth3 * ").concat(s," + depth4 + ").concat(f,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}(e);default:throw new Error("".concat(n.length,"-D input sampling is not yet supported"))}}function oz(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){let t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=ZH();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=ZH();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");let s=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(s[0],", ").concat(s[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){let n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,s=i[0],o=i[1],l=ZH();if(null!=i&&su.arraysEqual(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(o,".0, ").concat(s,".0);\n\n        return ").concat(l.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");let c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(u,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){let n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,s=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){let r=[1,2],i=mz(e,n.slice(1)),s=["b","row","col"];return"\n        ".concat(oz(i,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(gz(s,r),");\n        }\n      ")}let o=ZH();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(o.texture2D,"(").concat(r,", uv);\n    }\n  ");let l=s[0],c=s[1],u=Math.ceil(n[2]/2),A=u*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(l,", ").concat(c,", ").concat(A,", ").concat(u,", b, row, col);\n      return ").concat(o.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=ZH();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");let i=e.shapeInfo.logicalShape,s=i.length,o=e.shapeInfo.texShape,l=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=l[0],u=l[1],A=Math.ceil(i[s-1]/2),d=A*Math.ceil(i[s-2]/2),h="int b, int row, int col",p="b * ".concat(d," + (row / 2) * ").concat(A," + (col / 2)");for(let f=2;f<s-1;f++)h="int b".concat(f,", ")+h,d*=i[s-f-1],p="b".concat(f," * ").concat(d," + ")+p;return"\n    vec4 ".concat(r,"(").concat(h,") {\n      int index = ").concat(p,";\n      int texR = index / ").concat(u,";\n      int texC = index - texR * ").concat(u,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(u,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var lz="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",cz="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",uz="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Az="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function dz(e){return"offset".concat(e)}function hz(e){let t=e.name,n=su.sizeFromShape(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function pz(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function fz(e,t,n){let{newShape:r,keptDims:a}=su.squeezeShape(t),i=t.length,s=e&&3===i&&1===t[0],o=s?t.slice(1):r,l=!e&&i>1&&!su.arraysEqual(t,n)&&r.length<i||s;return{useSqueezeShape:l,uniformShape:l?o:t,keptDims:a}}function mz(e,t){let n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function gz(e,t){return t.map(t=>e[t]).join(", ")}function yz(e,t,n){let r,a,i,s=[],o=[],l=null,c=null;c=e.getUniformLocation(n,"NAN",!1),1===Cs().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(n,"INFINITY",!1));let u=!1;for(let A of t.variableNames){let r={name:A,uniform:e.getUniformLocation(n,A,u),offset:e.getUniformLocation(n,"offset".concat(A),u)};t.enableShapeUniforms&&(r.shape=e.getUniformLocation(n,"".concat(A,"Shape"),u),r.texShape=e.getUniformLocation(n,"".concat(A,"TexShape"),u)),s.push(r)}if(t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",u),i=e.getUniformLocation(n,"outShapeStrides",u),a=e.getUniformLocation(n,"outTexShape",u)),t.customUniforms)for(let A of t.customUniforms)o.push(e.getUniformLocation(n,A.name,u));return{variablesLocations:s,customUniformLocations:o,infLoc:l,nanLoc:c,outShapeLocation:r,outShapeStridesLocation:i,outTexShapeLocation:a}}function bz(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but was executed with ").concat(t.length," inputs"));e.forEach((e,n)=>{let r=e.logicalShape,a=t[n],i=a.shape;if(!su.arraysEqual(r,i))throw Error("Binary was compiled with different shapes than the current args. Shapes ".concat(r," and ").concat(i," must match"));if(e.isUniform&&a.isUniform)return;let s=e.texShape,o=a.isUniform?null:a.texData.texShape;if(!su.arraysEqual(s,o))throw Error("Binary was compiled with different texture shapes than the current args. Shape ".concat(s," and ").concat(o," must match"))})}function wz(e){return Cs().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var vz=class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Hj.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let t=ZH();this.outputShape=e,this.enableShapeUniforms=wz(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?ez(["r","c","d"],e):$H(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}},xz=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Hj.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let t=ZH();this.outputShape=e,this.enableShapeUniforms=wz(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?ez(["r","c","d"],e):$H(["r","c","d"],e),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}},Cz=class{constructor(e){this.variableNames=["A"],this.outTexUsage=zj.DOWNLOAD;let t=ZH();this.outputShape=e,this.userCode="\n      ".concat(rz,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}},kz=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=zj.DOWNLOAD;let t=ZH();this.outputShape=e,this.userCode="\n      ".concat(rz,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(t.output," = encode_float(x);\n      }\n    ")}},Bz={R:0,G:1,B:2,A:3},Sz=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RGBA";this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let r=ZH();this.outputShape=e,this.enableShapeUniforms=wz(this.outputShape.length);let a="result";t&&(a="floor(result * 255. + 0.5)");let i="";for(let s=0;s<n.length;s++){let e=n[s];i+="\n          if(offset == ".concat(s,") {\n            result = values[").concat(Bz[e],"];\n          }")}this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":nz(e),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ").concat(n.length,");\n\n        flatIndex = idiv(flatIndex, ").concat(n.length,", 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ").concat(r.texture2D,"(A, uv);\n          ").concat(i,"\n        }\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")}},Iz=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=ZH();this.outputShape=e,this.enableShapeUniforms=wz(this.outputShape.length);let r="",a="result";t&&(a="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let t=0;t<=1;t++){let a=2*i+t;r+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(t," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(e[2]),") {\n          localCoords[2] += ").concat(t,";\n          if (localCoords[1] + ").concat(i," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(e[1]),") {\n            localCoords[1] += ").concat(i,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(n.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(a,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(a,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(a,"] = values[2];\n            } else {\n              result[").concat(a,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":nz(e),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(r,"\n\n          ").concat(n.output," = ").concat(a,";\n        }\n    ")}},Nz={};function Fz(e){let t=ZH();return iH(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function Ez(e){return pH(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function _z(e){return fH(e,new Uint16Array([0,1,2,2,1,3]))}function Tz(e,t,n,r,a,i){yH(t,n);let s=gH(e),o=e.TEXTURE_2D;return $j(e,()=>e.bindTexture(o,s)),$j(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),$j(e,()=>e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),$j(e,()=>e.texParameteri(o,e.TEXTURE_MIN_FILTER,e.NEAREST)),$j(e,()=>e.texParameteri(o,e.TEXTURE_MAG_FILTER,e.NEAREST)),1===Cs().getNumber("WEBGL_VERSION")?$j(e,()=>e.texImage2D(o,0,r,t,n,0,a,i,null)):$j(e,()=>e.texStorage2D(o,1,r,t,n)),$j(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:s,texShape:[n,t]}}function Lz(e){return e.internalFormatFloat}function Dz(e,t,n,r){let[a,i]=Xj(t,n);return Tz(e,a,i,Lz(r),r.textureFormatFloat,e.FLOAT)}function Rz(e){return e.internalFormatHalfFloat}function Uz(e,t,n,r){let[a,i]=Xj(t,n);return Tz(e,a,i,Rz(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function Oz(e){return e.downloadTextureFormat}function Mz(e,t,n,r){let[a,i]=Xj(t,n);return Tz(e,a,i,Oz(r),e.RGBA,e.UNSIGNED_BYTE)}function Pz(e){return e.internalFormatPackedFloat}function Qz(e,t,n,r){let[a,i]=Yj(t,n);return Tz(e,a,i,Pz(r),e.RGBA,e.FLOAT)}function jz(e){return e.internalFormatPackedHalfFloat}function Hz(e,t,n,r){let[a,i]=Yj(t,n);return Tz(e,a,i,jz(r),e.RGBA,r.textureTypeHalfFloat)}function zz(e,t,n){return $j(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),wH(e,t,"clipSpacePos",n,3,20,0)&&wH(e,t,"uv",n,2,20,12)}function Wz(e,t,n,r,a,i){let s,o,l;$j(e,()=>e.bindTexture(e.TEXTURE_2D,t)),a instanceof Uint8Array?(s=new Uint8Array(n*r*4),o=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(n*r*4),o=e.FLOAT,l=i.internalFormatPackedFloat),s.set(a),2===Cs().getNumber("WEBGL_VERSION")?$j(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,o,s)):$j(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,o,s)),$j(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function Vz(e,t,n){$j(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?2===Cs().getNumber("WEBGL_VERSION")?$j(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):$j(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):2===Cs().getNumber("WEBGL_VERSION")?$j(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):$j(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),$j(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function Gz(e,t,n,r){let a=e.createBuffer();$j(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,a));let i=16*t*n;return $j(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)),$j(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),$j(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),a}function Kz(e,t,n){let r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function qz(e,t,n,r){let[a,i]=Xj(t,n),s=new Uint8Array(function(e,t){return e*t}(t*n,4));return $j(e,()=>e.readPixels(0,0,a,i,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)),new Float32Array(s.buffer)}function Xz(e,t,n,r,a,i,s,o){let l=e,c=new Float32Array(function(e,t){let[n,r]=Yj(e,t);return n*r*4}(i,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function Jz(e,t,n){let r=new Float32Array(t*n*4);return $j(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}ei(Nz,{bindVertexProgramAttributeStreams:()=>zz,createBufferFromOutputTexture:()=>Gz,createFloat16MatrixTexture:()=>Uz,createFloat16PackedMatrixTexture:()=>Hz,createFloat32MatrixTexture:()=>Dz,createIndexBuffer:()=>_z,createPackedMatrixTexture:()=>Qz,createUnsignedBytesMatrixTexture:()=>Mz,createVertexBuffer:()=>Ez,createVertexShader:()=>Fz,downloadByteEncodedFloatMatrixFromOutputTexture:()=>qz,downloadFloat32MatrixFromBuffer:()=>Kz,downloadMatrixFromPackedOutputTexture:()=>Jz,downloadPackedMatrixFromBuffer:()=>Xz,getInternalFormatForFloat16MatrixTexture:()=>Rz,getInternalFormatForFloat16PackedMatrixTexture:()=>jz,getInternalFormatForFloat32MatrixTexture:()=>Lz,getInternalFormatForPackedMatrixTexture:()=>Pz,getInternalFormatForUnsignedBytesMatrixTexture:()=>Oz,uploadDenseMatrixToTexture:()=>Wz,uploadPixelDataToTexture:()=>Vz});var Yz=class{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let t=Cs().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,Kj(t,e)):this.gl=qj(t),e=this.gl,2===Cs().getNumber("WEBGL_VERSION")){let t=e;this.createVertexArray=()=>$j(t,()=>t.createVertexArray()),this.bindVertexArray=e=>$j(t,()=>t.bindVertexArray(e)),this.deleteVertexArray=e=>$j(t,()=>t.deleteVertexArray(e)),this.getVertexArray=()=>$j(t,()=>t.getParameter(t.VERTEX_ARRAY_BINDING))}else if(null!=e){let t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>$j(e,()=>t.createVertexArrayOES()),this.bindVertexArray=n=>$j(e,()=>t.bindVertexArrayOES(n)),this.deleteVertexArray=n=>$j(e,()=>t.deleteVertexArrayOES(n)),this.getVertexArray=()=>$j(e,()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES))}let n="WEBGL_color_buffer_float",r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===Cs().getNumber("WEBGL_VERSION")){let e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=aH(this.gl,e),WH(this.gl,t))this.textureHalfFloatExtension=aH(this.gl,t);else if(Cs().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),WH(this.gl,r))this.colorBufferHalfFloatExtension=aH(this.gl,r);else if(Cs().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",WH(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!WH(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=Ez(this.gl),this.indexBuffer=_z(this.gl),this.framebuffer=bH(this.gl),this.textureConfig=Zj(this.gl,this.textureHalfFloatExtension)}get debug(){return Cs().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let e=this.gl;$j(e,()=>e.finish()),$j(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),$j(e,()=>e.deleteFramebuffer(this.framebuffer)),$j(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),$j(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),$j(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),Dz(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),Uz(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),Mz(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),Vz(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),Wz(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),Hz(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),Qz(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(NH(this.gl,this.framebuffer),this.outputTexture=null),$j(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,()=>qz(this.gl,t,n,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,n,r,a,i){return Xz(this.gl,e,0,0,0,a,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return Kz(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);let r=Gz(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){let e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(Cs().getBool("WEBGL_FENCE_API_ENABLED")){let r=e,a=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{let e=r.clientWaitSync(a,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=a}else Cs().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,Cs().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,()=>Jz(this.gl,t,n))}createProgram(e){this.throwIfDisposed();let t=this.gl;null==this.vertexShader&&(this.vertexShader=Fz(t));let n=AH(t);$j(t,()=>t.attachShader(n,this.vertexShader)),$j(t,()=>t.attachShader(n,e)),dH(t,n);let r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&hH(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);let t=this.gl;$j(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),zz(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&($j(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&hH(this.gl,this.program),$j(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?CH(this.gl,e,t):kH(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),$j(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),BH(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();let[r,a]=Yj(t,n);this.setOutputMatrixTextureDriver(e,r,a)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&hH(this.gl,this.program),FH(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let e=this.gl;if(this.debug){let e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}$j(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),$j(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=aH(this.gl,2===Cs().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Cs().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){let e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}let e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===Cs().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){let e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}let e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await su.repeatedTry(()=>this.disposed||this.isQueryAvailable(e,Cs().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,Cs().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){let t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{let t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){let t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{let t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){let e=function(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){let{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in Cs().platform&&(n=Cs().platform.setTimeoutCustom.bind(Cs().platform)),su.repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length),()=>0,null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),IH(this.gl,e,this.framebuffer),this.debug&&FH(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(IH(this.gl,this.outputTexture,this.framebuffer),this.debug&&FH(this.gl)):NH(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);let n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();let r=this.gl;IH(r,e,this.framebuffer),this.debug&&FH(r),this.outputTexture=e,$j(r,()=>r.viewport(0,0,t,n)),$j(r,()=>r.scissor(0,0,t,n))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),$j(this.gl,()=>this.gl.scissor(e,t,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}};var{addImpl:Zz,bincountImpl:$z,bincountReduceImpl:eW,bitwiseAndImpl:tW,castImpl:nW,ceilImpl:rW,concatImpl:aW,equalImpl:iW,expImpl:sW,expm1Impl:oW,floorImpl:lW,gatherNdImpl:cW,gatherV2Impl:uW,greaterImpl:AW,greaterEqualImpl:dW,lessImpl:hW,lessEqualImpl:pW,linSpaceImpl:fW,logImpl:mW,maxImpl:gW,maximumImpl:yW,minimumImpl:bW,multiplyImpl:wW,negImpl:vW,notEqualImpl:xW,prodImpl:CW,raggedGatherImpl:kW,raggedRangeImpl:BW,raggedTensorToTensorImpl:SW,rangeImpl:IW,rsqrtImpl:NW,scatterImpl:FW,sigmoidImpl:EW,simpleAbsImpl:_W,sliceImpl:TW,sparseFillEmptyRowsImpl:LW,sparseReshapeImpl:DW,sparseSegmentReductionImpl:RW,sqrtImpl:UW,staticRegexReplaceImpl:OW,stridedSliceImpl:MW,stringNGramsImpl:PW,stringSplitImpl:QW,stringToHashBucketFastImpl:jW,subImpl:HW,tileImpl:zW,topKImpl:WW,transposeImpl:VW,uniqueImpl:GW}=oR;function KW(e,t){return["x","y","z","w","u","v"].slice(0,t).map(t=>"".concat(e,".").concat(t))}function qW(e,t){return 1===t?[e]:KW(e,t)}var XW=class{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=wz(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{let e=qW("rc",this.rank),t=pz(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),a=this.getOutput(e);this.userCode="\n        void main() {\n          ".concat(t," rc = getOutputCoords();\n\n          if(").concat(n,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(r,"\n\n            setOutput(vec4(").concat(a,"));\n          }\n        }\n      ")}}getSourceCoordsArr(e){let t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1");for(let t=2;t<this.rank;t++)a="".concat(e[e.length-1-t],",")+a;t.push(a)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);let t="";for(let n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";let t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}getOutput(e){let t=this.getSourceCoordsArr(e);return 1===this.rank?"getA(rc), (rc + 1 >= ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]," ? 0. : getA(rc + 1)), 0, 0"):"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}},JW=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=wz(this.outputShape.length);let n="";for(let r=0;r<4;r++){let e="thisRC = rc;";r%2===1&&(e+="thisRC.z += 1;"),r>1&&(e+="thisRC.y += 1;"),n+="\n        ".concat(e,"\n        ").concat(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(r,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(r>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(t?tz(["r","c","d"],"inputShape"):$H(["r","c","d"],e),"\n      return ivec3(r, c, d);\n    }\n  ")}(t,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":nz(e),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":e[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":e[2],";\n\n        ").concat(n,"\n\n        setOutput(result);\n      }\n    ")}};var YW=class{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){let r=$W(t,n),a=eV(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);let i,s=ZW(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();let e=this.freeTextures[a].pop();return this.usedTextures[a].push(e),e}return r===Wj.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===Wj.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===Wj.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===Wj.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===Wj.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),i}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;let a=$W(n,r),i=eV(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);let s=ZW(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),o=Cs().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==o&&this._numBytesAllocated>o?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=s):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;let l=this.usedTextures[i],c=l&&l.indexOf(e);if(null==c||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[c]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;let e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));let t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(let e in this.freeTextures)this.freeTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(let e in this.usedTextures)this.usedTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function ZW(e,t,n,r,a){let i,s=function(e,t){switch(e){case Wj.PACKED_2X2_FLOAT32:return Pz(t);case Wj.PACKED_2X2_FLOAT16:return jz(t);case Wj.UNPACKED_FLOAT32:return Lz(t);case Wj.UNPACKED_FLOAT16:return Rz(t);case Wj.PACKED_4X1_UNSIGNED_BYTE:return Oz(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){let[t,n]=Yj(e[0],e[1]);i=t*n}else{let[t,n]=Xj(e[0],e[1]);i=t*n}let o=function(e,t){let n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F||t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,s);return i*o}function $W(e,t){if(e===zj.UPLOAD)return Wj.PACKED_2X2_FLOAT32;if(e===zj.RENDER||null==e)return function(e){return Cs().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Wj.PACKED_2X2_FLOAT32:Wj.UNPACKED_FLOAT32:e?Wj.PACKED_2X2_FLOAT16:Wj.UNPACKED_FLOAT16}(t);if(e===zj.DOWNLOAD||e===zj.PIXELS)return Wj.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function eV(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var tV=class{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=wz(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}},nV="if (isnan(x)) return x;",rV="return abs(x);",aV=nV+"\n  return (x < 0.0) ? 0.0 : x;\n",iV=nV+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",sV="return x;",oV=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=wz(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")}},lV=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=wz(this.outputShape.length);let t=e.length,n=qW("rc",t),r=pz(t),a=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),i=n.slice(-2),s=t<=1?"rc":"vec2(".concat(i.join(","),")");this.userCode="\n      void main() {\n        ".concat(r," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(a,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")}},cV=Mv.whereImpl,uV={};var AV=Cs().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var dV=class e extends ki{nextDataId(){return e.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Cs().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof Yz)t=e;else{let n=qj(Cs().getNumber("WEBGL_VERSION"),e);t=new Yz(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let e=qj(Cs().getNumber("WEBGL_VERSION"));t=new Yz(e),this.binaryCache=function(e){return e in uV||(uV[e]={}),uV[e]}(Cs().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new YW(this.gpgpu),this.numMBBeforeWarning=null==Cs().global.screen?1024:Cs().global.screen.height*Cs().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new Ci(this,UA())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,r,a,i){let s=this.makeTensorInfo(t,n),o=this.texData.get(s.dataId);o.isPacked=!1,o.texture={texture:e,texShape:[r,a]},o.texShape=[r,a];let l=RH(t),c=new Sz(l,!1,i),u=this.runWebGLProgram(c,[s],n,[[r,a]]);return u.shape=t,o.texture=null,this.disposeIntermediateTensorInfo(s),u.dataId}write(e,t,n){if((Cs().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Cs().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:zj.UPLOAD,refCount:1}),r}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,r,a){if(Cs().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:zj.UPLOAD,refCount:a})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){let t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:a,slice:i,shape:s,isPacked:o}=t;if(null!=i){let t;t=o?new oV(s,sV):new tV(s,sV);let n=this.runWebGLProgram(t,[{dataId:e,shape:s,dtype:r}],r),a=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;let l,c,u=null!=this.activeTimers;if(u&&(l=su.now()),"complex64"===r){let e=this.readSync(a.real.dataId),t=this.readSync(a.imag.dataId);c=Tw.mergeRealAndImagArrays(e,t)}else c=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=su.now()-l),this.convertAndCacheOnCPU(e,c)}async read(e){if(this.pendingRead.has(e)){let t=this.pendingRead.get(e);return new Promise(e=>t.push(e))}let t=this.texData.get(e),{values:n,shape:r,slice:a,dtype:i,complexTensorInfos:s,isPacked:o}=t;if(null!=a){let t;t=o?new oV(r,sV):new tV(r,sV);let n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:i}],i),a=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),a}if(null!=n)return this.convertAndCacheOnCPU(e);if(Cs().getBool("DEBUG")&&!Cs().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Cs().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,c,u=null;if("complex64"!==i&&Cs().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);let t=this.texData.get(l.dataId);u=this.gpgpu.createBufferFromTexture(t.texture.texture,...Jj(r))}if(this.pendingRead.set(e,[]),"complex64"!==i&&await this.gpgpu.createAndWaitForFence(),"complex64"===i){let e=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]),t=e[0],n=e[1];c=Tw.mergeRealAndImagArrays(t,n)}else if(null==u)c=this.getValuesFromTexture(e);else{let e=su.sizeFromShape(r);c=this.gpgpu.downloadFloat32MatrixFromBuffer(u,e)}if(null!=l&&this.disposeIntermediateTensorInfo(l),null!=u){let e=this.gpgpu.gl;$j(e,()=>e.deleteBuffer(u))}let A=this.convertAndCacheOnCPU(e,c),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach(e=>e(A)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&UA().removeDataId(e,this),this.pendingDeletes--),A}readToGPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),{values:r,shape:a,slice:i,dtype:s,isPacked:o,texture:l}=n;if("complex64"===s)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){let n;n=o?new oV(a,sV):new tV(a,sV);let r=this.runWebGLProgram(n,[{dataId:e,shape:a,dtype:s}],s),i=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),i}if(null==l)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let c=this.decode(e,t.customTexShape),u=UA().makeTensorFromTensorInfo(c),A=this.texData.get(c.dataId);return Object.assign({tensorRef:u},A.texture)}bufferSync(e){let t=this.readSync(e.dataId);if("string"===e.dtype)try{let n=t.map(e=>su.decodeString(e));return Xd(e.shape,e.dtype,n)}catch(mt){throw new Error("Failed to decode encoded string bytes into utf-8")}return Xd(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){let n=e[t];if(!nH(n))throw Cs().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value ".concat(n," cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'")):Error("The value ".concat(n," cannot be represented on this device."))}}getValuesFromTexture(e){let{shape:t,dtype:n,isPacked:r}=this.texData.get(e),a=su.sizeFromShape(t);if(Cs().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let n=this.decode(e),r=this.texData.get(n.dataId),i=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...Jj(t)).subarray(0,a);return this.disposeIntermediateTensorInfo(n),i}let i=Cs().getBool("WEBGL_PACK")&&!0===r,s=i?RH(t):t,o=i?new kz(s):new Cz(s),l=this.runWebGLProgram(o,[{shape:s,dtype:n,dataId:e}],"float32"),c=this.texData.get(l.dataId),u=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,a);return this.disposeIntermediateTensorInfo(l),u}timerAvailable(){return Cs().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){let t=this.activeTimers,n=[],r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();let a=su.flatten(this.activeTimers.map(e=>e.query)).filter(e=>null!=e),i=su.flatten(this.activeTimers.map(e=>e.name)).filter(e=>null!=e);this.activeTimers=t,r&&(this.programTimersStack=null);let s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Cs().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let e=await Promise.all(a);s.kernelMs=su.sum(e),s.getExtraProfileInfo=()=>e.map((e,t)=>({name:i[t],ms:e})).map(e=>"".concat(e.name,": ").concat(e.ms)).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Cs().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:su.now(),endMs:null}}endTimer(e){return Cs().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=su.now(),e)}async getQueryTime(e){if(Cs().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);let t=e;return t.endMs-t.startMs}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);let{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){let{texture:t,dtype:n,texShape:r,usage:a,isPacked:i,slice:s}=this.texData.get(e),o=s&&s.origDataId||e,l=this.dataRefCount.get(o);l>1?this.dataRefCount.set(o,l-1):(this.dataRefCount.delete(o),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,a,i)));let c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:AV;return Cs().getBool("WEBGL_CPU_FORWARD")&&e.every(e=>null==this.texData.get(e.dataId).texture&&su.sizeFromShape(e.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){Tw.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let t=e.dataSync();return cV(e.shape,t)}packedUnaryOp(e,t,n){let r=new oV(e.shape,t),a=this.compileAndRun(r,[e],n);return UA().makeTensorFromTensorInfo(a)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){let t=_W(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Cs().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,rV,e.dtype);let t=new tV(e.shape,rV),n=this.compileAndRun(t,[e]);return UA().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&su.isString(n[0])){let a=n.map(e=>su.encodeString(e));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return UA().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){let t=new lV(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){let t=new XW(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){let n=[LH(e.shape),...DH(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[LH(t),...DH(t)],i=new JW(a,n),s=[n],o=this.runWebGLProgram(i,[r],e.dtype,s,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}}decode(e,t){let n=this.texData.get(e),{isPacked:r,shape:a,dtype:i}=n;if(null!=t){let e=su.sizeFromShape(a),n=t[0]*t[1]*4;su.assert(e<=n,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let s,o=RH(a);s=r?new xz(o):new vz(o);let l=[null!=t?t:Jj(o)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(s,[{shape:o,dtype:i,dataId:e}],i,l,!0,t).dataId}}runWebGLProgram(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),o=this.texData.get(s.dataId);if(e.packedOutput&&(o.isPacked=!0),e.outPackingScheme===Hj.DENSE){let t=null!=i?i:Jj(e.outputShape);o.texShape=t.map(e=>2*e)}if(null!=e.outTexUsage&&(o.usage=e.outTexUsage),0===su.sizeFromShape(s.shape))return o.values=su.getTypedArrayFromDType(s.dtype,0),s;let l=[],c=t.map(t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&su.sizeFromShape(t.shape)<=Cs().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!=!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),l.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!MH(n.shape,t.shape)){let e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),l.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}});this.uploadToGPU(s.dataId);let u,A={shape:s.shape,texData:o,isUniform:!1},d=function(e,t,n){let r="";t.concat(n).forEach(t=>{let a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){let i=t.texData.texShape,{useSqueezeShape:s,uniformShape:o,keptDims:l}=fz(e.packedInputs,t.shape,i),c="",u="",A="";if(1===o.length&&e.packedInputs){let e=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];c="".concat(e[0]>1,"_").concat(e[1]>1)}else if(2!==o.length||e.packedInputs){if(o.length>2&&!e.packedInputs){let e=su.computeStrides(o);A="".concat(e[0]===i[1],"_").concat(e[e.length-1]===i[1])}}else u="".concat(o[0]>1,"_").concat(o[1]>1);let d=t.shape.length,h=2===o.length&&su.arraysEqual(t.shape,i),p=1===su.sizeFromShape(t.shape),f=Tw.getBroadcastDims(t.shape,n.shape),m=!e.packedInputs&&d===n.shape.length&&su.arraysEqual(i,n.texData.texShape),g=e.packedInputs||o.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(d,"_").concat(m,"_").concat(s?l:"","_").concat(o.length,"_").concat(p,"_").concat(f,"_").concat(h,"_").concat(c,"_").concat(u,"_").concat(A,"_").concat(g,"_").concat(a)}else{let e=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(e,"_").concat(a)}});let a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a+"".concat(Cs().getNumber("WEBGL_VERSION")),i}(e,c,A),h=this.getAndSaveBinary(d,()=>function(e,t,n,r){let a=n.map((e,n)=>{let r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}}),i=a.map(e=>e.shapeInfo),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},o=iz(a,s,t),l=sH(e.gl,o),c=e.createProgram(l);return Cs().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:i,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(c),Object.assign({program:t,fragmentShader:l,source:o,webGLProgram:c,inShapeInfos:i,outShapeInfo:s},yz(e,t,c)))}(this.gpgpu,e,c,A)),p=null!=this.activeTimers;p&&(u=this.startTimer()),Cs().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,a){t.program.enableShapeUniforms||(bz(t.inShapeInfos,n),bz([t.outShapeInfo],[r]));let i=r.texData.texture,s=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,s[0],s[1]):e.setOutputMatrixTexture(i.texture,s[0],s[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===Cs().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<n.length;++l){let r=n[l],{uniform:a,offset:i,shape:s,texShape:o}=t.variablesLocations[l];if(s){let{uniformShape:n}=fz(t.program.packedInputs,r.shape,r.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(s,new Int32Array(n));break;case 2:e.gl.uniform2iv(s,new Int32Array(n));break;case 3:e.gl.uniform3iv(s,new Int32Array(n));break;case 4:e.gl.uniform4iv(s,new Int32Array(n))}}if(o&&e.gl.uniform2i(o,r.texData.texShape[0],r.texData.texShape[1]),null!=a){if(r.isUniform){if(su.sizeFromShape(r.shape)<2)e.gl.uniform1f(a,r.uniformValues[0]);else{let t=r.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(a,t)}continue}null!=r.texData.slice&&null!=i&&e.gl.uniform1i(i,r.texData.slice.flatOffset),e.setInputMatrixTexture(r.texData.texture.texture,a,l)}}let o=t.outShapeLocation;if(o)switch(r.shape.length){case 1:e.gl.uniform1iv(o,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(o,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(o,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(o,new Int32Array(r.shape))}if(t.outShapeStridesLocation){let n=su.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a)for(let l=0;l<t.program.customUniforms.length;++l){let n=t.program.customUniforms[l],r=t.customUniformLocations[l],i=a[l];if("float"===n.type)e.gl.uniform1fv(r,i);else if("vec2"===n.type)e.gl.uniform2fv(r,i);else if("vec3"===n.type)e.gl.uniform3fv(r,i);else if("vec4"===n.type)e.gl.uniform4fv(r,i);else if("int"===n.type)e.gl.uniform1iv(r,i);else if("ivec2"===n.type)e.gl.uniform2iv(r,i);else if("ivec3"===n.type)e.gl.uniform3iv(r,i);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(r,i)}}e.executeProgram()}(this.gpgpu,h,c,A,r),l.forEach(e=>this.disposeIntermediateTensorInfo(e)),p&&(u=this.endTimer(u),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(u)}));let f=Cs().getNumber("WEBGL_FLUSH_THRESHOLD");if(f>0){let e=su.now();e-this.lastGlFlushTime>f&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!Cs().getBool("WEBGL_LAZILY_UNPACK")&&o.isPacked&&!1===a){let e=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),e}return s}compileAndRun(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,a)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Cs().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=PA(()=>{if(!Cs().get("WEBGL_RENDER_FLOAT32_ENABLED")){let e=Cs().getBool("DEBUG");Cs().set("DEBUG",!1);let t=this.abs(zp(1e-8)).dataSync()[0];if(Cs().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){let t=this.texData.get(e),{shape:n,dtype:r,values:a,texture:i,usage:s,isPacked:o}=t;if(null!=i)return;let l,c=null!=this.activeTimers;c&&(l=su.now());let u=t.texShape;if(null==u&&(u=UH(n,o),t.texShape=u),null!=a){let e,i=RH(n),s=u[1],A=u[0],d=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(o||!d)&&([s,A]=Yj(u[0],u[1])),e=o?new Iz(i,d):new Sz(i,d);let h=d?[A,s]:u,p=this.makeTensorInfo(h,r),f=this.texData.get(p.dataId);f.usage=d?zj.PIXELS:zj.UPLOAD,f.texShape=h,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(p.dataId),s,A,a);let m=[[A,s]],g=this.runWebGLProgram(e,[p],r,m,!0),y=this.texData.get(g.dataId);t.texShape=y.texShape,t.isPacked=y.isPacked,t.usage=y.usage,Cs().get("ENGINE_COMPILE_ONLY")?this.disposeData(g.dataId):(t.texture=y.texture,t.values=null,this.texData.delete(g.dataId)),this.disposeIntermediateTensorInfo(p),c&&(this.uploadWaitMs+=su.now()-l)}else{let e=this.acquireTexture(u,s,r,o);t.texture=e}}convertAndCacheOnCPU(e,t){let n=this.texData.get(e),{dtype:r}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){let n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){let e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(e," MB, most likely due to a memory leak"))}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*su.bytesPerElement(t)}checkCompileCompletion(){for(let[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){let e=[];if(this.gpgpu.parallelCompilationExtension){for(let[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(let[,t]of Object.entries(this.binaryCache)){let n=new Promise(e=>{try{this.checkCompletion_(t),e(!0)}catch(yt){throw yt}});e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await Ew(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS))throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)?(uH(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);let{variablesLocations:t,customUniformLocations:n,infLoc:r,nanLoc:a,outShapeLocation:i,outShapeStridesLocation:s,outTexShapeLocation:o}=yz(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=a,e.outShapeLocation=i,e.outShapeStridesLocation=s,e.outTexShapeLocation=o}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";let{texture:r,height:a,width:i,channels:s}=e,o=UA().backend;if(!o.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let l=o.writeTexture(r,t,n,a,i,s);return UA().makeTensorFromDataId(l,t,n,o)}};dV.nextDataId=0;var hV="4.22.0";function pV(){Cs().set("WEBGL_FORCE_F16_TEXTURES",!0)}pA.isBrowser()&&XA("webgl",()=>new dV,2);var fV={forceHalfFloat:pV},mV="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n",gV=class{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=Tw.assertAndGetBroadcastShape(t,n),this.enableShapeUniforms=wz(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")}},yV="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n",bV=class{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Tw.assertAndGetBroadcastShape(t,n);let a=this.outputShape.length;this.enableShapeUniforms=wz(a);let i="";if(r)if(0===a||1===su.sizeFromShape(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(i="\n          ".concat(pz(a)," coords = getOutputCoords();\n        "),1===a)this.enableShapeUniforms?i+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":i+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{let e=qW("coords",a);this.enableShapeUniforms?i+="\n            bool nextRowOutOfBounds =\n              (".concat(e[a-2]," + 1) >= outShape[").concat(a," - 2];\n            bool nextColOutOfBounds =\n              (").concat(e[a-1]," + 1) >= outShape[").concat(a," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):i+="\n            bool nextRowOutOfBounds =\n              (".concat(e[a-2]," + 1) >= ").concat(this.outputShape[a-2],";\n            bool nextColOutOfBounds =\n              (").concat(e[a-1]," + 1) >= ").concat(this.outputShape[a-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(e,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(i,"\n\n        setOutput(result);\n      }\n    ")}};function wV(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var vV={kernelName:Vo,backendName:"webgl",kernelFunc:wV};function xV(e){let{inputs:t,backend:n}=e,{real:r,imag:a}=t,i=n.makeTensorInfo(r.shape,"complex64"),s=n.texData.get(i.dataId),o=wV({inputs:{x:r},backend:n}),l=wV({inputs:{x:a},backend:n});return s.complexTensorInfos={real:o,imag:l},i}var CV={kernelName:to,backendName:"webgl",kernelFunc:xV},kV="return (a < 0.) ? b * a : a;",BV="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var SV={kernelName:Yo,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{alpha:i}=r,s=n.makeTensorInfo([],"float32",su.createScalarValue(i,"float32")),o=Cs().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bV(BV,a.shape,s.shape):new gV(kV,a.shape,s.shape),l=n.runWebGLProgram(o,[a,s],"float32");return n.disposeIntermediateTensorInfo(s),l}},IV="return (a < 0.) ? b * a : a;",NV="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var FV={kernelName:Ol,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r,alpha:a}=t,i=Cs().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bV(NV,r.shape,a.shape):new gV(IV,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}},EV="if (isnan(x)) return x;";function _V(e){let{opSnippet:t,packedOpSnippet:n,cpuKernelImpl:r,dtype:a}=e;return e=>{let i,{inputs:s,backend:o}=e,{x:l}=s,c=o,u=a||l.dtype;if(c.shouldExecuteOnCPU([l])&&null!=r){let e=c.texData.get(l.dataId),t=r(e.values,u);return c.makeTensorInfo(l.shape,u,t)}return i=Cs().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new oV(l.shape,n):new tV(l.shape,t),c.runWebGLProgram(i,[l],u)}}function TV(e){let{opSnippet:t,packedOpSnippet:n,checkOutOfBounds:r=!1,supportsComplex:a=!1,cpuKernelImpl:i,dtype:s}=e;return e=>{let{inputs:o,backend:l}=e,{a:c,b:u}=o,A=l;if(a&&"complex64"===c.dtype){let e=A.texData.get(c.dataId),n=A.texData.get(u.dataId),[r,a]=[[e.complexTensorInfos.real,n.complexTensorInfos.real],[e.complexTensorInfos.imag,n.complexTensorInfos.imag]].map(e=>{let[n,r]=e,a={dataId:n.dataId,dtype:n.dtype,shape:c.shape},i={dataId:r.dataId,dtype:r.dtype,shape:u.shape},s=new gV(t,c.shape,u.shape);return A.runWebGLProgram(s,[a,i],Zu(n.dtype,r.dtype))}),i=xV({inputs:{real:r,imag:a},backend:A});return A.disposeIntermediateTensorInfo(r),A.disposeIntermediateTensorInfo(a),i}let d,h=s||Zu(c.dtype,u.dtype);if(("string"===c.dtype||"string"===u.dtype||A.shouldExecuteOnCPU([c,u]))&&null!=i){let e=A.texData.get(c.dataId).values,t=A.texData.get(u.dataId).values,n="string"===c.dtype?Tw.fromUint8ToStringArray(e):e,r="string"===c.dtype?Tw.fromUint8ToStringArray(t):t,[a,s]=i(c.shape,u.shape,n,r,h),o=A.makeTensorInfo(s,h);return A.texData.get(o.dataId).values=a,o}return d=Cs().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new bV(n,c.shape,u.shape,r):new gV(t,c.shape,u.shape),A.runWebGLProgram(d,[c,u],h)}}function LV(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":aV;if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":iV;if("prelu"===e)return t?NV:IV;if("leakyrelu"===e)return t?BV:kV;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var DV=class{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=wz(this.outputShape.length);let c=r?e[1]:e[2],u=Math.ceil(c/2),A=r?"i * 2, rc.y":"rc.y, i * 2",d=a?"rc.z, i * 2":"i * 2, rc.z",h=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],f="",m="";s&&(f=o?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):l?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),m="result = activation(result);");let g=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let y="rc.x",b="rc.x";e[0]<t[0]?y="imod(rc.x, ".concat(e[0],")"):t[0]<e[0]&&(b="imod(rc.x, ".concat(t[0],")")),this.userCode="\n      ".concat(f,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(u,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ").concat(y,";\n        int batchB = ").concat(b,";\n        for (int i = 0; i < ").concat(u,"; i++) {\n          vec4 a = getMatrixA(batchA, ").concat(A,");\n          vec4 b = getMatrixB(batchB, ").concat(d,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(h[0]," * ").concat(p[0],");\n          result += (").concat(h[1]," * ").concat(p[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(g,"\n\n        ").concat(m,"\n\n        setOutput(result);\n      }\n    ")}},RV="return areal * breal - aimag * bimag;",UV="return areal * bimag + aimag * breal;",OV=class{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Tw.assertAndGetBroadcastShape(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(e,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")}},MV="return a * b;";function PV(e){let t,{inputs:n,backend:r}=e,{a:a,b:i}=n,s=Tw.upcastType(a.dtype,i.dtype);if("complex64"===a.dtype){let e=r.texData.get(a.dataId),t=r.texData.get(i.dataId),n=new OV(RV,a.shape,i.shape),s=new OV(UV,a.shape,i.shape),o=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:a.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:i.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:i.shape}],l=r.runWebGLProgram(n,o,"float32"),c=r.runWebGLProgram(s,o,"float32"),u=xV({inputs:{real:l,imag:c},backend:r});return r.disposeIntermediateTensorInfo(l),r.disposeIntermediateTensorInfo(c),u}if(r.shouldExecuteOnCPU([a,i])){let e=r.texData.get(a.dataId),t=r.texData.get(i.dataId),[n,o]=wW(a.shape,i.shape,e.values,t.values,s),l=r.makeTensorInfo(o,s);return r.texData.get(l.dataId).values=n,l}return t=Cs().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bV(MV,a.shape,i.shape):new gV(MV,a.shape,i.shape),r.runWebGLProgram(t,[a,i],s)}var QV={kernelName:Bl,backendName:"webgl",kernelFunc:PV};function jV(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{shape:i}=r,s=n,o=su.sizeFromShape(a.shape),l=su.inferFromImplicitShape(i,o),c=su.sizeFromShape(l);su.assert(o===c,()=>"The new shape (".concat(l,") has ").concat(c," elements and the old shape (").concat(a.shape,") has ").concat(o," elements. The new shape and old shape must have the same number of elements."));let u=s.texData.get(a.dataId);return!u.isPacked||MH(a.shape,l)||null!==u.texture&&MH(u.shape,l)?(s.incRef(a.dataId),{dataId:a.dataId,shape:l,dtype:a.dtype}):function(e,t,n){let r=[LH(e.shape),...DH(e.shape)],a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[LH(t),...DH(t)],s=new JW(i,r),o=[r],l=n.runWebGLProgram(s,[a],e.dtype,o,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}(a,l,s)}var HV={kernelName:Gl,backendName:"webgl",kernelFunc:jV},zV=class{constructor(e,t){this.variableNames=["x"];let{windowSize:n,batchSize:r,inSize:a,outSize:i}=e;this.outputShape=[r,i];let s=4*Math.floor(n/4),o=n%4,l="sumValue += dot(values, ones);";if(null!=t){let e=1/t;l="sumValue += dot(values * ".concat(su.isInt(e)?e.toPrecision(2):e,", ones);")}let c="";a%n>0&&(c="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(c,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===o,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(2===o,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(3===o,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")}},WV=class{constructor(e,t){this.variableNames=["x"];let{windowSize:n,batchSize:r,inSize:a,outSize:i}=e;this.outputShape=[r,i];let s="0.0",o="";"prod"===t?s="1.0":"min"===t?(s="1.0 / 1e-20",o="min"):"max"===t&&(s="-1.0 / 1e-20",o="max");let l="".concat(t,"(").concat(t,"(").concat(t,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");let c=4*Math.floor(n/4),u=n%4,A="\n      if (".concat("sum"===t,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===t,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(o,"(values, minMaxValue);\n        if (").concat("min"===t," || ").concat("max"===t,") {\n          minMaxValue = ").concat(o,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),d="vec4";"all"===t?(s="1.0",A="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(s="0.0",A="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let h="";a%n>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(n,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(A,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===u,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(A,"\n        } else if (").concat(2===u,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(A,"\n        } else if (").concat(3===u,") {\n          ").concat(d," values = ").concat(d,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(A,"\n        }\n        setOutput(").concat(l,");\n      }\n    ")}};function VV(e,t,n,r){let a=function(e){let t=[];for(;0===t.length||1!==t[t.length-1].outSize;){let n=t.length?t[t.length-1].outSize:e[1],r=Tw.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e;for(let s=0;s<a.length;s++){let o,l,{inSize:c,windowSize:u,outSize:A}=a[s];o="mean"===n?0===s?new zV({windowSize:u,inSize:c,batchSize:e.shape[0],outSize:A},c):new zV({windowSize:u,inSize:c,batchSize:e.shape[0],outSize:A}):new WV({windowSize:u,inSize:c,batchSize:e.shape[0],outSize:A},n),l=i,i=r.runWebGLProgram(o,[i],t),l.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(l)}return i}var GV=class{constructor(e,t){this.variableNames=["A"];let n=new Array(e.length);for(let i=0;i<n.length;i++)n[i]=e[t[i]];this.outputShape=n,this.rank=n.length;let r=pz(this.rank),a=function(e){let t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(t);this.userCode="\n    void main() {\n      ".concat(r," resRC = getOutputCoords();\n      setOutput(getA(").concat(a,"));\n    }\n    ")}};var KV=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let n=new Array(e.length);for(let c=0;c<n.length;c++)n[c]=e[t[c]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));let r=pz(this.rank),a=KW("rc",this.rank),i=new Array(this.rank);for(let c=0;c<t.length;c++)i[t[c]]=a[c];let s="vec2(".concat(i.slice(-2).join(),")"),o="++".concat(a[this.rank-1]," < ").concat(n[this.rank-1]),l="getChannel(getA(".concat(i.join(),"), ").concat(s,")");this.userCode="\n    void main() {\n      ".concat(r," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(l,";\n      if(").concat(o,") {\n        result[1] = ").concat(l,";\n      }\n      --").concat(a[this.rank-1],";\n      if(++").concat(a[this.rank-2]," < ").concat(n[this.rank-2],") {\n        result[2] = ").concat(l,";\n        if(").concat(o,") {\n          result[3] = ").concat(l,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}};function qV(e,t,n){let r=Cs().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new KV(e.shape,t):new GV(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function XV(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r;return function(e,t,n,r){let a=t,i=e.shape.length,s=su.parseAxisParam(a,e.shape),o=s,l=Tw.getAxesPermutation(o,i),c=null!=l,u=e;c&&(u=qV(e,l,r),o=Tw.getInnerMostAxes(o.length,i)),Tw.assertAxesAreInnerMostDims("sum",o,i);let[A,d]=Tw.computeOutAndReduceShapes(u.shape,o),h=A;n&&(h=Tw.expandShapeToKeepDim(A,s));let p=su.sizeFromShape(d),f=jV({inputs:{x:u},attrs:{shape:[su.sizeFromShape(e.shape)/p,p]},backend:r}),m=VV(f,$u(e.dtype),"sum",r),g=jV({inputs:{x:m},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(m),c&&r.disposeIntermediateTensorInfo(u),g}(a,i,s,n)}var JV={kernelName:hc,backendName:"webgl",kernelFunc:XV};function YV(e){let t,{inputs:n,backend:r,attrs:a}=e,{x:i}=n,{perm:s}=a,o=r,l=i.shape.length,c=new Array(l);for(let u=0;u<c.length;u++)c[u]=i.shape[s[u]];if(o.shouldExecuteOnCPU([i])){let e=o.texData.get(i.dataId).values,n=VW(e,i.shape,i.dtype,s,c);t=o.makeTensorInfo(c,i.dtype),o.texData.get(t.dataId).values=n}else t=qV(i,s,o);return t}var ZV={kernelName:Rc,backendName:"webgl",kernelFunc:YV};function $V(e){let{a:t,b:n,transposeA:r,transposeB:a,backend:i,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:l=0,activation:c=null}=e,u=t.shape.length,A=n.shape.length,d=r?t.shape[u-2]:t.shape[u-1],h=a?n.shape[A-1]:n.shape[A-2],p=r?t.shape[u-1]:t.shape[u-2],f=a?n.shape[A-2]:n.shape[A-1],m=t.shape.slice(0,-2),g=n.shape.slice(0,-2),y=su.sizeFromShape(m),b=su.sizeFromShape(g),w=bp.assertAndGetBroadcastShape(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([p,f]);su.assert(d===h,()=>"Error in matMul: inner shapes (".concat(d,") and (").concat(h,") of Tensors with shapes ").concat(t.shape," and ").concat(n.shape," and transposeA=").concat(r," and transposeB=").concat(a," must match."));let v,x=r?[y,d,p]:[y,p,d],C=a?[b,f,h]:[b,h,f],k=jV({inputs:{x:t},backend:i,attrs:{shape:x}}),B=jV({inputs:{x:n},backend:i,attrs:{shape:C}}),S=[k,B],I=Math.max(y,b),N=r?k.shape[1]:k.shape[2],F=null!=s,E=null!=o,_="leakyrelu"===c,T=null!=c?LV(c,!0):null;if((1===p||1===f)&&N>1e3&&!1===(F||E||_||null!=T)){let e=k,t=B;r&&(e=YV({inputs:{x:k},backend:i,attrs:{perm:[0,2,1]}}),S.push(e)),a&&(t=YV({inputs:{x:B},backend:i,attrs:{perm:[0,2,1]}}),S.push(t));let n=1===f,s=e;1!==f&&(s=jV({inputs:{x:e},backend:i,attrs:{shape:[I,N,1]}}),S.push(s));let o=1===f?2:1,l=t;n&&(l=jV({inputs:{x:t},backend:i,attrs:{shape:[I,1,N]}}),S.push(l));let c=PV({inputs:{a:s,b:l},backend:i});v=XV({inputs:{x:c},backend:i,attrs:{axis:o,keepDims:!0}}),S.push(c)}else{let e=Zu(t.dtype,n.dtype),c=new DV(x,C,[I,p,f],r,a,F,T,E,_),u=[k,B];if(null!=s&&u.push(s),E&&u.push(o),_){let e=i.makeTensorInfo([],"float32",su.createScalarValue(l,"float32"));u.push(e),S.push(e)}v=i.runWebGLProgram(c,u,e)}let L=jV({inputs:{x:v},backend:i,attrs:{shape:w}});S.push(v);for(let D of S)i.disposeIntermediateTensorInfo(D);return L}var eG={kernelName:Wc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{a:a,b:i,bias:s,preluActivationWeights:o}=t,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:A}=r;return $V({a:a,b:i,transposeA:l,transposeB:c,backend:n,bias:s,preluActivationWeights:o,leakyreluAlpha:A,activation:u})}},tG="return abs(x);";var nG={kernelName:Ns,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r}=e,{x:a}=n;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){let e=r.texData.get(a.dataId),t=_W(e.values);return r.makeTensorInfo(a.shape,a.dtype,t)}return t=Cs().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new oV(a.shape,tG):new tV(a.shape,tG),r.runWebGLProgram(t,[a],a.dtype)}},rG=_V({opSnippet:nV+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),aG={kernelName:Fs,backendName:"webgl",kernelFunc:rG},iG=_V({opSnippet:nV+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),sG={kernelName:Es,backendName:"webgl",kernelFunc:iG},oG="return a + b;",lG=TV({opSnippet:oG,packedOpSnippet:oG,supportsComplex:!0,cpuKernelImpl:Zz}),cG={kernelName:_s,backendName:"webgl",kernelFunc:lG},uG=class{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((e,t)=>"T".concat(t));let n=[];this.variableNames.forEach(e=>{n.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))});let r=this.variableNames.map(e=>"v".concat(e)).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        float result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}},AG=class{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((e,t)=>"T".concat(t));let n=[];this.variableNames.forEach(e=>{n.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))});let r=this.variableNames.map(e=>"v".concat(e)).join(" + ");this.userCode="\n      void main() {\n        ".concat(n.join("\n        "),"\n\n        vec4 result = ").concat(r,";\n        setOutput(result);\n      }\n    ")}};var dG={kernelName:Ts,backendName:"webgl",kernelFunc:function e(t){let{inputs:n,backend:r}=t,a=n;if(1===a.length)return wV({inputs:{x:a[0]},backend:r});if(a.length>Cs().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let t=Math.floor(a.length/2),n=e({inputs:a.slice(0,t),backend:r}),i=e({inputs:a.slice(t),backend:r});return e({inputs:[n,i],backend:r})}let i=a.map(e=>e.dtype).reduce((e,t)=>Zu(e,t)),s=a.map(e=>e.shape),o=Cs().getBool("WEBGL_PACK")?new AG(a[0].shape,s):new uG(a[0].shape,s);return r.runWebGLProgram(o,a,i)}};var hG={kernelName:Ls,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=a.shape.length,l=su.parseAxisParam(i,a.shape),c=l,u=Tw.getAxesPermutation(c,o),A=a;null!=u&&(A=YV({inputs:{x:a},backend:n,attrs:{perm:u}}),c=Tw.getInnerMostAxes(c.length,o)),Tw.assertAxesAreInnerMostDims("all",c,o);let d,[h,p]=Tw.computeOutAndReduceShapes(A.shape,c),f=jV({inputs:{x:A},backend:n,attrs:{shape:[-1,su.sizeFromShape(p)]}}),m=VV(f,f.dtype,"all",n);if(s){d=jV({inputs:{x:m},backend:n,attrs:{shape:Tw.expandShapeToKeepDim(h,l)}})}else d=jV({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(A),d}};var pG={kernelName:Ds,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=a.shape.length,l=su.parseAxisParam(i,a.shape),c=l,u=Tw.getAxesPermutation(c,o),A=a;null!=u&&(A=YV({inputs:{x:a},backend:n,attrs:{perm:u}}),c=Tw.getInnerMostAxes(c.length,o)),Tw.assertAxesAreInnerMostDims("any",c,o);let d,[h,p]=Tw.computeOutAndReduceShapes(A.shape,c),f=jV({inputs:{x:A},backend:n,attrs:{shape:[-1,su.sizeFromShape(p)]}}),m=VV(f,f.dtype,"any",n);if(s){d=jV({inputs:{x:m},backend:n,attrs:{shape:Tw.expandShapeToKeepDim(h,l)}})}else d=jV({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(A),d}},fG=class{constructor(e,t,n){this.variableNames=["A"];let{windowSize:r,batchSize:a,outSize:i}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,i];let s="max"===t?">":"<",o=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(r,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          int inIdx = ").concat(o,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")}},mG=class{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,su.assert(e.length>2,()=>"Packed arg".concat(n.charAt(0).toUpperCase()+n.slice(1)," supports only inputs with rank above 2."));let a=e[e.length-1],i=Math.ceil(a/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");let s,o,l=this.outputShape,c=l.length,u=pz(c),A=qW("coords",c);if(1===i){o=c+1;let e=pz(o);s="\n        ".concat(e," sourceLocR = ").concat(e,"(").concat(A.join(),", 0);\n        ++").concat(A[c-1],";\n        ").concat(e," sourceLocG = ").concat(e,"(").concat(A.join(),", 0);\n        ++").concat(A[c-2],";\n        ").concat(e," sourceLocA = ").concat(e,"(").concat(A.join(),", 0);\n        --").concat(A[c-1],";\n        ").concat(e," sourceLocB = ").concat(e,"(").concat(A.join(),", 0);\n        --").concat(A[c-2],";")}else o=c,s="\n        ".concat(u," sourceLocR = coords;\n        ++").concat(A[c-1],";\n        ").concat(u," sourceLocG = coords;\n        ++").concat(A[c-2],";\n        ").concat(u," sourceLocA = coords;\n        --").concat(A[c-1],";\n        ").concat(u," sourceLocB = coords;\n        --").concat(A[c-2],";");let d=["x","y","z","w","u","v"].slice(0,o),h="."+d[o-1],p=d.map(e=>"int "+e),f=qW("sourceLocR",o-1).concat("inIdx.r"),m=qW("sourceLocG",o-1).concat("inIdx.g"),g=qW("sourceLocB",o-1).concat("inIdx.b"),y=qW("sourceLocA",o-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(f.join(),"),\n                             getBestIndicesAChannel(").concat(m.join(),"),\n                             getBestIndicesAChannel(").concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),")));"),v="vec4(\n            getAChannel(".concat(f.join(),"),\n            hasNextCol ? getAChannel(").concat(m.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(g.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(y.join(),") : 0.)"),x=r?"":"\n      float getBestIndicesAChannel(".concat(p.join(),") {\n        return getChannel(getBestIndicesA(").concat(d.join(),"),\n                                          vec2(").concat(d.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(p.join(),") {\n        return getChannel(getA(").concat(d.join(),"),\n                               vec2(").concat(d.slice(-2).join(),"));\n      }\n      ").concat(x,"\n      void main() {\n        ").concat(u," coords = getOutputCoords();\n        bool hasNextCol = ").concat(A[c-1]," < ").concat(l[c-1]-1,";\n        bool hasNextRow = ").concat(A[c-2]," < ").concat(l[c-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(h,", sourceLocG").concat(h,",\n          sourceLocB").concat(h,", sourceLocA").concat(h,") * ").concat(t,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(v,";\n\n        for (int i = 0; i < ").concat(t,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(v,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(b,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}};function gG(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);let s=Tw.computeOptimalWindowSize(i),o={windowSize:s,inSize:i,batchSize:a,outSize:Math.ceil(i/s)},l=new fG(o,n,null==r),c=[t];null!=r&&c.push(r);let u=e.runWebGLProgram(l,c,"int32");if(1===u.shape[1])return u;let A=gG(e,t,n,u);return e.disposeIntermediateTensorInfo(u),A}function yG(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=a[a.length-1],s=Tw.computeOptimalWindowSize(i),o=new mG(a,s,n,null==r),l=null==r?[t]:[t,r],c=e.runWebGLProgram(o,l,"int32");if(c.shape.length===t.shape.length){let r=yG(e,t,n,c);return e.disposeIntermediateTensorInfo(c),r}return c}function bG(e,t,n,r){let a=[n];if(Tw.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!Cs().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){let n=[],i=e.texData.get(t.dataId),s=t;null!==i&&i.isPacked&&(s=e.unpackTensor(t),n.push(s));let[o,l]=Tw.computeOutAndReduceShapes(s.shape,a),c=su.sizeFromShape(l),u=jV({inputs:{x:s},backend:e,attrs:{shape:[-1,c]}});n.push(u);let A=gG(e,u,r);n.push(A);let d=jV({inputs:{x:A},backend:e,attrs:{shape:o}});return n.forEach(t=>e.disposeIntermediateTensorInfo(t)),d}return yG(e,t,r)}var wG={kernelName:Rs,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r,s=su.parseAxisParam(i,a.shape),o=Tw.getAxesPermutation(s,a.shape.length),l=a,c=[];null!=o&&(l=YV({inputs:{x:a},backend:n,attrs:{perm:o}}),c.push(l),s=Tw.getInnerMostAxes(s.length,l.shape.length)),Tw.assertAxesAreInnerMostDims("argMax",[s[0]],l.shape.length);let u=bG(n,l,s[0],"max");return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}};var vG={kernelName:Us,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i}=r,s=su.parseAxisParam(i,a.shape),o=Tw.getAxesPermutation(s,a.shape.length),l=a,c=[];null!=o&&(l=YV({inputs:{x:a},backend:n,attrs:{perm:o}}),c.push(l),s=Tw.getInnerMostAxes(s.length,l.shape.length)),Tw.assertAxesAreInnerMostDims("argMin",[s[0]],l.shape.length);let u=bG(n,l,s[0],"min");return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}},xG=_V({opSnippet:nV+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),CG={kernelName:Os,backendName:"webgl",kernelFunc:xG},kG=_V({opSnippet:nV+"return log(x + sqrt(x * x + 1.0));"}),BG={kernelName:Ms,backendName:"webgl",kernelFunc:kG},SG=_V({opSnippet:nV+"\n  return atan(x);\n"}),IG={kernelName:Ps,backendName:"webgl",kernelFunc:SG},NG=TV({opSnippet:mV+"\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+yV+"\n  return result;\n"}),FG={kernelName:js,backendName:"webgl",kernelFunc:NG},EG=_V({opSnippet:nV+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),_G={kernelName:Qs,backendName:"webgl",kernelFunc:EG},TG=class{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");let i=e.filterWidth,s=e.strideHeight,o=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterHeight,A=e.effectiveFilterWidth,d=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;let p="avg"===t,f="((batch  * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),m="(xR * ".concat(e.inWidth," + xC) * ").concat(e.inChannels," + d"),g="0.0";if(p||(g="-1.0 / 1e-20"),n){let t=">=";return void(this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(o,");\n        const ivec2 pads = ivec2(").concat(d,", ").concat(h,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(u,";\n              wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(A,";\n                wC += ").concat(c,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(t," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(r?a?f:m:"wR * ".concat(A," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let y="".concat(t,"(").concat(t,"(").concat(t,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"avg"===t&&(y="avgValue / max(count, 1.0)");let b=4*Math.floor(i/4),w=i%4,v="\n      if (".concat(p,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(h,");\n      const float initializationValue = ").concat(g,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(g,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(l,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(b,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(c,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              getValue(batch, xR, xC + 3 * ").concat(c,", d)\n            );\n\n            ").concat(v,"\n          }\n\n          int xC = xCCorner + ").concat(b,";\n          if (").concat(1===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(v,"\n          } else if (").concat(2===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(v,"\n          } else if (").concat(3===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              initializationValue\n            );\n\n            ").concat(v,"\n          }\n        }\n        setOutput(").concat(y,");\n      }\n    ")}},LG=class{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");let i=e.filterWidth,s=e.strideDepth,o=e.strideHeight,l=e.strideWidth,c=e.dilationDepth,u=e.dilationHeight,A=e.dilationWidth,d=e.effectiveFilterDepth,h=e.effectiveFilterHeight,p=e.effectiveFilterWidth,f=e.padInfo.front,m=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;let y="avg"===t,b="0.0";if(y||(b="-1.0 / 1e-20"),n){let t=">=";return void(this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(o,", ").concat(l,");\n        const ivec3 pads = ivec3(").concat(f,", ").concat(m,", ").concat(g,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(d,";\n              wD += ").concat(c,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(h,";\n                wR += ").concat(u,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(p,";\n                  wC += ").concat(A,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(t," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(r?a?"(((batch * ".concat(e.inDepth," + xD) * ").concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"((xD * ".concat(e.inHeight," + xR) * ").concat(e.inWidth," + xC) * ").concat(e.inChannels," + ch"):"wD * ".concat(h," * ").concat(p," +\n                      wR * ").concat(p," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "))}let w="".concat(t,"(").concat(t,"(").concat(t,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"avg"===t&&(w="avgValue / max(count, 1.0)");let v=4*Math.floor(i/4),x=i%4,C="\n      if (".concat(y,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat("max","(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(o,", ").concat(l,");\n      const ivec3 pads = ivec3(").concat(f,", ").concat(m,", ").concat(g,");\n      const float initializationValue = ").concat(b,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(e.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(b,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(c,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(u,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(v,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(A,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(A,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(A,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(A,", ch)\n              );\n\n              ").concat(C,"\n            }\n\n            int xC = xCCorner + ").concat(v,";\n            if (").concat(1===x,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(C,"\n            } else if (").concat(2===x,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(A,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(C,"\n            } else if (").concat(3===x,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(A,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(A,", ch),\n                initializationValue\n              );\n\n              ").concat(C,"\n            }\n          }\n        }\n        setOutput(").concat(w,");\n      }\n    ")}};var DG={kernelName:Hs,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;JH(a,"avgPool");let{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r;su.assert(Tw.eitherStridesOrDilationsAreOne(s,1),()=>"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(1,"'"));let c=Tw.computePool2DInfo(a.shape,i,s,1,o,l);if(1===c.filterWidth&&1===c.filterHeight&&su.arraysEqual(c.inShape,c.outShape))return wV({inputs:{x:a},backend:n});let u=new TG(c,"avg",!1);return n.runWebGLProgram(u,[a],"float32")}};var RG={kernelName:Ws,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r,u=Tw.computePool3DInfo(a.shape,i,s,[1,1,1],o,l,c),A=new LG(u,"avg",!1);return n.runWebGLProgram(A,[a],"float32")}},UG=class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,s=e.dilationWidth,o=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=o-1-e.padInfo.top,u=l-1-e.padInfo.left,A=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2(".concat(c,", ").concat(u,");\n      const float avgMultiplier = float(").concat(A,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(o,";\n            wR += ").concat(i,") {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(l,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},OG=class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.effectiveFilterDepth,A=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=u-1-e.padInfo.front,p=A-1-e.padInfo.top,f=d-1-e.padInfo.left,m=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3(".concat(h,", ").concat(p,", ").concat(f,");\n      const float avgMultiplier = float(").concat(m,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n            wD += ").concat(o,") {\n          float dyD = float(dyDCorner + wD) / ").concat(a,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(A,";\n              wR += ").concat(l,") {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(d,";\n                wC += ").concat(c,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}};var MG={kernelName:Vs,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,s=i,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,A=Tw.computePool3DInfo(s.shape,o,l,[1,1,1],c,u),d=new OG(A);return n.runWebGLProgram(d,[a],s.dtype)}};var PG={kernelName:zs,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,s=i;JH([a,i],"avgPoolGrad");let{filterSize:o,strides:l,pad:c}=r,u=Tw.computePool2DInfo(s.shape,o,l,1,c),A=new UG(u);return n.runWebGLProgram(A,[a],s.dtype)}};var QG={kernelName:Gs,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{a:a,b:i}=t,{transposeA:s,transposeB:o}=r;return $V({a:a,b:i,transposeA:s,transposeB:o,backend:n})}},jG=class{constructor(e,t,n,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Tw.assertAndGetBroadcastShape(e,t),Tw.assertAndGetBroadcastShape(e,n);let s="0.0";null!=r&&(Tw.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let o="1.0";null!=a&&(Tw.assertAndGetBroadcastShape(e,a),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(o,";\n        float inv = scale * inversesqrt(variance + float(").concat(i,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")}},HG=class{constructor(e,t,n,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Tw.assertAndGetBroadcastShape(e,t),Tw.assertAndGetBroadcastShape(e,n);let s="vec4(0.0)";null!=r&&(Tw.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let o="vec4(1.0)";null!=a&&(Tw.assertAndGetBroadcastShape(e,a),this.variableNames.push("scale"),o="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(o,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(i,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")}},zG={kernelName:Qo,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a,mean:i,variance:s,offset:o,scale:l}=t;su.assert(i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),su.assert(null==o||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),su.assert(null==l||i.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:c}=r;null==c&&(c=.001);let u=[a,i,s],A=null;null!=o&&(A=o.shape,u.push(o));let d=null;null!=l&&(d=l.shape,u.push(l));let h=Cs().getBool("WEBGL_PACK_NORMALIZATION")?new HG(a.shape,i.shape,s.shape,A,d,c):new jG(a.shape,i.shape,s.shape,A,d,c);return n.runWebGLProgram(h,u,u[0].dtype)}},WG=class{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;let t=pz(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let n,r=function(e){if(1===e)return"sourceLoc";if(e<=6)return VG.slice(0,e).map(e=>"sourceLoc."+e).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),a=e.map((e,t)=>"sourceLoc.".concat(VG[t]," = start[").concat(t,"] + coords.").concat(VG[t],";"));n="\n        ".concat(t," sourceLoc;\n        ").concat(t," coords = getOutputCoords();\n        ").concat(a.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(n,"\n        setOutput(getSource(").concat(r,"));\n      }\n    ")}},VG=["x","y","z","w","u","v"];var GG=class{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let t=pz(this.rank),n=qW("coords",this.rank),r=qW("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":"vec2(".concat(r.slice(-2).join(),")"),i="getChannel(getSource(".concat(r.join(),"), ").concat(a,")"),s="\n      result.x = ".concat(i,";\n      if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n        ++").concat(r[this.rank-1],";\n        result.y = ").concat(i,";\n        --").concat(r[this.rank-1],";\n      }\n    "),o=1===this.rank?"":"\n      --".concat(n[this.rank-1],";\n      if (++").concat(n[this.rank-2]," < ").concat(e[this.rank-2],") {\n        ++").concat(r[this.rank-2],";\n        result.z = ").concat(i,";\n        if (++").concat(n[this.rank-1]," < ").concat(e[this.rank-1],") {\n          ++").concat(r[this.rank-1],";\n          result.w = ").concat(i,";\n        }\n      }\n    "),l=this.rank<=4?"sourceLoc = coords +\n            ".concat(t,"(").concat(e.map((e,t)=>"start[".concat(t,"]")).join(),");"):e.map((e,t)=>"".concat(r[t]," = ").concat(n[t]," + start[").concat(t,"];")).join("\n");this.userCode="\n      void main() {\n        ".concat(t," coords = getOutputCoords();\n        ").concat(t," sourceLoc;\n        ").concat(l,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(o,"\n        setOutput(result);\n      }\n    ")}};function KG(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{begin:i,size:s}=r,[o,l]=sw.parseSliceParams(a,i,s);if(sw.assertParamsValid(a,o,l),0===su.sizeFromShape(l))return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){let e=n.texData.get(a.dataId),t=TW(e.values,o,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,t)}let{isPacked:c}=n.texData.get(a.dataId),u=sw.isSliceContinous(a.shape,o,l);if(c||!u){let e=Cs().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new GG(l):new WG(l),t=[o];return n.runWebGLProgram(e,[a],a.dtype,t)}return n.uploadToGPU(a.dataId),function(e,t,n,r){let a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),s=r.texData.get(i.dataId);Object.assign(s,a),s.refCount=1,s.shape=n,s.dtype=e.dtype;let o=sw.computeFlatOffset(t,su.computeStrides(e.shape));a.slice&&(o+=a.slice.flatOffset),s.slice={flatOffset:o,origDataId:a.slice&&a.slice.origDataId||e.dataId};let l=r.dataRefCount.get(s.slice.origDataId)||1;return r.dataRefCount.set(s.slice.origDataId,l+1),i}(a,o,l,n)}var qG={kernelName:sc,backendName:"webgl",kernelFunc:KG},XG={kernelName:Ks,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,crops:s}=r;su.assert(a.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let o=i.reduce((e,t)=>e*t),l=Tw.getReshaped(a.shape,i,o),c=Tw.getPermuted(l.length,i.length),u=Tw.getReshapedPermuted(a.shape,i,o),A=Tw.getSliceBeginCoords(s,i.length),d=Tw.getSliceSize(u,s,i.length),h=[],p=jV({inputs:{x:a},backend:n,attrs:{shape:l}}),f=YV({inputs:{x:p},backend:n,attrs:{perm:c}}),m=jV({inputs:{x:f},backend:n,attrs:{shape:u}}),g=KG({inputs:{x:m},backend:n,attrs:{begin:A,size:d}});return h.push(p),h.push(f),h.push(m),h.forEach(e=>n.disposeIntermediateTensorInfo(e)),g}};var JG={kernelName:qs,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:s}=r,o=n.readSync(a.dataId),l=n.readSync(i.dataId),c=$z(o,l,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,c)}};var YG={kernelName:Xs,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r}=e,{a:a,b:i}=n,s=Cs().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=Cs().getNumber("WEBGL_VERSION");if(r.shouldExecuteOnCPU([a,i])||1===o){let e=r.texData.get(a.dataId).values,t=r.texData.get(i.dataId).values,[n,s]=tW(a.shape,i.shape,e,t,a.dtype),o=r.makeTensorInfo(s,a.dtype);return r.texData.get(o.dataId).values=n,o}return t=s?new bV("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",a.shape,i.shape,!1):new gV("\n  return float(int(a.r) & int(b.r));\n",a.shape,i.shape),r.runWebGLProgram(t,[a,i],a.dtype)}};var ZG={kernelName:Ys,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{s0:r,s1:a}=t,i=n.readSync(r.dataId),s=n.readSync(a.dataId),o=Tw.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return n.makeTensorInfo([o.length],"int32",Int32Array.from(o))}},$G=TV({opSnippet:"return float(a != b);",cpuKernelImpl:xW,dtype:"bool"}),eK={kernelName:Il,backendName:"webgl",kernelFunc:$G};function tK(e){let{inputs:t,backend:n}=e,{input:r}=t;return wV({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var nK={kernelName:zl,backendName:"webgl",kernelFunc:tK};var rK={kernelName:Zs,backendName:"webgl",kernelFunc:function e(t){let{inputs:n,backend:r,attrs:a}=t,{x:i}=n,{dtype:s}=a;if("complex64"===s){if("complex64"===i.dtype)return wV({inputs:{x:i},backend:r});let t=Hf(i.shape),n=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),a=xV({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),a}if("complex64"===i.dtype){let t=tK({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:s}});return r.disposeIntermediateTensorInfo(t),n}if(!su.hasEncodingLoss(i.dtype,s)){let e=wV({inputs:{x:i},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:s}}if(r.shouldExecuteOnCPU([i])){let e=r.texData.get(i.dataId).values,[t,n,a]=nW(e,i.shape,i.dtype,s);return r.makeTensorInfo(t,n,a)}if("int32"===s)return function(e,t){let n=new tV(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===s){let e=r.makeTensorInfo([],"bool",su.getTypedArrayFromDType("bool",1)),t=$G({inputs:{a:i,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(s))}},aK="return ceil(x);",iK=_V({opSnippet:aK,packedOpSnippet:aK,cpuKernelImpl:rW}),sK={kernelName:$s,backendName:"webgl",kernelFunc:iK},oK=class{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}},lK=class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}};var cK={kernelName:eo,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:a}=e,{x:i}=n,{clipValueMin:s,clipValueMax:o}=a;t=Cs().getBool("WEBGL_PACK_CLIP")?new lK(i.shape):new oK(i.shape);let l=[[s],[o]];return r.runWebGLProgram(t,[i],i.dtype,l)}},uK=class{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}};function AK(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var dK={kernelName:no,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t,a=n.texData.get(r.dataId),i=new uK(r.shape),s=[AK(r,a.complexTensorInfos.real),AK(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,s,s[0].dtype)}},hK=class{constructor(e){this.outputShape=[],this.outputShape=Tw.computeOutShape(e,1),this.variableNames=e.map((e,t)=>"T".concat(t));let t=new Array(e.length-1);t[0]=e[0][1];for(let i=1;i<t.length;i++)t[i]=t[i-1]+e[i][1];let n=["if (yC < ".concat(t[0],") setOutput(getT0(yR, yC));")];for(let i=1;i<t.length;i++){let e=t[i-1];n.push("else if (yC < ".concat(t[i],") setOutput(getT").concat(i,"(yR, yC-").concat(e,"));"))}let r=t.length,a=t[t.length-1];n.push("else setOutput(getT".concat(r,"(yR, yC-").concat(a,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(n.join("\n        "),"\n      }\n    ")}},pK=class{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Tw.computeOutShape(e,t);let n=this.outputShape,r=n.length,a=pz(r),i=qW("coords",r),s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((e,t)=>"T".concat(t));let o=new Array(e.length-1);o[0]=e[0][t];for(let p=1;p<o.length;p++)o[p]=o[p-1]+e[p][t];let l=s[t],c=s.slice(-2),u=s.join(),A="if (".concat(l," < ").concat(o[0],") {\n        return getChannel(\n            getT0(").concat(u,"), vec2(").concat(c.join(),"));\n        }");for(let p=1;p<o.length;p++){let e=o[p-1];A+="\n        if (".concat(l," < ").concat(o[p],"  && ").concat(l," >= ").concat(o[p-1],") {\n          return getChannel(\n            getT").concat(p,"(").concat(fK(s,l,e),"),\n            vec2(").concat(fK(c,l,e),"));\n        }")}let d=o.length,h=o[o.length-1];A+="\n        return getChannel(\n          getT".concat(d,"(").concat(fK(s,l,h),"),\n          vec2(").concat(fK(c,l,h),"));"),this.userCode="\n      float getValue(".concat(s.map(e=>"int "+e),") {\n        ").concat(A,"\n      }\n\n      void main() {\n        ").concat(a," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(i,"), 0., 0., 0.);\n\n        ").concat(i[r-1]," = ").concat(i[r-1]," + 1;\n        if (").concat(i[r-1]," < ").concat(n[r-1],") {\n          result.g = getValue(").concat(i,");\n        }\n\n        ").concat(i[r-2]," = ").concat(i[r-2]," + 1;\n        if (").concat(i[r-2]," < ").concat(n[r-2],") {\n          result.a = getValue(").concat(i,");\n        }\n\n        ").concat(i[r-1]," = ").concat(i[r-1]," - 1;\n        if (").concat(i[r-2]," < ").concat(n[r-2]," &&\n            ").concat(i[r-1]," < ").concat(n[r-1],") {\n          result.b = getValue(").concat(i,");\n        }\n        setOutput(result);\n      }\n    ")}};function fK(e,t,n){let r=e.indexOf(t);return e.map((e,t)=>t===r?"".concat(e," - ").concat(n):e).join()}function mK(e){let{inputs:t,backend:n}=e,{input:r}=t;return wV({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var gK={kernelName:Ko,backendName:"webgl",kernelFunc:mK};function yK(e,t,n){let r=e[0].dtype;if("complex64"===r){let r=e.map(e=>tK({inputs:{input:e},backend:n})),a=e.map(e=>mK({inputs:{input:e},backend:n})),i=yK(r,t,n),s=yK(a,t,n),o=xV({inputs:{real:i,imag:s},backend:n});return r.forEach(e=>n.disposeIntermediateTensorInfo(e)),a.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(s),o}let a=n.shouldExecuteOnCPU(e);if("string"===r&&(a=!0),a){let a=e.map(e=>{let r=[-1,su.sizeFromShape(e.shape.slice(t))];return jV({inputs:{x:e},backend:n,attrs:{shape:r}})}),i=a.map(e=>({vals:n.readSync(e.dataId),shape:e.shape})),s=Tw.computeOutShape(a.map(e=>e.shape),1),o=1===a[0].shape[0],l=aW(i,s,r,o),c=Tw.computeOutShape(e.map(e=>e.shape),t),u=n.makeTensorInfo(c,r,l);return a.forEach(e=>n.disposeIntermediateTensorInfo(e)),u}let i=e.filter(e=>su.sizeFromShape(e.shape)>0),s=Cs().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(1===i.length){let t=s?new tV(e[0].shape,sV):new oV(e[0].shape,sV);return n.runWebGLProgram(t,e,r)}let o=Cs().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>o){let e=[];for(let a=0;a<i.length;a+=o){let r=i.slice(a,a+o);e.push(yK(r,t,n))}let r=yK(e,t,n);for(let t of e)n.disposeIntermediateTensorInfo(t);return r}if(s){let e=new pK(i.map(e=>e.shape),t);return n.runWebGLProgram(e,i,r)}let{tensors2D:l,outShape:c}=function(e,t,n){let r=Tw.computeOutShape(e.map(e=>e.shape),t);return{tensors2D:e.map(e=>jV({inputs:{x:e},attrs:{shape:[-1,su.sizeFromShape(e.shape.slice(t))]},backend:n})),outShape:r}}(i,t,n),u=new hK(l.map(e=>e.shape)),A=n.runWebGLProgram(u,l,r);l.forEach(e=>n.disposeIntermediateTensorInfo(e));let d=jV({inputs:{x:A},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(A),d}function bK(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r,i=su.parseAxisParam(a,t[0].shape)[0],s=t.map(e=>e.shape);Tw.assertParamsConsistent(s,i);let o=Tw.computeOutShape(t.map(e=>e.shape),i);if(0===su.sizeFromShape(o))return n.makeTensorInfo(o,t[0].dtype,[]);let l=t.filter(e=>su.sizeFromShape(e.shape)>0);return 1===l.length?wV({inputs:{x:l[0]},backend:n}):yK(l,i,n)}var wK={kernelName:ro,backendName:"webgl",kernelFunc:bK},vK=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.outputShape=e.outShape;let i=e.padInfo.top,s=e.padInfo.left,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,A=e.filterHeight,d=e.filterWidth,h=4*Math.floor(e.inChannels/4),p=e.inChannels%4,f="channelsLast"===e.dataFormat,m=f?1:2,g=f?2:3,y=f?3:1,b="",w="";n&&(b=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):a?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),w="result = activation(result);");let v=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      const ivec2 strides = ivec2(").concat(o,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(y,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(m,"], coords[").concat(g,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(A,"; wR++) {\n          int xR = xRCorner + wR * ").concat(c,";\n\n          if (xR < 0 || xR >= ").concat(e.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(d,"; wC++) {\n            int xC = xCCorner + wC * ").concat(u,";\n\n            if (xC < 0 || xC >= ").concat(e.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(f,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===p,") {\n\n              if (").concat(f,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(h,") *\n                    getW(wR, wC, ").concat(h,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(h,", xR, xC) *\n                    getW(wR, wC, ").concat(h,", d2);\n              }\n\n            } else if (").concat(2===p,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2)\n              );\n\n              if (").concat(f,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===p,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2),\n                getW(wR, wC, ").concat(h," + 2, d2)\n              );\n\n              if (").concat(f,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1),\n                  getX(batch, xR, xC, ").concat(h," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC),\n                  getX(batch, ").concat(h," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(v,"\n        ").concat(w,"\n        setOutput(result);\n      }\n    ")}},xK=class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=e.dilationDepth,l=e.dilationHeight,c=e.dilationWidth,u=e.filterDepth,A=e.filterHeight,d=e.filterWidth,h=4*Math.floor(e.inChannels/4),p=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(a,", ").concat(i,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(t,", ").concat(n,", ").concat(r,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(u,"; wF++) {\n          int xF = xFCorner + wF * ").concat(o,";\n\n          if (xF < 0 || xF >= ").concat(e.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(A,"; wR++) {\n            int xR = xRCorner + wR * ").concat(l,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(d,"; wC++) {\n              int xC = xCCorner + wC * ").concat(c,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===p,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(h,") *\n                  getW(wF, wR, wC, ").concat(h,", d2);\n              } else if (").concat(2===p,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===p,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1),\n                  getX(batch, xF, xR, xC, ").concat(h," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2),\n                  getW(wF, wR, wC, ").concat(h," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},CK=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=wz(this.outputShape.length);let i=e.padInfo.left,s=e.strideWidth,o=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,u=c,A="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let f=0;f<c;f++)A+="\n           vec4 xTexelC".concat(2*f,";\n           int xTexelC").concat(2*f,"Ready;\n           vec4 xTexelC").concat(2*f+1,";\n           int xTexelC").concat(2*f+1,"Ready;\n           vec4 xC").concat(f,";");A+="\n     for (int r = 0; r < ".concat(l,"; r++) {\n      for (int d1 = 0; d1 < ").concat(e.inChannels,"; d1 += 2) {\n       ");for(let f=0;f<c;f++)A+="\n           xTexelC".concat(2*f," = vec4(0.0);\n           xTexelC").concat(2*f,"Ready = 0;\n           xTexelC").concat(2*f+1," = vec4(0.0);\n           xTexelC").concat(2*f+1,"Ready = 0;\n           xC").concat(f," = vec4(0.0);");A+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let f=0;f<(u+1)/2;f++){let t=2*f;if(A+="\n           xC = xCCorner + ".concat(t*o,";\n           "),1===s){if(t<c&&(i%2===1?(A+="\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n               "),A+=1===o&&t>0?"\n                 xC".concat(t," = vec4(xTexelC").concat(t-2,".zw, xTexelC").concat(t,".xy);\n                 "):"\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC".concat(t," = vec4(previous.zw, xTexelC").concat(t,".xy);\n                   } else {\n                     xC").concat(t," = vec4(0.0, 0.0, xTexelC").concat(t,".xy);\n                   }\n                   ")):A+="\n                 if (xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xC").concat(t," = xTexelC").concat(t,";\n                 "),t+1<c)){let e=i%2===0?su.nearestLargerEven(o):o;o%2===0&&i%2===1||o%2!==0&&i%2!==1?(A+="\n                   xCOffset = xC + imod(pads[1], 2) + ".concat(e,";\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                     xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC").concat(t+1,".zw = vec2(0.0);\n                     }\n                     xTexelC").concat(t+1,"Ready = 1;\n                   }\n                   "),A+=o>1?"\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC".concat(t+1," = vec4(previous.zw, xTexelC").concat(t+1,".xy);\n                     } else {\n                      xC").concat(t+1," = vec4(0.0, 0.0, xTexelC").concat(t+1,".xy);\n                     }\n                     "):"\n                     xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".xy);\n                     ")):A+=1===e?"\n                     xC".concat(t+1," = xTexelC").concat(t,";\n                     "):"\n                     xCOffset = xC + ".concat(e,";\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                       xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC").concat(t+1,".zw = vec2(0.0);\n                       }\n                       xTexelC").concat(t+1,"Ready = 1;\n                     }\n\n                     xC").concat(t+1," = xTexelC").concat(t+1,";\n                     ")}}else t<c&&(i%2===1?(A+="\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n               "),t+1<c&&(A+="\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC".concat(t+1," = vec4(xTexelC").concat(t+1,".xy, final.xy);\n                 "))):(A+="\n                 if(xC >= 0 && xC < inDims[1] && xTexelC".concat(t,"Ready == 0) {\n                   xTexelC").concat(t," = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC").concat(t,".zw = vec2(0.0);\n                   }\n                   xTexelC").concat(t,"Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(t+1,"Ready == 0) {\n                   xTexelC").concat(t+1," = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC").concat(t+1,".zw = vec2(0.);\n                   }\n                   xTexelC").concat(t+1,"Ready = 1;\n                 }\n\n                 xC").concat(t," = vec4(\n                   xTexelC").concat(t,".xy, xTexelC").concat(t+1,".xy);\n               "),t+1<c&&(A+="\n                   xC".concat(t+1," = vec4(xTexelC").concat(t,".zw, xTexelC").concat(t+1,".zw);\n                 "))));t<c&&(A+="\n             wTexel = getW(r, ".concat(t,", d1, d2);\n             dotProd += xC").concat(t,".xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ").concat(e.inChannels,") {\n               dotProd += xC").concat(t,".yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           "),t+1<c&&(A+="\n               wTexel = getW(r, ".concat(t+1,", d1, d2);\n               dotProd += xC").concat(t+1,".xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ").concat(e.inChannels,") {\n                 dotProd += xC").concat(t+1,".yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             ")))}A+="\n     }\n   ",A+="\n     }\n   ",A+="\n     }\n   ";let d="",h="";n&&(d=r?"vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ".concat(n,"\n         }"):a?"vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ".concat(n,"\n         }"):"vec4 activation(vec4 x) {\n           ".concat(n,"\n         }"),h="result = activation(result);");let p=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n       ".concat(d,"\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ").concat(A,"\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ").concat(p,"\n         ").concat(h,"\n         setOutput(result);\n       }\n     ")}},kK=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=wz(this.outputShape.length);let{dataFormat:n}=t,r=ZH(),a="channelsLast"===n,i=a?1:2,s=a?2:3,o=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(e[2]," && pos < ").concat(e[1],") {"),l="";for(let c=0;c<=1;c++)for(let e=0;e<=1;e++)l+="\n          blockIndex = rc.z + ".concat(e,";\n          pos = rc.y + ").concat(c,";\n\n          ").concat(o,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(i,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(a,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*c+e,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*c+e,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(l,"\n\n        ").concat(r.output," = result;\n      }\n    ")}};function BK(e,t){let n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function SK(e){let t,{x:n,filter:r,convInfo:a,backend:i,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:l=0,activation:c=null}=e,u=n.shape,A=i.texData.get(n.dataId),d=a.inChannels,h=u[0]*u[1]*u[2],p=a.outChannels,f="channelsLast"===a.dataFormat,m=!1,g=[];if(null!=o){let e=BK(o.shape,f);null!=e&&(o=jV({inputs:{x:o},backend:i,attrs:{shape:e}}),g.push(o))}if(null!=s){let e=BK(s.shape,f);null!=e&&(s=jV({inputs:{x:s},backend:i,attrs:{shape:e}}),g.push(s))}if((1!==h&&1!==p||!(d>1e3))&&A.isPacked&&f&&null!=A.texture&&u[2]%2!==0&&su.arraysEqual(A.shape.slice(-3),u.slice(-3))){let e=u[0]*u[1]*(u[2]+1),d={dataId:n.dataId,shape:[1,e,a.inChannels],dtype:n.dtype},h=A.shape;A.shape=A.shape.slice(),A.shape[A.shape.length-2]++,su.assert(MH(A.shape,d.shape),()=>"packed reshape ".concat(A.shape," to ").concat(d.shape," isn't free"));let p=jV({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});g.push(p);let f=$V({a:d,b:p,backend:i,transposeA:false,transposeB:m,bias:s,activation:c,preluActivationWeights:o,leakyreluAlpha:l}),y=i.texData.get(f.dataId);su.assert(y.isPacked,()=>"batchMatMul result is expected to be packed"),A.shape=h,y.shape=a.outShape,t=wV({inputs:{x:f},backend:i}),t.shape=a.outShape,g.push(f)}else{let e=a.outHeight*a.outWidth,u=jV({inputs:{x:n},backend:i,attrs:{shape:f?[a.batchSize,e,a.inChannels]:[a.batchSize,a.inChannels,e]}}),A=jV({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),d=$V({a:f?u:A,b:f?A:u,transposeA:!f,transposeB:m,backend:i,bias:s,activation:c,preluActivationWeights:o,leakyreluAlpha:l});t=jV({inputs:{x:d},backend:i,attrs:{shape:a.outShape}}),g.push(u),g.push(A),g.push(d)}for(let y of g)i.disposeIntermediateTensorInfo(y);return t}function IK(e){let{x:t,filter:n,convInfo:r,backend:a,bias:i=null,preluActivationWeights:s=null,leakyreluAlpha:o=0,activation:l=null}=e,{filterWidth:c,filterHeight:u,inChannels:A,outWidth:d,outHeight:h,dataFormat:p}=r,f="channelsLast"===p,m=c*u*A,g=h*d,y=[r.batchSize,m,g],b=[];if(null!=s){let e=BK(s.shape,f);null!=e&&(s=jV({inputs:{x:s},backend:a,attrs:{shape:e}}),b.push(s))}if(null!=i){let e=BK(i.shape,f);null!=e&&(i=jV({inputs:{x:i},backend:a,attrs:{shape:e}}),b.push(i))}let w=jV({inputs:{x:n},backend:a,attrs:{shape:[1,m,su.sizeFromShape(n.shape)/m]}});b.push(w);let v=new kK(y,r),x=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],C=a.runWebGLProgram(v,[t],"float32",x),k=jV({inputs:{x:C},backend:a,attrs:{shape:y}});b.push(C),b.push(k);let B=null!=i,S=null!=s,I="leakyrelu"===l,N=l?LV(l,!0):null,F=new DV(f?k.shape:w.shape,f?w.shape:k.shape,f?[r.batchSize,g,r.outChannels]:[r.batchSize,r.outChannels,g],!0,!1,B,N,S,I),E=f?[k,w]:[w,k];if(i&&E.push(i),S&&E.push(s),I){let e=a.makeTensorInfo([],"float32",su.createScalarValue(o,"float32"));E.push(e),b.push(e)}let _=a.runWebGLProgram(F,E,"float32"),T=jV({inputs:{x:_},backend:a,attrs:{shape:r.outShape}});b.push(_);for(let L of b)a.disposeIntermediateTensorInfo(L);return T}var NK={kernelName:ao,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:a}=e,{x:i,filter:s}=n,{strides:o,pad:l,dataFormat:c,dilations:u,dimRoundingMode:A}=a,d=Tw.convertConv2DDataFormat(c),h=Tw.computeConv2DInfo(i.shape,s.shape,o,u,l,A,!1,d);if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if(h.strideWidth<=2&&"channelsLast"===d&&Cs().getBool("WEBGL_EXP_CONV")){let e=new CK(h),n=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];t=r.runWebGLProgram(e,[i,s],"float32",n)}else if(Cs().getBool("WEBGL_CONV_IM2COL"))t=IK({x:i,filter:s,convInfo:h,backend:r});else{let e=new vK(h);t=r.runWebGLProgram(e,[i,s],"float32")}else t=SK({x:i,filter:s,convInfo:h,backend:r});let p=jV({inputs:{x:t},backend:r,attrs:{shape:h.outShape}});return r.disposeIntermediateTensorInfo(t),p}},FK=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(a,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              ").concat(i?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);","\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},EK=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i="channelsLast"===e.dataFormat,s=t-1-e.padInfo.top,o=n-1-e.padInfo.left,l=i?1:2,c=i?2:3,u=i?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(o,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(u,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(l,"], coords[").concat(c,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n\n              if (").concat(i,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},_K=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,i=e.padInfo.top,s=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(e.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(e.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(t," - ").concat(a,";\n\n            if (xF < 0 || xF >= ").concat(e.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(n," - ").concat(i,";\n\n              if (xR < 0 || xR >= ").concat(e.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(r," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},TK=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,s=e.strideWidth,o=t-1-e.padInfo.front,l=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(o,", ").concat(l,", ").concat(c,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(t,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(a,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(e.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(t," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(n,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(i,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(n," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(r,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(r," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}};var LK={kernelName:io,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,A=Tw.convertConv2DDataFormat(l),d=Tw.computeConv2DInfo(a.shape,u,s,1,o,c,!1,A),h=new FK(d);return n.runWebGLProgram(h,[a,i],"float32")}},DK=class{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=wz(this.outputShape.length);let t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,a=n-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2(".concat(r,", ").concat(a,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ").concat(e.outWidth,".0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ").concat(e.outWidth,".0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ").concat(e.outChannels,"; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    ")}};var RK={kernelName:so,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{inputShape:s,strides:o,pad:l,dataFormat:c,dimRoundingMode:u}=r,A=Tw.convertConv2DDataFormat(c),d=Tw.computeConv2DInfo(s,i.shape,o,1,l,u,!1,A);if(Cs().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&"channelsLast"===A){let e=[[d.strideHeight,d.strideWidth]],t=new DK(d);return n.runWebGLProgram(t,[a,i],"float32",e)}{let e=new EK(d);return n.runWebGLProgram(e,[a,i],"float32")}}};var UK={kernelName:oo,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r,c=Tw.computeConv3DInfo(a.shape,i.shape,s,l,o),u=new xK(c);return n.runWebGLProgram(u,[a,i],"float32")}};var OK={kernelName:lo,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,filterShape:l}=r,c=Tw.computeConv3DInfo(a.shape,l,s,1,o),u=new _K(c);return n.runWebGLProgram(u,[a,i],"float32")}};var MK,PK={kernelName:co,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{pad:s,strides:o,inputShape:l}=r,c=Tw.computeConv3DInfo(l,i.shape,o,1,s),u=new TK(c);return n.runWebGLProgram(u,[a,i],"float32")}},QK=_V({opSnippet:EV+"\n  return cos(x);\n",packedOpSnippet:"\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(yV,"\n  return result;\n")}),jK={kernelName:uo,backendName:"webgl",kernelFunc:QK},HK=_V({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),zK={kernelName:Ao,backendName:"webgl",kernelFunc:HK},WK=class{constructor(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[i,s,o,l]=e,[c]=t,[u,A]=n;this.outputShape=[c,u,A,l];let d="bilinear"===r?1:0,[h,p]=["".concat(s-1,".0"),"".concat(o-1,".0")],[f,m,g]=u>1?["".concat((s-1)/(u-1)),"(y2-y1) * height_ratio","y1*".concat(h," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(h)],[y,b,w]=A>1?["".concat((o-1)/(A-1)),"(x2-x1) * width_ratio","x1*".concat(p," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(p)];this.userCode="\n      const float height_ratio = float(".concat(f,");\n      const float width_ratio = float(").concat(y,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(i,") {\n          return;\n        }\n\n        float height_scale = ").concat(m,";\n        float width_scale = ").concat(b,";\n\n        float in_y = ").concat(g,";\n        if( in_y < 0.0 || in_y > ").concat(h," ) {\n          setOutput(float(").concat(a,"));\n          return;\n        }\n        float in_x = ").concat(w,";\n        if( in_x < 0.0 || in_x > ").concat(p," ) {\n          setOutput(float(").concat(a,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(d," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")}},VK={kernelName:fo,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{image:a,boxes:i,boxInd:s}=t,{cropSize:o,method:l,extrapolationValue:c}=r,u=new WK(a.shape,i.shape,o,l,c);return n.runWebGLProgram(u,[a,i,s],"float32")}};!function(e){e.Prod="*",e.Sum="+"}(MK||(MK={}));var GK=class{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let a=this.outputShape.length,i=this.op===MK.Prod?"1.0":"0.0",s=n?i:"getX(".concat(KK(a,"coords",this.op),")"),o=this.outputShape[this.outputShape.length-1],l="",c="";n?(l=r?"end != ".concat(o-1):"end != 0",c=r?"end + 1":"end - 1"):(l=r?"end + pow2 < ".concat(o):"end >= pow2",c=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(pz(a)," coords = getOutputCoords();\n        int end = ").concat(qK(a,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(l,") {\n          int idx = ").concat(c,";\n          ").concat(qK(a,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(KK(a,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}};function KK(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function qK(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function XK(e,t,n,r,a,i){let s=t.shape.length,o=Tw.getAxesPermutation([r],s),l=t;null!=o&&(l=YV({inputs:{x:t},backend:n,attrs:{perm:o}}));let c=Tw.getInnerMostAxes(1,s)[0];if(c!==s-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," but got axis=").concat(r));let u=l.shape[c],A=wV({inputs:{x:l},backend:n});for(let d=0;d<=Math.ceil(Math.log2(u))-1;d++){let t=new GK(e,l.shape,!1,i),r=[[d]],a=A;A=n.runWebGLProgram(t,[A],A.dtype,r),n.disposeIntermediateTensorInfo(a)}if(a){let t=new GK(e,l.shape,a,i),r=A;A=n.runWebGLProgram(t,[A],A.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=o){let e=YV({inputs:{x:A},backend:n,attrs:{perm:Tw.getUndoAxesPermutation(o)}});return n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(l),e}return A}var JK={kernelName:ho,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r;return XK(MK.Prod,a,n,i,s,o)}};var YK={kernelName:po,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r;return XK(MK.Sum,a,n,i,s,o)}};var ZK={kernelName:mo,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,weights:i}=t,{size:s,binaryOutput:o}=r;if(1===a.shape.length){let e=n.readSync(a.dataId),t=n.readSync(i.dataId),r=$z(e,t,i.dtype,i.shape,s);return n.makeTensorInfo([s],i.dtype,r)}if(2===a.shape.length){let e=n.bufferSync(a),t=n.bufferSync(i),r=eW(e,t,s,o);return n.makeTensorInfo(r.shape,i.dtype,r.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}},$K=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(t,";\n      int offset_h = imod(h, ").concat(t,");\n      int in_w = w / ").concat(t,";\n      int offset_w = imod(w, ").concat(t,");\n      int offset_d = (offset_h * ").concat(t," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};var eq={kernelName:go,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockSize:i,dataFormat:s}=r,o=a.shape[0],l=("NHWC"===s?a.shape[1]:a.shape[2])*i,c=("NHWC"===s?a.shape[2]:a.shape[3])*i,u=("NHWC"===s?a.shape[3]:a.shape[1])/(i*i),A=new $K("NHWC"===s?[o,l,c,u]:[o,u,l,c],i,s);return n.runWebGLProgram(A,[a],a.dtype)}},tq=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=wz(this.outputShape.length);let i=e.filterHeight,s=e.filterWidth,o=e.outChannels/e.inChannels,l="",c="";n&&(l=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):a?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"\n          float activation(float x) {\n            ".concat(n,"\n          }\n        "),c="result = activation(result);");let u=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(l,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(i,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(u,"\n        ").concat(c,"\n        setOutput(result);\n      }\n    ")}},nq=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=wz(this.outputShape.length);let i=e.outChannels/e.inChannels,s=e.padInfo.left,o=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,A=u,d="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let m=0;m<u;m++)d+="\n          vec4 xTexelC".concat(2*m,";\n          int xTexelC").concat(2*m,"Ready;\n          vec4 xTexelC").concat(2*m+1,";\n          int xTexelC").concat(2*m+1,"Ready;\n          vec4 xC").concat(m,";");d+="\n    for (int r = 0; r < ".concat(c,"; r++) {\n      ");for(let m=0;m<u;m++)d+="\n          xTexelC".concat(2*m," = vec4(0.0);\n          xTexelC").concat(2*m,"Ready = 0;\n          xTexelC").concat(2*m+1," = vec4(0.0);\n          xTexelC").concat(2*m+1,"Ready = 0;\n          xC").concat(m," = vec4(0.0);");d+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let m=0;m<(A+1)/2;m++){let e=2*m;if(d+="\n          xC = xCCorner + ".concat(e*l,";\n          "),1===o){if(e<u&&(s%2===1?(d+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n              "),d+=1===l&&e>0?"\n                xC".concat(e," = vec4(xTexelC").concat(e-2,".zw, xTexelC").concat(e,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(e," = vec4(previous.zw, xTexelC").concat(e,".xy);\n                  } else {\n                    xC").concat(e," = vec4(0.0, 0.0, xTexelC").concat(e,".xy);\n                  }\n                  ")):d+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xC").concat(e," = xTexelC").concat(e,";\n                "),e+1<u)){let t=s%2===0?su.nearestLargerEven(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(d+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(t,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                    xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(e+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(e+1,"Ready = 1;\n                  }\n                  "),d+=l>1?"\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC".concat(e+1," = vec4(previous.zw, xTexelC").concat(e+1,".xy);\n                    } else {\n                     xC").concat(e+1," = vec4(0.0, 0.0, xTexelC").concat(e+1,".xy);\n                    }\n                    "):"\n                    xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".xy);\n                    ")):d+=1===t?"\n                    xC".concat(e+1," = xTexelC").concat(e,";\n                    "):"\n                    xCOffset = xC + ".concat(t,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                      xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(e+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(e+1,"Ready = 1;\n                    }\n\n                    xC").concat(e+1," = xTexelC").concat(e+1,";\n                    ")}}else e<u&&(s%2===1?(d+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n              "),e+1<u&&(d+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(e+1," = vec4(xTexelC").concat(e+1,".xy, final.xy);\n                "))):(d+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(e,"Ready == 0) {\n                  xTexelC").concat(e," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(e,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(e,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(e+1,"Ready == 0) {\n                  xTexelC").concat(e+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(e+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(e+1,"Ready = 1;\n                }\n\n                xC").concat(e," = vec4(\n                  xTexelC").concat(e,".xy, xTexelC").concat(e+1,".xy);\n              "),e+1<u&&(d+="\n                  xC".concat(e+1," = vec4(xTexelC").concat(e,".zw, xTexelC").concat(e+1,".zw);\n                "))));e<u&&(d+="\n            wTexel = getW(r, ".concat(e,", d1, q);\n            dotProd += xC").concat(e," * vec4(wTexel.xz, wTexel.xz);\n          "),e+1<u&&(d+="\n              wTexel = getW(r, ".concat(e+1,", d1, q);\n              dotProd += xC").concat(e+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}d+="\n    }\n  ",d+="\n      }\n    ";let h="",p="";n&&(h=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(n,"\n        }"):a?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(n,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(n,"\n        }"),p="result = activation(result);");let f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(h,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(i,";\n        int q = d2 - d1 * ").concat(i,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(d,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(f,"\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")}};var rq={kernelName:yo,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l,dimRoundingMode:c}=r,u=l;null==u&&(u=[1,1]),su.assert(Tw.eitherStridesOrDilationsAreOne(s,u),()=>"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(u,"'"));let A,d=Tw.computeConv2DInfo(a.shape,i.shape,s,u,o,c,!0);A=Cs().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?new nq(d):new tq(d);let h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(A,[a,i],"float32",h)}},aq=class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(i," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(e.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(e.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(t," - ").concat(r,";\n\n            if (xR < 0 || xR >= ").concat(e.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(e.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(n," - ").concat(a,";\n\n              if (xC < 0 || xC >= ").concat(e.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},iq=class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,s=n-1-e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(i,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(t,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(t," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(n,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(n," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(o,"; dm++) {\n              int d2 = d1 * ").concat(o," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}};var sq={kernelName:bo,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:c,filterShape:u}=r,A=Tw.computeConv2DInfo(a.shape,u,s,o,l,c,!0),d=new aq(A);return n.runWebGLProgram(d,[a,i],"float32")}};var oq={kernelName:wo,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{strides:s,dilations:o,pad:l,dimRoundingMode:c,inputShape:u}=r,A=Tw.computeConv2DInfo(u,i.shape,s,o,l,c,!0),d=new iq(A);return n.runWebGLProgram(d,[a,i],"float32")}},lq=class{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}};var cq={kernelName:vo,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t,a=[...r.shape,...r.shape],i=su.sizeFromShape(r.shape),s=jV({inputs:{x:r},backend:n,attrs:{shape:[i]}}),o=new lq(i),l=n.runWebGLProgram(o,[s],s.dtype),c=jV({inputs:{x:l},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),c}},uq=class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let{inHeight:t,inWidth:n,padInfo:r,strideHeight:a,strideWidth:i,filterHeight:s,filterWidth:o,dilationHeight:l,dilationWidth:c}=e,{top:u,left:A}=r;this.userCode="\n      const ivec2 strides = ivec2(".concat(a,", ").concat(i,");\n      const ivec2 pads = ivec2(").concat(u,", ").concat(A,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(l,";\n\n          if (hIn >= 0 && hIn < ").concat(t,") {\n            for (int w = 0; w < ").concat(o,"; w++) {\n              int wIn = wBeg + w * ").concat(c,";\n\n              if (wIn >= 0 && wIn < ").concat(n,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}};var Aq={kernelName:xo,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:a}=e,{x:i,filter:s}=n,{strides:o,pad:l,dilations:c}=a,u=Tw.computeDilation2DInfo(i.shape,s.shape,o,l,"NHWC",c),A=new uq(u);t=r.runWebGLProgram(A,[i,s],"float32");let d=jV({inputs:{x:t},backend:r,attrs:{shape:u.outShape}});return r.disposeIntermediateTensorInfo(t),d}};var dq={kernelName:Io,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{equation:a}=r,i=t,{allDims:s,summedDims:o,idDims:l}=Tw.decodeEinsumEquation(a,i.length);Tw.checkEinsumDimSizes(s.length,l,i);let{path:c,steps:u}=Tw.getEinsumComputePath(o,l),A=u.length,d=null,h=s.length,p=[];for(let f=0;f<A;++f){for(let e of u[f]){let t,{permutationIndices:r,expandDims:a}=Tw.getEinsumPermutation(h,l[e]);Tw.isIdentityPermutation(r)?t=i[e]:(t=YV({inputs:{x:i[e]},backend:n,attrs:{perm:r}}),p.push(t));let s=t.shape.slice();for(let e=0;e<a.length;++e)s.splice(a[e],0,1);su.arraysEqual(t.shape,s)||(t=jV({inputs:{x:t},backend:n,attrs:{shape:s}}),p.push(t)),null===d?d=t:(d=PV({inputs:{a:t,b:d},backend:n}),p.push(d))}f<A-1&&(c[f]>=0&&(d=XV({inputs:{x:d},backend:n,attrs:{axis:c[f]-(s.length-h),keepDims:!1}}),p.push(d)),h--)}for(let f of p)f!==d&&n.disposeIntermediateTensorInfo(f);return d}},hq=_V({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),pq={kernelName:No,backendName:"webgl",kernelFunc:hq},fq={kernelName:Fo,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e,{dy:r,y:a}=t,i=Cs().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new bV("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new gV("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},mq=TV({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:iW}),gq={kernelName:_o,backendName:"webgl",kernelFunc:mq},yq=_V({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(Tw.ERF_P,";\n  float a1 = ").concat(Tw.ERF_A1,";\n  float a2 = ").concat(Tw.ERF_A2,";\n  float a3 = ").concat(Tw.ERF_A3,";\n  float a4 = ").concat(Tw.ERF_A4,";\n  float a5 = ").concat(Tw.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),bq={kernelName:Eo,backendName:"webgl",kernelFunc:yq},wq=_V({opSnippet:EV+"\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:sW,dtype:"float32"}),vq={kernelName:To,backendName:"webgl",kernelFunc:wq};function xq(e){let{inputs:t,attrs:n,backend:r}=e,{dim:a}=n,{input:i}=t,s=i.shape.length,o=i.shape.slice(),l=a;return a<0&&(su.assert(-(s+1)<=a,()=>"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")),l=s+a+1),o.splice(l,0,1),jV({inputs:{x:i},backend:r,attrs:{shape:o}})}var Cq={kernelName:Lo,backendName:"webgl",kernelFunc:xq},kq="return exp(x) - 1.0;",Bq=_V({opSnippet:kq,packedOpSnippet:kq,cpuKernelImpl:oW}),Sq={kernelName:Do,backendName:"webgl",kernelFunc:Bq},Iq=class{constructor(e,t,n){this.variableNames=["real","imag"];let r=t[1];this.outputShape=t;let a,i=n?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=n?"".concat(r,".0"):"1.0";if("real"===e)a="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error('FFT component must be either "real" or "imag", got '.concat(e,"."));a="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(i,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(a,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(r,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(r,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}};function Nq(e,t,n){let r=n.texData.get(e.dataId),a=su.sizeFromShape(e.shape),i=e.shape[e.shape.length-1],s=jV({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),o=s.shape,l=new Iq("real",o,t),c=new Iq("imag",o,t),u=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:o},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:o}],A=n.runWebGLProgram(l,u,"float32"),d=n.runWebGLProgram(c,u,"float32"),h=xV({inputs:{real:A,imag:d},backend:n});n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(d);let p=jV({inputs:{x:h},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(h),p}var Fq={kernelName:Ro,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{input:r}=t;return Nq(r,!1,n)}},Eq=class{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}};function _q(e){let{backend:t,attrs:n}=e,{shape:r,value:a}=n,{dtype:i}=n;if(i=i||su.inferDtype(a),"string"===i){let e=su.getArrayFromDType(i,su.sizeFromShape(r));return e.fill(a),t.makeTensorInfo(r,i,e)}{let e=new Eq(r,a),n=[[a]];return t.runWebGLProgram(e,[],i,n)}}var Tq,Lq={kernelName:Uo,backendName:"webgl",kernelFunc:_q},Dq=class{constructor(e){this.variableNames=["Image"],this.outputShape=[];let t=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(t," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(t,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}},Rq={kernelName:Oo,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e,{image:r}=t,a=n,i=new Dq(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},Uq="return floor(x);",Oq=_V({opSnippet:Uq,packedOpSnippet:Uq,cpuKernelImpl:lW}),Mq={kernelName:Mo,backendName:"webgl",kernelFunc:Oq},Pq=TV({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),Qq={kernelName:Po,backendName:"webgl",kernelFunc:Pq},jq=class{constructor(e){this.variableNames=["A"];let t=ZH(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(r,".0, ").concat(n,".0);\n\n        vec4 values = ").concat(t.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")}},Hq=class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let t=ZH(),[n,r]=e;this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(r,".0, ").concat(n,".0);\n            vec4 values = ").concat(t.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(t.output," = result;\n      }\n    ")}},zq={kernelName:Hc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{pixels:a}=t,{numChannels:i}=r,s="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,o="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,[l,c]=s?[a.videoWidth,a.videoHeight]:[a.width,a.height],u=[c,l],A=[c,l,i];if(o||s){let e=Cs().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(null==Tq||e!==Wq)&&(Wq=e,Tq=document.createElement("canvas").getContext("2d",{willReadFrequently:Wq})),Tq.canvas.width=l,Tq.canvas.height=c,Tq.drawImage(a,0,0,l,c),a=Tq.canvas}let d=n.makeTensorInfo(u,"int32");n.texData.get(d.dataId).usage=zj.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),a);let h=Cs().getBool("WEBGL_PACK")?new Hq(A):new jq(A),p=n.runWebGLProgram(h,[d],"int32");return n.disposeData(d.dataId),p}},Wq=Cs().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");var Vq={kernelName:Vc,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:a}=e,{x:i,filter:s,bias:o,preluActivationWeights:l}=n,{strides:c,pad:u,dataFormat:A,dilations:d,dimRoundingMode:h,activation:p,leakyreluAlpha:f}=a,m=Tw.convertConv2DDataFormat(A),g=Tw.computeConv2DInfo(i.shape,s.shape,c,d,u,h,!1,m),y=[],b=null!=o,w=null!=l,v="leakyrelu"===p,x=()=>{let e=[i,s],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){let t=jV({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return y.push(t),t}return e};if(b&&e.push(t(o,A)),w&&e.push(t(l,A)),v){let t=r.makeTensorInfo([],"float32",su.createScalarValue(f,"float32"));e.push(t),y.push(t)}return e};if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(g.strideWidth<=2&&"channelsLast"===m&&Cs().getBool("WEBGL_EXP_CONV")){let e=p?LV(p,!0):null,n=new CK(g,b,e,w,v),a=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],i=x();t=r.runWebGLProgram(n,i,"float32",a)}else if(Cs().getBool("WEBGL_CONV_IM2COL"))t=IK({x:i,filter:s,convInfo:g,backend:r,bias:o,activation:p,preluActivationWeights:l,leakyreluAlpha:f});else{let e=p?LV(p,!1):null,n=new vK(g,b,e,w,v),a=x();t=r.runWebGLProgram(n,a,"float32")}else t=SK({x:i,filter:s,convInfo:g,backend:r,bias:o,activation:p,preluActivationWeights:l,leakyreluAlpha:f});let C=jV({inputs:{x:t},backend:r,attrs:{shape:g.outShape}});return y.push(t),y.forEach(e=>r.disposeIntermediateTensorInfo(e)),C}};var Gq={kernelName:Gc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dilations:u,dimRoundingMode:A,activation:d,leakyreluAlpha:h}=r,p=[],f=u;null==f&&(f=[1,1]),su.assert(Tw.eitherStridesOrDilationsAreOne(l,f),()=>"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(l," and dilations '").concat(f,"'"));let m,g=Tw.computeConv2DInfo(a.shape,i.shape,l,f,c,A,!0),y=Cs().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=d?LV(d,y):null,w=[a,i],v=null!=s,x=null!=o,C="leakyrelu"===d;if(v&&w.push(s),x&&w.push(o),C){let e=n.makeTensorInfo([],"float32",su.createScalarValue(h,"float32"));w.push(e),p.push(e)}m=y?new nq(g,v,b,x,C):new tq(g,v,b,x,C);let k=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],B=n.runWebGLProgram(m,w,"float32",k);return p.forEach(e=>n.disposeIntermediateTensorInfo(e)),B}},Kq=class{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;let a=pz(n.length),i="\n    int index;";for(let s=0;s<this.sliceDim;s++)i+="\n          index = round(getIndices(coords[0], ".concat(s,"));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ").concat(this.paramsShape[s],";\n          flattenIndex += index * ").concat(this.strides[s],";");this.userCode="\n         void main() {\n          ".concat(a," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ").concat(i,"\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}};var qq={kernelName:Ho,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{params:r,indices:a}=t,i=a.shape,s=i[i.length-1],o=su.sizeFromShape(r.shape),[l,c,u,A]=Tw.prepareAndValidate(r,a),d=jV({inputs:{x:a},backend:n,attrs:{shape:[c,s]}}),h=jV({inputs:{x:r},backend:n,attrs:{shape:[su.sizeFromShape(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){let e=n.readSync(a.dataId),t=n.bufferSync(r),i=cW(e,t,r.dtype,c,s,u,A,r.shape,o);return n.makeTensorInfo(l,r.dtype,i.values)}let p=new Kq(s,A,[c,u],r.shape),f=n.runWebGLProgram(p,[h,d],h.dtype),m=jV({inputs:{x:f},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),m}},Xq=class{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;let n=pz(this.rank),r=function(e){let t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[];for(let r=0;r<e.length;r++)2===r?n.push("index"):n.push("".concat(t[r]));return n.join()}(e);this.userCode="\n      void main() {\n        ".concat(n," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(e[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(r,"));\n      }\n    ")}};function Jq(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,indices:i}=t,{axis:s,batchDims:o}=r,l=su.parseAxisParam(s,a.shape)[0];if(Cs().get("DEBUG")){let e=n.readSync(i.dataId),t=a.shape[l];for(let n=0;n<e.length;++n){let r=e[n];su.assert(r<=t-1&&r>=0,()=>"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]"))}}let c=Tw.segment_util.collectGatherOpShapeInfo(a,i,l,o),u=su.sizeFromShape(i.shape),A=[],d=jV({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=jV({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});A.push(d),A.push(h);let p=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){let e=n.bufferSync(h),t=n.bufferSync(d),r=uW(t,e,p);return A.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(c.outputShape,r.dtype,r.values)}let f=new Xq(d.shape,p),m=n.runWebGLProgram(f,[d,h],d.dtype);A.push(m);let g=jV({inputs:{x:m},backend:n,attrs:{shape:c.outputShape}});return A.forEach(e=>n.disposeIntermediateTensorInfo(e)),g}var Yq={kernelName:jo,backendName:"webgl",kernelFunc:Jq},Zq=TV({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:AW,dtype:"bool"}),$q={kernelName:zo,backendName:"webgl",kernelFunc:Zq},eX=TV({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:dW}),tX={kernelName:Wo,backendName:"webgl",kernelFunc:eX};var nX={kernelName:Go,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{input:r}=t;return Nq(r,!0,n)}},rX=_V({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),aX={kernelName:qo,backendName:"webgl",kernelFunc:rX},iX=_V({opSnippet:"return float(isinf(x));",dtype:"bool"}),sX={kernelName:Xo,backendName:"webgl",kernelFunc:iX},oX=_V({opSnippet:"return float(isnan(x));",dtype:"bool"}),lX={kernelName:Jo,backendName:"webgl",kernelFunc:oX},cX=TV({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:hW,dtype:"bool"}),uX={kernelName:Zo,backendName:"webgl",kernelFunc:cX},AX=TV({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:pW,dtype:"bool"}),dX={kernelName:$o,backendName:"webgl",kernelFunc:AX};var hX={kernelName:el,backendName:"webgl",kernelFunc:function(e){let{backend:t,attrs:n}=e,{start:r,stop:a,num:i}=n,s=fW(r,a,i);return t.makeTensorInfo([s.length],"float32",s)}},pX=_V({opSnippet:EV+"\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:mW}),fX={kernelName:tl,backendName:"webgl",kernelFunc:pX},mX=_V({opSnippet:EV+"\n  return log(1.0 + x);\n"}),gX={kernelName:nl,backendName:"webgl",kernelFunc:mX},yX=TV({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),bX={kernelName:rl,backendName:"webgl",kernelFunc:yX},wX=_V({opSnippet:"return float(!(x >= 1.0));"}),vX={kernelName:al,backendName:"webgl",kernelFunc:wX},xX=TV({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),CX={kernelName:il,backendName:"webgl",kernelFunc:xX},kX=class{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];let i=t,s=e[3]-1;this.outputShape=e;let o,l="float(".concat(n,") + float(").concat(r,") * sum");o=.5===a?"inversesqrt(".concat(l,")"):1===a?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(a,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(i,"; j <= ").concat(i,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(s,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")}},BX=class{constructor(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let i=t,s=e[3]-1;this.outputShape=e;let o,l="float(".concat(n,") + float(").concat(r,") * sum");o=.5===a?"inversesqrt(".concat(l,")"):1===a?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(a,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(i,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(i,"; j <= ").concat(i,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(s,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")}},SX={kernelName:cl,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:i,bias:s,alpha:o,beta:l}=r,c=Cs().getBool("WEBGL_PACK_NORMALIZATION")?new BX(a.shape,i,s,o,l):new kX(a.shape,i,s,o,l);return n.runWebGLProgram(c,[a],a.dtype)}},IX=class{constructor(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(t,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(t," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(r,") * norm + float(").concat(n,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(r,")\n                * float(").concat(a,")\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(a,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")}},NX={kernelName:ul,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a,y:i,dy:s}=t,{depthRadius:o,bias:l,alpha:c,beta:u}=r,A=new IX(a.shape,o,l,c,u);return n.runWebGLProgram(A,[a,i,s],a.dtype)}};function FX(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reductionIndices:i,keepDims:s}=r,o=a.shape.length,l=su.parseAxisParam(i,a.shape),c=l,u=Tw.getAxesPermutation(c,o),A=null!=u,d=n.shouldExecuteOnCPU([a]),h=a;if(A){if(d){let e=n.texData.get(h.dataId).values,t=new Array(o);for(let n=0;n<t.length;n++)t[n]=a.shape[u[n]];let r=VW(e,a.shape,a.dtype,u,t);h=n.makeTensorInfo(t,a.dtype),n.texData.get(h.dataId).values=r}else h=qV(a,u,n);c=Tw.getInnerMostAxes(c.length,o)}Tw.assertAxesAreInnerMostDims("max",c,o);let p,[f,m]=Tw.computeOutAndReduceShapes(h.shape,c),g=f;if(s&&(g=Tw.expandShapeToKeepDim(f,l)),d){let e=n.texData.get(h.dataId).values,t=gW(e,su.sizeFromShape(m),g,a.dtype);p=n.makeTensorInfo(g,a.dtype),n.texData.get(p.dataId).values=t}else p=function(e,t,n,r){let a=su.sizeFromShape(t),i=jV({inputs:{x:e},attrs:{shape:[su.sizeFromShape(e.shape)/a,a]},backend:r}),s=VV(i,e.dtype,"max",r),o=jV({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),o}(h,m,g,n);return A&&n.disposeIntermediateTensorInfo(h),p}var EX={kernelName:dl,backendName:"webgl",kernelFunc:FX},_X=TV({opSnippet:mV+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+yV+"\n  return result;\n",cpuKernelImpl:yW}),TX={kernelName:hl,backendName:"webgl",kernelFunc:_X};var LX={kernelName:pl,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;JH(a,"maxPool");let{filterSize:i,strides:s,pad:o,dimRoundingMode:l}=r;su.assert(Tw.eitherStridesOrDilationsAreOne(s,1),()=>"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(1,"'"));let c=Tw.computePool2DInfo(a.shape,i,s,1,o,l);if(1===c.filterWidth&&1===c.filterHeight&&su.arraysEqual(c.inShape,c.outShape))return wV({inputs:{x:a},backend:n});let u=new TG(c,"max",!1);return n.runWebGLProgram(u,[a],a.dtype)}};var DX={kernelName:ml,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dataFormat:l,dimRoundingMode:c}=r,u=Tw.computePool3DInfo(a.shape,i,s,[1,1,1],o,c,l),A=new LG(u,"max",!1);return n.runWebGLProgram(A,[a],a.dtype)}},RX=class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,i=e.effectiveFilterWidth,s=a-1-e.padInfo.top,o=i-1-e.padInfo.left,l=a*i-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(o,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(a,";\n          wR += ").concat(r,") {\n          float dyR = float(dyRCorner + wR) / ").concat(t,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(i,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(n,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(l," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(i," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}},UX=class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,i=e.dilationHeight,s=e.dilationWidth,o=e.effectiveFilterDepth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=o-1-e.padInfo.front,A=l-1-e.padInfo.top,d=c-1-e.padInfo.left,h=o*l*c-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(A,", ").concat(d,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(o,";\n           wD += ").concat(a,") {\n          float dyD = float(dyDCorner + wD) / ").concat(t,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(e.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(l,";\n              wR += ").concat(i,") {\n            float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(e.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(c,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(e.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(h," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(l," * ").concat(c," +\n                  wR * ").concat(c," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}};var OX={kernelName:gl,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,s=i,{filterSize:o,strides:l,pad:c,dimRoundingMode:u}=r,A=Tw.computePool3DInfo(s.shape,o,l,[1,1,1],c,u),d=new LG(A,"max",!0),h=n.runWebGLProgram(d,[s],s.dtype),p=new UX(A),f=n.runWebGLProgram(p,[a,h],s.dtype);return n.disposeIntermediateTensorInfo(h),f}};var MX={kernelName:fl,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i,output:s}=t,o=i;JH([i,s],"maxPoolGrad");let{filterSize:l,strides:c,pad:u,dimRoundingMode:A}=r,d=Tw.computePool2DInfo(o.shape,l,c,1,u,A),h=new TG(d,"max",!0),p=n.runWebGLProgram(h,[o],o.dtype),f=new RX(d),m=n.runWebGLProgram(f,[a,p],o.dtype);return n.disposeIntermediateTensorInfo(p),m}};var PX={kernelName:yl,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:l}=n,c=r;su.assert(4===a.shape.length,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,"."));let u=[1,1];su.assert(Tw.eitherStridesOrDilationsAreOne(s,u),()=>"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(u,"'"));let A=Tw.computePool2DInfo(a.shape,i,s,u,o),[d,h]=function(e,t,n,r){let a=new TG(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new TG(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,l,A,c);return[d,h]}};var QX={kernelName:bl,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{keepDims:i,axis:s}=n,o=r,l=a.shape.length,c=su.parseAxisParam(s,a.shape),u=c,A=Tw.getAxesPermutation(u,l),d=null!=A,h=o.shouldExecuteOnCPU([a]),p=[],f=a;if(d){if(h){let e=o.texData.get(f.dataId).values,t=new Array(l);for(let r=0;r<t.length;r++)t[r]=a.shape[A[r]];let n=VW(e,a.shape,a.dtype,A,t);f=o.makeTensorInfo(t,a.dtype),o.texData.get(f.dataId).values=n}else f=qV(a,A,o);p.push(f),u=Tw.getInnerMostAxes(u.length,l)}Tw.assertAxesAreInnerMostDims("sum",u,l);let[m,g]=Tw.computeOutAndReduceShapes(f.shape,u),y=m;i&&(y=Tw.expandShapeToKeepDim(m,c));let b=function(e,t,n,r){let a=su.sizeFromShape(t),i=jV({inputs:{x:e},attrs:{shape:[su.sizeFromShape(e.shape)/a,a]},backend:r}),s=VV(i,"float32","mean",r),o=jV({inputs:{x:s},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),o}(f,g,y,o);for(let w of p)o.disposeIntermediateTensorInfo(w);return b}};var jX={kernelName:wl,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,keepDims:s}=r,o=a.shape.length,l=su.parseAxisParam(i,a.shape),c=l,u=Tw.getAxesPermutation(c,o),A=a;null!=u&&(A=YV({inputs:{x:a},backend:n,attrs:{perm:u}}),c=Tw.getInnerMostAxes(c.length,a.shape.length)),Tw.assertAxesAreInnerMostDims("min",c,o);let d,[h,p]=Tw.computeOutAndReduceShapes(A.shape,c),f=jV({inputs:{x:A},backend:n,attrs:{shape:[-1,su.sizeFromShape(p)]}}),m=VV(f,f.dtype,"min",n);if(s){d=jV({inputs:{x:m},backend:n,attrs:{shape:Tw.expandShapeToKeepDim(h,l)}})}else d=jV({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=u&&n.disposeIntermediateTensorInfo(A),d}},HX=TV({opSnippet:mV+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  "+yV+"\n  return result;\n",cpuKernelImpl:bW}),zX={kernelName:vl,backendName:"webgl",kernelFunc:HX},WX=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,a=pz(r),i=t.map(e=>e[0]).join(","),s=t.map((t,n)=>t[0]+e[n]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===n?0:1;this.userCode=1!==r?"\n      ".concat(a," start = ").concat(a,"(").concat(i,");\n      ").concat(a," end = ").concat(a,"(").concat(s,");\n\n      void main() {\n        ").concat(a," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(r,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(l,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(l,";\n          }\n        }\n        ").concat(a," coords = outC - start;\n        setOutput(getX(").concat(o,"));\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(l,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(l,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")}},VX=class{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,a=pz(r),i=t.map(e=>e[0]).join(","),s=t.map((t,n)=>t[0]+e[n]).join(","),o=qW("rc",r),l=qW("source",r),c="".concat(o[r-1]," < ").concat(this.outputShape[r-1]),u=1===r?"source":"vec2(".concat(l.slice(-2).join(),")"),A="reflect"===n?0:1,d="";if(1===r){let e="\n        ".concat(a," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(A,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(A,";\n        }\n        source -= start;\n      ");d="\n        ".concat(a," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        ").concat(o[r-1]," += 1;\n        if(").concat(c,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n      ")}else{let e="\n        ".concat(a," source = rc;\n        ").concat(a," lt = ").concat(a,"(lessThan(source, start));\n        ").concat(a," gte = ").concat(a,"(greaterThanEqual(source, end));\n        ").concat(a," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(A,") +\n                gte * ((end - 1) * 2 - source + ").concat(A,");\n        source -= start;\n      ");d="\n        ".concat(a," rc = outputLoc;\n        ").concat(e,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        ").concat(o[r-1]," += 1;\n        if(").concat(c,") {\n          ").concat(e,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n        rc = outputLoc;\n        ").concat(o[r-2]," += 1;\n        if(").concat(o[r-2]," < ").concat(this.outputShape[r-2],") {\n          ").concat(e,"\n          result[2] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n          ").concat(o[r-1]," += 1;\n          if(").concat(c,") {\n            ").concat(e,"\n            result[3] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(a," start = ").concat(a,"(").concat(i,");\n      const ").concat(a," end = ").concat(a,"(").concat(s,");\n\n      void main() {\n        ").concat(a," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(d,"\n        setOutput(result);\n      }\n    ")}},GX={kernelName:xl,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,mode:s}=r,o=Cs().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new VX(a.shape,i,s):new WX(a.shape,i,s);return n.runWebGLProgram(o,[a],a.dtype)}},KX=TV({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  "+yV+"\n  return result;\n"}),qX={kernelName:Cl,backendName:"webgl",kernelFunc:KX},XX=class{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(t-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(t-1,"));\n      }\n    ")}},JX=TV({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),YX={kernelName:So,backendName:"webgl",kernelFunc:JX},ZX="return a - b;",$X=TV({opSnippet:ZX,packedOpSnippet:ZX,supportsComplex:!0,cpuKernelImpl:HW}),eJ={kernelName:Fc,backendName:"webgl",kernelFunc:$X};function tJ(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{dim:i}=r,s=su.parseAxisParam([i],a.shape),o=FX({inputs:{x:a},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),l=Tw.expandShapeToKeepDim(o.shape,s),c=jV({inputs:{x:o},backend:n,attrs:{shape:l}}),u=$X({inputs:{a:a,b:c},backend:n}),A=wq({inputs:{x:u},backend:n}),d=XV({inputs:{x:A},backend:n,attrs:{axis:s,keepDims:!1}}),h=jV({inputs:{x:d},backend:n,attrs:{shape:l}}),p=JX({inputs:{a:A,b:h},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),p}var nJ={kernelName:mc,backendName:"webgl",kernelFunc:tJ};var rJ={kernelName:kl,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:i,seed:s,normalized:o}=r,l=o?a:tJ({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=l.shape[0],u=l.shape[1],A=new XX(c,u,i),d=[[s]],h=n.runWebGLProgram(A,[l],"int32",d);return o||n.disposeIntermediateTensorInfo(l),h}},aJ=nV+"\n  return -x;\n";var iJ={kernelName:Sl,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r}=e,{x:a}=n;if(r.shouldExecuteOnCPU([a])){let e=r.texData.get(a.dataId),[t,n]=vW(e.values,a.shape,a.dtype);return r.makeTensorInfo(n,a.dtype,t)}return t=Cs().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new oV(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new tV(a.shape,aJ),r.runWebGLProgram(t,[a],a.dtype)}},sJ=Mv.nonMaxSuppressionV3Impl;var oJ={kernelName:Nl,backendName:"webgl",kernelFunc:function(e){Tw.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l}=r,c=n.readSync(a.dataId),u=n.readSync(i.dataId),{selectedIndices:A}=sJ(c,u,s,o,l);return n.makeTensorInfo([A.length],"int32",new Int32Array(A))}},lJ=Mv.nonMaxSuppressionV4Impl;var cJ={kernelName:Fl,backendName:"webgl",kernelFunc:function(e){Tw.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(a.dataId),A=n.readSync(i.dataId),{selectedIndices:d,validOutputs:h}=lJ(u,A,s,o,l,c);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},uJ=Mv.nonMaxSuppressionV5Impl;var AJ={kernelName:El,backendName:"webgl",kernelFunc:function(e){Tw.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:a,scores:i}=t,{maxOutputSize:s,iouThreshold:o,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(a.dataId),A=n.readSync(i.dataId),d=s,h=o,p=l,f=c,{selectedIndices:m,selectedScores:g}=uJ(u,A,d,h,p,f);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}},dJ=class{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(r,"), float(").concat(n,"),\n                      float(index == coords.y)));\n      }\n    ")}},hJ={kernelName:Tl,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:i,depth:s,onValue:o,offValue:l}=r,c=su.sizeFromShape(a.shape),u=new dJ(c,s,o,l),A=jV({inputs:{x:a},backend:n,attrs:{shape:[c]}}),d=n.runWebGLProgram(u,[A],i);n.disposeIntermediateTensorInfo(A);let h=jV({inputs:{x:d},backend:n,attrs:{shape:[...a.shape,s]}});return n.disposeIntermediateTensorInfo(d),h}};function pJ(e){let{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){let e=tK({inputs:{input:r},backend:n}),t=pJ({inputs:{x:e},backend:n}),a=mK({inputs:{input:r},backend:n}),i=pJ({inputs:{x:a},backend:n}),s=xV({inputs:{real:t,imag:i},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),s}return _q({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var fJ={kernelName:Qc,backendName:"webgl",kernelFunc:pJ};var mJ={kernelName:_l,backendName:"webgl",kernelFunc:function e(t){let{inputs:n,backend:r}=t,{x:a}=n;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){let t=tK({inputs:{input:a},backend:r}),n=e({inputs:{x:t},backend:r}),i=mK({inputs:{input:a},backend:r}),s=pJ({inputs:{x:i},backend:r}),o=xV({inputs:{real:n,imag:s},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(s),o}return _q({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var gJ={kernelName:Ll,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return xq({inputs:{input:t[0]},backend:n,attrs:{dim:a}});let i=t[0].shape,s=t[0].dtype;t.forEach(e=>{su.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),su.assert(s===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],l=t.map(e=>{let t=xq({inputs:{input:e},backend:n,attrs:{dim:a}});return o.push(t),t}),c=bK({inputs:l,backend:n,attrs:{axis:a}});return o.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}},yJ=class{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,a=pz(r),i=t.map(e=>e[0]).join(","),s=t.map((t,n)=>t[0]+e[n]).join(","),o=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      ".concat(a," start = ").concat(a,"(").concat(i,");\n      ").concat(a," end = ").concat(a,"(").concat(s,");\n\n      void main() {\n        ").concat(a," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(a," coords = outC - start;\n          setOutput(getX(").concat(o,"));\n        }\n      }\n    "):"\n        int start = ".concat(i,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")}},bJ=class{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,a=pz(r),i=t.map(e=>e[0]).join(","),s=t.map((t,n)=>t[0]+e[n]).join(","),o=qW("rc",r),l=qW("source",r),c="".concat(o[r-1]," < ").concat(this.outputShape[r-1]),u=1===r?"source":"vec2(".concat(l.slice(-2).join(),")"),A=["".concat(a," rc = outputLoc;"),"".concat(o[r-1]," += 1;\n       if(").concat(c,") {\n      "),1===r?"":"}\n       rc = outputLoc;\n       ".concat(o[r-2]," += 1;\n       if(").concat(o[r-2]," < ").concat(this.outputShape[r-2],") {"),1===r?"":"  ".concat(o[r-1]," += 1;\n         if(").concat(c,") {")],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="";for(let p=0,f=1===r?2:4;p<f;p++)h+="\n        ".concat(A[p],"\n        if (").concat(d,") {\n          result[").concat(p,"] = float(value);\n        } else {\n          ").concat(a," source = rc - start;\n          result[").concat(p,"] = getChannel(getX(").concat(l.join(),"), ").concat(u,");\n        }\n      ");h+=1===r?"} ":"}}",this.userCode="\n      const ".concat(a," start = ").concat(a,"(").concat(i,");\n      const ").concat(a," end = ").concat(a,"(").concat(s,");\n\n      void main() {\n        ").concat(a," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")}},wJ=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{paddings:i,constantValue:s}=r;if(0===su.sizeFromShape(a.shape)){let e=i.map((e,t)=>e[0]+a.shape[t]+e[1]);return _q({backend:n,attrs:{shape:e,value:s,dtype:a.dtype}})}let o=Cs().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new bJ(a.shape,i,s):new yJ(a.shape,i,s),l=[[s]];return n.runWebGLProgram(o,[a],a.dtype,l)},vJ={kernelName:Dl,backendName:"webgl",kernelFunc:wJ},xJ=TV({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  "+yV+"\n  return result;\n"}),CJ={kernelName:Ul,backendName:"webgl",kernelFunc:xJ};var kJ={kernelName:Ml,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:a}=e,{x:i}=n,{axis:s,keepDims:o}=a,l=i.shape.length,c=[],u=su.parseAxisParam(s,i.shape),A=u,d=Tw.getAxesPermutation(A,l),h=i;if(null!=d&&(h=YV({inputs:{x:i},backend:r,attrs:{perm:d}}),A=Tw.getInnerMostAxes(A.length,l),c.push(h)),Tw.assertAxesAreInnerMostDims("prod",A,l),r.shouldExecuteOnCPU([h])){let e=r.texData.get(h.dataId).values,{outVals:n,outShape:a,outDtype:i}=CW(h.shape,h.dtype,e,A);t=r.makeTensorInfo(a,i,n)}else{let[e,n]=Tw.computeOutAndReduceShapes(h.shape,A),a=su.sizeFromShape(n),s=jV({inputs:{x:h},backend:r,attrs:{shape:[-1,a]}}),o=VV(s,$u(i.dtype),"prod",r);t=jV({inputs:{x:o},backend:r,attrs:{shape:e}}),c.push(s),c.push(o)}if(o){c.push(t);let e=Tw.expandShapeToKeepDim(t.shape,u);t=jV({inputs:{x:t},backend:r,attrs:{shape:e}})}return c.forEach(e=>r.disposeIntermediateTensorInfo(e)),t}};var BJ={kernelName:Pl,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:a,paramsDenseValues:i,indices:s}=t,{outputRaggedRank:o}=r,l=a.map(e=>n.readSync(e.dataId)),c=a.map(e=>e.shape),u=n.readSync(i.dataId),A=n.readSync(s.dataId),[d,h,p]=kW(l,c,u,i.shape,i.dtype,A,s.shape,o),f=d.map(e=>n.makeTensorInfo([e.length],"int32",e)),m=n.makeTensorInfo(p,i.dtype,h);return f.concat([m])}};var SJ={kernelName:Ql,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{starts:r,limits:a,deltas:i}=t,s=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(i.dataId),[c,u]=BW(s,r.shape,r.dtype,o,a.shape,l,i.shape);return[n.makeTensorInfo([c.length],"int32",c),n.makeTensorInfo([u.length],r.dtype,u)]}};var IJ={kernelName:jl,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{shape:a,values:i,defaultValue:s,rowPartitionTensors:o}=t,{rowPartitionTypes:l}=r,c=n.readSync(a.dataId),u=n.readSync(i.dataId),A=n.readSync(s.dataId),d=o.map(e=>n.readSync(e.dataId)),h=o.map(e=>e.shape),[p,f]=SW(c,a.shape,u,i.shape,i.dtype,A,s.shape,d,h,l);return n.makeTensorInfo(p,i.dtype,f)}},NJ=e=>{let{backend:t,attrs:n}=e,{start:r,stop:a,step:i,dtype:s}=n,o=IW(r,a,i,s);return t.makeTensorInfo([o.length],s,o)},FJ={kernelName:Hl,backendName:"webgl",kernelFunc:NJ},EJ=_V({opSnippet:"return 1.0 / x;"}),_J={kernelName:Wl,backendName:"webgl",kernelFunc:EJ},TJ=_V({opSnippet:nV+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),LJ={kernelName:Vl,backendName:"webgl",kernelFunc:TJ},DJ=_V({opSnippet:nV+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),RJ={kernelName:Yl,backendName:"webgl",kernelFunc:DJ},UJ=class{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];let[i,s,o,l]=e;this.outputShape=[i,t,n,l];let c,u=[r&&t>1?s-1:s,r&&n>1?o-1:o],A=[r&&t>1?t-1:t,r&&n>1?n-1:n];c=a?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(u[0]/A[0],",\n          ").concat(u[1]/A[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(o,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(c,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")}},OJ=class{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[i,s,o,l]=e;this.outputShape=[i,t,n,l];let c,u=[r&&t>1?s-1:s,r&&n>1?o-1:o],A=[r&&t>1?t-1:t,r&&n>1?n-1:n];c=a?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(u[0]/A[0],",\n          ").concat(u[1]/A[1],",\n          ").concat(u[1]/A[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(o,".0,\n                                     ").concat(o,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(c,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}};var MJ={kernelName:Xl,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:s,size:o}=r,[l,c]=o,u=Cs().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new OJ(a.shape,l,c,i,s):new UJ(a.shape,l,c,i,s);return n.runWebGLProgram(u,[a],"float32")}},PJ=class{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,r,a]=t,[,i,s]=e,o=[n&&i>1?r-1:r,n&&s>1?a-1:a],l=[n&&i>1?i-1:i,n&&s>1?s-1:s],c=o[0]/l[0],u=o[1]/l[1],A=1/c,d=1/u,h=2*Math.ceil(A)+2,p=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(c,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(A,");\n        const float invWidthScale = float(").concat(d,");\n\n        const int winHeight = int(").concat(h,");\n        const int winWidth = int(").concat(p,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(s,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(r-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(a-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}};var QJ={kernelName:Jl,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r,o=new PJ(i.shape,a.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}},jJ=class{constructor(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];let[i,s,o,l]=e;this.outputShape=[i,t,n,l];let c,u=[r&&t>1?s-1:s,r&&n>1?o-1:o],A=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";c=a?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(u[0]/A[0],",\n          ").concat(u[1]/A[1],");\n      const vec2 inputShapeRC = vec2(").concat(s,".0, ").concat(o,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(c,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")}},HJ=class{constructor(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[i,s,o,l]=e;this.outputShape=[i,t,n,l];let c,u=[r&&t>1?s-1:s,r&&n>1?o-1:o],A=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";c=a?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(u[0]/A[0],",\n          ").concat(u[1]/A[1],",\n          ").concat(u[1]/A[1],");\n      const vec3 inputShapeRC = vec3(").concat(s,".0, ").concat(o,".0,\n                                     ").concat(o,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(c,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(d,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(n-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}};var zJ={kernelName:Kl,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a}=t,{alignCorners:i,halfPixelCenters:s,size:o}=r,[l,c]=o,u=Cs().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new HJ(a.shape,l,c,i,s):new jJ(a.shape,l,c,i,s);return n.runWebGLProgram(u,[a],a.dtype)}},WJ=class{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,r,a]=t,[,i,s]=e,o=[n&&i>1?r-1:r,n&&s>1?a-1:a],l=[n&&i>1?i-1:i,n&&s>1?s-1:s],c=o[0]/l[0],u=o[1]/l[1],A=1/c,d=1/u,h=2*Math.ceil(A)+2,p=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(c,");\n        const float widthScale = float(").concat(u,");\n\n        const float invHeightScale = float(").concat(A,");\n        const float invWidthScale = float(").concat(d,");\n\n        const int winHeight = int(").concat(h,");\n        const int winWidth = int(").concat(p,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(i,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(s,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(o[0],") *\n                (float(dyR) / float(").concat(l[0],"));\n\n            float sourceFracCol =\n                float(").concat(o[1],") *\n                  (float(dyC) / float(").concat(l[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(r,") - 1),\n                ").concat(n," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(a,") - 1),\n                ").concat(n," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}};var VJ={kernelName:ql,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:a,dy:i}=t,{alignCorners:s}=r,o=new WJ(i.shape,a.shape,s);return n.runWebGLProgram(o,[i],i.dtype)}},GJ=class{constructor(e,t){this.variableNames=["x"];let n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));if(this.outputShape=e,1===n)return void(this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(e[0]," - coord - 1));\n        }\n      "));let r=e.map((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - coords[").concat(n,"] - 1"):"coords[".concat(n,"]"))(r)).join(","),a=pz(n);this.userCode="\n      void main() {\n        ".concat(a," coords = getOutputCoords();\n        setOutput(getX(").concat(r,"));\n      }\n    ")}},KJ=class{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-".concat(n," tensor is not yet supported"));this.outputShape=e;let r=qW("rc",n),a="".concat(r[n-1]," + 1 < ").concat(this.outputShape[n-1]),i="".concat(r[n-2]," + 1 < ").concat(this.outputShape[n-2]),s=pz(n);function o(n){let r=e.map((r,a)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?"".concat(e[n]," - ").concat(r[n]," - 1"):"".concat(r[n])}(a,n)),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(e[0]," - rc - 1),\n            ").concat(e[0]," - rc - 1);\n          if(").concat(a,"){\n              result.g = getChannel(getX(").concat(e[0]," - (rc  + 1) - 1),\n                ").concat(e[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return o(e)}(r.slice()),";\n          if(").concat(a,"){\n            result.g = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",o(e)}(r.slice()),";\n          }\n          if(").concat(i,") {\n            result.b = ").concat(function(e){return e[n-2]="("+e[n-2]+" + 1)",o(e)}(r.slice()),";\n            if(").concat(a,") {\n              result.a = ").concat(function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",o(e)}(r.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}};var qJ={kernelName:Zl,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:i}=r,s=a.shape.length,o=su.parseAxisParam(i,a.shape);if(0===s)return wV({inputs:{x:a},backend:n});let l=Cs().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new KJ(a.shape,o):new GJ(a.shape,o);return n.runWebGLProgram(l,[a],a.dtype)}},XJ=class{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let n=e[1],r=e[2];this.outputShape=e;let a="";a="number"==typeof t?"float outputValue = ".concat(t.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(t.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(a,"\n          if(coordX >= 0 && coordX < ").concat(r," && coordY >= 0 && coordY < ").concat(n,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")}},JJ={kernelName:zc,backendName:"webgl",kernelFunc:e=>{let{inputs:t,attrs:n,backend:r}=e,{image:a}=t,{radians:i,fillValue:s,center:o}=n,l=r,c=new XJ(a.shape,s),[u,A]=Tw.getImageCenter(o,a.shape[1],a.shape[2]),d=[[u,A,Math.sin(i),Math.cos(i)]];return l.runWebGLProgram(c,[a],a.dtype,d)}},YJ=_V({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),ZJ={kernelName:$l,backendName:"webgl",kernelFunc:YJ},$J=_V({opSnippet:"return inversesqrt(x);",cpuKernelImpl:NW}),eY={kernelName:ec,backendName:"webgl",kernelFunc:$J},tY=class{constructor(e,t,n,r,a,i){let s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;let o=pz(a.length),l=pz(i.length),c="";1===n?c="i":2===n&&(c="i, j");let u="getIndices(".concat(c,")"),A="";1===r?A="i":2===r&&(A="i, coords[1]");let d="getUpdates(".concat(A,")"),h="";s&&(h="coords[0], coords[1]");let p="getDefaultValue(".concat(h,")"),f=t>1?"strides[j]":"strides";this.userCode="\n        ".concat(o," strides = ").concat(o,"(").concat(a,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(e,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(t,"; j++) {\n              int index = round(").concat(u,");\n              flattenedIndex += index * ").concat(f,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(d,";\n              found = true;\n            }\n          }\n          setOutput(mix(").concat(p,", sum, float(found)));\n        }\n      ")}},nY=class{constructor(e,t,n,r,a,i){let s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i;let o=pz(a.length),l=pz(i.length),c="";1===n?c="i":2===n&&(c="i, j");let u="getIndices(".concat(c,")"),A="";1===r?A="i":2===r&&(A="i, coords[1]");let d="getUpdates(".concat(A,")"),h="";s&&(h="coords[0], coords[1]");let p="getDefaultValue(".concat(h,")"),f=t>1?"strides[j]":"strides",m=t>1?"strides[j + 1]":"strides";this.userCode="\n        ".concat(o," strides = ").concat(o,"(").concat(a,");\n\n        void main() {\n          ").concat(l," coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ").concat(e,"; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ").concat(t,"; j+=2) {\n              ivec4 index = round(").concat(u,");\n              flattenedIndex += index.xz * ").concat(f,";\n              if (j + 1 < ").concat(t,") {\n                flattenedIndex += index.yw * ").concat(m,";\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ").concat(d,";\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(").concat(p,", sum, found));\n        }\n      ")}};var rY={kernelName:tc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a,updates:i}=t,{shape:s}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:A}=Tw.calculateShapes(i,a,s),d=[A/c,c];if(0===A)return n.makeTensorInfo(s,a.dtype);let h,p=jV({inputs:{x:a},backend:n,attrs:{shape:[l,o]}}),f=jV({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));h=Cs().getBool("WEBGL_PACK")?new nY(l,o,p.shape.length,f.shape.length,u,d):new tY(l,o,p.shape.length,f.shape.length,u,d);let g=n.runWebGLProgram(h,[f,p,m],f.dtype),y=jV({inputs:{x:g},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),y}},aY=class{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];let a="for (int i = 0; i < ".concat(Math.ceil(Math.log2(t+1)),"; ++i) { if (left >= right) break;"),i=2===Cs().getNumber("WEBGL_VERSION")?"while (left < right) {":a,s="left"===r?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(i,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}};var iY={kernelName:rc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:i}=t,{side:s}=r,o=new aY(a.shape[0],a.shape[1],i.shape[1],s),l=[[a.shape[1]]];return n.runWebGLProgram(o,[a,i],"int32",l)}},sY=class{constructor(e,t,n){let r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank ".concat(n," is not yet supported"));if(1===n)a="resRC",r="resRC";else{let n=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],s=[];for(let r=0;r<t.length;r++)s.push("".concat(n[r])),r<e&&i.push("".concat(n[r]));r=i.join(),a=s.join()}let i=pz(n);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        float cVal = getC(").concat(r,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(a,"));\n        } else {\n          setOutput(getB(").concat(a,"));\n        }\n      }\n    ")}};var oY={kernelName:ac,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{condition:r,t:a,e:i}=t,s=new sY(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(s,[r,a,i],Zu(a.dtype,i.dtype))}},lY=_V({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(Tw.SELU_SCALEALPHA,";\n  float scale = ").concat(Tw.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),cY={kernelName:ic,backendName:"webgl",kernelFunc:lY},uY=_V({opSnippet:EV+"\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:EW}),AY={kernelName:uc,backendName:"webgl",kernelFunc:uY},dY=_V({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),hY={kernelName:cc,backendName:"webgl",kernelFunc:dY},pY=_V({opSnippet:EV+"\n  return sin(x);\n",packedOpSnippet:"\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ".concat(yV,"\n  return result;\n")}),fY={kernelName:oc,backendName:"webgl",kernelFunc:pY},mY=_V({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),gY={kernelName:lc,backendName:"webgl",kernelFunc:mY},yY=_V({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),bY={kernelName:Ac,backendName:"webgl",kernelFunc:yY},wY={kernelName:pc,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,paddings:s}=r;su.assert(a.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let o=i.reduce((e,t)=>e*t),l=[[0,0]];l.push(...s);for(let g=1+i.length;g<a.shape.length;++g)l.push([0,0]);let c=[],u=wJ({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),A=Tw.getReshaped(u.shape,i,o,!1),d=Tw.getPermuted(A.length,i.length,!1),h=Tw.getReshapedPermuted(u.shape,i,o,!1),p=jV({inputs:{x:u},backend:n,attrs:{shape:A}}),f=YV({inputs:{x:p},backend:n,attrs:{perm:d}}),m=jV({inputs:{x:f},backend:n,attrs:{shape:h}});return c.push(u),c.push(p),c.push(f),c.forEach(e=>n.disposeIntermediateTensorInfo(e)),m}};var vY={kernelName:gc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{indices:r,values:a,denseShape:i,defaultValue:s}=t;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==s.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(s.shape));let o=n.readSync(r.dataId),l=n.readSync(a.dataId),c=n.readSync(i.dataId),u=n.readSync(s.dataId)[0],[A,d,h,p,f]=LW(o,r.shape,r.dtype,l,a.dtype,c,u);return[n.makeTensorInfo(d,r.dtype,A),n.makeTensorInfo([d[0]],a.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(e=>Number(e)))),n.makeTensorInfo([f.length],r.dtype,new Int32Array(f))]}};var xY={kernelName:yc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:a,newShape:i}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));let s=Array.from(n.readSync(a.dataId)),o=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[c,u,A]=DW(o,r.shape,r.dtype,s,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([A.length],i.dtype,new Int32Array(A))]}};var CY={kernelName:bc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));let s=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(i.dataId),[c,u]=RW(s,r.shape,r.dtype,o,l,!0);return n.makeTensorInfo(u,r.dtype,c)}};var kY={kernelName:wc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{data:r,indices:a,segmentIds:i}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));let s=n.readSync(r.dataId),o=n.readSync(a.dataId),l=n.readSync(i.dataId),[c,u]=RW(s,r.shape,r.dtype,o,l);return n.makeTensorInfo(u,r.dtype,c)}};var BY={kernelName:vc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{sparseIndices:a,sparseValues:i,defaultValue:s}=t,{outputShape:o}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:A,outputSize:d}=Tw.calculateShapes(i,a,o),h=!1;if("string"===i.dtype){let e=n.bufferSync(a),t=n.bufferSync(i),r=su.decodeString(n.readSync(s.dataId)[0]),p=FW(e,t,o,d,u,c,l,A,r,h);return n.makeTensorInfo(o,p.dtype,p.values)}let p=new tY(c,l,a.shape.length,i.shape.length,A,[d,1],h),f=n.runWebGLProgram(p,[i,a,s],i.dtype),m=jV({inputs:{x:f},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(f),m}};var SY={kernelName:fc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{numOrSizeSplits:i,axis:s}=r,o=su.parseAxisParam(s,a.shape)[0],l=Tw.prepareSplitSize(a,i,o),c=a.shape.length,u=new Array(c).fill(0),A=a.shape.slice();return l.map(e=>{let t=[...A];t[o]=e;let r=KG({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[o]+=e,r})}},IY="return sqrt(x);",NY=_V({opSnippet:IY,packedOpSnippet:IY,cpuKernelImpl:UW}),FY={kernelName:dc,backendName:"webgl",kernelFunc:NY},EY=_V({opSnippet:"return x * x;"}),_Y={kernelName:Cc,backendName:"webgl",kernelFunc:EY},TY="return (a - b) * (a - b);",LY=TV({opSnippet:TY,packedOpSnippet:TY}),DY={kernelName:xc,backendName:"webgl",kernelFunc:LY};var RY={kernelName:kc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t;if("string"!==a.dtype)throw new Error("Input must be of datatype string");let i=n.readSync(a.dataId),s=Tw.fromUint8ToStringArray(i),o=OW(s,"string",r);return n.makeTensorInfo(a.shape,"string",o)}};var UY={kernelName:jc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{x:a}=t,i=nV+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),s=new tV(a.shape,i);return r.runWebGLProgram(s,[a],a.dtype)}},OY=class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;let r=n.length,a=pz(n.length),i=pz(n.length),s="";if(1===r)s="coords * strides + begin";else{let e=0;s=n.map((t,r)=>(e++,1===n.length?"coords * strides[".concat(r,"] + begin[").concat(r,"]"):"coords[".concat(e-1,"] * strides[").concat(r,"] + begin[").concat(r,"]"))).join(",")}this.userCode="\n      ".concat(a," begin = ").concat(a,"(").concat(e,");\n      ").concat(a," strides = ").concat(a,"(").concat(t,");\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}};var MY={kernelName:Bc,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:a}=e,{x:i}=n,{begin:s,end:o,strides:l,beginMask:c,endMask:u,ellipsisMask:A,newAxisMask:d,shrinkAxisMask:h}=a,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:b,end:w,strides:v}=sw.sliceInfo(i.shape,s,o,l,c,u,A,d,h);if(m)t=jV({inputs:{x:i},backend:r,attrs:{shape:f}});else if(g||y){su.assert(i.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(i.shape.length));let e=sw.computeOutShape(b,w,v),n=KG({inputs:{x:i},backend:r,attrs:{begin:b,size:e}});t=jV({inputs:{x:n},backend:r,attrs:{shape:f}}),r.disposeIntermediateTensorInfo(n)}else if(r.shouldExecuteOnCPU([i])){let e=r.readSync(i.dataId),n=Xd(i.shape,i.dtype,e),a=MW(p,n,v,b);t=r.makeTensorInfo(f,i.dtype,a.values)}else{let e=new OY(b,v,p);t=r.runWebGLProgram(e,[i],i.dtype)}let x=jV({inputs:{x:t},backend:r,attrs:{shape:f}});return r.disposeIntermediateTensorInfo(t),x}};var PY={kernelName:Sc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{separator:a,nGramWidths:i,leftPad:s,rightPad:o,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:A}=t,d=n.readSync(u.dataId),h=n.readSync(A.dataId),[p,f]=PW(d,h,a,i,s,o,l,c);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(A.shape,"int32",f)]}};var QY={kernelName:Ic,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:a}=r,{input:i,delimiter:s}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(1!==i.shape.length)throw new Error("Input must be a vector, got shape: ".concat(i.shape));if(0!==s.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(s.shape));let o=n.readSync(i.dataId),l=n.readSync(s.dataId)[0],[c,u,A]=QW(o,l,a),d=u.length;return[n.makeTensorInfo([d,2],"int32",c),n.makeTensorInfo([d],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(A))]}};var jY={kernelName:Nc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:a}=r,{input:i}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");if(a<=0)throw new Error("Number of buckets must be at least 1");let s=n.readSync(i.dataId),o=jW(s,a);return n.makeTensorInfo(i.shape,"int32",o)}},HY=_V({opSnippet:"return tan(x);"}),zY={kernelName:Ec,backendName:"webgl",kernelFunc:HY},WY=_V({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),VY={kernelName:_c,backendName:"webgl",kernelFunc:WY};var GY={kernelName:nc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{tensor:a,indices:i,updates:s}=t,{}=r,{sliceRank:o,numUpdates:l,sliceSize:c,strides:u,outputSize:A}=Tw.calculateShapes(s,i,a.shape),d=[A/c,c];if(0===A)return n.makeTensorInfo(a.shape,i.dtype);let h=jV({inputs:{x:i},backend:n,attrs:{shape:[l,o]}}),p=jV({inputs:{x:s},backend:n,attrs:{shape:[l,c]}}),f=jV({inputs:{x:a},backend:n,attrs:{shape:d}}),m=new tY(l,o,h.shape.length,p.shape.length,u,d,!1,!0),g=n.runWebGLProgram(m,[p,h,f],f.dtype),y=jV({inputs:{x:g},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(g),y}},KY=class{constructor(e,t){this.variableNames=["A"];let n=new Array(e.length);for(let i=0;i<n.length;i++)n[i]=e[i]*t[i];this.outputShape=n,this.rank=n.length;let r=pz(this.rank),a=function(e){let t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(e);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        setOutput(getA(").concat(a,"));\n      }\n    ")}};function qY(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{reps:i}=r;if("string"===a.dtype||a.shape.length>5){let e=n.readSync(a.dataId),t="string"===a.dtype?e.map(e=>su.decodeString(e)):e,r=Xd(a.shape,a.dtype,t),s=zW(r,i);return n.makeTensorInfo(s.shape,s.dtype,s.values)}let s=new KY(a.shape,i);return n.runWebGLProgram(s,[a],a.dtype)}var XY={kernelName:Tc,backendName:"webgl",kernelFunc:qY},JY=class{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}},YY=class{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}};function ZY(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function $Y(e){let t=1;for(;t<e;)t*=2;return t}var eZ={kernelName:Lc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:i,sorted:s}=r,o=Cs().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Cs().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([a])||u<o||i>l){let e=n.readSync(a.dataId),[t,r]=WW(e,c,a.dtype,i,s);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===i)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===u)return[a,_q({attrs:{shape:c,dtype:"int32",value:0},backend:n})];let A=n.texData.get(a.dataId),d=null!==A&&A.isPacked,h=d?n.unpackTensor(a):a,p=su.sizeFromShape(c)/u,f=jV({inputs:{x:h},attrs:{shape:[p,u]},backend:n});d&&ZY(n,h);let m=$Y(i),g=$Y(u),y=null,b=()=>null===y?[f,f]:[f,y],w=(e,t,r)=>{let a=b(),i=new JY(r),s=[[u],[null===y?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],o=y;y=n.runWebGLProgram(i,a,"int32",s),ZY(n,o)};for(let B=1;B<m;B*=2){let e=2*B;for(let t=B;t>=1;t/=2)w(e,t,[p,g])}for(let B=g;B>m;B/=2){let e=b(),t=new YY([p,B/2]),r=[[u],[null===y?1:0],[m]],a=y;y=n.runWebGLProgram(t,e,"int32",r),ZY(n,a);let i=m/2,s=2*i;for(let n=i;n>=1;n/=2)w(s,n,y.shape)}let v=y;y=KG({inputs:{x:y},backend:n,attrs:{begin:0,size:[p,i]}}),ZY(n,v);let x=Jq({inputs:{x:f,indices:y},backend:n,attrs:{axis:1,batchDims:1}});ZY(n,f);let C=c.slice(0,-1);C.push(i),v=y,y=jV({inputs:{x:y},attrs:{shape:C},backend:n}),ZY(n,v);let k=x;return x=jV({inputs:{x:x},attrs:{shape:C},backend:n}),ZY(n,k),[x,y]}},tZ=class{constructor(e,t,n,r,a,i){this.variableNames=["Image","Transforms"],this.outputShape=i;let s,o="nearest"===n?1:2;switch(r){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(e," && 0 <= coordX && coordX < ").concat(t,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(a,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(a,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(t,"));\n                float mapY = mapCoord(inY, float(").concat(e,"));\n\n                if (").concat(o," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}};var nZ={kernelName:Dc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{image:a,transforms:i}=t,{interpolation:s,fillMode:o,fillValue:l,outputShape:c}=r,[u,A,d,h]=a.shape,[p,f]=null!=c?c:[A,d],m=new tZ(A,d,s,o,l,[u,p,f,h]);return n.runWebGLProgram(m,[a,i],"float32")}};var rZ={kernelName:Uc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:i}=t;JH(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let s=r.readSync(i.dataId),{outputValues:o,outputShape:l,indices:c}=GW(s,a,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,o),r.makeTensorInfo([c.length],"int32",c)]}};var aZ={kernelName:Oc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{value:a}=t,{axis:i}=r;i<0&&(i+=a.shape.length);let s=a,o=s.shape.length,l=a.shape[i],c=new Array(o-1),u=0;for(let f=0;f<o;f++)f!==i&&(c[u++]=s.shape[f]);let A=[],d=new Array(o).fill(0),h=s.shape.slice();h[i]=1;let p=new Array(l);for(let f=0;f<p.length;f++){d[i]=f;let e=KG({inputs:{x:s},backend:n,attrs:{begin:d,size:h}}),t=jV({inputs:{x:e},backend:n,attrs:{shape:c}});p[f]=t,A.push(e)}return A.forEach(e=>n.disposeIntermediateTensorInfo(e)),p}},iZ=class{constructor(e,t){this.variableNames=["x","segmentIds"];let n=e.windowSize,r=e.batchSize,a=e.inSize,i=e.numSegments,s=i*Math.ceil(a/n);this.outputShape=[r,s];let o=4*Math.floor(n/4),l=n%4,c="\n        sumValue += dot(values, segFilter);\n    ",u="";a%n>0&&(u="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return initializationValue;\n        }\n      "));let A="";a%n>0&&(A="\n        if (inIdx < 0 || inIdx >= ".concat(a,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(u,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(A,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(i,")) * float(").concat(n,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(i,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(o,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(o,";\n        if (").concat(1===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(c,"\n        } else if (").concat(2===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(c,"\n        } else if (").concat(3===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(c,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}};var sZ,oZ,lZ,cZ={kernelName:Mc,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,segmentIds:i}=t,{numSegments:s}=r,o=a.shape.length,l=[],c=0,u=Tw.getAxesPermutation([c],o),A=a;null!=u&&(A=YV({inputs:{x:a},backend:n,attrs:{perm:u}}),l.push(A),c=Tw.getInnerMostAxes(1,o)[0]);let d=Tw.segment_util.computeOutShape(A.shape,c,s),h=su.sizeFromShape([A.shape[c]]),p=jV({inputs:{x:A},backend:n,attrs:{shape:[-1,h]}});l.push(p);let f=$u(a.dtype),m=(e,t,r,a,i)=>{let s=e.shape[0],o=e.shape[1],c=Tw.segment_util.segOpComputeOptimalWindowSize(o,i),u=new iZ({windowSize:c,inSize:o,batchSize:s,numSegments:i},t),A=n.compileAndRun(u,[e,r],a);if(l.push(A),A.shape[1]===i)return A;let d=NJ({backend:n,attrs:{start:0,stop:i,step:1,dtype:"float32"}}),h=qY({inputs:{x:d},backend:n,attrs:{reps:[o/c]}});return l.push(d),l.push(h),m(A,t,h,a,i)},g=jV({inputs:{x:m(p,"unsortedSegmentSum",i,f,s)},backend:n,attrs:{shape:d}}),y=g;if(null!=u){l.push(g);let e=Tw.getUndoAxesPermutation(u);y=YV({inputs:{x:y},backend:n,attrs:{perm:e}})}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),y}},uZ=[eG,nG,aG,sG,cG,dG,hG,pG,wG,vG,CG,BG,IG,FG,_G,DG,RG,MG,PG,QG,zG,XG,JG,YG,ZG,rK,sK,cK,CV,dK,wK,NK,LK,RK,UK,OK,PK,jK,zK,VK,JK,YK,ZK,eq,rq,sq,oq,cq,Aq,dq,pq,fq,gq,bq,vq,Cq,Sq,Fq,Lq,Rq,Mq,Qq,zq,Vq,Gq,qq,Yq,$q,tX,vV,nX,gK,aX,sX,lX,SV,uX,dX,hX,fX,gX,bX,vX,CX,SX,NX,EX,TX,LX,DX,OX,MX,PX,QX,jX,zX,GX,qX,rJ,QV,iJ,oJ,cJ,AJ,eK,hJ,mJ,gJ,vJ,CJ,FV,kJ,BJ,SJ,IJ,FJ,nK,YX,_J,LJ,RJ,HV,MJ,QJ,zJ,VJ,qJ,JJ,ZJ,eY,rY,iY,oY,cY,AY,hY,fY,gY,qG,nJ,bY,wY,vY,xY,CY,kY,BY,SY,FY,_Y,DY,RY,UY,MY,PY,QY,jY,eJ,JV,zY,VY,GY,XY,eZ,nZ,ZV,rZ,aZ,cZ,fJ];for(let n of uZ)eu(n);!function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(sZ||(sZ={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"}(oZ||(oZ={}));var AZ={kernelName:Wc,backendName:"wasm",setupFunc:function(e){lZ=e.wasm.cwrap(Wc,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{a:a,b:i,bias:s,preluActivationWeights:o}=t;if("float32"!==a.dtype||"float32"!==i.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");let{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:A}=r,d=n.dataIdMap.get(a.dataId).id,h=n.dataIdMap.get(i.dataId).id,p=0;if(null!=s){let e=n.dataIdMap.get(s.dataId);if(1!==e.shape.length)throw new Error("_FusedMatMul only supports rank-1 bias but got rank ".concat(e.shape.length,"."));p=e.id}let f=null==o?0:n.dataIdMap.get(o.dataId).id,m=oZ[u];if(null==m)throw new Error("".concat(u," activation not yet supported for FusedConv2D in the wasm backend."));let g=l?a.shape[2]:a.shape[1],y=c?i.shape[1]:i.shape[2],b=bp.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)),w=n.makeOutput([...b,g,y],a.dtype),v=n.dataIdMap.get(w.dataId).id,x=new Uint8Array(new Int32Array(a.shape).buffer),C=new Uint8Array(new Int32Array(i.shape).buffer);return lZ(d,x,a.shape.length,h,C,i.shape.length,l,c,m,p,f,A||0,v),w}};function dZ(e,t){let n;return{kernelName:e,backendName:"wasm",setupFunc:function(t){n=t.wasm.cwrap(e,null,["number","number","number"])},kernelFunc:function(e){let{backend:r,inputs:{x:a}}=e,i=r.dataIdMap.get(a.dataId).id,s=r.makeOutput(a.shape,t||a.dtype),o=r.dataIdMap.get(s.dataId).id;return 0===su.sizeFromShape(s.shape)||n(i,sZ[a.dtype],o),s}}}var hZ=dZ(Ns),pZ=dZ(Fs),fZ=dZ(Es);function mZ(e,t,n){let r;return{kernelName:e,backendName:"wasm",setupFunc:function(t){r=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:a}=e,{a:i,b:s}=a,o=t.dataIdMap.get(i.dataId).id,l=t.dataIdMap.get(s.dataId).id,c=null!=n?n:i.dtype,u=Tw.assertAndGetBroadcastShape(i.shape,s.shape),A=t.makeOutput(u,c);if(0===su.sizeFromShape(u))return A;let d=new Uint8Array(new Int32Array(i.shape).buffer),h=new Uint8Array(new Int32Array(s.shape).buffer),p=t.dataIdMap.get(A.dataId).id;return r(o,d,i.shape.length,l,h,s.shape.length,sZ[i.dtype],p),A}}}var gZ,yZ=mZ(_s);var bZ={kernelName:Ts,backendName:"wasm",setupFunc:function(e){gZ=e.wasm.cwrap(Ts,null,["array","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n}=e,r=n.makeOutput(t[0].shape,t[0].dtype);if(0===su.sizeFromShape(r.shape))return r;let a=t.map(e=>n.dataIdMap.get(e.dataId).id),i=new Uint8Array(new Int32Array(a).buffer),s=n.dataIdMap.get(r.dataId).id;return gZ(i,a.length,sZ[r.dtype],s),r}};function wZ(e){let{inputs:{x:t},backend:n}=e;if("string"===t.dtype)return NA(n.readSync(t.dataId),t.shape,t.dtype);let r=n.makeOutput(t.shape,t.dtype),a=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(a),r}var vZ,xZ={kernelName:Vo,backendName:"wasm",kernelFunc:wZ};function CZ(e){let{inputs:t,backend:n,attrs:r}=e,[a,i]=function(e,t){let n=[],r=[];for(let a=0;a<e.length;++a)1!==e[a]&&n.push(e[a]),1!==e[t[a]]&&r.push(t[a]);for(let a=0;a<r.length;++a){let e=-1;for(let t=0;t<r.length;++t)r[t]>=a&&(-1===e||r[e]>r[t])&&(e=t);r[e]=a}return[n,r]}(t.x.shape,r.perm),s=!0;for(let p=0;p<i.length;p++)i[p]!==p&&(s=!1);let o=function(e,t){let n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];return n}(t.x.shape,r.perm),l={dataId:t.x.dataId,shape:a,dtype:t.x.dtype};if(s){let e=wZ({inputs:t,backend:n});return e.shape=o,e}let c=n.makeOutput(o,l.dtype),u=n.dataIdMap.get(l.dataId).id,A=n.dataIdMap.get(c.dataId).id,d=new Uint8Array(new Int32Array(i).buffer),h=new Uint8Array(new Int32Array(l.shape).buffer);return vZ(u,h,l.shape.length,sZ[l.dtype],A,d,i.length),c}var kZ,BZ={kernelName:Rc,backendName:"wasm",kernelFunc:CZ,setupFunc:function(e){vZ=e.wasm.cwrap(Rc,null,["number","array","number","number","number","array","number"])}};function SZ(e,t,n){let r=e.shape,a=e.shape.length,i=su.parseAxisParam(t,r),s=i,o=Tw.getAxesPermutation(s,a),l=null,c=!1;if(null!=o){let t=new Array(a);for(let e=0;e<t.length;e++)t[e]=r[o[e]];s=Tw.getInnerMostAxes(s.length,a),l=CZ({inputs:{x:e},attrs:{perm:o},backend:n});let i=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(l.dataId).id!==i&&(c=!0)}return{transposed:l,originalAxes:i,axes:s,inputWasTransposed:c}}var IZ,NZ={kernelName:Ls,backendName:"wasm",setupFunc:function(e){kZ=e.wasm.cwrap(Ls,null,["number, number, number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=s,{transposed:c,axes:u,originalAxes:A,inputWasTransposed:d}=SZ(s,a,t);if(d){l=c,o=t.dataIdMap.get(c.dataId).id}let h=l.shape.length;Tw.assertAxesAreInnerMostDims("all",u,h);let[p,f]=Tw.computeOutAndReduceShapes(l.shape,u),m=su.sizeFromShape(f),g=t.makeOutput(p,s.dtype);if(0!==su.sizeFromShape(l.shape)){let e=t.dataIdMap.get(g.dataId).id;kZ(o,m,e)}if(d&&t.disposeData(c.dataId),i){let e=Tw.expandShapeToKeepDim(g.shape,A);g.shape=e}return g}};var FZ={kernelName:Ds,backendName:"wasm",setupFunc:function(e){IZ=e.wasm.cwrap(Ds,null,["number, number, number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=s,{transposed:c,axes:u,originalAxes:A,inputWasTransposed:d}=SZ(s,a,t);if(d){l=c,o=t.dataIdMap.get(c.dataId).id}let h=l.shape.length;Tw.assertAxesAreInnerMostDims("any",u,h);let[p,f]=Tw.computeOutAndReduceShapes(l.shape,u),m=su.sizeFromShape(f),g=t.makeOutput(p,s.dtype);if(0!==su.sizeFromShape(l.shape)){let e=t.dataIdMap.get(g.dataId).id;IZ(o,m,e)}if(d&&t.disposeData(c.dataId),i){let e=Tw.expandShapeToKeepDim(g.shape,A);g.shape=e}return g}};function EZ(e){let t;return{kernelName:e,backendName:"wasm",setupFunc:function(n){t=n.wasm.cwrap(e,null,["number","number","number","number","number"])},kernelFunc:function(e){let{backend:n,inputs:r,attrs:a}=e,{axis:i}=a,{x:s}=r,o=n.dataIdMap.get(s.dataId).id,l=o,c=s,{transposed:u,axes:A,inputWasTransposed:d}=SZ(s,i,n);if(d){let e=n.dataIdMap.get(u.dataId).id;e!==o&&(c=u,l=e)}let h=c.shape.slice(0,-1),p=n.makeOutput(h,"int32"),f=n.dataIdMap.get(p.dataId).id,m=su.sizeFromShape(p.shape),g=c.shape[A[0]];return t(l,sZ[c.dtype],m,g,f),d&&n.disposeData(u.dataId),p}}}var _Z,TZ=EZ(Rs),LZ=EZ(Us),DZ=dZ(Os),RZ=dZ(Ms),UZ=dZ(Ps),OZ=mZ(js),MZ=dZ(Qs);var PZ,QZ={kernelName:Hs,backendName:"wasm",setupFunc:function(e){_Z=e.wasm.cwrap(Hs,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,a=t.x,i=r.dataIdMap.get(a.dataId).id,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=n,u=Tw.computePool2DInfo(a.shape,s,o,1,l,c),A=u.filterHeight,d=u.filterWidth,h=u.padInfo.top,p=u.padInfo.right,f=u.padInfo.bottom,m=u.padInfo.left,g=u.strideHeight,y=u.strideWidth,b=u.inChannels;if("channelsLast"!==u.dataFormat)throw new Error("wasm backend does not support dataFormat:'".concat(u.dataFormat,"'. Please use 'channelsLast'."));if(1!==u.dilationWidth||1!==u.dilationHeight)throw new Error("was backend only supports average pooling with dilation = [1, 1], got [".concat(u.dilationHeight,", ").concat(u.dilationWidth,"]."));let w=r.makeOutput(u.outShape,"float32"),v=r.dataIdMap.get(w.dataId).id;return _Z(i,a.shape[0],a.shape[1],a.shape[2],A,d,h,p,f,m,g,y,b,v),w}};var jZ,HZ={kernelName:Ws,backendName:"wasm",setupFunc:function(e){PZ=e.wasm.cwrap("AvgPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r,u=Tw.computePool3DInfo(a.shape,i,s,1,o,l,c),A=n.makeOutput(u.outShape,a.dtype);return PZ(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(A.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),A}};var zZ,WZ={kernelName:Vs,backendName:"wasm",setupFunc:function(e){jZ=e.wasm.cwrap("AvgPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r,u=Tw.computePool3DInfo(i.shape,s,o,1,l,c),A=n.makeOutput(i.shape,i.dtype);return jZ(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(A.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left,u.filterDepth,u.filterHeight,u.filterWidth),A}};var VZ={kernelName:zs,backendName:"wasm",setupFunc:function(e){zZ=e.wasm.cwrap("AvgPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l}=r,c=Tw.computePool2DInfo(i.shape,s,o,1,l),u=n.makeOutput(i.shape,i.dtype);return zZ(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(u.dataId).id,c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.top,c.padInfo.left,c.filterHeight,c.filterWidth),u}};function GZ(e){let{inputs:t,attrs:n}=e,{x:r}=t,{shape:a}=n,i=su.sizeFromShape(r.shape),s=su.inferFromImplicitShape(a,i);return su.assert(i===su.sizeFromShape(s),()=>"new shape: ".concat(s,", old shape: ").concat(r.shape,". New shape and old shape must have the same number of elements.")),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:s,dtype:r.dtype}}var KZ,qZ={kernelName:Gl,backendName:"wasm",kernelFunc:GZ};var XZ={kernelName:Gs,backendName:"wasm",setupFunc:function(e){KZ=e.wasm.cwrap(Gs,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{a:a,b:i}=t,{transposeA:s,transposeB:o}=r;if("float32"!==a.dtype||"float32"!==i.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");let l=a.shape.length,c=i.shape.length,u=s?a.shape[l-2]:a.shape[l-1],A=o?i.shape[c-1]:i.shape[c-2],d=s?a.shape[l-1]:a.shape[l-2],h=o?i.shape[c-2]:i.shape[c-1],p=a.shape.slice(0,-2),f=i.shape.slice(0,-2),m=su.sizeFromShape(p),g=su.sizeFromShape(f),y=bp.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([d,h]);su.assert(u===A,()=>"Error in matMul: inner shapes (".concat(u,") and (").concat(A,") of Tensors with shapes ").concat(a.shape," and ").concat(i.shape," and transposeA=").concat(s," and transposeB=").concat(o," must match."));let b=o?[g,h,A]:[g,A,h],w=GZ({inputs:{x:a},backend:n,attrs:{shape:s?[m,u,d]:[m,d,u]}}),v=GZ({inputs:{x:i},backend:n,attrs:{shape:b}}),x=n.dataIdMap.get(w.dataId).id,C=n.dataIdMap.get(v.dataId).id,k=s?w.shape[2]:w.shape[1],B=o?v.shape[1]:v.shape[2],S=Math.max(m,g),I=n.makeOutput([S,k,B],w.dtype),N=n.dataIdMap.get(I.dataId).id,F=new Uint8Array(new Int32Array(w.shape).buffer),E=new Uint8Array(new Int32Array(v.shape).buffer);return KZ(x,F,w.shape.length,C,E,v.shape.length,s,o,N),n.disposeData(w.dataId),n.disposeData(v.dataId),I.shape=y,I}};function JZ(e){let{inputs:{x:t},attrs:{begin:n,size:r},backend:a}=e,[i,s]=sw.parseSliceParams(t,n,r),o=sw.isSliceContinous(t.shape,i,s),l=a.readSync(t.dataId),c=a.makeOutput(s,t.dtype),u=su.computeStrides(t.shape),A=a.dataIdMap.get(c.dataId);if(o){let e=sw.computeFlatOffset(i,u);return"string"===t.dtype?A.stringBytes=l.slice(e,e+su.sizeFromShape(s)):a.typedArrayFromHeap(c).set(l.subarray(e,e+su.sizeFromShape(s))),c}if("string"===t.dtype){let e=aO(l,i,s,t.shape,t.dtype);return A.stringBytes=e,c}let d=a.typedArrayFromHeap(c),h=t.shape.length;if(2===h)!function(e,t,n,r,a){let i=0,s=r[0],o=r[1],l=s+a[0];for(let c=s;c<l;c++){let r=c*t+o;n.set(e.subarray(r,r+a[1]),i),i+=a[1]}}(l,u[0],d,i,s);else if(3===h)!function(e,t,n,r,a,i){let s=0,o=a[0],l=a[1],c=a[2],u=o+i[0],A=l+i[1];for(let d=o;d<u;d++)for(let a=l;a<A;a++){let o=d*t+a*n+c;r.set(e.subarray(o,o+i[2]),s),s+=i[2]}}(l,u[0],u[1],d,i,s);else if(4===h)!function(e,t,n,r,a,i,s){let o=0,l=i[0],c=i[1],u=i[2],A=l+s[0],d=c+s[1],h=u+s[2],p=i[3];for(let f=l;f<A;f++)for(let i=c;i<d;i++)for(let l=u;l<h;l++){let c=f*t+i*n+l*r+p;a.set(e.subarray(c,c+s[3]),o),o+=s[3]}}(l,u[0],u[1],u[2],d,i,s);else{let e=aO(l,i,s,t.shape,t.dtype);d.set(e)}return c}var YZ={kernelName:sc,backendName:"wasm",kernelFunc:JZ};var ZZ,$Z={kernelName:Ks,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,crops:s}=r,o=i.reduce((e,t)=>e*t),l=Tw.getReshaped(a.shape,i,o),c=Tw.getPermuted(l.length,i.length),u=Tw.getReshapedPermuted(a.shape,i,o),A=Tw.getSliceBeginCoords(s,i.length),d=Tw.getSliceSize(u,s,i.length),h=GZ({inputs:{x:a},backend:n,attrs:{shape:l}}),p=CZ({inputs:{x:h},backend:n,attrs:{perm:c}}),f=GZ({inputs:{x:p},backend:n,attrs:{shape:u}}),m=JZ({inputs:{x:f},backend:n,attrs:{begin:A,size:d}});return n.disposeData(h.dataId),n.disposeData(p.dataId),n.disposeData(f.dataId),m}};var e$={kernelName:qs,backendName:"wasm",setupFunc:function(e){ZZ=e.wasm.cwrap(qs,null,["number","number","boolean","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{x:a,weights:i}=n,{size:s}=r,o=0!==i.shape.reduce((e,t)=>e*t,1),l=1===a.shape.length?[s]:[a.shape[0],s],c=t.makeOutput(l,i.dtype);function u(e){return t.dataIdMap.get(e.dataId).id}return ZZ(u(a),s,o,u(i),sZ[i.dtype],u(c)),c}},t$=mZ(Xs);var n$={kernelName:Ys,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n}=e,{s0:r,s1:a}=t,i=n.typedArrayFromHeap(r),s=n.typedArrayFromHeap(a),o=Tw.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return n.makeOutput([o.length],"int32",void 0,new Int32Array(o))}};function r$(e){let{inputs:{x:t},attrs:{dtype:n},backend:r}=e,a=r.makeOutput(t.shape,n),i=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(a).set(i),a}var a$,i$={kernelName:Zs,backendName:"wasm",kernelFunc:r$},s$=dZ($s);var o$={kernelName:eo,backendName:"wasm",setupFunc:function(e){a$=e.wasm.cwrap(eo,null,["number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{clipValueMin:i,clipValueMax:s}=r,o=n.dataIdMap.get(a.dataId).id,l=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(l.dataId).id;return a$(o,i,s,c),l}};function l$(e){let{inputs:t,backend:n}=e,r=su.parseAxisParam(e.attrs.axis,t[0].shape)[0],a=t.map(e=>e.shape);Tw.assertParamsConsistent(a,r);let i=Tw.computeOutShape(t.map(e=>e.shape),r),s=t.filter(e=>su.sizeFromShape(e.shape)>0);if(1===s.length)return wZ({inputs:{x:s[0]},backend:n});let o=n.makeOutput(i,t[0].dtype);if(0===su.sizeFromShape(i))return o;if("string"===s[0].dtype){let e=s.map(e=>{let t=[-1,su.sizeFromShape(e.shape.slice(r))];return GZ({inputs:{x:e},backend:n,attrs:{shape:t}})}),a=e.map(e=>({vals:n.readSync(e.dataId),shape:e.shape}));i=Tw.computeOutShape(e.map(e=>e.shape),1);let l=1===e[0].shape[0],c=MR(a,i,t[0].dtype,l),u=Tw.computeOutShape(s.map(e=>e.shape),r);return o.shape=u,n.dataIdMap.get(o.dataId).stringBytes=Tw.fromStringArrayToUint8(c),e.forEach(e=>n.disposeData(e.dataId)),o}let l=su.sizeFromShape(s[0].shape.slice(0,r)),c=0,u=s.map(e=>{let t=su.sizeFromShape(e.shape.slice(r));return c+=t,t}),A=s.map(e=>n.typedArrayFromHeap(e)),d=n.typedArrayFromHeap(o);for(let h=0;h<l;h++){let e=h*c;for(let t=0;t<A.length;t++){let n=u[t],r=h*n,a=A[t].subarray(r,r+n);d.set(a,e),e+=n}}return o}var c$,u$={kernelName:ro,backendName:"wasm",kernelFunc:l$};var A$,d$={kernelName:ao,backendName:"wasm",setupFunc:function(e){c$=e.wasm.cwrap(ao,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{x:a,filter:i}=t,s=r.dataIdMap.get(a.dataId).id,o=r.dataIdMap.get(i.dataId).id,{strides:l,dilations:c,pad:u,dimRoundingMode:A,dataFormat:d}=n,h=Tw.convertConv2DDataFormat(d),p=Tw.computeConv2DInfo(a.shape,i.shape,l,c,u,A,!1,h),f=p.filterHeight,m=p.filterWidth,g=p.padInfo.top,y=p.padInfo.right,b=p.padInfo.bottom,w=p.padInfo.left,v=p.dilationHeight,x=p.dilationWidth,C=p.strideHeight,k=p.strideWidth,B=p.inChannels,S=p.outChannels,I="SAME"===p.padInfo.type?1:0;if("channelsLast"!==p.dataFormat)throw new Error("wasm backend Conv2D does not support dataFormat:'".concat(p.dataFormat,"'. Please use 'channelsLast'."));let N=r.makeOutput(p.outShape,"float32"),F=r.dataIdMap.get(N.dataId).id;return c$(s,a.shape[0],a.shape[1],a.shape[2],o,f,m,g,y,b,w,I,v,x,C,k,B,S,F),N}};var h$,p$={kernelName:so,backendName:"wasm",setupFunc:function(e){A$=e.wasm.cwrap(so,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{dy:a,filter:i}=n,{strides:s,pad:o,dataFormat:l,dimRoundingMode:c,inputShape:u}=r,A=Tw.convertConv2DDataFormat(l),d=Tw.computeConv2DInfo(u,i.shape,s,1,o,c,!1,A),{batchSize:h,filterHeight:p,filterWidth:f,inChannels:m,inHeight:g,inWidth:y,outChannels:b,outHeight:w,outWidth:v,strideHeight:x,strideWidth:C}=d,k=p-1-d.padInfo.top,B=f-1-d.padInfo.left,S="channelsLast"===d.dataFormat,I=su.computeStrides(d.inShape),N=su.computeStrides(a.shape),[F,E,_]=su.computeStrides(i.shape),T=I[0],L=S?I[1]:I[2],D=S?I[2]:1,R=S?1:I[1],U=N[0],O=S?N[1]:N[2],M=S?N[2]:1,P=S?1:N[1],Q=t.makeOutput(d.inShape,"float32"),j=t.dataIdMap.get(Q.dataId).id,H=t.dataIdMap.get(a.dataId).id,z=t.dataIdMap.get(i.dataId).id;return A$(H,z,h,p,f,g,y,m,w,v,b,x,C,k,B,F,E,_,T,L,D,R,U,O,M,P,j),Q}};var f$,m$={kernelName:oo,backendName:"wasm",setupFunc:function(e){h$=e.wasm.cwrap(oo,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r;if("float32"!==a.dtype)throw new Error("Tensor x must have dtype float32, got ".concat(a.dtype));if("float32"!==i.dtype)throw new Error("Tensor filter must have dtype float32, got ".concat(i.dtype));let c=Tw.computeConv3DInfo(a.shape,i.shape,s,l,o),u=n.makeOutput(c.outShape,a.dtype);return h$(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(u.dataId).id,c.batchSize,c.inDepth,c.inHeight,c.inWidth,c.inChannels,c.outDepth,c.outHeight,c.outWidth,c.outChannels,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.filterDepth,c.filterHeight,c.filterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),u}};var g$,y$={kernelName:lo,backendName:"wasm",setupFunc:function(e){f$=e.wasm.cwrap(lo,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,dy:i}=t,{strides:s,pad:o,filterShape:l}=r;if("float32"!==a.dtype)throw new Error("Tensor dy must have dtype float32, got ".concat(a.dtype));if("float32"!==i.dtype)throw new Error("Tensor filter must have dtype float32, got ".concat(i.dtype));let c=Tw.computeConv3DInfo(a.shape,l,s,1,o),u=n.makeOutput(c.filterShape,i.dtype);return f$(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(u.dataId).id,c.batchSize,c.inDepth,c.inHeight,c.inWidth,c.inChannels,c.outDepth,c.outHeight,c.outWidth,c.outChannels,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.filterDepth,c.filterHeight,c.filterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),u}};var b$,w$,v$={kernelName:co,backendName:"wasm",setupFunc:function(e){g$=e.wasm.cwrap(co,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,filter:i}=t,{pad:s,strides:o,inputShape:l}=r;if("float32"!==a.dtype)throw new Error("Tensor dy must have dtype float32, got ".concat(a.dtype));if("float32"!==i.dtype)throw new Error("Tensor filter must have dtype float32, got ".concat(i.dtype));let c=Tw.computeConv3DInfo(l,i.shape,o,1,s),u=n.makeOutput(c.inShape,a.dtype);return g$(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(u.dataId).id,c.batchSize,c.inDepth,c.inHeight,c.inWidth,c.inChannels,c.outDepth,c.outHeight,c.outWidth,c.outChannels,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.filterDepth,c.filterHeight,c.filterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),u}},x$=dZ(uo),C$=dZ(Ao);!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(b$||(b$={}));var k$,B$={kernelName:fo,backendName:"wasm",setupFunc:function(e){w$=e.wasm.cwrap(fo,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){let t,{backend:n,inputs:r,attrs:a}=e,{method:i,extrapolationValue:s,cropSize:o}=a,{image:l,boxes:c,boxInd:u}=r,A=c.shape[0],[d,h]=o,p=[A,d,h,l.shape[3]],f=n.dataIdMap.get(l.dataId);"float32"!==l.dtype&&(t=r$({backend:n,inputs:{x:l},attrs:{dtype:"float32"}}),f=n.dataIdMap.get(t.dataId));let m=f.id,g=n.dataIdMap.get(c.dataId).id,y=n.dataIdMap.get(u.dataId).id,b=n.makeOutput(p,"float32"),w=n.dataIdMap.get(b.dataId).id,v=new Uint8Array(new Int32Array(l.shape).buffer);return w$(m,g,y,A,v,d,h,b$[i],s,w),null!=t&&n.disposeData(t.dataId),b}};var S$,I$={kernelName:ho,backendName:"wasm",setupFunc:function(e){k$=e.wasm.cwrap(ho,null,["number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r,l=a.shape.length;su.assert("float32"===a.dtype||"int32"===a.dtype,()=>"cumprod does not support ".concat(a.dtype," tensors in the WASM backend"));let c=Tw.getAxesPermutation([i],l),u=a;null!==c&&(u=CZ({inputs:{x:a},attrs:{perm:c},backend:n}));let A=Tw.getInnerMostAxes(1,l)[0];Tw.assertAxesAreInnerMostDims("cumprod",[A],l);let d=n.makeOutput(u.shape,u.dtype),h=u.shape[A],p=n.dataIdMap.get(u.dataId).id,f=n.dataIdMap.get(d.dataId).id;k$(p,s?1:0,o?1:0,h,f,sZ[a.dtype]);let m=d;if(null!==c){m=CZ({inputs:{x:d},attrs:{perm:Tw.getUndoAxesPermutation(c)},backend:n}),n.disposeData(u.dataId),n.disposeData(d.dataId)}return m}};var N$,F$={kernelName:po,backendName:"wasm",setupFunc:function(e){S$=e.wasm.cwrap(po,null,["number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{axis:i,exclusive:s,reverse:o}=r,l=a.shape.length;su.assert("float32"===a.dtype||"int32"===a.dtype,()=>"cumsum does not support ".concat(a.dtype," tensors in the WASM backend"));let c=Tw.getAxesPermutation([i],l),u=a;null!==c&&(u=CZ({inputs:{x:a},attrs:{perm:c},backend:n}));let A=Tw.getInnerMostAxes(1,l)[0];Tw.assertAxesAreInnerMostDims("cumsum",[A],l);let d=n.makeOutput(u.shape,u.dtype),h=u.shape[A],p=n.dataIdMap.get(u.dataId).id,f=n.dataIdMap.get(d.dataId).id;S$(p,s?1:0,o?1:0,h,f,sZ[a.dtype]);let m=d;if(null!==c){m=CZ({inputs:{x:d},attrs:{perm:Tw.getUndoAxesPermutation(c)},backend:n}),n.disposeData(u.dataId),n.disposeData(d.dataId)}return m}};var E$,_$={kernelName:mo,backendName:"wasm",setupFunc:function(e){N$=e.wasm.cwrap("DenseBincount",null,["number","array","number","number","boolean","number","number","boolean","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{x:a,weights:i}=n,{size:s,binaryOutput:o}=r,l=0!==i.shape.reduce((e,t)=>e*t,1),c=1===a.shape.length?[s]:[a.shape[0],s],u=t.makeOutput(c,i.dtype);function A(e){return t.dataIdMap.get(e.dataId).id}return N$(A(a),new Uint8Array(new Int32Array(a.shape).buffer),a.shape.length,s,l,A(i),sZ[i.dtype],o,A(u)),u}};var T$,L$={kernelName:go,backendName:"wasm",setupFunc:function(e){E$=e.wasm.cwrap(go,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{x:a}=n,{blockSize:i,dataFormat:s}=r,o=a.shape[0],l=("NHWC"===s?a.shape[1]:a.shape[2])*i,c=("NHWC"===s?a.shape[2]:a.shape[3])*i,u=("NHWC"===s?a.shape[3]:a.shape[1])/(i*i),A="NHWC"===s?[o,l,c,u]:[o,u,l,c],d=t.makeOutput(A,"float32"),h=t.dataIdMap.get(a.dataId).id,p=new Uint8Array(new Int32Array(su.computeStrides(a.shape)).buffer),f=new Uint8Array(new Int32Array(A).buffer),m=new Uint8Array(new Int32Array(su.computeStrides(A)).buffer),g=t.dataIdMap.get(d.dataId).id;return E$(h,i,"NHWC"===s?1:0,p,a.shape.length-1,f,m,A.length,g),d}};var D$,R$={kernelName:yo,backendName:"wasm",setupFunc:function(e){T$=e.wasm.cwrap(yo,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{x:a,filter:i}=t,s=r.dataIdMap.get(a.dataId).id,o=r.dataIdMap.get(i.dataId).id,{strides:l,dilations:c,pad:u,dimRoundingMode:A}=n,d=null==c?[1,1]:c,h=Tw.computeConv2DInfo(a.shape,i.shape,l,d,u,A,!0),p=h.filterHeight,f=h.filterWidth,m=h.padInfo.top,g=h.padInfo.right,y=h.padInfo.bottom,b=h.padInfo.left,w=h.dilationHeight,v=h.dilationWidth,x=h.strideHeight,C=h.strideWidth,k=h.inChannels,B=h.outChannels,S="SAME"===h.padInfo.type?1:0;if("channelsLast"!==h.dataFormat)throw new Error("wasm backend DepthwiseConv2dNative does not support dataFormat:'".concat(h.dataFormat,"'. Please use 'channelsLast'."));let I=r.makeOutput(h.outShape,"float32"),N=r.dataIdMap.get(I.dataId).id;return T$(s,a.shape[0],a.shape[1],a.shape[2],o,p,f,m,g,y,b,S,w,v,x,C,k,B,N),I}};var U$,O$={kernelName:vo,backendName:"wasm",setupFunc:function(e){D$=e.wasm.cwrap("Diag",null,["number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t,a=su.sizeFromShape(r.shape),i=n.makeOutput([...r.shape,...r.shape],r.dtype);return D$(n.dataIdMap.get(r.dataId).id,sZ[r.dtype],a,n.dataIdMap.get(i.dataId).id),i}};var M$,P$={kernelName:xo,backendName:"wasm",setupFunc:function(e){U$=e.wasm.cwrap(xo,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i}=t,{strides:s,pad:o,dilations:l}=r;if(a.dtype!==i.dtype)throw new Error("Dilation2D error: x must have the same dtype as filter. Got ".concat(a.dtype," and ").concat(i.dtype));let c=Tw.computeDilation2DInfo(a.shape,i.shape,s,o,"NHWC",l),u=n.makeOutput(c.outShape,a.dtype);return U$(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(u.dataId).id,sZ[a.dtype],c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.filterHeight,c.filterWidth,c.padInfo.top,c.padInfo.left),u}};var Q$,j$={kernelName:ko,backendName:"wasm",setupFunc:function(e){M$=e.wasm.cwrap(ko,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,dy:s}=t,{strides:o,pad:l,dilations:c}=r;if(a.dtype!==i.dtype||a.dtype!==s.dtype)throw new Error("Dilation2DBackpropFilter error: x must have the same dtype as filter and dy. Got ".concat(a.dtype,", ").concat(i.dtype,", and ").concat(s.dtype));let u=Tw.computeDilation2DInfo(a.shape,i.shape,o,l,"NHWC",c),A=n.makeOutput(i.shape,i.dtype);return M$(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(A.dataId).id,sZ[a.dtype],u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.filterHeight,u.filterWidth,u.padInfo.top,u.padInfo.left),A}};var H$,z$={kernelName:Co,backendName:"wasm",setupFunc:function(e){Q$=e.wasm.cwrap(Co,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,filter:i,dy:s}=t,{strides:o,pad:l,dilations:c}=r;if(a.dtype!==i.dtype||a.dtype!==s.dtype)throw new Error("Dilation2DBackpropInput error: x must have the same dtype as filter and dy. Got ".concat(a.dtype,", ").concat(i.dtype,", and ").concat(s.dtype));let u=Tw.computeDilation2DInfo(a.shape,i.shape,o,l,"NHWC",c),A=n.makeOutput(a.shape,a.dtype);return Q$(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(A.dataId).id,sZ[a.dtype],u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.filterHeight,u.filterWidth,u.padInfo.top,u.padInfo.left),A}},W$=dZ(No);var V$={kernelName:Fo,backendName:"wasm",setupFunc:function(e){H$=e.wasm.cwrap(Fo,null,["number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n}=e,{dy:r,y:a}=t,i=n.makeOutput(a.shape,"float32"),s=e=>n.dataIdMap.get(e.dataId).id;return H$(s(a),s(r),s(i)),i}},G$=mZ(_o,0,"bool"),K$=dZ(Eo),q$=dZ(To,"float32");function X$(e){let{inputs:t,attrs:n,backend:r}=e,{input:a}=t,{dim:i}=n,s=a.shape.length,o=a.shape.slice(),l=i;return i<0&&(su.assert(-(s+1)<=i,()=>"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")),l=s+i+1),o.splice(l,0,1),GZ({inputs:{x:a},backend:r,attrs:{shape:o}})}var J$={kernelName:Lo,backendName:"wasm",kernelFunc:X$},Y$=dZ(Do,"float32");function Z$(e){let{attrs:{shape:t,value:n},backend:r}=e,{attrs:{dtype:a}}=e;a=a||su.inferDtype(n);let i=r.makeOutput(t,a);return r.typedArrayFromHeap(i).fill(n),i}var $$,e0={kernelName:Uo,backendName:"wasm",kernelFunc:Z$};var t0,n0={kernelName:Oo,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n}=e,{image:r}=t,a=n.makeOutput(r.shape,r.dtype),i=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(a.dataId).id,[o,l,c,u]=r.shape;return $$(i,o,l,c,u,s),a},setupFunc:function(e){$$=e.wasm.cwrap(Oo,null,["number","number","number","number","number","number"])}},r0=dZ(Mo),a0=mZ(Po);var i0,s0={kernelName:Qo,backendName:"wasm",setupFunc:function(e){t0=e.wasm.cwrap(Qo,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{varianceEpsilon:a}=r,{x:i,mean:s,variance:o,offset:l,scale:c}=n,u=t.dataIdMap.get(i.dataId).id,A=t.dataIdMap.get(s.dataId).id,d=t.dataIdMap.get(o.dataId).id,h=null!=l?t.dataIdMap.get(l.dataId).id:0,p=null!=c?t.dataIdMap.get(c.dataId).id:0,f=t.makeOutput(i.shape,i.dtype);if(0===su.sizeFromShape(i.shape))return f;let m=t.dataIdMap.get(f.dataId).id;return t0(u,A,d,h,p,a,m),f}};var o0,l0={kernelName:Vc,backendName:"wasm",setupFunc:function(e){i0=e.wasm.cwrap(Vc,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dilations:u,dataFormat:A,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=n,f=Tw.computeConv2DInfo(a.shape,i.shape,l,u,c,d),m=oZ[h];if(null==m)throw new Error("".concat(h," activation not yet supported for FusedConv2D in the wasm backend."));let g=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(i.dataId).id,b=f.outChannels,w=0;if(null!=s){let e=r.dataIdMap.get(s.dataId);if(1!==e.shape.length)throw new Error("FusedConv2D only supports rank-1 bias but got rank ".concat(e.shape.length,"."));if(e.shape[0]!==b)throw new Error("FusedConv2D bias shape (".concat(e.shape,") does not match the number of output channels (").concat(b,")"));w=e.id}let v=f.filterHeight,x=f.filterWidth,C=f.padInfo.top,k=f.padInfo.right,B=f.padInfo.bottom,S=f.padInfo.left,I=f.dilationHeight,N=f.dilationWidth,F=f.strideHeight,E=f.strideWidth,_=f.inChannels,T="SAME"===f.padInfo.type?1:0,L=f.batchSize,D=f.inHeight,R=f.inWidth;if("NHWC"!==A)throw new Error("wasm backend FusedConv2D does not support dataFormat:'".concat(A,"'. Please use 'NHWC'."));let U=r.makeOutput(f.outShape,"float32"),O=r.dataIdMap.get(U.dataId).id,M=null==o?0:r.dataIdMap.get(o.dataId).id;return i0(g,L,D,R,y,v,x,w,C,k,B,S,T,I,N,F,E,_,b,m,M,p||0,O),U}};var c0,u0={kernelName:Gc,backendName:"wasm",setupFunc:function(e){o0=e.wasm.cwrap(Gc,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{x:a,filter:i,bias:s,preluActivationWeights:o}=t,{strides:l,pad:c,dilations:u,dataFormat:A,dimRoundingMode:d,activation:h,leakyreluAlpha:p}=n,f=Tw.computeConv2DInfo(a.shape,i.shape,l,u,c,d,!0),m=oZ[h];if(null==m)throw new Error("".concat(h," activation not yet supported for FusedDepthwiseConv2D in the wasm backend."));let g=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(i.dataId).id,b=f.outChannels,w=0;if(null!=s){let e=r.dataIdMap.get(s.dataId);if(1!==e.shape.length)throw new Error("FusedDepthwiseConv2D only supports rank-1 bias but got rank ".concat(e.shape.length,"."));if(e.shape[0]!==b)throw new Error("FusedDepthwiseConv2D bias shape (".concat(e.shape,") does not match the number of output channels (").concat(b,")"));w=e.id}let v=f.filterHeight,x=f.filterWidth,C=f.padInfo.top,k=f.padInfo.right,B=f.padInfo.bottom,S=f.padInfo.left,I=f.dilationHeight,N=f.dilationWidth,F=f.strideHeight,E=f.strideWidth,_=f.inChannels,T="SAME"===f.padInfo.type?1:0,L=f.batchSize,D=f.inHeight,R=f.inWidth;if("NHWC"!==A)throw new Error("wasm backend FusedDepthwiseConv2D does not support dataFormat:'".concat(A,"'. Please use 'NHWC'."));let U=r.makeOutput(f.outShape,"float32"),O=r.dataIdMap.get(U.dataId).id,M=null==o?0:r.dataIdMap.get(o.dataId).id;return o0(g,L,D,R,y,v,x,w,C,k,B,S,T,I,N,F,E,_,b,m,M,p||0,O),U}};var A0,d0={kernelName:Ho,backendName:"wasm",setupFunc:function(e){c0=e.wasm.cwrap(Ho,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){let{backend:t,inputs:n}=e,{params:r,indices:a}=n,[i,s,o,l]=aw.prepareAndValidate(r,a),c=t.makeOutput(i,r.dtype);if(0===s)return c;let u=a.shape,A=u[u.length-1],d=t.dataIdMap.get(r.dataId).id,h=t.dataIdMap.get(a.dataId).id,p=new Uint8Array(new Int32Array(l).buffer),f=t.dataIdMap.get(c.dataId).id;return c0(d,sZ[r.dtype],h,s,A,o,p,f),c}};var h0,p0={kernelName:jo,backendName:"wasm",setupFunc:function(e){A0=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{x:a,indices:i}=n,{axis:s,batchDims:o}=r,l=su.parseAxisParam(s,a.shape)[0],c=t.readSync(i.dataId),u=a.shape[l];for(let C=0;C<c.length;++C){let e=c[C];su.assert(e<=u-1&&e>=0,()=>"GatherV2: the index value ".concat(e," is not in [0, ").concat(u-1,"]"))}let A=Tw.segment_util.collectGatherOpShapeInfo(a,i,l,o),d=GZ({inputs:{x:a},attrs:{shape:[A.batchSize,A.outerSize,A.dimSize,A.sliceSize]},backend:t}),h=su.sizeFromShape(i.shape),p=GZ({inputs:{x:i},attrs:{shape:[A.batchSize,h/A.batchSize]},backend:t}),f=[A.batchSize,A.outerSize,h/A.batchSize,A.sliceSize],m=t.makeOutput(f,a.dtype);if(0===su.sizeFromShape(a.shape))return m;let g=d.shape.length-1,y=t.dataIdMap.get(d.dataId).id,b=t.dataIdMap.get(p.dataId).id,w=t.dataIdMap.get(m.dataId).id,v=new Uint8Array(new Int32Array(su.computeStrides(d.shape)).buffer),x=new Uint8Array(new Int32Array(su.computeStrides(f)).buffer);return A0(y,sZ[a.dtype],v,g,b,A.batchSize,x,w),t.disposeData(d.dataId),t.disposeData(p.dataId),m.shape=A.outputShape,m}},f0=mZ(zo,0,"bool"),m0=mZ(Wo,0,"bool"),g0=dZ(qo,"bool"),y0=dZ(Xo,"bool"),b0=dZ(Jo,"bool");var w0,v0={kernelName:Yo,backendName:"wasm",setupFunc:function(e){h0=e.wasm.cwrap(Yo,null,["number","number","number","number"])},kernelFunc:function(e){let{inputs:{x:t},attrs:{alpha:n},backend:r}=e,a=r.dataIdMap.get(t.dataId).id,i=r.makeOutput(t.shape,"float32");if(0!==su.sizeFromShape(t.shape)){let e=r.dataIdMap.get(i.dataId).id;h0(a,sZ[t.dtype],n,e)}return i}},x0=mZ(Zo,0,"bool"),C0=mZ($o,0,"bool");var k0,B0={kernelName:el,backendName:"wasm",setupFunc:function(e){w0=e.wasm.cwrap(el,null,["number","number","number","number"])},kernelFunc:function(e){let{attrs:t,backend:n}=e,{start:r,stop:a,num:i}=t,s=Math.floor(i),o=n.makeOutput([s],"float32");return w0(n.dataIdMap.get(o.dataId).id,r,a,s),o}},S0=dZ(tl),I0=dZ(nl),N0=mZ(rl,0,"bool"),F0=dZ(al),E0=mZ(il,0,"bool"),_0=mZ(sl,0,"bool");var T0,L0={kernelName:cl,backendName:"wasm",setupFunc:function(e){k0=e.wasm.cwrap(cl,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{depthRadius:i,bias:s,alpha:o,beta:l}=r;if("float32"!==a.dtype)throw new Error("LRN error: x must have dtype float32");let c=n.makeOutput(a.shape,a.dtype);return k0(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(c.dataId).id,a.shape[3],i,s,o,l),c}};var D0,R0={kernelName:ul,backendName:"wasm",setupFunc:function(e){T0=e.wasm.cwrap(ul,null,["number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a,y:i,dy:s}=t,{depthRadius:o,bias:l,alpha:c,beta:u}=r;if("float32"!==a.dtype||"float32"!==i.dtype||"float32"!==s.dtype)throw new Error("LRNGrad error: x, y, and dy must have dtype float32");let A=n.makeOutput(a.shape,a.dtype);return T0(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(A.dataId).id,s.shape[3],o,l,c,u),A}};var U0,O0={kernelName:dl,backendName:"wasm",setupFunc:function(e){D0=e.wasm.cwrap(dl,null,["number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{reductionIndices:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=s,{transposed:c,axes:u,originalAxes:A,inputWasTransposed:d}=SZ(s,a,t);if(d){l=c,o=t.dataIdMap.get(c.dataId).id}let h=l.shape.length;Tw.assertAxesAreInnerMostDims("max",u,h);let[p,f]=Tw.computeOutAndReduceShapes(l.shape,u),m=su.sizeFromShape(f),g=t.makeOutput(p,s.dtype);if(0!==su.sizeFromShape(l.shape)){let e=t.dataIdMap.get(g.dataId).id;D0(o,sZ[s.dtype],m,e)}if(d&&t.disposeData(c.dataId),i){let e=Tw.expandShapeToKeepDim(g.shape,A);g.shape=e}return g}},M0=mZ(hl);var P0,Q0={kernelName:pl,backendName:"wasm",setupFunc:function(e){U0=e.wasm.cwrap(pl,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,a=t.x,i=r.dataIdMap.get(a.dataId).id;su.assert("float32"===a.dtype,()=>"Error in MaxPool: only float32 input is supported. Got ".concat(a.dtype,"."));let{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=n,u=Tw.computePool2DInfo(a.shape,s,o,1,l,c),A=u.filterHeight,d=u.filterWidth,h=u.padInfo.top,p=u.padInfo.right,f=u.padInfo.bottom,m=u.padInfo.left,g=u.dilationHeight,y=u.dilationWidth,b=u.strideHeight,w=u.strideWidth,v=u.inChannels,x=u.outChannels;if("channelsLast"!==u.dataFormat)throw new Error("wasm backend does not support dataFormat:'".concat(u.dataFormat,"'. Please use 'channelsLast'."));let C=r.makeOutput(u.outShape,"float32"),k=r.dataIdMap.get(C.dataId).id;return U0(i,a.shape[0],a.shape[1],a.shape[2],A,d,h,p,f,m,g,y,b,w,v,x,k),C}};var j0,H0={kernelName:ml,backendName:"wasm",setupFunc:function(e){P0=e.wasm.cwrap("MaxPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,dimRoundingMode:l,dataFormat:c}=r,u=Tw.computePool3DInfo(a.shape,i,s,1,o,l,c),A=n.makeOutput(u.outShape,a.dtype);return P0(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(A.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),A}};var z0,W0={kernelName:gl,backendName:"wasm",setupFunc:function(e){j0=e.wasm.cwrap("MaxPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r,u=Tw.computePool3DInfo(i.shape,s,o,1,l,c),A=n.makeOutput(i.shape,i.dtype);return j0(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(A.dataId).id,u.batchSize,u.inChannels,u.inDepth,u.inHeight,u.inWidth,u.outDepth,u.outHeight,u.outWidth,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.effectiveFilterDepth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),A}};var V0,G0={kernelName:fl,backendName:"wasm",setupFunc:function(e){z0=e.wasm.cwrap("MaxPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:a,input:i}=t,{filterSize:s,strides:o,pad:l,dimRoundingMode:c}=r,u=Tw.computePool2DInfo(i.shape,s,o,1,l,c),A=n.makeOutput(i.shape,i.dtype);return z0(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(A.dataId).id,u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.top,u.padInfo.left),A}};var K0,q0={kernelName:yl,backendName:"wasm",setupFunc:function(e){V0=e.wasm.cwrap("MaxPoolWithArgmax",null,["number","number","number","number","boolean","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{filterSize:i,strides:s,pad:o,includeBatchInIndex:l}=r;su.assert(4===a.shape.length,()=>"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,"."));let c=[1,1];su.assert(Tw.eitherStridesOrDilationsAreOne(s,c),()=>"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(s," and dilations '").concat(c,"'"));let u=Tw.computePool2DInfo(a.shape,i,s,[1,1],o),A=n.makeOutput(u.outShape,a.dtype),d=n.makeOutput(u.outShape,"int32");return V0(n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(A.dataId).id,n.dataIdMap.get(d.dataId).id,sZ[a.dtype],l,u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.top,u.padInfo.left),[A,d]}};var X0,J0={kernelName:bl,backendName:"wasm",setupFunc:function(e){K0=e.wasm.cwrap(bl,null,["number, number, number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=o,c=s,{transposed:u,axes:A,originalAxes:d,inputWasTransposed:h}=SZ(s,a,t),p=A;if(h){let e=t.dataIdMap.get(u.dataId).id;e!==o&&(c=u,l=e,p=Tw.getInnerMostAxes(p.length,c.shape.length))}Tw.assertAxesAreInnerMostDims("mean",p,c.shape.length);let[f,m]=Tw.computeOutAndReduceShapes(c.shape,p),g=su.sizeFromShape(m),y=c;"float32"!==c.dtype&&(y=r$({backend:t,inputs:{x:c},attrs:{dtype:"float32"}}),l=t.dataIdMap.get(y.dataId).id);let b=t.makeOutput(f,"float32");if(0!==su.sizeFromShape(c.shape)){let e=t.dataIdMap.get(b.dataId).id;K0(l,g,e)}if(h&&t.disposeData(u.dataId),i){let e=Tw.expandShapeToKeepDim(b.shape,d);b.shape=e}return"float32"!==c.dtype&&t.disposeData(y.dataId),b}};var Y0,Z0,$0={kernelName:wl,backendName:"wasm",setupFunc:function(e){X0=e.wasm.cwrap(wl,null,["number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=o,c=s,{transposed:u,axes:A,originalAxes:d,inputWasTransposed:h}=SZ(s,a,t);if(h){let e=t.dataIdMap.get(u.dataId).id;e!==o&&(c=u,l=e)}let p=c.shape.length;Tw.assertAxesAreInnerMostDims("min",A,p);let[f,m]=Tw.computeOutAndReduceShapes(c.shape,A),g=su.sizeFromShape(m),y=t.makeOutput(f,c.dtype);if(0!==su.sizeFromShape(c.shape)){let e=t.dataIdMap.get(y.dataId).id;X0(l,sZ[s.dtype],g,e)}if(h&&t.disposeData(u.dataId),i){let e=Tw.expandShapeToKeepDim(y.shape,d);y.shape=e}return y}},e1=mZ(vl);!function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"}(Y0||(Y0={}));var t1,n1={kernelName:xl,backendName:"wasm",kernelFunc:function(e){let{inputs:{x:t},backend:n,attrs:{paddings:r,mode:a}}=e,i=r.map((e,n)=>e[0]+t.shape[n]+e[1]),s=n.dataIdMap.get(t.dataId).id,o=n.makeOutput(i,t.dtype),l=n.dataIdMap.get(o.dataId).id,c=new Uint8Array(new Int32Array(t.shape).buffer),u=r.map(e=>e[0]),A=r.map(e=>e[1]),d=new Uint8Array(new Int32Array(u).buffer),h=new Uint8Array(new Int32Array(A).buffer);return Z0(s,c,t.shape.length,sZ[t.dtype],d,h,Y0[a],l),o},setupFunc:function(e){Z0=e.wasm.cwrap(xl,null,["number","array","number","number","array","array","number","number"])}};function r1(e){let{backend:t,inputs:{logits:n},attrs:{dim:r}}=e,a=t.dataIdMap.get(n.dataId).id,i=t.makeOutput(n.shape,n.dtype),s=t.dataIdMap.get(i.dataId).id,o=n.shape[r],l=su.sizeFromShape(n.shape)/o;return 0===su.sizeFromShape(i.shape)||t1(a,s,o,l),i}var a1,i1={kernelName:mc,backendName:"wasm",setupFunc:function(e){t1=e.wasm.cwrap(mc,null,["number","number","number","number"])},kernelFunc:r1};var s1,o1={kernelName:kl,backendName:"wasm",setupFunc:function(e){a1=e.wasm.cwrap(kl,null,["number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{logits:a}=t,{numSamples:i,seed:s,normalized:o}=r;if("float32"!==a.dtype)throw new Error("Tensor logits must have dtype float32, got ".concat(a.dtype));let l=o?a:r1({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),[c,u]=l.shape,A=n.makeOutput([c,i],"int32");return a1(n.dataIdMap.get(l.dataId).id,c,u,i,s,n.dataIdMap.get(A.dataId).id),o||n.disposeData(l.dataId),A}},l1=mZ(Cl),c1=mZ(Bl),u1=dZ(Sl);function A1(e,t){let n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),r=n[0],a=n[1],i=n[2],s=n[3];return e.wasm._free(t),{pSelectedIndices:r,selectedSize:a,pSelectedScores:i,pValidOutputs:s}}var d1,h1={kernelName:Nl,backendName:"wasm",setupFunc:function(e){s1=e.wasm.cwrap(Nl,"number",["number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{iouThreshold:a,maxOutputSize:i,scoreThreshold:s}=r,{boxes:o,scores:l}=n,c=t.dataIdMap.get(o.dataId).id,u=t.dataIdMap.get(l.dataId).id,A=s1(c,u,i,a,s),{pSelectedIndices:d,selectedSize:h,pSelectedScores:p,pValidOutputs:f}=A1(t,A);return t.wasm._free(p),t.wasm._free(f),t.makeOutput([h],"int32",d)}};var p1,f1={kernelName:Fl,backendName:"wasm",setupFunc:function(e){d1=e.wasm.cwrap(Fl,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{iouThreshold:a,maxOutputSize:i,scoreThreshold:s,padToMaxOutputSize:o}=r,{boxes:l,scores:c}=n,u=t.dataIdMap.get(l.dataId).id,A=t.dataIdMap.get(c.dataId).id,d=d1(u,A,i,a,s,o),{pSelectedIndices:h,selectedSize:p,pSelectedScores:f,pValidOutputs:m}=A1(t,d);return t.wasm._free(f),[t.makeOutput([p],"int32",h),t.makeOutput([],"int32",m)]}};var m1,g1={kernelName:El,backendName:"wasm",setupFunc:function(e){p1=e.wasm.cwrap(El,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{iouThreshold:a,maxOutputSize:i,scoreThreshold:s,softNmsSigma:o}=r,{boxes:l,scores:c}=n,u=t.dataIdMap.get(l.dataId).id,A=t.dataIdMap.get(c.dataId).id,d=p1(u,A,i,a,s,o),{pSelectedIndices:h,selectedSize:p,pSelectedScores:f,pValidOutputs:m}=A1(t,d);return t.wasm._free(m),[t.makeOutput([p],"int32",h),t.makeOutput([p],"float32",f)]}},y1=mZ(Il,0,"bool");var b1={kernelName:Tl,backendName:"wasm",setupFunc:function(e){m1=e.wasm.cwrap(Tl,null,["number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:a}=t,{dtype:i,depth:s,onValue:o,offValue:l}=r,c=n.makeOutput([...a.shape,s],i),u=n.dataIdMap.get(c.dataId).id,A=n.dataIdMap.get(a.dataId).id;return m1(A,s,o,l,u),c}};var w1={kernelName:_l,backendName:"wasm",kernelFunc:function(e){let{inputs:{x:t},backend:n}=e,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(1),r}};var v1,x1={kernelName:Ll,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{axis:a}=r;if(1===t.length)return X$({inputs:{input:t[0]},backend:n,attrs:{dim:a}});let i=t[0].shape,s=t[0].dtype;t.forEach(e=>{su.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),su.assert(s===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});let o=[],l=t.map(e=>{let t=X$({inputs:{input:e},backend:n,attrs:{dim:a}});return o.push(t),t}),c=l$({inputs:l,backend:n,attrs:{axis:a}});return o.forEach(e=>n.disposeData(e.dataId)),c}};var C1,k1={kernelName:Dl,backendName:"wasm",kernelFunc:function(e){let{inputs:{x:t},backend:n,attrs:{paddings:r,constantValue:a}}=e,i=r.map((e,n)=>e[0]+t.shape[n]+e[1]);if(0===su.sizeFromShape(t.shape))return Z$({backend:n,attrs:{shape:i,value:a,dtype:t.dtype}});let s=n.dataIdMap.get(t.dataId).id,o=n.makeOutput(i,t.dtype),l=n.dataIdMap.get(o.dataId).id,c=new Uint8Array(new Int32Array(t.shape).buffer),u=r.map(e=>e[0]),A=r.map(e=>e[1]),d=new Uint8Array(new Int32Array(u).buffer),h=new Uint8Array(new Int32Array(A).buffer);return v1(s,c,t.shape.length,sZ[t.dtype],d,h,a,l),o},setupFunc:function(e){v1=e.wasm.cwrap(Dl,null,["number","array","number","number","array","array","number","number"])}},B1=mZ(Ul);var S1,I1={kernelName:Ol,backendName:"wasm",setupFunc:function(e){C1=e.wasm.cwrap(Ol,null,["number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r,alpha:a}=t,i=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(a.dataId).id,o=i,l=r,c=l;"float32"!==l.dtype&&(c=r$({backend:n,inputs:{x:r},attrs:{dtype:"float32"}}),o=n.dataIdMap.get(c.dataId).id);let u=n.makeOutput(r.shape,"float32"),A=n.dataIdMap.get(u.dataId).id;return C1(o,s,A),"float32"!==l.dtype&&n.disposeData(c.dataId),u}};var N1,F1={kernelName:Ml,backendName:"wasm",setupFunc:function(e){S1=e.wasm.cwrap(Ml,null,["number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=o,c=s,{transposed:u,axes:A,originalAxes:d,inputWasTransposed:h}=SZ(s,a,t),p=A;if(h){let e=t.dataIdMap.get(u.dataId).id;e!==o&&(c=u,l=e,p=Tw.getInnerMostAxes(p.length,c.shape.length))}Tw.assertAxesAreInnerMostDims("prod",p,c.shape.length);let[f,m]=Tw.computeOutAndReduceShapes(c.shape,p),g=su.sizeFromShape(m),y=t.makeOutput(f,c.dtype);if(0!==su.sizeFromShape(c.shape)){let e=t.dataIdMap.get(y.dataId).id;S1(l,g,sZ[y.dtype],e)}if(h&&t.disposeData(u.dataId),i){let e=Tw.expandShapeToKeepDim(y.shape,d);y.shape=e}return y}},E1={kernelName:Hl,backendName:"wasm",kernelFunc:e=>{let{backend:t,attrs:n}=e,{start:r,stop:a,step:i,dtype:s}=n,o=JU(r,a,i,s),l=t.makeOutput([o.length],s);return t.typedArrayFromHeap(l).set(o),l}},_1=mZ(So),T1=dZ(Wl),L1=dZ(Vl),D1=dZ(Yl);var R1,U1={kernelName:Xl,backendName:"wasm",setupFunc:function(e){N1=e.wasm.cwrap(Xl,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let t,{backend:n,inputs:r,attrs:a}=e,{images:i}=r,{alignCorners:s,halfPixelCenters:o,size:l}=a,[c,u]=l,[A,d,h,p]=i.shape,f=[A,c,u,p],m=n.dataIdMap.get(i.dataId);"float32"!==m.dtype&&(t=r$({backend:n,inputs:{x:i},attrs:{dtype:"float32"}}),m=n.dataIdMap.get(t.dataId));let g=m.id,y=n.makeOutput(f,"float32");if(0===su.sizeFromShape(i.shape))return y;let b=n.dataIdMap.get(y.dataId).id;return N1(g,A,d,h,p,c,u,s?1:0,o?1:0,b),null!=t&&n.disposeData(t.dataId),y}};var O1,M1={kernelName:Jl,backendName:"wasm",setupFunc:function(e){R1=e.wasm.cwrap(Jl,null,["number","number","number","array","array","boolean"])},kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:a}=e,{images:i,dy:s}=n,{alignCorners:o}=a,l=r.makeOutput(i.shape,"float32"),c=r.dataIdMap.get(i.dataId);return"float32"!==c.dtype&&(t=r$({backend:r,inputs:{x:i},attrs:{dtype:"float32"}}),c=r.dataIdMap.get(t.dataId)),R1(r.dataIdMap.get(i.dataId).id,r.dataIdMap.get(s.dataId).id,r.dataIdMap.get(l.dataId).id,new Uint8Array(new Int32Array(i.shape).buffer),new Uint8Array(new Int32Array(s.shape).buffer),o),null!=t&&r.disposeData(t.dataId),l}};var P1,Q1={kernelName:Kl,backendName:"wasm",setupFunc:function(e){O1=e.wasm.cwrap(Kl,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{images:a}=n,{alignCorners:i,halfPixelCenters:s,size:o}=r,[l,c]=o,[u,A,d,h]=a.shape,p=[u,l,c,h],f=t.makeOutput(p,"float32");if(0===su.sizeFromShape(a.shape))return f;let m,g=t.dataIdMap.get(a.dataId);"float32"!==g.dtype&&(m=r$({backend:t,inputs:{x:a},attrs:{dtype:"float32"}}),g=t.dataIdMap.get(m.dataId));let y=g.id,b=t.dataIdMap.get(f.dataId).id;return O1(y,u,A,d,h,l,c,i?1:0,s?1:0,b),null!=m&&t.disposeData(m.dataId),f}};var j1,H1={kernelName:ql,backendName:"wasm",setupFunc:function(e){P1=e.wasm.cwrap(ql,null,["number","number","number","array","array","boolean"])},kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:a}=e,{images:i,dy:s}=n,{alignCorners:o}=a,l=r.makeOutput(i.shape,"float32"),c=r.dataIdMap.get(i.dataId);return"float32"!==c.dtype&&(t=r$({backend:r,inputs:{x:i},attrs:{dtype:"float32"}}),c=r.dataIdMap.get(t.dataId)),P1(r.dataIdMap.get(i.dataId).id,r.dataIdMap.get(s.dataId).id,r.dataIdMap.get(l.dataId).id,new Uint8Array(new Int32Array(i.shape).buffer),new Uint8Array(new Int32Array(s.shape).buffer),o),null!=t&&r.disposeData(t.dataId),l}};var z1,W1={kernelName:Zl,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{dims:i}=r,s=su.parseAxisParam(i,a.shape);if(0===a.shape.length)return wZ({inputs:{x:a},backend:n});let o=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(a.dataId).id,c=n.dataIdMap.get(o.dataId).id,u=new Uint8Array(new Int32Array(s).buffer),A=new Uint8Array(new Int32Array(a.shape).buffer);j1(l,u,s.length,A,a.shape.length,c);let d=GZ({inputs:{x:o},attrs:{shape:a.shape},backend:n});return n.disposeData(o.dataId),d},setupFunc:function(e){j1=e.wasm.cwrap(Zl,null,["number","array","number","array","number","number"])}};var V1,G1={kernelName:zc,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{image:a}=t,{radians:i,fillValue:s,center:o}=r,l=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(l.dataId).id,[A,d,h,p]=a.shape,[f,m]=Tw.getImageCenter(o,d,h),g="number"==typeof s?[s,s,s,0===s?0:255]:[...s,255],y=new Uint8Array(new Int32Array(g).buffer);return z1(c,A,d,h,p,i,f,m,y,g.length,u),l},setupFunc:function(e){z1=e.wasm.cwrap(zc,null,["number","number","number","number","number","number","number","number","array","number","number"])}},K1=dZ($l),q1=dZ(ec);var X1,J1={kernelName:tc,backendName:"wasm",setupFunc:function(e){V1=e.wasm.cwrap(tc,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{indices:a,updates:i}=n,{shape:s}=r,o=t.makeOutput(s,i.dtype);if(0===su.sizeFromShape(s))return o;let{sliceRank:l,numUpdates:c,sliceSize:u,strides:A,outputSize:d}=kg.calculateShapes(i,a,s),h=t.dataIdMap.get(a.dataId).id,p=t.dataIdMap.get(i.dataId).id,f=new Uint8Array(new Int32Array(A).buffer),m=t.dataIdMap.get(o.dataId).id;return V1(h,p,sZ[i.dtype],l,c,u,f,d,m),o}};var Y1,Z1={kernelName:rc,backendName:"wasm",setupFunc:function(e){X1=e.wasm.cwrap(rc,null,["number","number","number","number","number","number","bool","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:a,values:i}=t,{side:s}=r;if(a.dtype!==i.dtype)throw new Error("SearchSorted error: sorted_sequence must have the same dtype as values. Got ".concat(a.dtype," and ").concat(i.dtype));let o=n.makeOutput(i.shape,"int32");function l(e){return n.dataIdMap.get(e.dataId).id}return X1(l(a),l(i),a.shape[0],a.shape[1],i.shape[1],sZ[a.dtype],"left"===s,l(o)),o}};var $1,e2={kernelName:ac,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n}=e,{condition:r,t:a,e:i}=t,s=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id,l=n.dataIdMap.get(i.dataId).id,c=n.makeOutput(a.shape,a.dtype),u=n.dataIdMap.get(c.dataId).id,A=r.shape.length,d=a.shape.length,h=0===A||A>1||1===d?1:su.sizeFromShape(a.shape.slice(1));return Y1(s,o,l,h,u),c},setupFunc:function(e){Y1=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}},t2=dZ(ic);var n2={kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){$1=e.wasm.cwrap(uc,null,["number","number"])},kernelFunc:function(e){let{backend:t,inputs:{x:n}}=e,r=t.dataIdMap.get(n.dataId).id,a=t.makeOutput(n.shape,n.dtype),i=t.dataIdMap.get(a.dataId).id;return 0===su.sizeFromShape(a.shape)||$1(r,i),a}},r2=dZ(cc),a2=dZ(oc),i2=dZ(lc),s2=dZ(Ac);var o2,l2={kernelName:pc,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{blockShape:i,paddings:s}=r,o=su.sizeFromShape(i),l=[[0,0]];l.push(...s);for(let m=1+i.length;m<a.shape.length;++m)l.push([0,0]);let c=k1.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:l,constantValue:0}}),u=Tw.getReshaped(c.shape,i,o,!1),A=Tw.getPermuted(u.length,i.length,!1),d=Tw.getReshapedPermuted(c.shape,i,o,!1),h=GZ({inputs:{x:c},backend:n,attrs:{shape:u}}),p=CZ({inputs:{x:h},backend:n,attrs:{perm:A}}),f=GZ({inputs:{x:p},backend:n,attrs:{shape:d}});return n.disposeData(c.dataId),n.disposeData(h.dataId),n.disposeData(p.dataId),f}};var c2,u2={kernelName:gc,backendName:"wasm",setupFunc:function(e){o2=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let t,{backend:n,inputs:r}=e,{indices:a,values:i,denseShape:s,defaultValue:o}=r,l=a.shape[0],c=a.shape[1],u=n.readSync(s.dataId)[0],A=[l+u,c],d=n.dataIdMap.get(a.dataId).id,h=n.dataIdMap.get(i.dataId).id,p=n.dataIdMap.get(o.dataId).id,f=n.makeOutput(A,a.dtype),m=n.dataIdMap.get(f.dataId).id,g=n.makeOutput(A.slice(0,1),i.dtype),y=n.dataIdMap.get(g.dataId).id,b=n.makeOutput([u],"bool"),w=n.dataIdMap.get(b.dataId).id,v=n.makeOutput([l],a.dtype),x=n.dataIdMap.get(v.dataId).id,C=n.makeOutput([4],"int32"),k=n.dataIdMap.get(C.dataId).id,B=o2(d,h,sZ[i.dtype],l,u,c,p,m,y,w,x,k),S=n.readSync(C.dataId);switch(S[0]){case 1:t=Tw.getSparseFillEmptyRowsIndicesDenseShapeMismatch(S[1]);break;case 2:t=Tw.getSparseFillEmptyRowsNegativeIndexErrorMessage(S[1],S[2]);break;case 3:t=Tw.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(S[1],S[2],S[3]);break;default:t=""}if(n.disposeData(C.dataId),t)throw n.disposeData(f.dataId),n.disposeData(g.dataId),n.disposeData(b.dataId),n.disposeData(v.dataId),new Error(t);let I=f,N=g;return B!==A[0]&&(I=JZ({inputs:{x:f},attrs:{begin:0,size:[B,c]},backend:n}),N=JZ({inputs:{x:g},attrs:{begin:0,size:B},backend:n}),n.disposeData(f.dataId),n.disposeData(g.dataId)),[I,N,b,v]}};var A2,d2={kernelName:yc,backendName:"wasm",setupFunc:function(e){c2=e.wasm.cwrap(yc,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n}=e,{inputIndices:r,inputShape:a,newShape:i}=n;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));let s=t.dataIdMap.get(r.dataId).id,o=t.dataIdMap.get(a.dataId).id,l=t.dataIdMap.get(i.dataId).id,c=r.shape[0],u=su.sizeFromShape(i.shape),A=t.makeOutput([c,u],r.dtype),d=t.dataIdMap.get(A.dataId).id,h=t.makeOutput([u],i.dtype),p=t.dataIdMap.get(h.dataId).id,f=t.makeOutput([3],"int32"),m=t.dataIdMap.get(f.dataId).id;c2(s,o,l,c,d,p,m);let g,y=t.readSync(f.dataId);switch(y[0]){case 0:g=Tw.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(y[1],y[2]);break;case 1:g=Tw.getSparseReshapeNegativeOutputDimErrorMessage(y[1],y[2]);break;case 2:g=Tw.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage();break;case 3:{let e=Array.from(t.readSync(a.dataId)),n=Array.from(t.readSync(h.dataId));g=Tw.getSparseReshapeInputOutputMultipleErrorMessage(e,n);break}case 4:{let e=Array.from(t.readSync(a.dataId)),n=Array.from(t.readSync(h.dataId));g=Tw.getSparseReshapeInputOutputMismatchErrorMessage(e,n);break}default:g=""}if(t.disposeData(f.dataId),g)throw t.disposeData(A.dataId),t.disposeData(h.dataId),new Error(g);return[A,h]}};function h2(e){A2=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function p2(e,t){let{backend:n,inputs:r}=e,{data:a,indices:i,segmentIds:s}=r,o=i.shape[0],l=n.readSync(s.dataId,o-1,o)[0],c=o>0?l+1:0;if(c<0)throw new Error(Tw.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let u=a.shape.slice();u[0]=c;let A=n.dataIdMap.get(a.dataId).id,d=n.dataIdMap.get(i.dataId).id,h=n.dataIdMap.get(s.dataId).id,p=n.makeOutput(u,a.dtype),f=n.dataIdMap.get(p.dataId).id,m=n.makeOutput([4],"int32"),g=n.dataIdMap.get(m.dataId).id;A2(A,sZ[a.dtype],a.shape[0],d,h,f,g,t,0);let y,b=n.readSync(m.dataId);switch(b[0]){case 0:y=Tw.getSparseSegmentReductionNegativeSegmentIdsErrorMessage();break;case 1:y=Tw.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage();break;case 2:y=Tw.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(b[1],b[2]);break;case 3:y=Tw.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(b[1],b[2],b[3]);break;default:y=""}if(n.disposeData(m.dataId),y)throw n.disposeData(p.dataId),new Error(y);return p}var f2={kernelName:bc,backendName:"wasm",setupFunc:h2,kernelFunc:function(e){return p2(e,!0)}};var m2,g2={kernelName:wc,backendName:"wasm",setupFunc:h2,kernelFunc:function(e){return p2(e,!1)}};var y2={kernelName:vc,backendName:"wasm",setupFunc:function(e){m2=e.wasm.cwrap(vc,null,["number","number","number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{sparseIndices:a,sparseValues:i,defaultValue:s}=n,{outputShape:o}=r,l=t.makeOutput(o,s.dtype);if(0===su.sizeFromShape(o))return l;let{sliceRank:c,numUpdates:u,sliceSize:A,strides:d,outputSize:h}=Tw.calculateShapes(i,a,o),p=t.dataIdMap.get(a.dataId).id,f=t.dataIdMap.get(i.dataId).id,m=t.dataIdMap.get(s.dataId).id,g=new Uint8Array(new Int32Array(d).buffer),y=t.dataIdMap.get(l.dataId).id;return m2(p,f,i.shape.length,m,sZ[s.dtype],c,u,A,g,h,y),l}};var b2,w2={kernelName:fc,backendName:"wasm",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{x:a}=t,{numOrSizeSplits:i,axis:s}=n,o=su.parseAxisParam(s,a.shape)[0],l=Tw.prepareSplitSize(a,i,o),c=new Array(a.shape.length).fill(0),u=a.shape.slice();return l.map(e=>{let t=[...u];t[o]=e;let n=JZ({inputs:{x:a},attrs:{begin:c,size:t},backend:r});return c[o]+=e,n})}},v2=dZ(dc),x2=dZ(Cc),C2=mZ(xc);var k2,B2={kernelName:jc,backendName:"wasm",setupFunc:function(e){b2=e.wasm.cwrap(jc,null,["number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{alpha:a}=r,{x:i}=n,s=t.dataIdMap.get(i.dataId).id,o=t.makeOutput(i.shape,i.dtype),l=t.dataIdMap.get(o.dataId).id;return b2(s,a,sZ[i.dtype],l),o}};var S2={kernelName:Bc,backendName:"wasm",setupFunc:function(e){k2=e.wasm.cwrap(Bc,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){let t,{backend:n,inputs:r,attrs:a}=e,{x:i}=r,{begin:s,end:o,strides:l,beginMask:c,endMask:u,ellipsisMask:A,newAxisMask:d,shrinkAxisMask:h}=a,{finalShapeSparse:p,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:b,end:w,strides:v}=sw.sliceInfo(i.shape,s,o,l,c,u,A,d,h);if(m)t=GZ({inputs:{x:i},backend:n,attrs:{shape:f}});else if(g||y){su.assert(i.shape.length>=1,()=>"Input must have rank at least 1, got: ".concat(i.shape.length));let e=sw.computeOutShape(b,w,v),r=JZ({inputs:{x:i},backend:n,attrs:{begin:b,size:e}});t=GZ({inputs:{x:r},backend:n,attrs:{shape:f}}),n.disposeData(r.dataId)}else{let e=n.makeOutput(p,"float32"),r=n.dataIdMap.get(i.dataId).id,a=new Uint8Array(new Int32Array(su.computeStrides(i.shape)).buffer),s=new Uint8Array(new Int32Array(b).buffer),o=new Uint8Array(new Int32Array(w).buffer),l=new Uint8Array(new Int32Array(v).buffer),c=new Uint8Array(new Int32Array(p).buffer),u=new Uint8Array(new Int32Array(su.computeStrides(p)).buffer),A=n.dataIdMap.get(e.dataId).id;k2(r,a,i.shape.length,s,o,l,c,u,p.length,A),t=GZ({inputs:{x:e},backend:n,attrs:{shape:f}}),n.disposeData(e.dataId)}return t}};var I2={kernelName:Sc,backendName:"wasm",kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{data:a,dataSplits:i}=n,{separator:s,nGramWidths:o,leftPad:l,rightPad:c,padWidth:u,preserveShortSequences:A}=r,d=t.readSync(a.dataId),h=t.readSync(i.dataId),[p,f]=vO(d,h,s,o,l,c,u,A),m=t.makeOutput([p.length],"string");t.dataIdMap.get(m.dataId).stringBytes=p;let g=t.makeOutput(i.shape,"int32");return t.typedArrayFromHeap(g).set(f),[m,g]}};var N2={kernelName:Ic,backendName:"wasm",kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{input:a,delimiter:i}=n,{skipEmpty:s}=r,o=t.readSync(a.dataId),l=t.readSync(i.dataId),[c,u,A]=CO(o,l[0],s),d=u.length,h=t.makeOutput([d,2],"int32");t.typedArrayFromHeap(h).set(c);let p=t.makeOutput([d],"string");t.dataIdMap.get(p.dataId).stringBytes=u;let f=t.makeOutput([2],"int32");return t.typedArrayFromHeap(f).set(A),[h,p,f]}};var F2,E2={kernelName:Nc,backendName:"wasm",kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{input:a}=n,{numBuckets:i}=r,s=kO(t.readSync(a.dataId),i),o=t.makeOutput(a.shape,"int32");return t.typedArrayFromHeap(o).set(s),o}},_2=mZ(Fc);var T2,L2={kernelName:hc,backendName:"wasm",setupFunc:function(e){F2=e.wasm.cwrap(hc,null,["number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:a,keepDims:i}=r,{x:s}=n,o=t.dataIdMap.get(s.dataId).id,l=o,c=s,{transposed:u,axes:A,originalAxes:d,inputWasTransposed:h}=SZ(s,a,t),p=A;if(h){let e=t.dataIdMap.get(u.dataId).id;e!==o&&(c=u,l=e,p=Tw.getInnerMostAxes(p.length,c.shape.length))}Tw.assertAxesAreInnerMostDims("sum",p,c.shape.length);let[f,m]=Tw.computeOutAndReduceShapes(c.shape,p),g=su.sizeFromShape(m),y=t.makeOutput(f,c.dtype);if(0!==su.sizeFromShape(c.shape)){let e=t.dataIdMap.get(y.dataId).id;F2(l,g,sZ[y.dtype],e)}if(h&&t.disposeData(u.dataId),i){let e=Tw.expandShapeToKeepDim(y.shape,d);y.shape=e}return y}},D2=dZ(Ec),R2=dZ(_c);var U2,O2={kernelName:nc,backendName:"wasm",setupFunc:function(e){T2=e.wasm.cwrap(nc,null,["number","number","number","number","number","number","array","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{tensor:a,indices:i,updates:s}=n,{}=r,o=t.makeOutput(a.shape,a.dtype);if(0===su.sizeFromShape(a.shape))return o;let{sliceRank:l,numUpdates:c,sliceSize:u,strides:A,outputSize:d}=kg.calculateShapes(s,i,a.shape),h=t.dataIdMap.get(i.dataId).id,p=t.dataIdMap.get(s.dataId).id,f=t.dataIdMap.get(a.dataId).id,m=new Uint8Array(new Int32Array(A).buffer),g=t.dataIdMap.get(o.dataId).id;return T2(h,p,sZ[s.dtype],l,c,u,m,d,g,f),o}};var M2,P2={kernelName:Tc,backendName:"wasm",setupFunc:function(e){U2=e.wasm.cwrap(Tc,null,["number","array","number","array","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,i=n.dataIdMap.get(a.dataId).id,{reps:s}=r,o=new Array(a.shape.length);for(let d=0;d<o.length;d++)o[d]=a.shape[d]*s[d];let l=new Uint8Array(new Int32Array(a.shape).buffer),c=new Uint8Array(new Int32Array(o).buffer),u=n.makeOutput(o,a.dtype),A=n.dataIdMap.get(u.dataId).id;return U2(i,l,a.shape.length,c,o.length,sZ[u.dtype],A),u}};var Q2,j2={kernelName:Lc,backendName:"wasm",setupFunc:function(e){M2=e.wasm.cwrap(Lc,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:a}=t,{k:i,sorted:s}=r,o=n.dataIdMap.get(a.dataId).id,l=new Uint8Array(new Int32Array(a.shape).buffer),c=a.shape.slice();c[c.length-1]=i;let u=n.makeOutput(c,a.dtype),A=n.dataIdMap.get(u.dataId).id,d=n.makeOutput(c,"int32"),h=n.dataIdMap.get(d.dataId).id;return M2(o,l,a.shape.length,sZ[a.dtype],i,s,A,h),[u,d]}};var H2={kernelName:Dc,backendName:"wasm",setupFunc:function(e){Q2=e.wasm.cwrap(Dc,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])},kernelFunc:function(e){let t,{backend:n,inputs:r,attrs:a}=e,{image:i,transforms:s}=r,{interpolation:o,fillMode:l,fillValue:c,outputShape:u}=a,[A,d,h,p]=i.shape,[f,m]=null!=u?u:[d,h],g=[A,f,m,p],y=new Uint8Array(new Int32Array(su.computeStrides(i.shape)).buffer),b=new Uint8Array(new Int32Array(su.computeStrides(g)).buffer),w=n.makeOutput(g,i.dtype),v=n.dataIdMap.get(w.dataId).id,x=n.dataIdMap.get(i.dataId).id,C=n.dataIdMap.get(s.dataId).id,k="nearest"===o?1:2;switch(l){case"constant":default:t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4}return Q2(x,C,s.shape[0]>1,A,f,m,p,h,d,y,i.shape.length-1,b,g.length-1,k,t,c,v),w}};var z2={kernelName:Uc,backendName:"wasm",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{axis:a}=n,{x:i}=t,{outputValues:s,outputShape:o,indices:l}=LO(r.readSync(i.dataId),a,i.shape,i.dtype);return[r.makeOutput(o,i.dtype,void 0,s),r.makeOutput([l.length],"int32",void 0,l)]}};var W2={kernelName:Oc,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{value:a}=t,{axis:i}=r;i<0&&(i+=a.shape.length);let s=a.shape[i],o=a.shape.length,l=new Array(o-1),c=0;for(let h=0;h<o;h++)h!==i&&(l[c++]=a.shape[h]);let u=new Array(s),A=new Array(o).fill(0),d=a.shape.slice();d[i]=1;for(let h=0;h<u.length;h++)A[i]=h,u[h]=JZ({inputs:{x:a},attrs:{begin:A,size:d},backend:n});return u.map(e=>{let{dataId:t,dtype:n}=e;return{dataId:t,dtype:n,shape:l}})}};var V2={kernelName:Qc,backendName:"wasm",kernelFunc:function(e){let{inputs:{x:t},backend:n}=e,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(0),r}},G2=[AZ,hZ,pZ,fZ,yZ,bZ,NZ,FZ,TZ,LZ,DZ,RZ,UZ,OZ,MZ,QZ,VZ,HZ,WZ,XZ,$Z,e$,t$,n$,i$,s$,o$,u$,d$,p$,m$,y$,v$,x$,C$,B$,I$,F$,_$,L$,R$,O$,P$,j$,z$,W$,V$,G$,K$,q$,J$,Y$,e0,n0,r0,a0,s0,l0,u0,d0,p0,f0,m0,xZ,g0,y0,b0,v0,x0,C0,B0,I0,S0,N0,F0,E0,_0,L0,R0,O0,M0,Q0,H0,W0,G0,q0,J0,$0,e1,n1,o1,l1,c1,u1,h1,f1,g1,y1,b1,w1,x1,k1,B1,I1,F1,E1,_1,T1,L1,D1,qZ,U1,M1,Q1,H1,W1,G1,K1,q1,J1,Z1,e2,t2,n2,r2,a2,i2,YZ,i1,s2,l2,u2,d2,f2,g2,y2,w2,v2,x2,C2,B2,S2,I2,N2,E2,_2,L2,D2,R2,O2,P2,j2,H2,BZ,z2,W2,V2];for(let n of G2)eu(n);var K2=Cs();K2.registerFlag("WASM_HAS_SIMD_SUPPORT",async()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))}catch(Vu){return!1}}),K2.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",async()=>{if(K2.get("IS_NODE"))return!1;try{return(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch(Vu){return!1}});var q2=ti(wi()),X2=ti(vi()),J2=ti(xi()),Y2=q2.default||q2,Z2=J2.default||J2,$2=class extends ki{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(u5),A5=this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new Ci(this,UA())}write(e,t,n){let r={id:this.dataIdNextNumber++};return this.move(r,e,t,n,1),r}numDataIds(){return this.dataIdMap.numDataIds()}async time(e){let t=su.now();return e(),{kernelMs:su.now()-t}}move(e,t,n,r,a){let i=this.dataIdNextNumber++;if("string"===r){let s=t;return void this.dataIdMap.set(e,{id:i,stringBytes:s,shape:n,dtype:r,memoryOffset:null,refCount:a})}let s=su.sizeFromShape(n),o=s*su.bytesPerElement(r),l=this.wasm._malloc(o)>>>0;this.dataIdMap.set(e,{id:i,memoryOffset:l,shape:n,dtype:r,refCount:a}),this.wasm.tfjs.registerTensor(i,s,l),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,o),l)}async read(e){return this.readSync(e)}readSync(e,t,n){let{memoryOffset:r,dtype:a,shape:i,stringBytes:s}=this.dataIdMap.get(e);if("string"===a)return null!=t&&0!==t||!(null==n||n>=s.length)?s.slice(t,n):s;t=t||0,n=n||su.sizeFromShape(i);let o=su.bytesPerElement(a);return function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype ".concat(t))}}(this.wasm.HEAPU8.slice(r+t*o,r+n*o).buffer,a)}disposeData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.dataIdMap.has(e)){let n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}refCount(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}incRef(e){let t=this.dataIdMap.get(e);null!=t&&t.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,t,n,r){let a;if(null==n)a=this.write(null!=r?r:null,e,t);else{let r=this.dataIdNextNumber++;a={id:r},this.dataIdMap.set(a,{id:r,memoryOffset:n,shape:e,dtype:t,refCount:1});let i=su.sizeFromShape(e);this.wasm.tfjs.registerTensor(r,i,n)}return{dataId:a,shape:e,dtype:t}}typedArrayFromHeap(e){let{shape:t,dtype:n,dataId:r}=e,a=this.wasm.HEAPU8.buffer,{memoryOffset:i}=this.dataIdMap.get(r),s=su.sizeFromShape(t);switch(n){case"float32":return new Float32Array(a,i,s);case"int32":return new Int32Array(a,i,s);case"bool":return new Uint8Array(a,i,s);default:throw new Error("Unknown dtype ".concat(n))}}};function e5(e,t,n){if(null!=r5)return r5;let r="tfjs-backend-wasm.wasm";return e&&t?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),null!=i5&&null!=i5[r]?i5[r]:n+r}async function t5(){let[e,t]=await Promise.all([Cs().getAsync("WASM_HAS_SIMD_SUPPORT"),Cs().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise((n,r)=>{let a={locateFile:(n,r)=>{if(n.endsWith(".worker.js")){let e=X2.wasmWorkerContents.replace(/\n/g,"\\n"),t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}return n.endsWith(".wasm")?e5(e,t,null!=a5?a5:r):r+n}};o5&&(a.instantiateWasm=function(e){return(t,n)=>(su.fetch(e,{credentials:"same-origin"}).then(r=>{r.ok||t.env.a("failed to load wasm binary file at '".concat(e,"'")),r.arrayBuffer().then(e=>{WebAssembly.instantiate(e,t).then(e=>{n(e.instance,e.module)})})}),{})}(e5(e,t,null!=a5?a5:"")));let i,s=!1;a.onAbort=()=>{s||s5||(s5=!0,r({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},t&&e&&null==r5?(a.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+Y2.toString()],{type:"text/javascript"}),i=Y2(a)):i=Z2(a),i.then(e=>{s=!0,s5=!1;e.tfjs={init:e.cwrap("init",null,[]),initWithThreadsCount:e.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:e.cwrap("get_threads_count","number",[]),registerTensor:e.cwrap("register_tensor",null,["number","number","number"]),disposeData:e.cwrap("dispose_data",null,["number"]),dispose:e.cwrap("dispose",null,[])},n({wasm:e})}).catch(r)})}var n5=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],r5=null,a5=null,i5={},s5=!1,o5=!1;function l5(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(DA("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),s5)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");r5=e,o5=t}function c5(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(s5)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)a5=e;else{i5=e;let t=n5.filter(e=>null==i5[e]);if(t.length>0)throw new Error("There were no entries found for the following binaries: ".concat(t.join(","),". Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found."))}o5=t}var u5=-1,A5=-1;function d5(e){u5=e}function h5(){if(-1===A5)throw new Error("WASM backend not initialized.");return A5}var p5="4.22.0";XA("wasm",async()=>{let{wasm:e}=await t5();return new $2(e)},2);var f5="4.22.0",m5={tfjs:f5,"tfjs-core":f5,"tfjs-converter":"4.22.0","tfjs-backend-cpu":"4.22.0","tfjs-backend-webgl":"4.22.0","tfjs-backend-wasm":"4.22.0"},g5={};function y5(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.beginPath(),t.slice(1).forEach((n,r)=>{let{x:a,y:i}=n,s=t[r];e.moveTo(s.x,s.y),e.lineTo(a,i)}),n){let n=t[t.length-1],r=t[0];if(!n||!r)return;e.moveTo(n.x,n.y),e.lineTo(r.x,r.y)}e.stroke()}Ga(g5,{AnchorPosition:()=>i3,DrawBox:()=>c3,DrawBoxOptions:()=>l3,DrawFaceLandmarks:()=>J3,DrawFaceLandmarksOptions:()=>X3,DrawTextField:()=>o3,DrawTextFieldOptions:()=>s3,drawContour:()=>y5,drawDetections:()=>u3,drawFaceExpressions:()=>G3,drawFaceLandmarks:()=>Y3});Ga({},{computeReshapedDimensions:()=>F5,getCenterPoint:()=>E5,isDimensions:()=>N5,isEven:()=>S5,isFloat:()=>B5,isTensor:()=>w5,isTensor1D:()=>v5,isTensor2D:()=>x5,isTensor3D:()=>C5,isTensor4D:()=>k5,isValidNumber:()=>T5,isValidProbablitiy:()=>L5,range:()=>_5,round:()=>I5});var b5=class e{constructor(e,t){if(!T5(e)||!T5(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have ".concat(JSON.stringify({width:e,height:t})));this._width=e,this._height=t}get width(){return this._width}get height(){return this._height}reverse(){return new e(1/this.width,1/this.height)}};function w5(e,t){return e instanceof ju&&e.shape.length===t}function v5(e){return w5(e,1)}function x5(e){return w5(e,2)}function C5(e){return w5(e,3)}function k5(e){return w5(e,4)}function B5(e){return e%1!==0}function S5(e){return e%2===0}function I5(e){let t=10**(arguments.length>1&&void 0!==arguments[1]?arguments[1]:2);return Math.floor(e*t)/t}function N5(e){return e&&e.width&&e.height}function F5(e,t){let{width:n,height:r}=e,a=t/Math.max(r,n);return new b5(Math.round(n*a),Math.round(r*a))}function E5(e){return e.reduce((e,t)=>e.add(t),new D5(0,0)).div(new D5(e.length,e.length))}function _5(e,t,n){return Array(e).fill(0).map((e,r)=>t+r*n)}function T5(e){return!!e&&e!==1/0&&e!==-1/0&&!Number.isNaN(e)||0===e}function L5(e){return T5(e)&&e>=0&&e<=1}var D5=class e{constructor(e,t){this._x=e,this._y=t}get x(){return this._x}get y(){return this._y}add(t){return new e(this.x+t.x,this.y+t.y)}sub(t){return new e(this.x-t.x,this.y-t.y)}mul(t){return new e(this.x*t.x,this.y*t.y)}div(t){return new e(this.x/t.x,this.y/t.y)}abs(){return new e(Math.abs(this.x),Math.abs(this.y))}magnitude(){return Math.sqrt(this.x**2+this.y**2)}floor(){return new e(Math.floor(this.x),Math.floor(this.y))}},R5=class e{static isRect(e){return!!e&&[e.x,e.y,e.width,e.height].every(T5)}static assertIsValidBox(t,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e.isRect(t))throw new Error("".concat(n," - invalid box: ").concat(JSON.stringify(t),", expected object with properties x, y, width, height"));if(!r&&(t.width<0||t.height<0))throw new Error("".concat(n," - width (").concat(t.width,") and height (").concat(t.height,") must be positive numbers"))}constructor(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t||{},a=[r.left,r.top,r.right,r.bottom].every(T5),i=[r.x,r.y,r.width,r.height].every(T5);if(!i&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have ".concat(JSON.stringify(r)));let[s,o,l,c]=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top];e.assertIsValidBox({x:s,y:o,width:l,height:c},"Box.constructor",n),this._x=s,this._y=o,this._width=l,this._height=c}get x(){return this._x}get y(){return this._y}get width(){return this._width}get height(){return this._height}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get area(){return this.width*this.height}get topLeft(){return new D5(this.left,this.top)}get topRight(){return new D5(this.right,this.top)}get bottomLeft(){return new D5(this.left,this.bottom)}get bottomRight(){return new D5(this.right,this.bottom)}round(){let[t,n,r,a]=[this.x,this.y,this.width,this.height].map(e=>Math.round(e));return new e({x:t,y:n,width:r,height:a})}floor(){let[t,n,r,a]=[this.x,this.y,this.width,this.height].map(e=>Math.floor(e));return new e({x:t,y:n,width:r,height:a})}toSquare(){let{x:t,y:n,width:r,height:a}=this,i=Math.abs(r-a);return r<a&&(t-=i/2,r+=i),a<r&&(n-=i/2,a+=i),new e({x:t,y:n,width:r,height:a})}rescale(t){let n=N5(t)?t.width:t,r=N5(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})}pad(t,n){let[r,a,i,s]=[this.x-t/2,this.y-n/2,this.width+t,this.height+n];return new e({x:r,y:a,width:i,height:s})}clipAtImageBorders(t,n){let{x:r,y:a,right:i,bottom:s}=this,o=Math.max(r,0),l=Math.max(a,0),c=i-o,u=s-l,A=Math.min(c,t-o),d=Math.min(u,n-l);return new e({x:o,y:l,width:A,height:d}).floor()}shift(t,n){let{width:r,height:a}=this,i=this.x+t,s=this.y+n;return new e({x:i,y:s,width:r,height:a})}padAtBorders(e,t){let n=this.width+1,r=this.height+1,a=n,i=r,s=this.left,o=this.top,l=this.right,c=this.bottom;return l>t&&(a=-l+t+n,l=t),c>e&&(i=-c+e+r,c=e),s<1&&(i=2-s,s=1),o<1&&(i=2-o,o=1),{dy:1,edy:i,dx:1,edx:a,y:o,ey:c,x:s,ex:l,w:n,h:r}}calibrate(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()}},U5=class extends R5{constructor(e,t,n,r){super({left:e,top:t,right:n,bottom:r},arguments.length>4&&void 0!==arguments[4]&&arguments[4])}},O5=class e{constructor(e,t,n,r,a){this._imageDims=new b5(a.width,a.height),this._score=e,this._classScore=t,this._className=n,this._box=new R5(r).rescale(this._imageDims)}get score(){return this._score}get classScore(){return this._classScore}get className(){return this._className}get box(){return this._box}get imageDims(){return this._imageDims}get imageWidth(){return this.imageDims.width}get imageHeight(){return this.imageDims.height}get relativeBox(){return new R5(this._box).rescale(this.imageDims.reverse())}forSize(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})}},M5=class e extends O5{constructor(e,t,n){super(e,e,"",t,n)}forSize(t,n){let{score:r,relativeBox:a,imageDims:i}=super.forSize(t,n);return new e(r,a,i)}};function P5(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n?r/(e.area+t.area-r):r/Math.min(e.area,t.area)}function Q5(e,t){return PA(()=>{let[n,r,a]=t,i=Yh([...e.shape.slice(0,3),1],n,"float32"),s=Yh([...e.shape.slice(0,3),1],r,"float32"),o=Yh([...e.shape.slice(0,3),1],a,"float32"),l=Dh([i,s,o],3);return If(e,l)})}function j5(e){return 1/(1+Math.exp(-e))}var H5,z5=class extends R5{constructor(e,t,n,r){super({x:e,y:t,width:n,height:r},arguments.length>4&&void 0!==arguments[4]&&arguments[4])}},W5=class{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new D5(0,0),{width:r,height:a}=t;this._imgDims=new b5(r,a),this._shift=n,this._positions=e.map(e=>e.mul(new D5(r,a)).add(n))}get shift(){return new D5(this._shift.x,this._shift.y)}get imageWidth(){return this._imgDims.width}get imageHeight(){return this._imgDims.height}get positions(){return this._positions}get relativePositions(){return this._positions.map(e=>e.sub(this._shift).div(new D5(this.imageWidth,this.imageHeight)))}forSize(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})}shiftBy(e,t){return new this.constructor(this.relativePositions,this._imgDims,new D5(e,t))}shiftByPoint(e){return this.shiftBy(e.x,e.y)}align(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){let n=e instanceof M5?e.box.floor():new R5(e);return this.shiftBy(n.x,n.y).align(null,t)}let{useDlibAlignment:n,minBoxPadding:a}=r({useDlibAlignment:!1,minBoxPadding:.2},t);return n?this.alignDlib():this.alignMinBbox(a)}alignDlib(){let e=this.getRefPointsForAlignment(),[t,n,r]=e,a=e=>r.sub(e).magnitude(),i=(a(t)+a(n))/2,s=Math.floor(i/.45),o=E5(e),l=Math.floor(Math.max(0,o.x-.5*s)),c=Math.floor(Math.max(0,o.y-.43*s));return new z5(l,c,Math.min(s,this.imageWidth+l),Math.min(s,this.imageHeight+c))}alignMinBbox(e){let t=function(e){let t=e.map(e=>e.x),n=e.map(e=>e.y),r=t.reduce((e,t)=>t<e?t:e,1/0),a=n.reduce((e,t)=>t<e?t:e,1/0),i=t.reduce((e,t)=>e<t?t:e,0),s=n.reduce((e,t)=>e<t?t:e,0);return new U5(r,a,i,s)}(this.positions);return t.pad(t.width*e,t.height*e)}getRefPointsForAlignment(){throw new Error("getRefPointsForAlignment not implemented by base class")}},V5=class extends W5{getJawOutline(){return this.positions.slice(0,17)}getLeftEyeBrow(){return this.positions.slice(17,22)}getRightEyeBrow(){return this.positions.slice(22,27)}getNose(){return this.positions.slice(27,36)}getLeftEye(){return this.positions.slice(36,42)}getRightEye(){return this.positions.slice(42,48)}getMouth(){return this.positions.slice(48,68)}getRefPointsForAlignment(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(E5)}};function G5(e){return e.detection instanceof M5}function K5(e,t){return r(r({},e),{detection:t})}function q5(){let e=window.fetch;if(!e)throw new Error("fetch - missing fetch implementation for browser environment");return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:()=>document.createElement("canvas"),createImageElement:()=>document.createElement("img"),createVideoElement:()=>document.createElement("video"),fetch:e,readFile:()=>{throw new Error("readFile - filesystem not available for browser environment")}}}function X5(){return"object"==typeof n.g&&"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node}function J5(e){let t="";if(!e&&X5())try{e=Va("fs")}catch(mt){t=mt.toString()}return{readFile:e?t=>new Promise((n,r)=>{e.readFile(t,(e,t)=>e?r(e):n(t))}):()=>{throw new Error("readFile - failed to require fs in nodejs environment with error: ".concat(t))}}}function Y5(){let e=n.g.Canvas||n.g.HTMLCanvasElement,t=n.g.Image||n.g.HTMLImageElement,a=n.g.Video||n.g.HTMLVideoElement,i=n.g.fetch,s=J5();return r({Canvas:e||class{},CanvasRenderingContext2D:n.g.CanvasRenderingContext2D||class{},Image:t||class{},ImageData:n.g.ImageData||class{},Video:n.g.HTMLVideoElement||class{},createCanvasElement:()=>{if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:()=>{if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},createVideoElement:()=>{if(a)return new a;throw new Error("createVideoElement - missing Video implementation for nodejs environment")},fetch:i},s)}function Z5(){return"object"==typeof window&&"undefined"!=typeof document&&"undefined"!=typeof HTMLImageElement&&"undefined"!=typeof HTMLCanvasElement&&"undefined"!=typeof HTMLVideoElement&&"undefined"!=typeof ImageData&&"undefined"!=typeof CanvasRenderingContext2D}function $5(e){H5=e}function e3(){return Z5()?$5(q5()):X5()?$5(Y5()):null}var t3={getEnv:function(){if(!H5)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return H5},setEnv:$5,initialize:e3,createBrowserEnv:q5,createFileSystem:J5,createNodejsEnv:Y5,monkeyPatch:function(e){if(H5||e3(),!H5)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");let{Canvas:t=H5.Canvas,Image:n=H5.Image}=e;H5.Canvas=t,H5.Image=n,H5.createCanvasElement=e.createCanvasElement||(()=>new t),H5.createImageElement=e.createImageElement||(()=>new n),H5.ImageData=e.ImageData||H5.ImageData,H5.Video=e.Video||H5.Video,H5.fetch=e.fetch||H5.fetch,H5.readFile=e.readFile||H5.readFile},isBrowser:Z5,isNodejs:X5};function n3(e){return t3.isNodejs()||"string"!=typeof e?e:document.getElementById(e)}function r3(e){let{Canvas:t,CanvasRenderingContext2D:n}=t3.getEnv();if(e instanceof n)return e;let r=n3(e);if(!(r instanceof t))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");let a=r.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}e3();var a3,i3=((a3=i3||{}).TOP_LEFT="TOP_LEFT",a3.TOP_RIGHT="TOP_RIGHT",a3.BOTTOM_LEFT="BOTTOM_LEFT",a3.BOTTOM_RIGHT="BOTTOM_RIGHT",a3),s3=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{anchorPosition:t,backgroundColor:n,fontColor:r,fontSize:a,fontStyle:i,padding:s}=e;this.anchorPosition=t||"TOP_LEFT",this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=a||14,this.fontStyle=i||"Georgia",this.padding=s||4}},o3=class e{constructor(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.text="string"==typeof t?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new s3(r)}measureWidth(e){let{padding:t}=this.options;return this.text.map(t=>e.measureText(t).width).reduce((e,t)=>e<t?t:e,0)+2*t}measureHeight(){let{fontSize:e,padding:t}=this.options;return this.text.length*e+2*t}getUpperLeft(e,t){let{anchorPosition:n}=this.options,r="BOTTOM_RIGHT"===n||"TOP_RIGHT"===n,a="BOTTOM_LEFT"===n||"BOTTOM_RIGHT"===n,i=this.measureWidth(e),s=this.measureHeight(),o=r?this.anchor.x-i:this.anchor.x,l=a?this.anchor.y-s:this.anchor.y;if(t){let{width:e,height:n}=t;return{x:Math.max(Math.min(o,e-i),0),y:Math.max(Math.min(l,n-s),0)}}return{x:o,y:l}}draw(e){let t=n3(e),n=r3(t),{backgroundColor:r,fontColor:a,fontSize:i,fontStyle:s,padding:o}=this.options;n.font="".concat(i,"px ").concat(s);let l=this.measureWidth(n),c=this.measureHeight();n.fillStyle=r;let u=this.getUpperLeft(n,t);n.fillRect(u.x,u.y,l,c),n.fillStyle=a,this.text.forEach((e,t)=>{let r=o+u.x,a=o+u.y+(t+1)*i;n.fillText(e,r,a)})}},l3=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{boxColor:t,lineWidth:n,label:a,drawLabelOptions:i}=e;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=a;let s={anchorPosition:"BOTTOM_LEFT",backgroundColor:this.boxColor};this.drawLabelOptions=new s3(r(r({},s),i))}},c3=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.box=new R5(e),this.options=new l3(t)}draw(e){let t=r3(e),{boxColor:n,lineWidth:r}=this.options,{x:a,y:i,width:s,height:o}=this.box;t.strokeStyle=n,t.lineWidth=r,t.strokeRect(a,i,s,o);let{label:l}=this.options;l&&new o3([l],{x:a-r/2,y:i},this.options.drawLabelOptions).draw(e)}};function u3(e,t){(Array.isArray(t)?t:[t]).forEach(t=>{let n=t instanceof M5?t.score:G5(t)?t.detection.score:void 0,r=t instanceof M5?t.box:G5(t)?t.detection.box:new R5(t),a=n?"".concat(I5(n)):void 0;new c3(r,{label:a}).draw(e)})}function A3(e){let{Image:t,Video:n}=t3.getEnv();return e instanceof t&&e.complete||e instanceof n&&e.readyState>=3}function d3(e){let{Image:t,Video:n}=t3.getEnv();return e instanceof t?new b5(e.naturalWidth,e.naturalHeight):e instanceof n?new b5(e.videoWidth,e.videoHeight):new b5(e.width,e.height)}function h3(e){let{width:t,height:n}=e,{createCanvasElement:r}=t3.getEnv(),a=r();return a.width=t,a.height=n,a}function p3(e,t){let{ImageData:n}=t3.getEnv();if(!(e instanceof n)&&!A3(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");let{width:r,height:a}=t||d3(e),i=h3({width:r,height:a});return e instanceof n?r3(i).putImageData(e,0,0):r3(i).drawImage(e,0,0,r,a),i}function f3(e){let{Image:t,Canvas:n,Video:r}=t3.getEnv();return e instanceof t||e instanceof n||e instanceof r}var m3=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],this._inputSize=0,!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have ".concat(e));this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach((e,t)=>{if(C5(e))return this._imageTensors[t]=e,void(this._inputDimensions[t]=e.shape);if(k5(e)){let n=e.shape[0];if(1!==n)throw new Error("NetInput - tf.Tensor4D with batchSize ".concat(n," passed, but not supported in input array"));return this._imageTensors[t]=e,void(this._inputDimensions[t]=e.shape.slice(1))}let n=e instanceof t3.getEnv().Canvas?e:p3(e);this._canvases[t]=n,this._inputDimensions[t]=[n.height,n.width,3]})}get imageTensors(){return this._imageTensors}get canvases(){return this._canvases}get isBatchInput(){return this.batchSize>1||this._treatAsBatchInput}get batchSize(){return this._batchSize}get inputDimensions(){return this._inputDimensions}get inputSize(){return this._inputSize}get reshapedInputDimensions(){return _5(this.batchSize,0,1).map((e,t)=>this.getReshapedInputDimensions(t))}getInput(e){return this.canvases[e]||this.imageTensors[e]}getInputDimensions(e){return this._inputDimensions[e]}getInputHeight(e){return this._inputDimensions[e][0]}getInputWidth(e){return this._inputDimensions[e][1]}getReshapedInputDimensions(e){if("number"!=typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return F5({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)}toBatchTensor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._inputSize=e,PA(()=>{let n=_5(this.batchSize,0,1).map(n=>{let r=this.getInput(n);if(r instanceof ju){let n=k5(r)?r:Yp(r);return n=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return PA(()=>{let[n,r]=e.shape.slice(1);if(n===r)return e;let a=Math.abs(n-r),i=Math.round(a*(t?.5:1)),s=n>r?2:1,o=t=>{let n=e.shape.slice();return n[s]=t,Yh(n,0,"float32")},l=o(i),c=a-l.shape[s],u=[t&&c?o(c):null,e,l].filter(e=>!!e).map(e=>Jd(e,"float32"));return Dh(u,s)})}(n,t),(n.shape[1]!==e||n.shape[2]!==e)&&(n=ab.resizeBilinear(n,[e,e],!1,!1)),n.as3D(e,e,3)}if(r instanceof t3.getEnv().Canvas)return qb.fromPixels(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{Image:r,Canvas:a}=t3.getEnv();if(!(e instanceof r||e instanceof a))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");if(t<=0)return h3({width:1,height:1});let i=d3(e),s=t/Math.max(i.height,i.width),o=s*i.width,l=s*i.height,c=h3({width:t,height:t}),u=e instanceof a?e:p3(e),A=Math.abs(o-l)/2,d=n&&o<l?A:0,h=n&&l<o?A:0;return u.width>0&&u.height>0&&r3(c).drawImage(u,d,h,o,l),c}(r,e,t));throw new Error("toBatchTensor - at batchIdx ".concat(n,", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have ").concat(r))});return pg(n.map(e=>Jd(e,"float32"))).as4D(this.batchSize,e,e,3)})}};async function g3(e){if(e instanceof m3)return e;let t=Array.isArray(e)?e:[e];if(!t.length)throw new Error("toNetInput - empty array passed as input");let n=t=>Array.isArray(e)?" at input index ".concat(t,":"):"",r=t.map(n3);return r.forEach((e,r)=>{if(!f3(e)&&!C5(e)&&!k5(e))throw"string"==typeof t[r]?new Error("toNetInput -".concat(n(r)," string passed, but could not resolve HTMLElement for element id ").concat(t[r])):new Error("toNetInput -".concat(n(r)," expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id"));if(k5(e)){let t=e.shape[0];if(1!==t)throw new Error("toNetInput -".concat(n(r)," tf.Tensor4D with batchSize ").concat(t," passed, but not supported in input array"))}}),await Promise.all(r.map(e=>f3(e)&&function(e){return new Promise((t,n)=>{function r(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",a),e.currentTarget.removeEventListener("error",r),n(e))}function a(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",a),e.currentTarget.removeEventListener("error",r),t(e))}e instanceof t3.getEnv().Canvas||A3(e)?t(null):(e.addEventListener("load",a),e.addEventListener("error",r))})}(e))),new m3(r,Array.isArray(e))}async function y3(e,t){let{Canvas:n}=t3.getEnv(),r=e;if(!(e instanceof n)){let t=await g3(e);if(t.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");let a=t.getInput(0);r=a instanceof n?a:await async function(e,t){let n=t||t3.getEnv().createCanvasElement(),[r,a,i]=e.shape.slice(k5(e)?1:0),s=PA(()=>e.as3D(r,a,i).toInt());return await qb.toPixels(s,n),s.dispose(),n}(a)}let a=r3(r);return t.map(e=>e instanceof M5?e.forSize(r.width,r.height).box.floor():e).map(e=>e.clipAtImageBorders(r.width,r.height)).map(e=>{let{x:t,y:n,width:r,height:i}=e,s=h3({width:r,height:i});return r>0&&i>0&&r3(s).putImageData(a.getImageData(t,n,r,i),0,0),s})}async function b3(e,t){if(!C5(e)&&!k5(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(k5(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return PA(()=>{let[n,r,a]=e.shape.slice(k5(e)?1:0);return t.map(e=>e instanceof M5?e.forSize(r,n).box:e).map(e=>e.clipAtImageBorders(r,n)).filter(e=>e.width>0&&e.height>0).map(t=>{let{x:i,y:s,width:o,height:l}=t;return ag(e.as3D(n,r,a),[s,i,0],[l,o,a])})})}async function w3(e,t){let{fetch:n}=t3.getEnv(),r=await n(e,t);if(!(r.status<400))throw new Error("failed to fetch: (".concat(r.status,") ").concat(r.statusText,", from url: ").concat(r.url));return r}function v3(e,t){let n="".concat(t,"-weights_manifest.json");if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/".concat(n)};let r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",a=(e=e.replace(r,"")).split("/").filter(e=>e),i=e.endsWith(".json")?a[a.length-1]:n,s=r+(e.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return s=e.startsWith("/")?"/".concat(s):s,{modelBaseUri:s,manifestUri:"/"===s?"/".concat(i):"".concat(s,"/").concat(i)}}async function x3(e,t){let{manifestUri:n,modelBaseUri:r}=v3(e,t),a=await async function(e){return(await w3(e)).json()}(n);return Bb.loadWeights(a,r)}var C3=class{constructor(e){this._params=void 0,this._paramMappings=[],this._name=e}get params(){return this._params}get paramMappings(){return this._paramMappings}get isLoaded(){return!!this.params}getParamFromPath(e){let{obj:t,objProp:n}=this.traversePropertyPath(e);return t[n]}reassignParamFromPath(e,t){let{obj:n,objProp:r}=this.traversePropertyPath(e);n[r].dispose(),n[r]=t}getParamList(){return this._paramMappings.map(e=>{let{paramPath:t}=e;return{path:t,tensor:this.getParamFromPath(t)}})}getTrainableParams(){return this.getParamList().filter(e=>e.tensor instanceof zu)}getFrozenParams(){return this.getParamList().filter(e=>!(e.tensor instanceof zu))}variable(){this.getFrozenParams().forEach(e=>{let{path:t,tensor:n}=e;this.reassignParamFromPath(t,n.variable())})}freeze(){this.getTrainableParams().forEach(e=>{let{path:t,tensor:n}=e,r=NA(n.dataSync());n.dispose(),this.reassignParamFromPath(t,r)})}dispose(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.getParamList().forEach(t=>{if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path ".concat(t.path));t.tensor.dispose()}),this._params=void 0}serializeParams(){return new Float32Array(this.getParamList().map(e=>{let{tensor:t}=e;return Array.from(t.dataSync())}).reduce((e,t)=>e.concat(t)))}async load(e){e instanceof Float32Array?this.extractWeights(e):await this.loadFromUri(e)}async loadFromUri(e){if(e&&"string"!=typeof e)throw new Error("".concat(this._name,".loadFromUri - expected model uri"));let t=await x3(e,this.getDefaultModelName());this.loadFromWeightMap(t)}async loadFromDisk(e){if(e&&"string"!=typeof e)throw new Error("".concat(this._name,".loadFromDisk - expected model file path"));let{readFile:t}=t3.getEnv(),{manifestUri:n,modelBaseUri:r}=v3(e,this.getDefaultModelName()),a=Bb.weightsLoaderFactory(e=>Promise.all(e.map(e=>t(e).then(e=>"string"==typeof e?Buffer.from(e):e.buffer)))),i=JSON.parse((await t(n)).toString()),s=await a(i,r);this.loadFromWeightMap(s)}loadFromWeightMap(e){let{paramMappings:t,params:n}=this.extractParamsFromWeightMap(e);this._paramMappings=t,this._params=n}extractWeights(e){let{paramMappings:t,params:n}=this.extractParams(e);this._paramMappings=t,this._params=n}traversePropertyPath(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");let t=e.split("/").reduce((t,n)=>{if(!t.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property ".concat(n,", for path ").concat(e));return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}},{nextObj:this.params}),{obj:n,objProp:r}=t;if(!n||!r||!(n[r]instanceof ju))throw new Error("traversePropertyPath - parameter is not a tensor, for path ".concat(e));return{obj:n,objProp:r}}};function k3(e,t,n){return PA(()=>{let r=Ym(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=$d(r,t.bias),r})}function B3(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return PA(()=>{let r=jm(n?$d(rp(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):k3(e,t.conv0,[2,2])),a=k3(r,t.conv1,[1,1]),i=k3(jm($d(r,a)),t.conv2,[1,1]);return jm($d(r,$d(a,i)))})}function S3(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return PA(()=>{let a=jm(n?$d(rp(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):k3(e,t.conv0,r?[2,2]:[1,1])),i=k3(a,t.conv1,[1,1]),s=k3(jm($d(a,i)),t.conv2,[1,1]),o=k3(jm($d(a,$d(i,s))),t.conv3,[1,1]);return jm($d(a,$d(i,$d(s,o))))})}function I3(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"same",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return PA(()=>{let a=$d(rp(e,t.filters,[1,1],n),t.bias);return r?jm(a):a})}function N3(e,t){Object.keys(e).forEach(n=>{t.some(e=>e.originalPath===n)||e[n].dispose()})}function F3(e,t){return(n,r,a,i)=>{let s=vg(e(n*r*a*a),[a,a,n,r]),o=yg(e(r));return t.push({paramPath:"".concat(i,"/filters")},{paramPath:"".concat(i,"/bias")}),{filters:s,bias:o}}}function E3(e,t){return(n,r,a)=>{let i=bg(e(n*r),[n,r]),s=yg(e(r));return t.push({paramPath:"".concat(a,"/weights")},{paramPath:"".concat(a,"/bias")}),{weights:i,bias:s}}}var _3=class{constructor(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n}};function T3(e,t){return(n,r,a)=>{let i=vg(e(9*n),[3,3,n,1]),s=vg(e(n*r),[1,1,n,r]),o=yg(e(r));return t.push({paramPath:"".concat(a,"/depthwise_filter")},{paramPath:"".concat(a,"/pointwise_filter")},{paramPath:"".concat(a,"/bias")}),new _3(i,s,o)}}function L3(e){return t=>{let n=e("".concat(t,"/depthwise_filter"),4),r=e("".concat(t,"/pointwise_filter"),4),a=e("".concat(t,"/bias"),1);return new _3(n,r,a)}}function D3(e,t){return(n,r,a)=>{let i=e[n];if(!w5(i,r))throw new Error("expected weightMap[".concat(n,"] to be a Tensor").concat(r,"D, instead have ").concat(i));return t.push({originalPath:n,paramPath:a||n}),i}}function R3(e){let t=e;return{extractWeights:function(e){let n=t.slice(0,e);return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function U3(e,t){let n=F3(e,t),r=T3(e,t);function a(e,t,a){return{conv0:arguments.length>3&&void 0!==arguments[3]&&arguments[3]?n(e,t,3,"".concat(a,"/conv0")):r(e,t,"".concat(a,"/conv0")),conv1:r(t,t,"".concat(a,"/conv1")),conv2:r(t,t,"".concat(a,"/conv2"))}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{conv0:s,conv1:o,conv2:l}=a(e,t,n,i);return{conv0:s,conv1:o,conv2:l,conv3:r(t,t,"".concat(n,"/conv3"))}}}}function O3(e){return t=>({filters:e("".concat(t,"/filters"),4),bias:e("".concat(t,"/bias"),1)})}function M3(e,t){let n=D3(e,t),r=O3(n),a=L3(n);return{extractDenseBlock3Params:function(e){return{conv0:arguments.length>1&&void 0!==arguments[1]&&arguments[1]?r("".concat(e,"/conv0")):a("".concat(e,"/conv0")),conv1:a("".concat(e,"/conv1")),conv2:a("".concat(e,"/conv2"))}},extractDenseBlock4Params:function(e){return{conv0:arguments.length>1&&void 0!==arguments[1]&&arguments[1]?r("".concat(e,"/conv0")):a("".concat(e,"/conv0")),conv1:a("".concat(e,"/conv1")),conv2:a("".concat(e,"/conv2")),conv3:a("".concat(e,"/conv3"))}}}}var P3=class extends C3{constructor(){super("FaceFeatureExtractor")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return PA(()=>{let n=S3(Q5(Jd(e.toBatchTensor(112,!0),"float32"),[122.782,117.001,104.298]).div(255),t.dense0,!0);return n=S3(n,t.dense1),n=S3(n,t.dense2),n=S3(n,t.dense3),n=Th(n,[7,7],[2,2],"valid"),n})}async forward(e){return this.forwardInput(await g3(e))}getDefaultModelName(){return"face_feature_extractor_model"}extractParamsFromWeightMap(e){return function(e){let t=[],{extractDenseBlock4Params:n}=M3(e,t),r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return N3(e,t),{params:r,paramMappings:t}}(e)}extractParams(e){return function(e){let t=[],{extractWeights:n,getRemainingWeights:r}=R3(e),{extractDenseBlock4Params:a}=U3(n,t),i=a(3,32,"dense0",!0),s=a(32,64,"dense1"),o=a(64,128,"dense2"),l=a(128,256,"dense3");if(0!==r().length)throw new Error("weights remaing after extract: ".concat(r().length));return{paramMappings:t,params:{dense0:i,dense1:s,dense2:o,dense3:l}}}(e)}};function Q3(e,t){return PA(()=>$d(Rh(e,t.weights),t.bias))}function j3(e){let t={},n={};return Object.keys(e).forEach(r=>{(r.startsWith("fc")?n:t)[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var H3=class extends C3{constructor(e,t){super(e),this._faceFeatureExtractor=t}get faceFeatureExtractor(){return this._faceFeatureExtractor}runNet(e){let{params:t}=this;if(!t)throw new Error("".concat(this._name," - load model before inference"));return PA(()=>{let n=e instanceof m3?this.faceFeatureExtractor.forwardInput(e):e;return Q3(n.as2D(n.shape[0],-1),t.fc)})}dispose(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.faceFeatureExtractor.dispose(e),super.dispose(e)}loadClassifierParams(e){let{params:t,paramMappings:n}=this.extractClassifierParams(e);this._params=t,this._paramMappings=n}extractClassifierParams(e){return function(e,t,n){let r=[],{extractWeights:a,getRemainingWeights:i}=R3(e),s=E3(a,r)(t,n,"fc");if(0!==i().length)throw new Error("weights remaing after extract: ".concat(i().length));return{paramMappings:r,params:{fc:s}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())}extractParamsFromWeightMap(e){let{featureExtractorMap:t,classifierMap:n}=j3(e);return this.faceFeatureExtractor.loadFromWeightMap(t),function(e){let t=[],n=D3(e,t),r={fc:function(e){return{weights:n("".concat(e,"/weights"),2),bias:n("".concat(e,"/bias"),1)}}("fc")};return N3(e,t),{params:r,paramMappings:t}}(n)}extractParams(e){let t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,a=e.slice(0,e.length-r),i=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(i)}},z3=["neutral","happy","sad","angry","fearful","disgusted","surprised"],W3=class{constructor(e){if(this.neutral=0,this.happy=0,this.sad=0,this.angry=0,this.fearful=0,this.disgusted=0,this.surprised=0,7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: ".concat(e.length));z3.forEach((t,n)=>{this[t]=e[n]})}asSortedArray(){return z3.map(e=>({expression:e,probability:this[e]})).sort((e,t)=>t.probability-e.probability)}};function V3(e,t){return r(r({},e),{expressions:t})}function G3(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3?arguments[3]:void 0;(Array.isArray(t)?t:[t]).forEach(t=>{let a=t instanceof W3?t:function(e){return e.expressions instanceof W3}(t)?t.expressions:void 0;if(!a)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");let i=a.asSortedArray().filter(e=>e.probability>n),s=G5(t)?t.detection.box.bottomLeft:r||new D5(0,0);new o3(i.map(e=>"".concat(e.expression," (").concat(I5(e.probability),")")),s).draw(e)})}function K3(e){return G5(e)&&e.landmarks instanceof W5&&e.unshiftedLandmarks instanceof W5&&e.alignedRect instanceof M5}function q3(e,t){let{box:n}=e.detection,a=t.shiftBy(n.x,n.y),i=a.align(),{imageDims:s}=e.detection,o=new M5(e.detection.score,i.rescale(s.reverse()),s),l=function(e){let t=e=>180*e/Math.PI,n=(e,t)=>Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2),r={roll:void 0,pitch:void 0,yaw:void 0};if(!e||!e.positions||68!==e.positions.length)return r;let a=e.positions;return r.roll=((e,n)=>{let r=Math.hypot(n.x-e.x,n.y-e.y),a=n.y-e.y,i=Math.asin(a/r),s=t(i);return Math.floor(90-s)*(n.x-e.x<0?-1:1)})(a[27],a[66]),r.pitch=((e,r,a)=>{let i=n(e,a),s=new D5((e.x+a.x)/2,(e.y+a.y)/2),o=n(r,s),l=Math.atan(o/i);return Math.floor(t(l))*(s.y-r.y<0?-1:1)})(a[14],a[30],a[2]),r.yaw=((e,t,n)=>Math.floor(e.x-t.x)-Math.floor(t.x-n.x))(a[14],a[33],a[2]),r}(t);return r(r({},e),{landmarks:a,unshiftedLandmarks:t,alignedRect:o,angle:l})}var X3=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{drawLines:t=!0,drawPoints:n=!0,lineWidth:r,lineColor:a,pointSize:i,pointColor:s}=e;this.drawLines=t,this.drawPoints=n,this.lineWidth=r||1,this.pointSize=i||2,this.lineColor=a||"rgba(0, 255, 255, 1)",this.pointColor=s||"rgba(255, 0, 255, 1)"}},J3=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.faceLandmarks=e,this.options=new X3(t)}draw(e){let t=r3(e),{drawLines:n,drawPoints:r,lineWidth:a,lineColor:i,pointSize:s,pointColor:o}=this.options;if(n&&this.faceLandmarks instanceof V5&&(t.strokeStyle=i,t.lineWidth=a,y5(t,this.faceLandmarks.getJawOutline()),y5(t,this.faceLandmarks.getLeftEyeBrow()),y5(t,this.faceLandmarks.getRightEyeBrow()),y5(t,this.faceLandmarks.getNose()),y5(t,this.faceLandmarks.getLeftEye(),!0),y5(t,this.faceLandmarks.getRightEye(),!0),y5(t,this.faceLandmarks.getMouth(),!0)),r){t.strokeStyle=o,t.fillStyle=o;let e=e=>{t.beginPath(),t.arc(e.x,e.y,s,0,2*Math.PI),t.fill()};this.faceLandmarks.positions.forEach(e)}}};function Y3(e,t){(Array.isArray(t)?t:[t]).forEach(t=>{let n=t instanceof W5?t:K3(t)?t.landmarks:void 0;if(!n)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new J3(n).draw(e)})}function Z3(e,t){let n=[],{extractWeights:r,getRemainingWeights:a}=R3(e),{extractConvParams:i,extractSeparableConvParams:s,extractReductionBlockParams:o,extractMainBlockParams:l}=function(e,t){let n=F3(e,t),r=T3(e,t);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(e,t,a){return{separable_conv0:r(e,t,"".concat(a,"/separable_conv0")),separable_conv1:r(t,t,"".concat(a,"/separable_conv1")),expansion_conv:n(e,t,1,"".concat(a,"/expansion_conv"))}},extractMainBlockParams:function(e,t){return{separable_conv0:r(e,e,"".concat(t,"/separable_conv0")),separable_conv1:r(e,e,"".concat(t,"/separable_conv1")),separable_conv2:r(e,e,"".concat(t,"/separable_conv2"))}}}}(r,n),c={conv_in:i(3,32,3,"entry_flow/conv_in"),reduction_block_0:o(32,64,"entry_flow/reduction_block_0"),reduction_block_1:o(64,128,"entry_flow/reduction_block_1")},u={};_5(t,0,1).forEach(e=>{u["main_block_".concat(e)]=l(128,"middle_flow/main_block_".concat(e))});let A={reduction_block:o(128,256,"exit_flow/reduction_block"),separable_conv:s(256,512,"exit_flow/separable_conv")};if(0!==a().length)throw new Error("weights remaing after extract: ".concat(a().length));return{paramMappings:n,params:{entry_flow:c,middle_flow:u,exit_flow:A}}}function $3(e,t){let n=[],{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:i,extractMainBlockParams:s}=function(e,t){let n=D3(e,t),r=O3(n),a=L3(n);return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:function(e){return{separable_conv0:a("".concat(e,"/separable_conv0")),separable_conv1:a("".concat(e,"/separable_conv1")),expansion_conv:r("".concat(e,"/expansion_conv"))}},extractMainBlockParams:function(e){return{separable_conv0:a("".concat(e,"/separable_conv0")),separable_conv1:a("".concat(e,"/separable_conv1")),separable_conv2:a("".concat(e,"/separable_conv2"))}}}}(e,n),o={conv_in:r("entry_flow/conv_in"),reduction_block_0:i("entry_flow/reduction_block_0"),reduction_block_1:i("entry_flow/reduction_block_1")},l={};_5(t,0,1).forEach(e=>{l["main_block_".concat(e)]=s("middle_flow/main_block_".concat(e))});let c={reduction_block:i("exit_flow/reduction_block"),separable_conv:a("exit_flow/separable_conv")};return N3(e,n),{params:{entry_flow:o,middle_flow:l,exit_flow:c},paramMappings:n}}function e4(e,t,n){return $d(rp(e,t.filters,n,"same"),t.bias)}function t4(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?jm(e):e;return n=k3(n,t.separable_conv0,[1,1]),n=k3(jm(n),t.separable_conv1,[1,1]),n=Of(n,[3,3],[2,2],"same"),n=$d(n,e4(e,t.expansion_conv,[2,2])),n}var n4=class extends C3{constructor(e){super("TinyXception"),this._numMainBlocks=e}forwardInput(e){let{params:t}=this;if(!t)throw new Error("TinyXception - load model before inference");return PA(()=>{let n=Q5(Jd(e.toBatchTensor(112,!0),"float32"),[122.782,117.001,104.298]).div(255),r=jm(e4(n,t.entry_flow.conv_in,[2,2]));return r=t4(r,t.entry_flow.reduction_block_0,!1),r=t4(r,t.entry_flow.reduction_block_1),_5(this._numMainBlocks,0,1).forEach(e=>{r=function(e,t){let n=k3(jm(e),t.separable_conv0,[1,1]);return n=k3(jm(n),t.separable_conv1,[1,1]),n=k3(jm(n),t.separable_conv2,[1,1]),n=$d(n,e),n}(r,t.middle_flow["main_block_".concat(e)])}),r=t4(r,t.exit_flow.reduction_block),r=jm(k3(r,t.exit_flow.separable_conv,[1,1])),r})}async forward(e){return this.forwardInput(await g3(e))}getDefaultModelName(){return"tiny_xception_model"}extractParamsFromWeightMap(e){return $3(e,this._numMainBlocks)}extractParams(e){return Z3(e,this._numMainBlocks)}};var r4=(e=>(e.FEMALE="female",e.MALE="male",e))(r4||{}),a4=class extends H3{postProcess(e,t,n){let r=n.map(e=>{let{width:n,height:r}=e,a=t/Math.max(r,n);return{width:n*a,height:r*a}}),a=r.length;return PA(()=>{let n=(e,t)=>pg([Yh([68],e,"float32"),Yh([68],t,"float32")],1).as2D(1,136).as1D(),i=(e,t)=>{let{width:n,height:a}=r[e];return t(n,a)?Math.abs(n-a)/2:0};return e.mul(Yh([a,136],t,"float32")).sub(pg(Array.from(Array(a),(e,t)=>n((e=>i(e,(e,t)=>e<t))(t),(e=>i(e,(e,t)=>t<e))(t))))).div(pg(Array.from(Array(a),(e,t)=>n(r[t].width,r[t].height))))})}forwardInput(e){return PA(()=>{let t=this.runNet(e);return this.postProcess(t,e.inputSize,e.inputDimensions.map(e=>{let[t,n]=e;return{height:t,width:n}}))})}async forward(e){return this.forwardInput(await g3(e))}async detectLandmarks(e){let t=await g3(e),n=PA(()=>Lg(this.forwardInput(t))),r=await Promise.all(n.map(async(e,n)=>{let r=Array.from(e.dataSync()),a=r.filter((e,t)=>S5(t)),i=r.filter((e,t)=>!S5(t));return new V5(Array(68).fill(0).map((e,t)=>new D5(a[t],i[t])),{height:t.getInputHeight(n),width:t.getInputWidth(n)})}));return n.forEach(e=>e.dispose()),t.isBatchInput?r:r[0]}getClassifierChannelsOut(){return 136}},i4=class extends a4{constructor(){super("FaceLandmark68Net",arguments.length>0&&void 0!==arguments[0]?arguments[0]:new P3)}getDefaultModelName(){return"face_landmark_68_model"}getClassifierChannelsIn(){return 256}};var s4=class extends C3{constructor(){super("TinyFaceFeatureExtractor")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return PA(()=>{let n=B3(Q5(Jd(e.toBatchTensor(112,!0),"float32"),[122.782,117.001,104.298]).div(255),t.dense0,!0);return n=B3(n,t.dense1),n=B3(n,t.dense2),n=Th(n,[14,14],[2,2],"valid"),n})}async forward(e){return this.forwardInput(await g3(e))}getDefaultModelName(){return"face_feature_extractor_tiny_model"}extractParamsFromWeightMap(e){return function(e){let t=[],{extractDenseBlock3Params:n}=M3(e,t),r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return N3(e,t),{params:r,paramMappings:t}}(e)}extractParams(e){return function(e){let t=[],{extractWeights:n,getRemainingWeights:r}=R3(e),{extractDenseBlock3Params:a}=U3(n,t),i=a(3,32,"dense0",!0),s=a(32,64,"dense1"),o=a(64,128,"dense2");if(0!==r().length)throw new Error("weights remaing after extract: ".concat(r().length));return{paramMappings:t,params:{dense0:i,dense1:s,dense2:o}}}(e)}};function o4(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"same",{filters:i,bias:s}=t.conv,o=rp(e,i,n,a);return o=$d(o,s),o=function(e,t){return $d(nh(e,t.weights),t.biases)}(o,t.scale),r?jm(o):o}function l4(e,t){return o4(e,t,[1,1],!1)}function c4(e,t){return o4(e,t,[2,2],!0,"valid")}function u4(e,t){function n(n,r,a,i){let s=function(t,n,r){let a=e(t),i=a.length/(n*r*r);if(B5(i))throw new Error("depth has to be an integer: ".concat(i,", weights.length: ").concat(a.length,", numFilters: ").concat(n,", filterSize: ").concat(r));return PA(()=>Pg(vg(a,[n,i,r,r]),[2,3,1,0]))}(n,r,a),o=yg(e(r));return t.push({paramPath:"".concat(i,"/filters")},{paramPath:"".concat(i,"/bias")}),{filters:s,bias:o}}function r(r,a,i,s){let o=n(r,a,i,"".concat(s,"/conv")),l=function(n,r){let a=yg(e(n)),i=yg(e(n));return t.push({paramPath:"".concat(r,"/weights")},{paramPath:"".concat(r,"/biases")}),{weights:a,biases:i}}(a,"".concat(s,"/scale"));return{conv:o,scale:l}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e,t,n,a){return{conv1:r((arguments.length>4&&void 0!==arguments[4]&&arguments[4]?.5:1)*e,t,n,"".concat(a,"/conv1")),conv2:r(e,t,n,"".concat(a,"/conv2"))}}}}function A4(e,t){let n=D3(e,t);function r(e){let t=n("".concat(e,"/conv/filters"),4),r=n("".concat(e,"/conv/bias"),1),a=function(e){return{weights:n("".concat(e,"/scale/weights"),1),biases:n("".concat(e,"/scale/biases"),1)}}(e);return{conv:{filters:t,bias:r},scale:a}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e){return{conv1:r("".concat(e,"/conv1")),conv2:r("".concat(e,"/conv2"))}}}}function d4(e,t){let n=function(e,t){return o4(e,t,[1,1],!0)}(e,t.conv1);return n=l4(n,t.conv2),n=$d(n,e),n=jm(n),n}function h4(e,t){let n=c4(e,t.conv1);n=l4(n,t.conv2);let r=Th(e,2,2,"valid"),a=Hf(r.shape),i=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){let e=[...n.shape];e[1]=1;let t=Hf(e);n=Dh([n,t],1);let r=[...n.shape];r[2]=1;let a=Hf(r);n=Dh([n,a],2)}return r=i?Dh([r,a],3):r,n=$d(r,n),n=jm(n),n}var p4=class extends C3{constructor(){super("FaceRecognitionNet")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return PA(()=>{let n=c4(Q5(Jd(e.toBatchTensor(150,!0),"float32"),[122.782,117.001,104.298]).div(255),t.conv32_down);n=Of(n,3,2,"valid"),n=d4(n,t.conv32_1),n=d4(n,t.conv32_2),n=d4(n,t.conv32_3),n=h4(n,t.conv64_down),n=d4(n,t.conv64_1),n=d4(n,t.conv64_2),n=d4(n,t.conv64_3),n=h4(n,t.conv128_down),n=d4(n,t.conv128_1),n=d4(n,t.conv128_2),n=h4(n,t.conv256_down),n=d4(n,t.conv256_1),n=d4(n,t.conv256_2),n=h4(n,t.conv256_down_out);let r=n.mean([1,2]);return Rh(r,t.fc)})}async forward(e){return this.forwardInput(await g3(e))}async computeFaceDescriptor(e){var t;if(null!=(t=null==e?void 0:e.shape)&&t.some(e=>e<=0))return new Float32Array(128);let n=await g3(e),r=PA(()=>Lg(this.forwardInput(n))),a=await Promise.all(r.map(e=>e.data()));return r.forEach(e=>e.dispose()),n.isBatchInput?a:a[0]}getDefaultModelName(){return"face_recognition_model"}extractParamsFromWeightMap(e){return function(e){let t=[],{extractConvLayerParams:n,extractResidualLayerParams:r}=A4(e,t),a=n("conv32_down"),i=r("conv32_1"),s=r("conv32_2"),o=r("conv32_3"),l=r("conv64_down"),c=r("conv64_1"),u=r("conv64_2"),A=r("conv64_3"),d=r("conv128_down"),h=r("conv128_1"),p=r("conv128_2"),f=r("conv256_down"),m=r("conv256_1"),g=r("conv256_2"),y=r("conv256_down_out"),{fc:b}=e;if(t.push({originalPath:"fc",paramPath:"fc"}),!x5(b))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have ".concat(b));let w={conv32_down:a,conv32_1:i,conv32_2:s,conv32_3:o,conv64_down:l,conv64_1:c,conv64_2:u,conv64_3:A,conv128_down:d,conv128_1:h,conv128_2:p,conv256_down:f,conv256_1:m,conv256_2:g,conv256_down_out:y,fc:b};return N3(e,t),{params:w,paramMappings:t}}(e)}extractParams(e){return function(e){let{extractWeights:t,getRemainingWeights:n}=R3(e),r=[],{extractConvLayerParams:a,extractResidualLayerParams:i}=u4(t,r),s=a(4704,32,7,"conv32_down"),o=i(9216,32,3,"conv32_1"),l=i(9216,32,3,"conv32_2"),c=i(9216,32,3,"conv32_3"),u=i(36864,64,3,"conv64_down",!0),A=i(36864,64,3,"conv64_1"),d=i(36864,64,3,"conv64_2"),h=i(36864,64,3,"conv64_3"),p=i(147456,128,3,"conv128_down",!0),f=i(147456,128,3,"conv128_1"),m=i(147456,128,3,"conv128_2"),g=i(589824,256,3,"conv256_down",!0),y=i(589824,256,3,"conv256_1"),b=i(589824,256,3,"conv256_2"),w=i(589824,256,3,"conv256_down_out"),v=PA(()=>Pg(bg(t(32768),[128,256]),[1,0]));if(r.push({paramPath:"fc"}),0!==n().length)throw new Error("weights remaing after extract: ".concat(n().length));return{params:{conv32_down:s,conv32_1:o,conv32_2:l,conv32_3:c,conv64_down:u,conv64_1:A,conv64_2:d,conv64_3:h,conv128_down:p,conv128_1:f,conv128_2:m,conv256_down:g,conv256_1:y,conv256_2:b,conv256_down_out:w,fc:v},paramMappings:r}}(e)}};function f4(e,t){return r(r({},e),{descriptor:t})}function m4(e,t){return r(r({},e),{age:t})}function g4(e,t,n){return r(r({},e),{gender:t,genderProbability:n})}function y4(e,t){function n(n,r,a,i,s){let o=vg(e(n*r*a*a),[a,a,n,r]),l=yg(e(r));return t.push({paramPath:"".concat(i,"/filters")},{paramPath:"".concat(i,"/").concat(s?"batch_norm_offset":"bias")}),{filters:o,bias:l}}function r(e,t,r,a){let{filters:i,bias:s}=n(e,t,r,a,!0);return{filters:i,batch_norm_offset:s}}function a(n,a,i){let s=function(n,r){let a=vg(e(9*n),[3,3,n,1]),i=yg(e(n)),s=yg(e(n)),o=yg(e(n)),l=yg(e(n));return t.push({paramPath:"".concat(r,"/filters")},{paramPath:"".concat(r,"/batch_norm_scale")},{paramPath:"".concat(r,"/batch_norm_offset")},{paramPath:"".concat(r,"/batch_norm_mean")},{paramPath:"".concat(r,"/batch_norm_variance")}),{filters:a,batch_norm_scale:i,batch_norm_offset:s,batch_norm_mean:o,batch_norm_variance:l}}(n,"".concat(i,"/depthwise_conv"));return{depthwise_conv:s,pointwise_conv:r(n,a,1,"".concat(i,"/pointwise_conv"))}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:a(32,64,"mobilenetv1/conv_1"),conv_2:a(64,128,"mobilenetv1/conv_2"),conv_3:a(128,128,"mobilenetv1/conv_3"),conv_4:a(128,256,"mobilenetv1/conv_4"),conv_5:a(256,256,"mobilenetv1/conv_5"),conv_6:a(256,512,"mobilenetv1/conv_6"),conv_7:a(512,512,"mobilenetv1/conv_7"),conv_8:a(512,512,"mobilenetv1/conv_8"),conv_9:a(512,512,"mobilenetv1/conv_9"),conv_10:a(512,512,"mobilenetv1/conv_10"),conv_11:a(512,512,"mobilenetv1/conv_11"),conv_12:a(512,1024,"mobilenetv1/conv_12"),conv_13:a(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}function b4(e){let t=[],{extractMobilenetV1Params:n,extractPredictionLayerParams:r}=function(e,t){let n=D3(e,t);function r(e,t,r){return{filters:n("".concat(e,"/Conv2d_").concat(t,"_pointwise/weights"),4,"".concat(r,"/filters")),batch_norm_offset:n("".concat(e,"/Conv2d_").concat(t,"_pointwise/convolution_bn_offset"),1,"".concat(r,"/batch_norm_offset"))}}function a(e){let t="mobilenetv1/conv_".concat(e),a="MobilenetV1/Conv2d_".concat(e,"_depthwise"),i="".concat(t,"/depthwise_conv"),s="".concat(t,"/pointwise_conv");return{depthwise_conv:{filters:n("".concat(a,"/depthwise_weights"),4,"".concat(i,"/filters")),batch_norm_scale:n("".concat(a,"/BatchNorm/gamma"),1,"".concat(i,"/batch_norm_scale")),batch_norm_offset:n("".concat(a,"/BatchNorm/beta"),1,"".concat(i,"/batch_norm_offset")),batch_norm_mean:n("".concat(a,"/BatchNorm/moving_mean"),1,"".concat(i,"/batch_norm_mean")),batch_norm_variance:n("".concat(a,"/BatchNorm/moving_variance"),1,"".concat(i,"/batch_norm_variance"))},pointwise_conv:r("MobilenetV1",e,s)}}function i(e,t){return{filters:n("".concat(e,"/weights"),4,"".concat(t,"/filters")),bias:n("".concat(e,"/biases"),1,"".concat(t,"/bias"))}}function s(e){return{box_encoding_predictor:i("Prediction/BoxPredictor_".concat(e,"/BoxEncodingPredictor"),"prediction_layer/box_predictor_".concat(e,"/box_encoding_predictor")),class_predictor:i("Prediction/BoxPredictor_".concat(e,"/ClassPredictor"),"prediction_layer/box_predictor_".concat(e,"/class_predictor"))}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}}}(e,t),a=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!C5(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have ".concat(a));let i={mobilenetv1:n(),prediction_layer:r(),output_layer:{extra_dim:a}};return N3(e,t),{params:i,paramMappings:t}}function w4(e,t,n){return PA(()=>{let r=rp(e,t.filters,n,"same");return r=$d(r,t.batch_norm_offset),Zh(r,0,6)})}function v4(e,t){return PA(()=>{let n,r=w4(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach((e,t)=>{let a=t+1,i=function(e){return[2,4,6,12].some(t=>t===e)?[2,2]:[1,1]}(a);r=function(e,t,n){return PA(()=>{let r=mp(e,t.filters,n,"same");return r=Hh(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,.0010000000474974513),Zh(r,0,6)})}(r,e.depthwise_conv,i),r=w4(r,e.pointwise_conv,[1,1]),11===a&&(n=r)}),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function x4(e,t,n){let r=e.arraySync(),a=Math.min(r[t][0],r[t][2]),i=Math.min(r[t][1],r[t][3]),s=Math.max(r[t][0],r[t][2]),o=Math.max(r[t][1],r[t][3]),l=Math.min(r[n][0],r[n][2]),c=Math.min(r[n][1],r[n][3]),u=Math.max(r[n][0],r[n][2]),A=Math.max(r[n][1],r[n][3]),d=(s-a)*(o-i),h=(u-l)*(A-c);if(d<=0||h<=0)return 0;let p=Math.max(a,l),f=Math.max(i,c),m=Math.min(s,u),g=Math.min(o,A),y=Math.max(m-p,0)*Math.max(g-f,0);return y/(d+h-y)}function C4(e,t){let{sizes:n,centers:r}=function(e){let t=Lg(Pg(e,[1,0])),n=[If(t[2],t[0]),If(t[3],t[1])];return{sizes:n,centers:[$d(t[0],th(n[0],2)),$d(t[1],th(n[1],2))]}}(e),a=Lg(Pg(t,[1,0])),i=th(nh(Jp(th(a[2],5)),n[0]),2),s=$d(nh(th(a[0],10),n[0]),r[0]),o=th(nh(Jp(th(a[3],5)),n[1]),2),l=$d(nh(th(a[1],10),n[1]),r[1]);return Pg(pg([If(s,i),If(l,o),$d(s,i),$d(l,o)]),[1,0])}function k4(e,t){return PA(()=>{let n=e.shape[0];return{boxPredictionEncoding:_h(I3(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:_h(I3(e,t.class_predictor),[n,-1,3])}})}var B4=class{constructor(){let{minConfidence:e,maxResults:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._name="SsdMobilenetv1Options",this._minConfidence=e||.5,this._maxResults=t||100,"number"!=typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error("".concat(this._name," - expected minConfidence to be a number between 0 and 1"));if("number"!=typeof this._maxResults)throw new Error("".concat(this._name," - expected maxResults to be a number"))}get minConfidence(){return this._minConfidence}get maxResults(){return this._maxResults}},S4=class extends C3{constructor(){super("SsdMobilenetv1")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return PA(()=>{let n=Jd(e.toBatchTensor(512,!1),"float32"),r=v4(If(th(n,127.5),1),t.mobilenetv1),{boxPredictions:a,classPredictions:i}=function(e,t,n){return PA(()=>{let r=w4(e,n.conv_0,[1,1]),a=w4(r,n.conv_1,[2,2]),i=w4(a,n.conv_2,[1,1]),s=w4(i,n.conv_3,[2,2]),o=w4(s,n.conv_4,[1,1]),l=w4(o,n.conv_5,[2,2]),c=w4(l,n.conv_6,[1,1]),u=w4(c,n.conv_7,[2,2]),A=k4(t,n.box_predictor_0),d=k4(e,n.box_predictor_1),h=k4(a,n.box_predictor_2),p=k4(s,n.box_predictor_3),f=k4(l,n.box_predictor_4),m=k4(u,n.box_predictor_5);return{boxPredictions:Dh([A.boxPredictionEncoding,d.boxPredictionEncoding,h.boxPredictionEncoding,p.boxPredictionEncoding,f.boxPredictionEncoding,m.boxPredictionEncoding],1),classPredictions:Dh([A.classPrediction,d.classPrediction,h.classPrediction,p.classPrediction,f.classPrediction,m.classPrediction],1)}})}(r.out,r.conv11,t.prediction_layer);return function(e,t,n){return PA(()=>{let r=e.shape[0],a=C4(_h($p(n.extra_dim,[r,1,1]),[-1,4]),_h(e,[-1,4]));a=_h(a,[r,a.shape[0]/r,4]);let i=Uh(Oh(t,[0,0,1],[-1,-1,-1])),s=Oh(i,[0,0,0],[-1,-1,1]);return s=_h(s,[r,s.shape[1]]),{boxes:Lg(a),scores:Lg(s)}})}(a,i,t.output_layer)})}async forward(e){return this.forwardInput(await g3(e))}async locateFaces(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{maxResults:n,minConfidence:r}=new B4(t),a=await g3(e),{boxes:i,scores:s}=this.forwardInput(a),o=i[0],l=s[0];for(let g=1;g<i.length;g++)i[g].dispose(),s[g].dispose();let c=Array.from(l.dataSync()),u=function(e,t,n,r,a){let i=e.shape[0],s=Math.min(n,i),o=t.map((e,t)=>({score:e,boxIndex:t})).filter(e=>e.score>a).sort((e,t)=>t.score-e.score),l=e=>e<=r?1:0,c=[];return o.forEach(t=>{if(c.length>=s)return;let n=t.score;for(let r=c.length-1;r>=0;--r){let n=x4(e,t.boxIndex,c[r]);if(0!==n&&(t.score*=l(n),t.score<=a))break}n===t.score&&c.push(t.boxIndex)}),c}(o,c,n,.5,r),A=a.getReshapedInputDimensions(0),d=a.inputSize,h=d/A.width,p=d/A.height,f=o.arraySync(),m=u.map(e=>{let[t,n]=[Math.max(0,f[e][0]),Math.min(1,f[e][2])].map(e=>e*p),[r,i]=[Math.max(0,f[e][1]),Math.min(1,f[e][3])].map(e=>e*h);return new M5(c[e],new z5(r,t,i-r,n-t),{height:a.getInputHeight(0),width:a.getInputWidth(0)})});return o.dispose(),l.dispose(),m}getDefaultModelName(){return"ssd_mobilenetv1_model"}extractParamsFromWeightMap(e){return b4(e)}extractParams(e){return function(e){let t=[],{extractWeights:n,getRemainingWeights:r}=R3(e),{extractMobilenetV1Params:a,extractPredictionLayerParams:i}=y4(n,t),s=a(),o=i(),l={extra_dim:wg(n(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==r().length)throw new Error("weights remaing after extract: ".concat(r().length));return{params:{mobilenetv1:s,prediction_layer:o,output_layer:l},paramMappings:t}}(e)}};var I4=[new D5(.738768,.874946),new D5(2.42204,2.65704),new D5(4.30971,7.04493),new D5(10.246,4.59428),new D5(12.6868,11.8741)],N4=[new D5(1.603231,2.094468),new D5(6.041143,7.080126),new D5(2.882459,3.518061),new D5(4.266906,5.178857),new D5(9.041765,10.66308)],F4=[117.001,114.697,97.404],E4=e=>"number"==typeof e;function _4(e){return PA(()=>{let t=nh(e,zp(.10000000149011612));return $d(jm(If(e,t)),t)})}function T4(e,t){return PA(()=>{let n=tm(e,[[0,0],[1,1],[1,1],[0,0]]);return n=rp(n,t.conv.filters,[1,1],"valid"),n=If(n,t.bn.sub),n=nh(n,t.bn.truediv),n=$d(n,t.conv.bias),_4(n)})}function L4(e,t){return PA(()=>{let n=tm(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Ym(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),n=$d(n,t.bias),_4(n)})}function D4(e,t){let n=F3(e,t);let r=T3(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:function(r,a,i){let s=n(r,a,3,"".concat(i,"/conv")),o=function(n,r){let a=yg(e(n)),i=yg(e(n));return t.push({paramPath:"".concat(r,"/sub")},{paramPath:"".concat(r,"/truediv")}),{sub:a,truediv:i}}(a,"".concat(i,"/bn"));return{conv:s,bn:o}},extractSeparableConvParams:r}}function R4(e,t){let n=D3(e,t);function r(e){return{filters:n("".concat(e,"/filters"),4),bias:n("".concat(e,"/bias"),1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(e){let t=r("".concat(e,"/conv")),a=function(e){return{sub:n("".concat(e,"/sub"),1),truediv:n("".concat(e,"/truediv"),1)}}("".concat(e,"/bn"));return{conv:t,bn:a}},extractSeparableConvParams:L3(n)}}var U4=class{constructor(){let{inputSize:e,scoreThreshold:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._name="TinyYolov2Options",this._inputSize=e||416,this._scoreThreshold=t||.5,"number"!=typeof this._inputSize||this._inputSize%32!==0)throw new Error("".concat(this._name," - expected inputSize to be a number divisible by 32"));if("number"!=typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error("".concat(this._name," - expected scoreThreshold to be a number between 0 and 1"))}get inputSize(){return this._inputSize}get scoreThreshold(){return this._scoreThreshold}},O4=class e extends C3{constructor(e){super("TinyYolov2"),function(e){if(!e)throw new Error("invalid config: ".concat(e));if("boolean"!=typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: ".concat(e.withSeparableConvs));if(!E4(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: ".concat(e.iouThreshold));if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(e=>"string"==typeof e))throw new Error("config.classes has to be an array class names: string[], have: ".concat(JSON.stringify(e.classes)));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(e=>e||{}).every(e=>E4(e.x)&&E4(e.y)))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: ".concat(JSON.stringify(e.anchors)));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(E4)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: ".concat(JSON.stringify(e.meanRgb)))}(e),this._config=e}get config(){return this._config}get withClassScores(){return this.config.withClassScores||this.config.classes.length>1}get boxEncodingSize(){return 5+(this.withClassScores?this.config.classes.length:0)}runTinyYolov2(e,t){let n=T4(e,t.conv0);return n=Of(n,[2,2],[2,2],"same"),n=T4(n,t.conv1),n=Of(n,[2,2],[2,2],"same"),n=T4(n,t.conv2),n=Of(n,[2,2],[2,2],"same"),n=T4(n,t.conv3),n=Of(n,[2,2],[2,2],"same"),n=T4(n,t.conv4),n=Of(n,[2,2],[2,2],"same"),n=T4(n,t.conv5),n=Of(n,[2,2],[1,1],"same"),n=T4(n,t.conv6),n=T4(n,t.conv7),I3(n,t.conv8,"valid",!1)}runMobilenet(e,t){let n=this.config.isFirstLayerConv2d?_4(I3(e,t.conv0,"valid",!1)):L4(e,t.conv0);return n=Of(n,[2,2],[2,2],"same"),n=L4(n,t.conv1),n=Of(n,[2,2],[2,2],"same"),n=L4(n,t.conv2),n=Of(n,[2,2],[2,2],"same"),n=L4(n,t.conv3),n=Of(n,[2,2],[2,2],"same"),n=L4(n,t.conv4),n=Of(n,[2,2],[2,2],"same"),n=L4(n,t.conv5),n=Of(n,[2,2],[1,1],"same"),n=t.conv6?L4(n,t.conv6):n,n=t.conv7?L4(n,t.conv7):n,I3(n,t.conv8,"valid",!1)}forwardInput(e,t){let{params:n}=this;if(!n)throw new Error("TinyYolov2 - load model before inference");return PA(()=>{let r=Jd(e.toBatchTensor(t,!1),"float32");return r=this.config.meanRgb?Q5(r,this.config.meanRgb):r,r=r.div(255),this.config.withSeparableConvs?this.runMobilenet(r,n):this.runTinyYolov2(r,n)})}async forward(e,t){return this.forwardInput(await g3(e),t)}async detect(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{inputSize:n,scoreThreshold:r}=new U4(t),a=await g3(e),i=await this.forwardInput(a,n),s=PA(()=>Lg(i)[0].expandDims()),o={width:a.getInputWidth(0),height:a.getInputHeight(0)},l=await this.extractBoxes(s,a.getReshapedInputDimensions(0),r);i.dispose(),s.dispose();let c=l.map(e=>e.box),u=l.map(e=>e.score),A=l.map(e=>e.classScore),d=l.map(e=>this.config.classes[e.label]);return function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=t.map((e,t)=>({score:e,boxIndex:t})).sort((e,t)=>e.score-t.score).map(e=>e.boxIndex),i=[];for(;a.length>0;){let t=a.pop();i.push(t);let s=a,o=[];for(let n=0;n<s.length;n++){let a=s[n],i=e[t],l=e[a];o.push(P5(i,l,r))}a=a.filter((e,t)=>o[t]<=n)}return i}(c.map(e=>e.rescale(n)),u,this.config.iouThreshold,!0).map(e=>new O5(u[e],A[e],d[e],c[e],o))}getDefaultModelName(){return""}extractParamsFromWeightMap(e){return function(e,t){let n,r=[],{extractConvParams:a,extractConvWithBatchNormParams:i,extractSeparableConvParams:s}=R4(e,r);if(t.withSeparableConvs){let e=t.filterSizes&&t.filterSizes.length||9;n={conv0:t.isFirstLayerConv2d?a("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:e>7?s("conv6"):void 0,conv7:e>8?s("conv7"):void 0,conv8:a("conv8")}}else n={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:a("conv8")};return N3(e,r),{params:n,paramMappings:r}}(e,this.config)}extractParams(t){let n=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found ".concat(r," filterSizes in config"));return function(e,t,n,r){let a,{extractWeights:i,getRemainingWeights:s}=R3(e),o=[],{extractConvParams:l,extractConvWithBatchNormParams:c,extractSeparableConvParams:u}=D4(i,o);if(t.withSeparableConvs){let[e,i,s,o,c,A,d,h,p]=r;a={conv0:t.isFirstLayerConv2d?l(e,i,3,"conv0"):u(e,i,"conv0"),conv1:u(i,s,"conv1"),conv2:u(s,o,"conv2"),conv3:u(o,c,"conv3"),conv4:u(c,A,"conv4"),conv5:u(A,d,"conv5"),conv6:h?u(d,h,"conv6"):void 0,conv7:p?u(h,p,"conv7"):void 0,conv8:l(p||h||d,5*n,1,"conv8")}}else{let[e,t,i,s,o,u,A,d,h]=r;a={conv0:c(e,t,"conv0"),conv1:c(t,i,"conv1"),conv2:c(i,s,"conv2"),conv3:c(s,o,"conv3"),conv4:c(o,u,"conv4"),conv5:c(u,A,"conv5"),conv6:c(A,d,"conv6"),conv7:c(d,h,"conv7"),conv8:l(h,5*n,1,"conv8")}}if(0!==s().length)throw new Error("weights remaing after extract: ".concat(s().length));return{params:a,paramMappings:o}}(t,this.config,this.boxEncodingSize,n)}async extractBoxes(e,t,n){let{width:a,height:i}=t,s=Math.max(a,i),o=s/a,l=s/i,c=e.shape[1],u=this.config.anchors.length,[A,d,h]=PA(()=>{let t=e.reshape([c,c,u,this.boxEncodingSize]);return[t.slice([0,0,0,0],[c,c,u,4]),t.slice([0,0,0,4],[c,c,u,1]),this.withClassScores?sg(t.slice([0,0,0,5],[c,c,u,this.config.classes.length]),3):zp(0)]}),p=[],f=await d.array(),m=await A.array();for(let g=0;g<c;g++)for(let e=0;e<c;e++)for(let t=0;t<u;t++){let a=j5(f[g][e][t][0]);if(!n||a>n){let n=(e+j5(m[g][e][t][0]))/c*o,i=(g+j5(m[g][e][t][1]))/c*l,s=Math.exp(m[g][e][t][2])*this.config.anchors[t].x/c*o,u=Math.exp(m[g][e][t][3])*this.config.anchors[t].y/c*l,A=n-s/2,d=i-u/2,f={row:g,col:e,anchor:t},{classScore:y,label:b}=this.withClassScores?await this.extractPredictedClass(h,f):{classScore:1,label:0};p.push(r({box:new U5(A,d,A+s,d+u),score:a,classScore:a*y,label:b},f))}}return A.dispose(),d.dispose(),h.dispose(),p}async extractPredictedClass(e,t){let{row:n,col:r,anchor:a}=t,i=await e.array();return Array(this.config.classes.length).fill(0).map((e,t)=>i[n][r][a][t]).map((e,t)=>({classScore:e,label:t})).reduce((e,t)=>e.classScore>t.classScore?e:t)}};O4.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024];var M4=O4,P4=class extends M4{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];super(r({withSeparableConvs:e,iouThreshold:.4,classes:["face"]},e?{anchors:N4,meanRgb:F4}:{anchors:I4,withClassScores:!0}))}get withSeparableConvs(){return this.config.withSeparableConvs}get anchors(){return this.config.anchors}async locateFaces(e,t){return(await this.detect(e,t)).map(e=>new M5(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight}))}getDefaultModelName(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"}extractParamsFromWeightMap(e){return super.extractParamsFromWeightMap(e)}};var Q4=class extends U4{constructor(){super(...arguments),this._name="TinyFaceDetectorOptions"}},j4=class{async then(e){return e(await this.run())}async run(){throw new Error("ComposableTask - run is not implemented")}};async function H4(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e=>{let{alignedRect:t}=e;return t},i=e.map(e=>K3(e)?a(e):e.detection),s=r||(t instanceof ju?await b3(t,i):await y3(t,i)),o=await n(s);return s.forEach(e=>e instanceof ju&&e.dispose()),o}async function z4(e,t,n,r,a){return H4([e],t,async e=>n(e[0]),r,a)}var W4=[new D5(1.603231,2.094468),new D5(6.041143,7.080126),new D5(2.882459,3.518061),new D5(4.266906,5.178857),new D5(9.041765,10.66308)],V4=[117.001,114.697,97.404],G4=class extends M4{constructor(){super({withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:W4,meanRgb:V4,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]})}get anchors(){return this.config.anchors}async locateFaces(e,t){return(await this.detect(e,t)).map(e=>new M5(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight}))}getDefaultModelName(){return"tiny_face_detector_model"}extractParamsFromWeightMap(e){return super.extractParamsFromWeightMap(e)}},K4={ssdMobilenetv1:new S4,tinyFaceDetector:new G4,tinyYolov2:new P4,faceLandmark68Net:new i4,faceLandmark68TinyNet:new class extends a4{constructor(){super("FaceLandmark68TinyNet",arguments.length>0&&void 0!==arguments[0]?arguments[0]:new s4)}getDefaultModelName(){return"face_landmark_68_tiny_model"}getClassifierChannelsIn(){return 128}},faceRecognitionNet:new p4,faceExpressionNet:new class extends H3{constructor(){super("FaceExpressionNet",arguments.length>0&&void 0!==arguments[0]?arguments[0]:new P3)}forwardInput(e){return PA(()=>sg(this.runNet(e)))}async forward(e){return this.forwardInput(await g3(e))}async predictExpressions(e){let t=await g3(e),n=await this.forwardInput(t),r=await Promise.all(Lg(n).map(async e=>{let t=e.dataSync();return e.dispose(),t}));n.dispose();let a=r.map(e=>new W3(e));return t.isBatchInput?a:a[0]}getDefaultModelName(){return"face_expression_model"}getClassifierChannelsIn(){return 256}getClassifierChannelsOut(){return 7}},ageGenderNet:new class extends C3{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new n4(2);super("AgeGenderNet"),this._faceFeatureExtractor=e}get faceFeatureExtractor(){return this._faceFeatureExtractor}runNet(e){let{params:t}=this;if(!t)throw new Error("".concat(this._name," - load model before inference"));return PA(()=>{let n=e instanceof m3?this.faceFeatureExtractor.forwardInput(e):e,r=Th(n,[7,7],[2,2],"valid").as2D(n.shape[0],-1);return{age:Q3(r,t.fc.age).as1D(),gender:Q3(r,t.fc.gender)}})}forwardInput(e){return PA(()=>{let{age:t,gender:n}=this.runNet(e);return{age:t,gender:sg(n)}})}async forward(e){return this.forwardInput(await g3(e))}async predictAgeAndGender(e){let t=await g3(e),n=await this.forwardInput(t),r=Lg(n.age),a=Lg(n.gender),i=r.map((e,t)=>({ageTensor:e,genderTensor:a[t]})),s=await Promise.all(i.map(async e=>{let{ageTensor:t,genderTensor:n}=e,r=t.dataSync()[0],a=n.dataSync()[0],i=a>.5,s=i?"male":"female",o=i?a:1-a;return t.dispose(),n.dispose(),{age:r,gender:s,genderProbability:o}}));return n.age.dispose(),n.gender.dispose(),t.isBatchInput?s:s[0]}getDefaultModelName(){return"age_gender_model"}dispose(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.faceFeatureExtractor.dispose(e),super.dispose(e)}loadClassifierParams(e){let{params:t,paramMappings:n}=this.extractClassifierParams(e);this._params=t,this._paramMappings=n}extractClassifierParams(e){return function(e){let t=[],{extractWeights:n,getRemainingWeights:r}=R3(e),a=E3(n,t),i=a(512,1,"fc/age"),s=a(512,2,"fc/gender");if(0!==r().length)throw new Error("weights remaing after extract: ".concat(r().length));return{paramMappings:t,params:{fc:{age:i,gender:s}}}}(e)}extractParamsFromWeightMap(e){let{featureExtractorMap:t,classifierMap:n}=j3(e);return this.faceFeatureExtractor.loadFromWeightMap(t),function(e){let t=[],n=D3(e,t);function r(e){return{weights:n("".concat(e,"/weights"),2),bias:n("".concat(e,"/bias"),1)}}let a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return N3(e,t),{params:a,paramMappings:t}}(n)}extractParams(e){let t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)}}},q4=class extends j4{constructor(e,t,n){super(),this.parentTask=e,this.input=t,this.extractedFaces=n}},X4=class extends q4{async run(){let e=await this.parentTask,t=await H4(e,this.input,async e=>Promise.all(e.map(e=>K4.faceExpressionNet.predictExpressions(e))),this.extractedFaces);return e.map((e,n)=>V3(e,t[n]))}withAgeAndGender(){return new e6(this,this.input)}},J4=class extends q4{async run(){let e=await this.parentTask;if(!e)return;let t=await z4(e,this.input,e=>K4.faceExpressionNet.predictExpressions(e),this.extractedFaces);return V3(e,t)}withAgeAndGender(){return new t6(this,this.input)}},Y4=class extends X4{withAgeAndGender(){return new n6(this,this.input)}withFaceDescriptors(){return new i6(this,this.input)}},Z4=class extends J4{withAgeAndGender(){return new r6(this,this.input)}withFaceDescriptor(){return new s6(this,this.input)}},$4=class extends j4{constructor(e,t,n){super(),this.parentTask=e,this.input=t,this.extractedFaces=n}},e6=class extends $4{async run(){let e=await this.parentTask,t=await H4(e,this.input,async e=>Promise.all(e.map(e=>K4.ageGenderNet.predictAgeAndGender(e))),this.extractedFaces);return e.map((e,n)=>{let{age:r,gender:a,genderProbability:i}=t[n];return m4(g4(e,a,i),r)})}withFaceExpressions(){return new X4(this,this.input)}},t6=class extends $4{async run(){let e=await this.parentTask;if(!e)return;let{age:t,gender:n,genderProbability:r}=await z4(e,this.input,e=>K4.ageGenderNet.predictAgeAndGender(e),this.extractedFaces);return m4(g4(e,n,r),t)}withFaceExpressions(){return new J4(this,this.input)}},n6=class extends e6{withFaceExpressions(){return new Y4(this,this.input)}withFaceDescriptors(){return new i6(this,this.input)}},r6=class extends t6{withFaceExpressions(){return new Z4(this,this.input)}withFaceDescriptor(){return new s6(this,this.input)}},a6=class extends j4{constructor(e,t){super(),this.parentTask=e,this.input=t}},i6=class extends a6{async run(){let e=await this.parentTask;return(await H4(e,this.input,e=>Promise.all(e.map(e=>K4.faceRecognitionNet.computeFaceDescriptor(e))),null,e=>e.landmarks.align(null,{useDlibAlignment:!0}))).map((t,n)=>f4(e[n],t))}withFaceExpressions(){return new Y4(this,this.input)}withAgeAndGender(){return new n6(this,this.input)}},s6=class extends a6{async run(){let e=await this.parentTask;if(!e)return;let t=await z4(e,this.input,e=>K4.faceRecognitionNet.computeFaceDescriptor(e),null,e=>e.landmarks.align(null,{useDlibAlignment:!0}));return f4(e,t)}withFaceExpressions(){return new Z4(this,this.input)}withAgeAndGender(){return new r6(this,this.input)}},o6=class extends j4{constructor(e,t,n){super(),this.parentTask=e,this.input=t,this.useTinyLandmarkNet=n}get landmarkNet(){return this.useTinyLandmarkNet?K4.faceLandmark68TinyNet:K4.faceLandmark68Net}},l6=class extends o6{async run(){let e=await this.parentTask,t=e.map(e=>e.detection),n=this.input instanceof ju?await b3(this.input,t):await y3(this.input,t),r=await Promise.all(n.map(e=>this.landmarkNet.detectLandmarks(e)));return n.forEach(e=>e instanceof ju&&e.dispose()),e.filter((e,t)=>r[t]).map((e,t)=>q3(e,r[t]))}withFaceExpressions(){return new Y4(this,this.input)}withAgeAndGender(){return new n6(this,this.input)}withFaceDescriptors(){return new i6(this,this.input)}},c6=class extends o6{async run(){let e=await this.parentTask;if(!e)return;let{detection:t}=e,n=this.input instanceof ju?await b3(this.input,[t]):await y3(this.input,[t]),r=await this.landmarkNet.detectLandmarks(n[0]);return n.forEach(e=>e instanceof ju&&e.dispose()),q3(e,r)}withFaceExpressions(){return new Z4(this,this.input)}withAgeAndGender(){return new r6(this,this.input)}withFaceDescriptor(){return new s6(this,this.input)}},u6=class extends j4{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new B4;super(),this.input=e,this.options=t}},A6=class extends u6{async run(){let e,{input:t,options:n}=this;if(n instanceof Q4)e=K4.tinyFaceDetector.locateFaces(t,n);else if(n instanceof B4)e=K4.ssdMobilenetv1.locateFaces(t,n);else{if(!(n instanceof U4))throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | TinyYolov2Options");e=K4.tinyYolov2.locateFaces(t,n)}return e}runAndExtendWithFaceDetections(){return new Promise((e,t)=>{this.run().then(t=>e(t.map(e=>K5({},e)))).catch(e=>t(e))})}withFaceLandmarks(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new l6(this.runAndExtendWithFaceDetections(),this.input,e)}withFaceExpressions(){return new X4(this.runAndExtendWithFaceDetections(),this.input)}withAgeAndGender(){return new e6(this.runAndExtendWithFaceDetections(),this.input)}},d6=class extends u6{async run(){let e=await new A6(this.input,this.options),t=e[0];return e.forEach(e=>{e.score>t.score&&(t=e)}),t}runAndExtendWithFaceDetection(){return new Promise(async e=>{let t=await this.run();e(t?K5({},t):void 0)})}withFaceLandmarks(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new c6(this.runAndExtendWithFaceDetection(),this.input,e)}withFaceExpressions(){return new J4(this.runAndExtendWithFaceDetection(),this.input)}withAgeAndGender(){return new t6(this.runAndExtendWithFaceDetection(),this.input)}};function h6(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new B4;return new d6(e,t)}function p6(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");let n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map((e,t)=>e-r[t]).reduce((e,t)=>e+t*t,0))}function f6(e,t){let{width:n,height:r}=new b5(t.width,t.height);if(n<=0||r<=0)throw new Error("resizeResults - invalid dimensions: ".concat(JSON.stringify({width:n,height:r})));if(Array.isArray(e))return e.map(e=>f6(e,{width:n,height:r}));if(K3(e)){let t=e.detection.forSize(n,r),a=e.unshiftedLandmarks.forSize(t.box.width,t.box.height);return q3(K5(e,t),a)}return G5(e)?K5(e,e.detection.forSize(n,r)):e instanceof W5||e instanceof M5?e.forSize(n,r):e}const m6=["center","turnLeft","turnRight","turnUp","turnDown"],g6=e=>{let{onNavigate:t,backPage:n,nextPage:r}=e;const{language:i}=A(),{formData:o}=p(),l=(0,a.useRef)(null),c=(0,a.useRef)(null),u=(0,a.useRef)(null),d=(0,a.useRef)(null),h=(0,a.useRef)(null),f=(0,a.useRef)(null),m={center:(0,a.useRef)(null),turnLeft:(0,a.useRef)(null),turnRight:(0,a.useRef)(null),turnUp:(0,a.useRef)(null),turnDown:(0,a.useRef)(null),verified:(0,a.useRef)(null)},g=(0,a.useRef)(null),y=(0,a.useRef)(null),b=(0,a.useRef)(null),w=(0,a.useRef)(0),v=(0,a.useRef)(null),C=(0,a.useRef)({}),k=(0,a.useRef)(!1),[B,S]=(0,a.useState)(x("loadingModels",i)),[I,N]=(0,a.useState)(!0),[F,E]=(0,a.useState)(!1),_=(0,a.useCallback)(async()=>{try{const e=navigator.mediaDevices;let t;if(e&&"function"===typeof e.getUserMedia)t=await e.getUserMedia({video:{facingMode:"user"},audio:!1});else{const e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;if(!e)throw new Error("MediaDevices API or getUserMedia not supported");t=await new Promise((t,n)=>e.call(navigator,{video:{facingMode:"user"},audio:!1},t,n))}return l.current&&(l.current.srcObject=t),E(!1),!0}catch(Ke){return E(!0),S(x("cameraPermissionDenied",i)),console.error("Camera error",Ke),!1}},[i]);(0,a.useEffect)(()=>{if(k.current)return;k.current=!0;(async()=>{S(x("requestingCameraPermission",i)),await _()&&(S(x("loadingModels",i)),await Promise.all([K4.faceRecognitionNet.loadFromUri("https://cdn.jsdelivr.net/npm/@vladmandic/face-api/model/"),K4.faceLandmark68Net.loadFromUri("https://cdn.jsdelivr.net/npm/@vladmandic/face-api/model/"),K4.ssdMobilenetv1.loadFromUri("https://cdn.jsdelivr.net/npm/@vladmandic/face-api/model/"),K4.tinyFaceDetector.loadFromUri("https://cdn.jsdelivr.net/npm/@vladmandic/face-api/model/")]),S(x("cameraReady",i)),N(!1))})()},[i,_]),(0,a.useEffect)(()=>{S(x(F?"cameraPermissionDenied":I?"loadingModels":"cameraReady",i))},[i,I,F]);const T=()=>{const e=m6[w.current];(e=>{const t=d.current,n=h.current,r=f.current;if(!t||!n||!r)return;r.classList.remove("visible","animate-turnLeft","animate-turnRight","animate-turnUp","animate-turnDown");const a={center:x("challengeCenter",i),turnLeft:x("challengeTurnLeft",i),turnRight:x("challengeTurnRight",i),turnUp:x("challengeTurnUp",i),turnDown:x("challengeTurnDown",i)};t.textContent=a[e],"center"===e?n.classList.remove("hidden","correct"):(n.classList.add("hidden"),r.classList.add("visible"),r.classList.add("animate-".concat(e)))})(e);b.current=setInterval(async()=>{const t=await h6(l.current,new Q4).withFaceLandmarks();if(t&&t.detection&&t.landmarks){D(t);let n=!1;const{box:r}=t.detection,a=t.landmarks.getNose()[3];switch(e){case"center":{const e=r.width,t=r.left+r.width/2,i=l.current.videoWidth/2,s=Math.abs(t-i)<.15*l.current.videoWidth,o=e>.3*l.current.videoWidth&&e<.6*l.current.videoWidth;s&&o?(h.current.classList.add("correct"),v.current={x:a.x,y:a.y},n=!0):h.current.classList.remove("correct");break}case"turnLeft":v.current&&a.x-v.current.x>25&&(n=!0);break;case"turnRight":v.current&&v.current.x-a.x>25&&(n=!0);break;case"turnUp":v.current&&v.current.y-a.y>25&&(n=!0);break;case"turnDown":v.current&&a.y-v.current.y>25&&(n=!0)}if(n){clearInterval(b.current);const t=await h6(l.current).withFaceLandmarks().withFaceDescriptor();t&&(C.current[e]={descriptor:Array.from(t.descriptor),landmarks:t.landmarks.positions},"center"===e&&(g.current=t.descriptor)),R(l.current,m[e].current),w.current++,w.current>=m6.length?(d.current.textContent="",f.current.classList.remove("visible"),S(x("livenessConfirmed",i)),g.current?(U(),S(x("registrationComplete",i)),N(!0),L()):(S(x("couldNotCapture",i)),N(!1),w.current=0)):setTimeout(()=>T(),500)}}else"center"===e&&h.current&&h.current.classList.remove("correct")},300)},L=()=>{y.current=setInterval(async()=>{const e=await h6(l.current).withFaceLandmarks().withFaceDescriptor();if(e&&g.current){const t=p6(g.current,e.descriptor);t<.6&&(clearInterval(y.current),u.current.classList.add("success"),S(x("identityVerified",i)+" (Distance: ".concat(t.toFixed(2),")")),D(e),R(l.current,m.verified.current))}},700)},D=e=>{const t=c.current,n=l.current,r=t.getContext("2d"),a={width:n.clientWidth,height:n.clientHeight};!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{width:r,height:a}=n?d3(t):t;e.width=r,e.height=a}(t,a);const i=f6(e,a);r.clearRect(0,0,t.width,t.height),r.translate(t.width,0),r.scale(-1,1),g5.drawFaceLandmarks(t,i),r.setTransform(1,0,0,1,0,0)},R=(e,t)=>{const n=document.createElement("canvas");n.width=e.videoWidth,n.height=e.videoHeight;const r=n.getContext("2d");r.translate(n.width,0),r.scale(-1,1),r.drawImage(e,0,0,n.width,n.height);const a=n.toDataURL("image/jpeg",.9);t.src=a},U=async()=>{const e={center:m.center.current.src,turnLeft:m.turnLeft.current.src,turnRight:m.turnRight.current.src,turnUp:m.turnUp.current.src,turnDown:m.turnDown.current.src};try{var t;await fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL,"/api/save-selfie"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({referenceNumber:null===(t=o.personalInfo)||void 0===t?void 0:t.referenceNumber,photos:e,data:C.current})})}catch(Vu){console.error("save selfie error",Vu)}};return(0,s.jsxs)("div",{className:"selfie-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsx)("button",{onClick:()=>t(n),className:"btn-back",children:(0,s.jsx)("span",{children:x("back",i)})})]}),(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("h1",{className:"page-title",children:x("selfieTitle",i)}),(0,s.jsxs)("div",{className:"camera-container",children:[(0,s.jsx)("video",{id:"video",ref:l,autoPlay:!0,muted:!0,playsInline:!0}),(0,s.jsx)("canvas",{id:"canvas",ref:c}),(0,s.jsxs)("div",{id:"guideContainer",children:[(0,s.jsx)("p",{id:"guideText",ref:d}),(0,s.jsxs)("svg",{id:"guideSvg",viewBox:"0 0 400 480",children:[(0,s.jsx)("ellipse",{id:"faceFitGuide",ref:h,cx:"200",cy:"240",rx:"120",ry:"180"}),(0,s.jsx)("g",{id:"virtualFaceGuide",ref:f})]})]}),(0,s.jsx)("div",{id:"overlay",ref:u,className:"overlay"})]}),(0,s.jsx)("button",{id:"registerButton",disabled:I,onClick:()=>{N(!0),S(x("followInstructions",i)),w.current=0,C.current={},T()},children:x("startLivenessCheck",i)}),(0,s.jsx)("div",{id:"results",className:"info",children:B}),(0,s.jsxs)("div",{className:"photo-strip",children:[(0,s.jsxs)("div",{className:"photo-box",children:[(0,s.jsx)("label",{children:x("center",i)}),(0,s.jsx)("img",{ref:m.center,alt:"center"})]}),(0,s.jsxs)("div",{className:"photo-box",children:[(0,s.jsx)("label",{children:x("left",i)}),(0,s.jsx)("img",{ref:m.turnLeft,alt:"left"})]}),(0,s.jsxs)("div",{className:"photo-box",children:[(0,s.jsx)("label",{children:x("right",i)}),(0,s.jsx)("img",{ref:m.turnRight,alt:"right"})]}),(0,s.jsxs)("div",{className:"photo-box",children:[(0,s.jsx)("label",{children:x("up",i)}),(0,s.jsx)("img",{ref:m.turnUp,alt:"up"})]}),(0,s.jsxs)("div",{className:"photo-box",children:[(0,s.jsx)("label",{children:x("down",i)}),(0,s.jsx)("img",{ref:m.turnDown,alt:"down"})]}),(0,s.jsxs)("div",{className:"photo-box",children:[(0,s.jsx)("label",{children:x("verified",i)}),(0,s.jsx)("img",{ref:m.verified,alt:"verified"})]})]})]}),(0,s.jsx)("div",{className:"form-actions",children:(0,s.jsx)("button",{className:"btn-next",onClick:()=>t(r),children:x("next",i)})})]})},y6={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"",b6={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_ADMIN_NAME||"Admin",w6=e=>{var t;let{onNavigate:n}=e;const[i,o]=(0,a.useState)([]),[l,c]=(0,a.useState)(!0),[u,d]=(0,a.useState)(""),[h,p]=(0,a.useState)(null),[f,m]=(0,a.useState)(0),[g,y]=(0,a.useState)("Pending"),[w,v]=(0,a.useState)(null),[C,k]=(0,a.useState)(!1),[B,S]=(0,a.useState)({}),[I,N]=(0,a.useState)({}),[F,E]=(0,a.useState)(!1),[_,T]=(0,a.useState)([]),[L,D]=(0,a.useState)([]),[R,U]=(0,a.useState)(!1),[O,M]=(0,a.useState)(""),{language:P}=A();(0,a.useEffect)(()=>{(async()=>{try{const e=await fetch("".concat(y6,"/api/applications"));if(e.ok){const t=await e.json();o(t)}}catch(Vu){console.error(Vu)}c(!1)})()},[]),(0,a.useEffect)(()=>{fetch("".concat(y6,"/api/countries")).then(e=>e.json()).then(T).catch(()=>{})},[]),(0,a.useEffect)(()=>{var e;null!==(e=B.addressInfo)&&void 0!==e&&e.country?fetch("".concat(y6,"/api/cities?country=").concat(B.addressInfo.country)).then(e=>e.json()).then(e=>D(e)).catch(()=>D([])):D([])},[null===(t=B.addressInfo)||void 0===t?void 0:t.country]),(0,a.useEffect)(()=>{if(h){const e=r({},h.personalInfo),t=r({},h.workInfo),n=e=>{if(!e)return"";const t=new Date(e);return isNaN(t)?e:t.toISOString().split("T")[0]};["passport_issue_date","passport_expiry_date","dob","residence_expiry"].forEach(t=>{e[t]&&(e[t]=n(e[t]))}),t&&t.work_start_date&&(t.work_start_date=n(t.work_start_date)),S({personalInfo:e,addressInfo:r({},h.addressInfo),workInfo:t})}},[h]);const Q=(e,t,n)=>{S(a=>{const i=r(r({},a[e]),{},{[t]:n});return"addressInfo"===e&&"country"===t&&(i.city=""),r(r({},a),{},{[e]:i})})},q=i.filter(e=>"All"===g||e.status===g).filter(e=>{const t=u.toLowerCase();return(e.personalInfo.full_name||"").toLowerCase().includes(t)||(e.personalInfo.first_name||"").toLowerCase().includes(t)||(e.personalInfo.last_name||"").toLowerCase().includes(t)||(e.personalInfo.reference_number||"").toLowerCase().includes(t)}),X=Math.ceil(q.length/10),J=q.slice(10*f,10*f+10),Y=(e,t,n)=>t?C?(0,s.jsxs)("div",{className:"confirmation-document",children:[(0,s.jsx)("div",{className:"confirmation-header",children:e}),Object.entries(t).map(e=>{var t,r,a;let[i,o]=e;return null!==o&&"object"!==typeof o&&!["id","created_at","reference_number","ai_model","confirmed_by_admin","approved_by_admin_name","approved_by_admin_ip","full_name"].includes(i)&&(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:i.replace(/_/g," ")}),"addressInfo"===n&&"country"===i?(0,s.jsxs)("select",{className:"form-input",value:(null===(t=B.addressInfo)||void 0===t?void 0:t.country)||"",onChange:e=>{Q("addressInfo","country",e.target.value)},children:[(0,s.jsx)("option",{value:"",children:x("country",P)}),_.map(e=>(0,s.jsx)("option",{value:e.code,children:e.name_en},e.code))]}):"addressInfo"===n&&"city"===i?(0,s.jsxs)("select",{className:"form-input",value:(null===(r=B.addressInfo)||void 0===r?void 0:r.city)||"",onChange:e=>Q("addressInfo","city",e.target.value),children:[(0,s.jsx)("option",{value:"",children:x("city",P)}),L.length>0?L.map(e=>(0,s.jsx)("option",{value:e.city_code,children:e.name_en},e.city_code)):(0,s.jsx)("option",{value:"other",children:x("other",P)})]}):(0,s.jsx)("input",{className:"form-input",type:i.includes("date")?"date":"text",value:(null===(a=B[n])||void 0===a?void 0:a[i])||"",onChange:e=>Q(n,i,e.target.value)})]},i)})]}):(0,s.jsxs)("div",{className:"confirmation-document",children:[(0,s.jsx)("div",{className:"confirmation-header",children:e}),(0,s.jsx)("ul",{className:"confirmation-list",children:Object.entries(t).map(e=>{let[t,n]=e;return null!==n&&"object"!==typeof n&&(0,s.jsxs)("li",{children:[(0,s.jsxs)("strong",{children:[t.replace(/_/g," "),":"]})," ",n]},t)})})]}):null,Z=e=>{let{onConfirm:t,onCancel:n}=e;const[i,o]=(0,a.useState)({mobileApp:!0,sms:!0,localCard:!0,internationalCard:!0}),l=e=>{const{name:t,checked:n}=e.target;o(e=>r(r({},e),{},{[t]:n}))},c={mobileApp:(0,s.jsx)(j,{}),sms:(0,s.jsx)(H,{}),localCard:(0,s.jsx)(z,{}),internationalCard:(0,s.jsx)(W,{})},u={mobileApp:x("registerMobileApp",P),sms:x("registerSmsService",P),localCard:x("registerLocalCard",P),internationalCard:x("registerInternationalCard",P)};return(0,s.jsx)("div",{className:"modal-backdrop",onClick:e=>{e.target.classList.contains("modal-backdrop")&&n()},children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsx)("h3",{className:"modal-title",children:x("registerEServices",P)}),(0,s.jsx)("ul",{className:"confirmation-list",children:["mobileApp","sms","localCard","internationalCard"].map(e=>(0,s.jsx)("li",{children:(0,s.jsxs)("label",{className:"agreement-item",children:[(0,s.jsxs)("div",{className:"custom-checkbox",children:[(0,s.jsx)("input",{type:"checkbox",name:e,checked:i[e],onChange:l}),(0,s.jsx)("span",{className:"checkmark"})]}),c[e],(0,s.jsx)("span",{children:u[e]})]})},e))}),O&&(0,s.jsx)("div",{className:"error-message",children:x(O,P)}),(0,s.jsxs)("div",{className:"modal-actions",children:[(0,s.jsx)("button",{onClick:n,className:"btn-next btn-cancel",disabled:R,children:x("cancel",P)}),(0,s.jsx)("button",{onClick:()=>t(i),className:"btn-next btn-confirm",disabled:R,children:x("confirm",P)})]})]})})},$=async(e,t)=>{o(n=>n.map(n=>n.personalInfo.id===e?r(r({},n),{},{status:t}):n)),p(null);try{await fetch("".concat(y6,"/api/application-status"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,status:t,adminName:b6})})}catch(Vu){console.error(Vu)}};return(0,s.jsxs)("div",{className:"form-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:b,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]})]}),(0,s.jsxs)("main",{className:"form-main lookup-main",children:[(0,s.jsxs)("div",{className:"lookup-header",children:[(0,s.jsx)("h2",{className:"lookup-title",children:x("pendingApplications",P)}),(0,s.jsxs)("div",{className:"header-actions",children:[(0,s.jsx)("select",{className:"form-input",value:g,onChange:e=>{y(e.target.value),m(0)},children:["Pending","Approved","Rejected","All"].map(e=>(0,s.jsx)("option",{value:e,children:x(e.toLowerCase(),P)},e))}),(0,s.jsx)("input",{className:"form-input search-input",placeholder:x("search",P)+"...",value:u,onChange:e=>d(e.target.value)})]})]}),(0,s.jsxs)("table",{className:"lookup-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:x("applicantName",P)}),(0,s.jsx)("th",{children:x("referenceLabel",P)}),(0,s.jsx)("th",{children:x("serviceType",P)}),(0,s.jsx)("th",{children:x("submissionDate",P)}),(0,s.jsx)("th",{children:x("status",P)}),(0,s.jsx)("th",{})]})}),(0,s.jsxs)("tbody",{children:[l&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"6",className:"info-row",children:x("loading",P)})}),J.map(e=>(0,s.jsxs)("tr",{className:"hover-row",children:[(0,s.jsxs)("td",{children:[(0,s.jsxs)("div",{className:"app-name",children:[e.personalInfo.first_name," ",e.personalInfo.last_name]}),(0,s.jsx)("div",{className:"app-fullname",children:e.personalInfo.full_name})]}),(0,s.jsx)("td",{children:e.personalInfo.reference_number}),(0,s.jsx)("td",{children:e.personalInfo.service_type}),(0,s.jsx)("td",{children:new Date(e.personalInfo.created_at).toLocaleDateString()}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"status-badge status-".concat((e.status||"Pending").toLowerCase()),children:x((e.status||"Pending").toLowerCase(),P)})}),(0,s.jsx)("td",{children:(0,s.jsx)("button",{onClick:()=>p(e),children:x("review",P)})})]},e.personalInfo.id)),!l&&0===q.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"6",className:"info-row",children:x("noResults",P)})})]})]}),(0,s.jsx)("div",{className:"pagination",children:Array.from({length:X}).map((e,t)=>(0,s.jsx)("button",{onClick:()=>m(t),className:"page-btn ".concat(t===f?"active":""),children:t+1},t))})]}),(0,s.jsx)(K,{}),(l||R)&&(0,s.jsx)(ie,{message:x(l?"loading":"processing",P)}),h&&(0,s.jsx)("div",{className:"modal-backdrop",onClick:e=>{e.target.classList.contains("modal-backdrop")&&p(null)},children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"detail-header",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"detail-title",children:[h.personalInfo.first_name," ",h.personalInfo.last_name]}),(0,s.jsx)("p",{className:"detail-ref",children:h.personalInfo.reference_number})]}),(0,s.jsx)("button",{onClick:()=>{p(null),k(!1)},className:"close-btn",children:"\xd7"})]}),Y(x("personalInfo",P),h.personalInfo,"personalInfo"),Y(x("addressInfoTitle",P),h.addressInfo,"addressInfo"),Y(x("workInfoTitle",P),h.workInfo,"workInfo"),(ee=h.uploadedDocuments,ee&&0!==ee.length?(0,s.jsxs)("div",{className:"confirmation-document",children:[(0,s.jsx)("div",{className:"confirmation-header",children:x("uploadedDocuments",P)}),(0,s.jsx)("div",{className:"doc-grid",children:ee.map(e=>{const t=e.file_name.replace(/\\/g,"/").split("/").pop(),n="".concat(y6,"/user_document/").concat(e.reference_number,"/").concat(t);return(0,s.jsxs)("div",{className:"doc-item",children:[(0,s.jsx)("img",{src:n,alt:e.doc_type,className:"doc-img",onClick:()=>v(n)}),C&&(0,s.jsx)("input",{type:"file",onChange:t=>((e,t)=>{N(n=>r(r({},n),{},{[e]:t}))})(e.doc_type,t.target.files[0])}),(0,s.jsx)("p",{className:"doc-label",children:e.doc_type})]},e.file_name)})})]}):null),(0,s.jsx)("div",{className:"detail-actions",children:C?(0,s.jsx)("button",{onClick:async()=>{try{const e=e=>{if(!e)return"";const t=new Date(e);return isNaN(t)?e:t.toISOString().split("T")[0]},t=r({},B.personalInfo);["passport_issue_date","passport_expiry_date","dob","residence_expiry"].forEach(n=>{t[n]&&(t[n]=e(t[n]))});const n=r({},B.workInfo);n.work_start_date&&(n.work_start_date=e(n.work_start_date)),await fetch("".concat(y6,"/api/update-personal-info"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r({reference_number:h.personalInfo.reference_number},t))}),await fetch("".concat(y6,"/api/update-address-info"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r({reference_number:h.personalInfo.reference_number},B.addressInfo))}),await fetch("".concat(y6,"/api/update-work-info"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r({reference_number:h.personalInfo.reference_number},n))});for(const r in I){const e=I[r],t=h.uploadedDocuments.find(e=>e.doc_type===r),n=new FormData;n.append("file",e),t?await fetch("".concat(y6,"/api/update-document/").concat(t.id),{method:"POST",body:n}):(n.append("docType",r),n.append("reference",h.personalInfo.reference_number),await fetch("".concat(y6,"/api/add-document"),{method:"POST",body:n}))}const a=await fetch("".concat(y6,"/api/applications"));if(a.ok){const e=await a.json();o(e)}k(!1),p(null),N({})}catch(Vu){console.error(Vu)}},className:"btn-next btn-save",children:x("save",P)}):(0,s.jsx)(s.Fragment,{children:"Approved"!==h.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>$(h.personalInfo.id,"Rejected"),className:"btn-next btn-reject",children:x("reject",P)}),(0,s.jsx)("button",{onClick:()=>k(!0),className:"btn-next btn-edit",children:x("edit",P)}),(0,s.jsx)("button",{onClick:()=>E(!0),className:"btn-next btn-approve",children:x("approve",P)})]})})})]})}),w&&(0,s.jsx)("div",{className:"modal-backdrop",onClick:()=>v(null),children:(0,s.jsx)("div",{className:"modal-content image-modal-content",children:(0,s.jsx)("img",{src:w,alt:"Enlarged document",className:"image-modal-img"})})}),F&&(0,s.jsx)(Z,{onConfirm:async e=>{var t;if(null!==h&&void 0!==h&&null!==(t=h.personalInfo)&&void 0!==t&&t.reference_number){U(!0),M("");try{const e=await fetch("".concat(y6,"/api/create-custid"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reference:h.personalInfo.reference_number,admin:b6})}),t=await e.json().catch(()=>({}));if(e.ok&&t&&t.CUSTID){$(h.personalInfo.id,"Approved"),E(!1);const e=h.uploadedDocuments.find(e=>"photo"===e.doc_type);n("bankAccount",{personalInfo:h.personalInfo,photo:null===e||void 0===e?void 0:e.file_name,custId:t.CUSTID})}else{const n=t.error||"server_error";M(n),ae("CREATE_CUSTID_ERROR ".concat(e.status," ").concat(n))}}catch(Vu){M(Vu.message),ae("CREATE_CUSTID_ERROR ".concat(Vu.message))}U(!1)}},onCancel:()=>E(!1)})]});var ee},v6=e=>{let{onNavigate:t}=e;(0,a.useEffect)(()=>{const e=document.querySelector(".tilt-effect");if(!e)return;const t=t=>{const{left:n,top:r,width:a,height:i}=e.getBoundingClientRect(),s=t.clientX-n,o=(t.clientY-r-i/2)/(i/2)*-1*10,l=(s-a/2)/(a/2)*10;e.style.transform="perspective(1000px) scale(1.02) rotateX(".concat(o,"deg) rotateY(").concat(l,"deg)")},n=()=>{e.style.transform="perspective(1000px) scale(1) rotateX(0) rotateY(0)"};return e.addEventListener("mousemove",t),e.addEventListener("mouseleave",n),()=>{e.removeEventListener("mousemove",t),e.removeEventListener("mouseleave",n)}},[]);const{language:n}=A();return(0,s.jsxs)("div",{className:"app-container",children:[(0,s.jsxs)("header",{className:"header",children:[(0,s.jsx)("img",{src:b,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]})]}),(0,s.jsxs)("main",{className:"main center-main",children:[(0,s.jsx)("div",{className:"background",children:(0,s.jsx)("div",{className:"overlay"})}),(0,s.jsxs)("div",{className:"menu-card tilt-effect",children:[(0,s.jsx)("h2",{children:x("selectApplication",n)}),(0,s.jsxs)("button",{onClick:()=>t("pendingApplications"),children:[(0,s.jsx)(L,{}),(0,s.jsx)("span",{children:x("pendingApplications",n)})]}),(0,s.jsxs)("button",{onClick:()=>t("bankAccountLookup"),children:[(0,s.jsx)(T,{}),(0,s.jsx)("span",{children:x("bankAccountOpening",n)})]})]})]}),(0,s.jsx)(K,{})]})},x6={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"",C6=e=>{let{onNavigate:t}=e;const{language:n}=A(),[r,i]=(0,a.useState)(""),[o,l]=(0,a.useState)([]),[c,u]=(0,a.useState)(""),[d,h]=(0,a.useState)(!1),p=async()=>{h(!0),u("");try{let e="".concat(x6,"/api/customers-no-bank");if(r.trim()){const t=/^\d{12,}$/.test(r.trim())?"nid=".concat(r.trim()):"customerId=".concat(r.trim());e+="?".concat(t)}const t=await fetch(e);if(t.ok){const e=await t.json();l(e)}else{const e=await t.json().catch(()=>({error:"server_error"}));u(x(e.error||"server_error",n))}}catch(Vu){u(x("server_error",n))}h(!1)};(0,a.useEffect)(()=>{p()},[]);return(0,s.jsxs)("div",{className:"form-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:b,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsxs)("button",{onClick:()=>t("completeAccount"),className:"btn-back",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"15 18 9 12 15 6"})}),(0,s.jsx)("span",{children:x("back",n)})]})]}),(0,s.jsxs)("main",{className:"form-main",style:{width:"100%",maxWidth:"1000px",margin:"0 auto"},children:[(0,s.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"700"},children:x("bankAccountOpening",n)}),(0,s.jsxs)("div",{className:"form-group",style:{display:"flex",gap:"10px",marginBottom:"20px"},children:[(0,s.jsx)("input",{type:"text",className:"form-input",value:r,onChange:e=>i(e.target.value),placeholder:x("nidOrCustomerId",n)}),(0,s.jsx)("button",{className:"btn-next",onClick:p,children:x("search",n)})]}),c&&(0,s.jsx)("p",{className:"error-text",style:{color:"red",marginTop:"10px"},children:c}),(0,s.jsxs)("table",{className:"lookup-table",style:{marginTop:"20px",width:"100%"},children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:x("fullName",n)}),(0,s.jsx)("th",{children:x("nid",n)}),(0,s.jsx)("th",{children:x("customerId",n)}),(0,s.jsx)("th",{})]})}),(0,s.jsxs)("tbody",{children:[d&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"4",style:{textAlign:"center",padding:"20px"},children:x("loading",n)})}),!d&&o.map(e=>(0,s.jsxs)("tr",{className:"hover-row",children:[(0,s.jsx)("td",{children:e.full_name}),(0,s.jsx)("td",{children:e.national_id}),(0,s.jsx)("td",{children:e.customer_id}),(0,s.jsx)("td",{children:(0,s.jsx)("button",{className:"btn-next",onClick:()=>(e=>{t("bankAccount",{nid:e.national_id,custId:e.customer_id,personalId:e.id})})(e),children:x("open",n)})})]},e.id)),!d&&0===o.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"4",style:{textAlign:"center"},children:x("noResults",n)})})]})]})]}),(0,s.jsx)(K,{}),d&&(0,s.jsx)(ie,{message:x("loading",n)})]})},k6={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"",B6={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_ADMIN_NAME||"Admin",S6={passport:"passportPhoto",nationalId:"approvedNationalId",letter:"accountOpeningLetter",photo:"recentPersonalPhoto"},I6=Object.keys(S6),N6=e=>{let{onNavigate:t,state:n}=e;const{language:i}=A(),[o,l]=(0,a.useState)([]),[c,u]=(0,a.useState)({}),[d,h]=(0,a.useState)({}),[p,f]=(0,a.useState)({}),[m,g]=(0,a.useState)({});(0,a.useEffect)(()=>{const e=[...(null===n||void 0===n?void 0:n.uploadedDocuments)||[]].sort((e,t)=>e.doc_type.localeCompare(t.doc_type));l(e);const t={};e.forEach(e=>{t[e.id]=e.confirmed_by_admin}),u(t)},[n]);return(0,s.jsxs)("div",{className:"form-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:b,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsxs)("button",{onClick:()=>t("completeAccount"),className:"btn-back",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"15 18 9 12 15 6"})}),(0,s.jsx)("span",{children:x("back",i)})]})]}),(0,s.jsxs)("main",{className:"form-main",children:[(0,s.jsx)("h2",{className:"form-title",children:x("reviewDocuments",i)}),(0,s.jsx)("div",{className:"docs-grid",children:I6.map(e=>{const t=o.find(t=>t.doc_type===e);return t?(0,s.jsxs)("div",{className:"image-preview-box",style:{alignItems:"center",position:"relative"},children:[(0,s.jsx)("img",{src:"".concat(k6,"/").concat(t.file_name),alt:t.doc_type}),c[t.id]&&(0,s.jsx)("div",{className:"stamp-overlay",children:(0,s.jsx)(F,{})}),(0,s.jsx)("div",{style:{marginTop:"10px",fontWeight:"600"},children:x(S6[t.doc_type]||t.doc_type,i)}),(0,s.jsxs)("label",{style:{marginTop:"10px",display:"flex",alignItems:"center",gap:"5px"},children:[(0,s.jsx)("input",{type:"checkbox",checked:!!c[t.id],onChange:()=>(async e=>{const t=!c[e];f(t=>r(r({},t),{},{[e]:!0})),g(t=>r(r({},t),{},{[e]:""}));try{const n=await fetch("".concat(k6,"/api/approve-document"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,approved:t,adminName:B6})}),a=await n.json().catch(()=>({}));console.debug("DOC_APPROVE_RESPONSE",a);try{await fetch("".concat(k6,"/api/log-activity"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"DOC_APPROVE_RESPONSE ".concat(JSON.stringify(a))})})}catch(Ot){}n.ok&&a&&a.success?u(n=>r(r({},n),{},{[e]:t})):g(t=>r(r({},t),{},{[e]:a.error||"server_error"}))}catch(Vu){console.debug("DOC_APPROVE_ERROR",Vu),g(n=>r(r({},n),{},{[e]:Vu.message}))}f(t=>r(r({},t),{},{[e]:!1}))})(t.id),disabled:p[t.id]}),x("valid",i),p[t.id]&&(0,s.jsx)("div",{className:"loading-spinner"})]}),m[t.id]&&(0,s.jsx)("div",{className:"error-message",children:m[t.id]}),(0,s.jsx)("div",{style:{marginTop:"10px"},children:(0,s.jsx)("input",{type:"file",onChange:e=>(async(t,n)=>{if(!n)return;h(e=>r(r({},e),{},{[t]:!0}));const a=new FormData;a.append("file",n);try{const e=await fetch("".concat(k6,"/api/update-document/").concat(t),{method:"POST",body:a});if(e.ok){const n=await e.json();l(e=>e.map(e=>e.id===t?r(r({},e),{},{file_name:n.path,confirmed_by_admin:!1}):e)),u(e=>r(r({},e),{},{[t]:!1}))}}catch(e){console.error(e)}h(e=>r(r({},e),{},{[t]:!1}))})(t.id,e.target.files[0])})})]},t.id):(0,s.jsxs)("div",{className:"image-preview-box",style:{alignItems:"center",justifyContent:"center"},children:[(0,s.jsx)("div",{style:{fontWeight:"600"},children:x(S6[e],i)}),(0,s.jsx)("div",{style:{marginTop:"10px"},children:(0,s.jsx)("input",{type:"file",onChange:t=>(async(e,a)=>{if(!a)return;h(t=>r(r({},t),{},{[e]:!0}));const i=new FormData;i.append("file",a),i.append("docType",e),i.append("reference",n.personalInfo.reference_number);try{const t=await fetch("".concat(k6,"/api/add-document"),{method:"POST",body:i});if(t.ok){const n=await t.json(),a={id:n.id,doc_type:e,file_name:n.path,reference_number:n.referenceNumber,confirmed_by_admin:!1};l(e=>[...e,a]),u(e=>r(r({},e),{},{[a.id]:!1}))}}catch(t){console.error(t)}h(t=>r(r({},t),{},{[e]:!1}))})(e,t.target.files[0]),disabled:d[e]})})]},e)})}),(0,s.jsx)("div",{className:"form-actions",children:(0,s.jsx)("button",{className:"btn-next",disabled:!I6.every(e=>o.some(t=>t.doc_type===e&&c[t.id])),onClick:()=>t("reviewWorkInfo",r(r({},n),{},{uploadedDocuments:o})),children:x("next",i)})})]}),(0,s.jsx)(K,{})]})},F6={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"",E6={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_ADMIN_NAME||"Admin",_6=e=>{let{onNavigate:t,state:n}=e;const{language:i}=A(),[o,l]=(0,a.useState)({}),[c,u]=(0,a.useState)({}),[d,h]=(0,a.useState)(!1),[p,f]=(0,a.useState)({}),[m,g]=(0,a.useState)(!1),[y,w]=(0,a.useState)(!1),[v,C]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{var e;const t=null===n||void 0===n||null===(e=n.personalInfo)||void 0===e?void 0:e.reference_number;if(t)try{const e=await fetch("".concat(F6,"/api/work-info?reference=").concat(encodeURIComponent(t)));if(e.ok){const t=await e.json();t&&(l(t),f(t),g(!!t.confirmed_by_admin))}}catch(Vu){console.error(Vu)}})()},[n]),(0,a.useEffect)(()=>{const e={};Object.keys(o||{}).forEach(t=>{o[t]&&(e[t]=!1)}),u(e),d||f(o),g(!!o.confirmed_by_admin)},[o,d]);return(0,s.jsxs)("div",{className:"form-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:b,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsxs)("button",{onClick:()=>t("reviewDocs",n),className:"btn-back",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"15 18 9 12 15 6"})}),(0,s.jsx)("span",{children:x("back",i)})]})]}),(0,s.jsxs)("main",{className:"form-main",children:[(0,s.jsx)("h2",{className:"form-title",children:x("workInfoTitle",i)}),d?(0,s.jsxs)("form",{className:"form-container",onSubmit:e=>{e.preventDefault(),(async()=>{var t;const a=null===n||void 0===n||null===(t=n.personalInfo)||void 0===t?void 0:t.reference_number;if(a)try{await fetch("".concat(F6,"/api/work-info"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r({reference:a,adminChange:!0},p))}),l(p),h(!1)}catch(e){console.error(e)}})()},children:[(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"employment_status",value:p.employment_status||"",onChange:e=>f(r(r({},p),{},{employment_status:e.target.value})),className:"form-input",placeholder:x("employmentStatus",i)})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"job_title",value:p.job_title||"",onChange:e=>f(r(r({},p),{},{job_title:e.target.value})),className:"form-input",placeholder:x("jobTitle",i)})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"employer",value:p.employer||"",onChange:e=>f(r(r({},p),{},{employer:e.target.value})),className:"form-input",placeholder:x("employer",i)})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"employer_address",value:p.employer_address||"",onChange:e=>f(r(r({},p),{},{employer_address:e.target.value})),className:"form-input",placeholder:x("employerAddress",i)})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"employer_phone",value:p.employer_phone||"",onChange:e=>f(r(r({},p),{},{employer_phone:e.target.value})),className:"form-input",placeholder:x("employerPhone",i)})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"source_of_income",value:p.source_of_income||"",onChange:e=>f(r(r({},p),{},{source_of_income:e.target.value})),className:"form-input",placeholder:x("sourceOfIncome",i)})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"monthly_income",value:p.monthly_income||"",onChange:e=>f(r(r({},p),{},{monthly_income:e.target.value})),className:"form-input",placeholder:x("monthlyIncome",i)})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"work_country",value:p.work_country||"",onChange:e=>f(r(r({},p),{},{work_country:e.target.value})),className:"form-input",placeholder:x("work_country",i)})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{name:"work_city",value:p.work_city||"",onChange:e=>f(r(r({},p),{},{work_city:e.target.value})),className:"form-input",placeholder:x("work_city",i)})})]}):(0,s.jsxs)(s.Fragment,{children:[(k=o,(0,s.jsx)("table",{className:"confirmation-table",children:(0,s.jsx)("tbody",{children:Object.entries(k).map(e=>{let[t,n]=e;return n?(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:x(t,i)})}),(0,s.jsx)("td",{children:n}),(0,s.jsx)("td",{className:"checkbox-cell",children:(0,s.jsxs)("div",{className:"custom-checkbox",children:[(0,s.jsx)("input",{type:"checkbox",checked:!!c[t],onChange:()=>{return e=t,void u(t=>r(r({},t),{},{[e]:!t[e]}));var e}}),(0,s.jsx)("span",{className:"checkmark"})]})})]},t):null})})})),(0,s.jsx)("button",{type:"button",className:"btn-next",onClick:()=>h(!0),children:x("unlock",i)})]}),(0,s.jsxs)("div",{className:"form-actions",style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,s.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,s.jsx)("input",{type:"checkbox",checked:m,onChange:async()=>{var e;const t=null===n||void 0===n||null===(e=n.personalInfo)||void 0===e?void 0:e.reference_number;if(!t||y)return;const r=!m;w(!0),C("");try{const e=await fetch("".concat(F6,"/api/work-validation"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reference:t,approved:r,adminName:E6})}),n=await e.json().catch(()=>({}));console.debug("WORK_VALIDATE_RESPONSE",n);try{await fetch("".concat(F6,"/api/log-activity"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"WORK_VALIDATE_RESPONSE ".concat(JSON.stringify(n))})})}catch(Ot){}e.ok&&n&&n.success?g(r):C(n.error||"server_error")}catch(Vu){console.debug("WORK_VALIDATE_ERROR",Vu),C(Vu.message)}w(!1)},disabled:y}),x("valid",i),y&&(0,s.jsx)("div",{className:"loading-spinner"})]}),v&&(0,s.jsx)("p",{className:"error-message",children:v}),(0,s.jsx)("button",{className:"btn-next",onClick:()=>t("reviewAddressInfo",n),children:x("approve",i)})]})]}),(0,s.jsx)(K,{})]});var k},T6={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"",L6={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_ADMIN_NAME||"Admin",D6=e=>{let{onNavigate:t,state:n}=e;const{language:i}=A(),[o,l]=(0,a.useState)((null===n||void 0===n?void 0:n.personalInfo)||{}),[c,u]=(0,a.useState)(!1),[d,h]=(0,a.useState)({}),[p,f]=(0,a.useState)(!1),[m,g]=(0,a.useState)(!1),[y,w]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{var e,t;const r=new URLSearchParams;if(null!==n&&void 0!==n&&null!==(e=n.personalInfo)&&void 0!==e&&e.reference_number?r.append("reference",n.personalInfo.reference_number):null!==n&&void 0!==n&&null!==(t=n.personalInfo)&&void 0!==t&&t.national_id&&r.append("nid",n.personalInfo.national_id),r.toString())try{const e=await fetch("".concat(T6,"/api/address-info?").concat(r.toString()));if(e.ok){const t=await e.json();t&&(l(t),h(t),f(!!t.confirmed_by_admin))}}catch(Vu){console.error(Vu)}})()},[n]),(0,a.useEffect)(()=>{c||h(o),f(!!o.confirmed_by_admin)},[o,c]);return(0,s.jsxs)("div",{className:"form-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:b,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsxs)("button",{onClick:()=>t("reviewWorkInfo",n),className:"btn-back",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"15 18 9 12 15 6"})}),(0,s.jsx)("span",{children:x("back",i)})]})]}),(0,s.jsxs)("main",{className:"form-main",children:[(0,s.jsx)("h2",{className:"form-title",children:x("addressInfoTitle",i)}),c?(0,s.jsxs)("form",{className:"form-container",onSubmit:e=>{e.preventDefault(),(async()=>{var t;const a=null===n||void 0===n||null===(t=n.personalInfo)||void 0===t?void 0:t.reference_number;if(a)try{await fetch("".concat(T6,"/api/address-info"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r({reference:a,adminChange:!0},d))}),l(d),u(!1)}catch(e){console.error(e)}})()},children:[(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{className:"form-input",value:d.country||"",onChange:e=>h(r(r({},d),{},{country:e.target.value})),placeholder:x("country",i)})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{className:"form-input",value:d.city||"",onChange:e=>h(r(r({},d),{},{city:e.target.value})),placeholder:x("city",i)})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{className:"form-input",value:d.area||"",onChange:e=>h(r(r({},d),{},{area:e.target.value})),placeholder:x("area",i)})}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsx)("input",{className:"form-input",value:d.residential_address||"",onChange:e=>h(r(r({},d),{},{residential_address:e.target.value})),placeholder:x("residentialAddress",i)})})]}):(0,s.jsxs)(s.Fragment,{children:[(v=o,(0,s.jsx)("ul",{className:"confirmation-list",children:Object.entries(v).map(e=>{let[t,n]=e;return n?(0,s.jsxs)("li",{children:[(0,s.jsxs)("strong",{children:[x(t,i),":"]})," ",n]},t):null})})),(0,s.jsx)("button",{type:"button",className:"btn-next",onClick:()=>u(!0),children:x("unlock",i)})]}),(0,s.jsxs)("div",{className:"form-actions",style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,s.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,s.jsx)("input",{type:"checkbox",checked:p,onChange:async()=>{var e;const t=null===n||void 0===n||null===(e=n.personalInfo)||void 0===e?void 0:e.reference_number;if(!t||m)return;const r=!p;g(!0),w("");try{const e=await fetch("".concat(T6,"/api/address-validation"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reference:t,approved:r,adminName:L6})}),n=await e.json().catch(()=>({}));console.debug("ADDRESS_VALIDATE_RESPONSE",n);try{await fetch("".concat(T6,"/api/log-activity"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"ADDRESS_VALIDATE_RESPONSE ".concat(JSON.stringify(n))})})}catch(Ot){}e.ok&&n&&n.success?f(r):w(n.error||"server_error")}catch(Vu){console.debug("ADDRESS_VALIDATE_ERROR",Vu),w(Vu.message)}g(!1)},disabled:m}),x("valid",i),m&&(0,s.jsx)("div",{className:"loading-spinner"})]}),y&&(0,s.jsx)("p",{className:"error-message",children:y}),(0,s.jsx)("button",{className:"btn-next",onClick:()=>t("eServicesReg",n),children:x("approve",i)})]})]}),(0,s.jsx)(K,{})]});var v},R6=e=>{let{onNavigate:t,state:n}=e;const{language:i}=A(),[o,l]=(0,a.useState)({mobileApp:!0,sms:!0,localCard:!0,internationalCard:!0}),c=e=>{const{name:t,checked:n}=e.target;l(e=>r(r({},e),{},{[t]:n}))};return(0,s.jsxs)("div",{className:"form-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:b,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsxs)("button",{onClick:()=>t("reviewAddressInfo",n),className:"btn-back",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"15 18 9 12 15 6"})}),(0,s.jsx)("span",{children:x("back",i)})]})]}),(0,s.jsxs)("main",{className:"form-main",children:[(0,s.jsx)("h2",{className:"form-title",children:x("registerEServices",i)}),(0,s.jsx)("div",{className:"confirmation-document",children:(0,s.jsxs)("ul",{className:"confirmation-list",children:[(0,s.jsx)("li",{children:(0,s.jsxs)("label",{className:"agreement-item",children:[(0,s.jsxs)("div",{className:"custom-checkbox",children:[(0,s.jsx)("input",{type:"checkbox",name:"mobileApp",checked:o.mobileApp,onChange:c}),(0,s.jsx)("span",{className:"checkmark"})]}),(0,s.jsx)(j,{}),(0,s.jsx)("span",{children:x("registerMobileApp",i)})]})}),(0,s.jsx)("li",{children:(0,s.jsxs)("label",{className:"agreement-item",children:[(0,s.jsxs)("div",{className:"custom-checkbox",children:[(0,s.jsx)("input",{type:"checkbox",name:"sms",checked:o.sms,onChange:c}),(0,s.jsx)("span",{className:"checkmark"})]}),(0,s.jsx)(H,{}),(0,s.jsx)("span",{children:x("registerSmsService",i)})]})}),(0,s.jsx)("li",{children:(0,s.jsxs)("label",{className:"agreement-item",children:[(0,s.jsxs)("div",{className:"custom-checkbox",children:[(0,s.jsx)("input",{type:"checkbox",name:"localCard",checked:o.localCard,onChange:c}),(0,s.jsx)("span",{className:"checkmark"})]}),(0,s.jsx)(z,{}),(0,s.jsx)("span",{children:x("registerLocalCard",i)})]})}),(0,s.jsx)("li",{children:(0,s.jsxs)("label",{className:"agreement-item",children:[(0,s.jsxs)("div",{className:"custom-checkbox",children:[(0,s.jsx)("input",{type:"checkbox",name:"internationalCard",checked:o.internationalCard,onChange:c}),(0,s.jsx)("span",{className:"checkmark"})]}),(0,s.jsx)(W,{}),(0,s.jsx)("span",{children:x("registerInternationalCard",i)})]})})]})}),(0,s.jsx)("div",{className:"form-actions",children:(0,s.jsx)("button",{className:"btn-next",onClick:()=>t("accountSummary",r(r({},n),{},{eServices:o})),children:x("completeAccountRequest",i)})})]}),(0,s.jsx)(K,{})]})},U6=e=>{var t,n,r,i;let{onNavigate:o,state:l}=e;const{language:c}=A(),[u,d]=(0,a.useState)("");(0,a.useEffect)(()=>{new Promise(e=>setTimeout(()=>e("CUST-0001"),500)).then(d)},[]);const h=e=>(0,s.jsx)("ul",{className:"confirmation-list",children:Object.entries(e||{}).map(e=>{let[t,n]=e;return n?(0,s.jsxs)("li",{children:[(0,s.jsxs)("strong",{children:[x(t,c),":"]})," ",n]},t):null})});return(0,s.jsxs)("div",{className:"form-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:b,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsxs)("button",{onClick:()=>o("eServicesReg",l),className:"btn-back",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"15 18 9 12 15 6"})}),(0,s.jsx)("span",{children:x("back",c)})]})]}),(0,s.jsxs)("main",{className:"form-main",children:[(0,s.jsx)("h2",{className:"form-title",children:x("accountSummary",c)}),(0,s.jsxs)("div",{className:"confirmation-document",children:[(0,s.jsx)("div",{className:"confirmation-header",children:x("personalInfo",c)}),h(l.personalInfo),(0,s.jsx)("div",{className:"confirmation-header",children:x("addressInfoTitle",c)}),h(l.addressInfo),(0,s.jsx)("div",{className:"confirmation-header",children:x("workInfoTitle",c)}),h(l.workInfo),(0,s.jsx)("div",{className:"confirmation-header",children:x("registerEServices",c)}),(0,s.jsxs)("ul",{className:"confirmation-list",children:[(0,s.jsxs)("li",{children:[(0,s.jsxs)("strong",{children:[x("registerMobileApp",c),":"]})," ",null!==(t=l.eServices)&&void 0!==t&&t.mobileApp?x("yes",c):x("no",c)]}),(0,s.jsxs)("li",{children:[(0,s.jsxs)("strong",{children:[x("registerSmsService",c),":"]})," ",null!==(n=l.eServices)&&void 0!==n&&n.sms?x("yes",c):x("no",c)]}),(0,s.jsxs)("li",{children:[(0,s.jsxs)("strong",{children:[x("registerLocalCard",c),":"]})," ",null!==(r=l.eServices)&&void 0!==r&&r.localCard?x("yes",c):x("no",c)]}),(0,s.jsxs)("li",{children:[(0,s.jsxs)("strong",{children:[x("registerInternationalCard",c),":"]})," ",null!==(i=l.eServices)&&void 0!==i&&i.internationalCard?x("yes",c):x("no",c)]})]}),(0,s.jsx)("div",{className:"confirmation-header",children:x("customerId",c)}),(0,s.jsx)("p",{children:u||"..."})]}),(0,s.jsxs)("div",{className:"form-actions",children:[(0,s.jsx)("button",{className:"btn-export",onClick:()=>{try{var e,t,n,r;const a=new Kt,i=a.internal.pageSize.getWidth();a.addImage(b,"PNG",i/2-20,10,40,40),a.setFontSize(16),a.text(x("accountSummary",c),i/2,55,{align:"center"});const s=[],o=e=>{Object.entries(e||{}).forEach(e=>{let[t,n]=e;n&&s.push([x(t,c),Array.isArray(n)?n.join(""):n])})};o(l.personalInfo),o(l.addressInfo),o(l.workInfo),o({mobileApp:null!==(e=l.eServices)&&void 0!==e&&e.mobileApp?x("yes",c):x("no",c),sms:null!==(t=l.eServices)&&void 0!==t&&t.sms?x("yes",c):x("no",c),localCard:null!==(n=l.eServices)&&void 0!==n&&n.localCard?x("yes",c):x("no",c),internationalCard:null!==(r=l.eServices)&&void 0!==r&&r.internationalCard?x("yes",c):x("no",c)}),s.push([x("customerId",c),u]),function(e,t){da(e,oa(e,Jr(e,t)))}(a,{startY:65,head:[[x("label",c),x("value",c)]],body:s,theme:"grid",styles:{font:"helvetica",fontSize:10}}),a.save("account_summary.pdf")}catch(Vu){re("PDF_EXPORT_ERROR ".concat(Vu.message))}},style:{marginRight:"10px"},children:x("exportPdf",c)}),(0,s.jsx)("button",{className:"btn-next",onClick:()=>o("landing"),children:x("backToHome",c)})]})]}),(0,s.jsx)(K,{})]})},O6={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"",M6=e=>{var t;let{onNavigate:n,state:i}=e;const{language:o}=A(),l="ar"===o,c=null===i||void 0===i?void 0:i.nid,u=null===i||void 0===i?void 0:i.custId,d=(null===i||void 0===i?void 0:i.personalId)||(null===i||void 0===i||null===(t=i.personalInfo)||void 0===t?void 0:t.id),[h,p]=(0,a.useState)(null),[f,m]=(0,a.useState)(""),[g,y]=(0,a.useState)({}),[w,v]=(0,a.useState)(""),[C,k]=(0,a.useState)(""),[B,S]=(0,a.useState)(!1),[I,N]=(0,a.useState)(!0),[F,E]=(0,a.useState)(!1),[_,T]=(0,a.useState)(""),[L,D]=(0,a.useState)({doc1:!1,doc2:!1,doc3:!1,doc4:!1,doc5:!1}),R=e=>t=>{D(r(r({},L),{},{[e]:t.target.checked}))};(0,a.useEffect)(()=>{(async()=>{try{if(null!==i&&void 0!==i&&i.personalInfo){p(i.personalInfo);const e={};if(["full_name","branch_id","branch_name","city_code","city_name","passport_number","passport_expiry_date"].forEach(t=>{i.personalInfo[t]&&(e[t]=!0)}),y(e),i.personalInfo.branch_id){const e=await fetch("".concat(O6,"/api/branch-date"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch:i.personalInfo.branch_id})});if(e.ok){const t=await e.json(),n="string"===typeof t?t:t.branch_date||t.date||"";m(n),y(e=>r(r({},e),{},{branchDate:!!n}))}}return void N(!1)}if(!c)return void N(!1);const t=await fetch("".concat(O6,"/api/customer?nid=").concat(c));if(t.ok){var e;const n=await t.json();p(n.personalInfo);const a={};if(["full_name","branch_id","branch_name","city_code","city_name","passport_number","passport_expiry_date"].forEach(e=>{n.personalInfo[e]&&(a[e]=!0)}),y(a),null!==(e=n.personalInfo)&&void 0!==e&&e.branch_id){const e=await fetch("".concat(O6,"/api/branch-date"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch:n.personalInfo.branch_id})});if(e.ok){const t=await e.json(),n="string"===typeof t?t:t.branch_date||t.date||"";m(n),y(e=>r(r({},e),{},{branchDate:!!n}))}}}}catch(Ke){console.error(Ke)}N(!1)})()},[c,i]);const U=Object.values(L).every(Boolean),O=w&&U,M=e=>{const{name:t,value:n}=e.target;g[t]||("branchDate"===t?m(n):p(e=>r(r({},e),{},{[t]:n})))},P=e=>({readOnly:!!g[e],className:"form-input".concat(g[e]?" locked":""),onDoubleClick:t=>((e,t)=>{y(t=>r(r({},t),{},{[e]:!t[e]}));const n=t.currentTarget.closest(".form-group");n&&(n.classList.add("unlock-animation"),setTimeout(()=>n.classList.remove("unlock-animation"),500))})(e,t)});return(0,s.jsxs)("div",{className:"bank-account-page ".concat(l?"font-arabic":"font-english"),dir:l?"rtl":"ltr",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:b,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]}),(0,s.jsxs)("button",{onClick:()=>n("completeAccount"),className:"btn-back",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("polyline",{points:"15 18 9 12 15 6"})}),(0,s.jsx)("span",{children:x("back",o)})]})]}),(0,s.jsx)("main",{className:"bank-account-main",children:(0,s.jsxs)("div",{className:"bank-account-content",children:[(0,s.jsx)("h1",{className:"page-title",children:x("bankAccountOpening",o)}),(0,s.jsx)("div",{children:(0,s.jsx)("span",{className:"customer-badge",children:"".concat(x("customerId",o),": ").concat(u||"")})}),h&&(0,s.jsxs)("div",{className:"info-grid",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("p",{className:"field-label",children:x("fullName",o)}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r({name:"full_name",value:h.full_name||"",onChange:M},P("full_name"))),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("p",{className:"field-label",children:x("branch",o)}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r({name:"branch_id",value:h.branch_id||"",onChange:M},P("branch_id"))),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("p",{className:"field-label",children:x("branchName",o)}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r({name:"branch_name",value:h.branch_name||"",onChange:M},P("branch_name"))),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("p",{className:"field-label",children:x("cityCode",o)}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r({name:"city_code",value:h.city_code||"",onChange:M},P("city_code"))),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("p",{className:"field-label",children:x("city",o)}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r({name:"city_name",value:h.city_name||"",onChange:M},P("city_name"))),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("p",{className:"field-label",children:x("passportNumber",o)}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r({name:"passport_number",value:h.passport_number||"",onChange:M},P("passport_number"))),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("p",{className:"field-label",children:x("passportExpiryDate",o)}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r(r({name:"passport_expiry_date",value:h.passport_expiry_date||"",onChange:M},P("passport_expiry_date")),{},{dir:"ltr"})),(0,s.jsx)(Q,{className:"lock-icon"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("p",{className:"field-label",children:x("branchDate",o)}),(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)("input",r(r({name:"branchDate",value:f,onChange:M},P("branchDate")),{},{dir:"ltr"})),(0,s.jsx)(Q,{className:"lock-icon"})]})]})]}),(0,s.jsxs)("div",{className:"signature-section",children:[(0,s.jsx)("p",{className:"field-label",children:x("customerSignature",o)}),(0,s.jsxs)("div",{className:"signature-controls ".concat(l?"rtl":""),children:[(0,s.jsx)("input",{type:"file",id:"signature-upload",className:"hidden",onChange:async e=>{const t=e.target.files[0];if(t){S(!0);try{const e=new FormData;e.append("file",t),null!==h&&void 0!==h&&h.reference_number&&e.append("reference",h.reference_number),e.append("docType","signature");(await fetch("".concat(O6,"/api/add-document"),{method:"POST",body:e})).ok&&(v(URL.createObjectURL(t)),k(t.name))}catch(Ke){console.error(Ke)}S(!1)}}}),(0,s.jsx)("label",{htmlFor:"signature-upload",className:"secondary-btn",children:x("uploadFile",o)}),(0,s.jsx)("span",{className:"field-label",children:C})]})]}),(0,s.jsxs)("div",{className:"doc-list",children:[(0,s.jsx)("h2",{className:"doc-title",children:x("contractMustBeSigned",o)}),(0,s.jsxs)("div",{className:"doc-item ".concat(l?"rtl":""),children:[(0,s.jsx)("input",{type:"checkbox",id:"doc1",className:"document-checkbox",checked:L.doc1,onChange:R("doc1")}),(0,s.jsx)("label",{htmlFor:"doc1",children:x("docMobileApp",o)})]}),(0,s.jsxs)("div",{className:"doc-item ".concat(l?"rtl":""),children:[(0,s.jsx)("input",{type:"checkbox",id:"doc2",className:"document-checkbox",checked:L.doc2,onChange:R("doc2")}),(0,s.jsx)("label",{htmlFor:"doc2",children:x("docSmsService",o)})]}),(0,s.jsxs)("div",{className:"doc-item ".concat(l?"rtl":""),children:[(0,s.jsx)("input",{type:"checkbox",id:"doc3",className:"document-checkbox",checked:L.doc3,onChange:R("doc3")}),(0,s.jsx)("label",{htmlFor:"doc3",children:x("docLocalCard",o)})]}),(0,s.jsxs)("div",{className:"doc-item ".concat(l?"rtl":""),children:[(0,s.jsx)("input",{type:"checkbox",id:"doc4",className:"document-checkbox",checked:L.doc4,onChange:R("doc4")}),(0,s.jsx)("label",{htmlFor:"doc4",children:x("docInternationalCard",o)})]}),(0,s.jsxs)("div",{className:"doc-item ".concat(l?"rtl":""),children:[(0,s.jsx)("input",{type:"checkbox",id:"doc5",className:"document-checkbox",checked:L.doc5,onChange:R("doc5")}),(0,s.jsx)("label",{htmlFor:"doc5",children:x("docBankAgreement",o)})]})]}),(0,s.jsxs)("div",{className:"action-buttons",children:[(0,s.jsx)("button",{id:"create-account-button",onClick:async()=>{if(h&&f){E(!0),T("");try{const e={personalId:d,name:h.full_name,branch:h.branch_id,accId:u,acc_class:"CAIN",ccy:"LYD",ACCLSTYP:"S",ACCOPENDT:f,LOC:h.city_code,MEDIA:"MAIL",ACSTATUS:"NORM",PASS_SUBMISSION_DATE:h.passport_expiry_date},t=await fetch("".concat(O6,"/api/create-bank-account"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();t.ok&&r.success?n("completeAccountSuccess",{accountNumber:r.accountNumber,customer:h,custId:u,photo:null===i||void 0===i?void 0:i.photo}):T(r.error||x("server_error",o))}catch(Ke){T(x("server_error",o))}E(!1)}},disabled:!O,className:"primary-btn",children:x("createAccount",o)}),(0,s.jsx)("button",{className:"secondary-btn",children:x("reprintDocuments",o)})]}),_&&(0,s.jsx)("p",{className:"error-message",children:_})]})}),(0,s.jsx)(K,{}),(B||I||F)&&(0,s.jsx)(ie,{message:x(F?"creating":"loading",o)})]})};var P6=n(5239),Q6=n.n(P6);const j6={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"",H6=e=>{let{onNavigate:t,state:n}=e;const{language:r}=A(),[i,o]=(0,a.useState)(!1),l=(0,a.useRef)(null),c=(0,a.useRef)(null),u=(null===n||void 0===n?void 0:n.customer)||{},d=(null===n||void 0===n?void 0:n.accountNumber)||"",h=(null===n||void 0===n?void 0:n.custId)||"",p=null!==n&&void 0!==n&&n.photo?"".concat(j6,"/").concat(n.photo):"",f=[u.first_name,u.middle_name,u.last_name,u.surname_en].filter(Boolean).join(" ")||u.full_name||"",m=[u.first_name_ar,u.middle_name_ar,u.last_name_ar,u.surname_ar].filter(Boolean).join(" ")||u.full_name||"",g=u.branch_name||u.branch_id||"",y=u.phone||"",v={customerId:h,accountNumber:d},C="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=".concat(encodeURIComponent(JSON.stringify(v))),k=e=>{Array.from(document.querySelectorAll('style, link[rel="stylesheet"]')).forEach(t=>{e.document.write(t.outerHTML)})};return(0,s.jsxs)("div",{className:"form-page",children:[(0,s.jsxs)("header",{className:"header docs-header",children:[(0,s.jsx)("img",{src:w,alt:"Bank Logo",className:"logo"}),(0,s.jsxs)("div",{className:"header-switchers",children:[(0,s.jsx)(G,{}),(0,s.jsx)(V,{})]})]}),(0,s.jsxs)("main",{className:"sp-container",dir:"ar"===r?"rtl":"ltr",children:[(0,s.jsx)("h1",{className:"sp-main-title",children:x("successAccount",r)}),(0,s.jsxs)("div",{className:"sp-content-layout",children:[(0,s.jsxs)("div",{className:"sp-card-section",children:[(0,s.jsx)("h2",{children:x("customerCard",r)}),(0,s.jsx)("div",{ref:l,children:(0,s.jsxs)("div",{className:"sp-id-card",children:[(0,s.jsx)("div",{className:"id-card-header",children:(0,s.jsx)("img",{src:w,alt:"Bank Logo",className:"id-card-logo"})}),(0,s.jsxs)("div",{className:"id-card-body",children:[(0,s.jsx)("div",{className:"id-card-photo-wrapper",children:p&&(0,s.jsx)("img",{src:p,alt:"Customer",className:"id-card-photo"})}),(0,s.jsx)("p",{className:"id-card-name-en",children:f}),(0,s.jsx)("p",{className:"id-card-name-ar",children:m}),(0,s.jsxs)("div",{className:"id-card-details",children:[(0,s.jsxs)("div",{className:"id-card-info",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:x("accountNumber",r)})," ",d]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:x("branch",r)})," ",g]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:x("phoneNumber",r)})," ",y]})]}),(0,s.jsxs)("div",{className:"id-card-qr-wrapper",children:[(0,s.jsx)("img",{src:C,alt:"QR Code",className:"id-card-qr-code"}),(0,s.jsxs)("p",{className:"id-card-qr-label",children:[(0,s.jsxs)("strong",{children:[x("customerId",r),":"]})," ",h]})]})]})]})]})})]}),(0,s.jsxs)("div",{className:"sp-actions-section",children:[(0,s.jsx)("h2",{children:x("receipt",r)}),(0,s.jsx)("div",{ref:c,children:(0,s.jsxs)("div",{className:"sp-receipt",children:[(0,s.jsxs)("div",{className:"sp-receipt-header",children:[(0,s.jsx)("img",{src:b,alt:"Bank Logo",className:"sp-receipt-logo"}),(0,s.jsx)("h3",{children:x("officialReceipt",r)})]}),(0,s.jsxs)("div",{className:"sp-receipt-body",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{children:x("customerId",r)})," ",(0,s.jsx)("strong",{children:h})]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{children:x("fees",r)})," ",(0,s.jsx)("strong",{children:"150.00 LYD"})]})]}),(0,s.jsx)("div",{className:"sp-receipt-footer",children:(0,s.jsx)("p",{children:x("thankYou",r)})})]})}),(0,s.jsx)("button",{className:"sp-button sp-button-secondary",onClick:()=>{const e=c.current;if(!e)return;const t=window.open("","_blank");t.document.write("<html><head><title>Print Receipt</title>"),k(t),t.document.write("</head><body>"),t.document.write(e.outerHTML),t.document.write("</body></html>"),t.document.close(),setTimeout(()=>{t.focus(),t.print(),t.close()},500)},children:x("printReceipt",r)}),(0,s.jsx)("div",{className:"sp-fee-confirmation",children:(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:i,onChange:e=>o(e.target.checked)})," ",x("confirmFee",r)]})}),(0,s.jsx)("button",{onClick:()=>{const e=l.current;if(!e)return;const t=window.open("","_blank");t.document.write("<html><head><title>Print Card</title>"),k(t),t.document.write("</head><body>"),t.document.write(e.outerHTML),t.document.write("</body></html>"),t.document.close(),setTimeout(()=>{t.focus(),t.print(),t.close()},500)},className:"sp-button sp-button-primary",disabled:!i,children:x("printCard",r)}),(0,s.jsx)("button",{onClick:()=>{const e=l.current;e&&Q6()(e,{useCORS:!0,scale:3}).then(e=>{const t=document.createElement("a");t.download="customer-id-card.png",t.href=e.toDataURL("image/png"),t.click()})},className:"sp-button sp-button-primary",disabled:!i,children:x("exportCard",r)})]})]}),(0,s.jsx)("button",{className:"sp-button sp-home-button",onClick:()=>t("landing"),children:x("goHome",r)})]}),(0,s.jsx)(K,{})]})},z6=()=>{const[e,t]=(0,a.useState)({page:"languageSelection",flow:null,state:null}),{theme:n}=l(),{language:r}=A();(0,a.useEffect)(()=>{document.body.dir="ar"===r?"rtl":"ltr",document.body.setAttribute("data-theme",n)},[n,r]);const i=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a={personalDocs:"personal",businessmenDocs:"businessmen",guaranteedDocs:"guaranteed",expatDocs:"expat",companiesDocs:"companies"}[n]||e.flow;t({page:n,flow:a,state:r})};return(0,s.jsx)(s.Fragment,{children:(()=>{const{page:t,flow:n,state:r}=e;if("languageSelection"===t)return(0,s.jsx)(k,{onNavigate:i});switch(t){case"landing":return(0,s.jsx)(q,{onNavigate:i});case"eServices":return(0,s.jsx)(Na,{onNavigate:i});case"selectUser":return(0,s.jsx)(J,{onNavigate:i});case"completeAccount":return(0,s.jsx)(v6,{onNavigate:i});case"pendingApplications":return(0,s.jsx)(w6,{onNavigate:i});case"bankAccountLookup":return(0,s.jsx)(C6,{onNavigate:i});case"reviewDocs":return(0,s.jsx)(N6,{onNavigate:i,state:r});case"reviewWorkInfo":return(0,s.jsx)(_6,{onNavigate:i,state:r});case"reviewAddressInfo":return(0,s.jsx)(D6,{onNavigate:i,state:r});case"eServicesReg":return(0,s.jsx)(R6,{onNavigate:i,state:r});case"accountSummary":return(0,s.jsx)(U6,{onNavigate:i,state:r});case"bankAccount":return(0,s.jsx)(M6,{onNavigate:i,state:r});case"completeAccountSuccess":return(0,s.jsx)(H6,{onNavigate:i,state:r});case"personalDocs":case"businessmenDocs":case"guaranteedDocs":case"expatDocs":return(0,s.jsx)(Ha,{onNavigate:i,backPage:"selectUser",nextPage:"contactInfo",selfPage:t});case"faceRegistration":return(0,s.jsx)(g6,{onNavigate:i,backPage:(null===r||void 0===r?void 0:r.backPage)||"selectUser",nextPage:(null===r||void 0===r?void 0:r.nextPage)||"contactInfo"});case"companiesDocs":return(0,s.jsx)(Y,{onNavigate:i,backPage:"selectUser",nextPage:"companyInfo"});case"companyInfo":return(0,s.jsx)(de,{onNavigate:i,backPage:"companiesDocs",nextPage:"companyContact"});case"companyContact":return(0,s.jsx)(he,{onNavigate:i,backPage:"companyInfo",nextPage:"legalRepInfo"});case"legalRepInfo":return(0,s.jsx)(pe,{onNavigate:i,backPage:"companyContact",nextPage:"financialInfo"});case"financialInfo":return(0,s.jsx)(fe,{onNavigate:i,backPage:"legalRepInfo"});case"contactInfo":{let e="selectUser";return"personal"===n&&(e="personalDocs"),"guaranteed"===n&&(e="guaranteedDocs"),"businessmen"===n&&(e="businessmenDocs"),"expat"===n&&(e="expatDocs"),(0,s.jsx)($,{onNavigate:i,backPage:e,nextPage:"workInfo"})}case"workInfo":return(0,s.jsx)(te,{onNavigate:i,backPage:"contactInfo",nextPage:"personalInfo"});case"personalInfo":return(0,s.jsx)(Ae,{onNavigate:i,backPage:"workInfo",flow:n,state:r});case"confirm":return(0,s.jsx)(Ia,{onNavigate:i,state:r});case"success":return(0,s.jsx)(me,{onNavigate:i,state:r});default:return(0,s.jsx)(k,{onNavigate:i})}})()})};function W6(){return(0,s.jsx)(d,{children:(0,s.jsx)(c,{children:(0,s.jsxs)(f,{children:[(0,s.jsx)(m,{}),(0,s.jsx)(z6,{})]})})})}const V6="sessionId";let G6=localStorage.getItem(V6);G6||(G6=Math.random().toString(36).slice(2)+Date.now(),localStorage.setItem(V6,G6));const K6=window.fetch,q6={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"";window.fetch=function(e){const t=r({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return t.headers=t.headers||{},(e.toString().startsWith(q6)||e.toString().startsWith("/api"))&&(t.headers["x-session-id"]=G6),K6(e,t)};i.createRoot(document.getElementById("root")).render((0,s.jsx)(a.StrictMode,{children:(0,s.jsx)(W6,{})}))})()})();
//# sourceMappingURL=main.61634e40.js.map